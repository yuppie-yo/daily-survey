{"version":3,"file":"ec75c12e5ab4bcbe5c7c.chunk.js","mappings":"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CL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IA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","sources":["webpack://superset/./src/utils/datasourceUtils.js","webpack://superset/./node_modules/geolib/dist/geolib.js","webpack://superset/./node_modules/invariant/browser.js","webpack://superset/./node_modules/lodash/_castFunction.js","webpack://superset/./node_modules/lodash/each.js","webpack://superset/./node_modules/lodash/forEach.js","webpack://superset/./node_modules/lodash/forOwn.js","webpack://superset/./node_modules/lodash/parseInt.js","webpack://superset/./node_modules/match-sorter/dist/match-sorter.esm.js","webpack://superset/./node_modules/material-colors/dist/colors.es2015.js","webpack://superset/./node_modules/react-color/lib/components/alpha/Alpha.js","webpack://superset/./node_modules/react-color/lib/components/alpha/AlphaPointer.js","webpack://superset/./node_modules/react-color/lib/components/block/Block.js","webpack://superset/./node_modules/react-color/lib/components/block/BlockSwatches.js","webpack://superset/./node_modules/react-color/lib/components/chrome/Chrome.js","webpack://superset/./node_modules/react-color/lib/components/chrome/ChromeFields.js","webpack://superset/./node_modules/react-color/lib/components/chrome/ChromePointer.js","webpack://superset/./node_modules/react-color/lib/components/chrome/ChromePointerCircle.js","webpack://superset/./node_modules/react-color/lib/components/circle/Circle.js","webpack://superset/./node_modules/react-color/lib/components/circle/CircleSwatch.js","webpack://superset/./node_modules/react-color/lib/components/common/Alpha.js","webpack://superset/./node_modules/react-color/lib/components/common/Checkboard.js","webpack://superset/./node_modules/react-color/lib/components/common/ColorWrap.js","webpack://superset/./node_modules/react-color/lib/components/common/EditableInput.js","webpack://superset/./node_modules/react-color/lib/components/common/Hue.js","webpack://superset/./node_modules/react-color/lib/components/common/Raised.js","webpack://superset/./node_modules/react-color/lib/components/common/Saturation.js","webpack://superset/./node_modules/react-color/lib/components/common/Swatch.js","webpack://superset/./node_modules/react-color/lib/components/common/index.js","webpack://superset/./node_modules/react-color/lib/components/compact/Compact.js","webpack://superset/./node_modules/react-color/lib/components/compact/CompactColor.js","webpack://superset/./node_modules/react-color/lib/components/compact/CompactFields.js","webpack://superset/./node_modules/react-color/lib/components/github/Github.js","webpack://superset/./node_modules/react-color/lib/components/github/GithubSwatch.js","webpack://superset/./node_modules/react-color/lib/components/hue/Hue.js","webpack://superset/./node_modules/react-color/lib/components/hue/HuePointer.js","webpack://superset/./node_modules/react-color/lib/components/material/Material.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/Photoshop.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/PhotoshopButton.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/PhotoshopFields.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/PhotoshopPointer.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/PhotoshopPointerCircle.js","webpack://superset/./node_modules/react-color/lib/components/photoshop/PhotoshopPreviews.js","webpack://superset/./node_modules/react-color/lib/components/sketch/Sketch.js","webpack://superset/./node_modules/react-color/lib/components/sketch/SketchFields.js","webpack://superset/./node_modules/react-color/lib/components/sketch/SketchPresetColors.js","webpack://superset/./node_modules/react-color/lib/components/slider/Slider.js","webpack://superset/./node_modules/react-color/lib/components/slider/SliderPointer.js","webpack://superset/./node_modules/react-color/lib/components/slider/SliderSwatch.js","webpack://superset/./node_modules/react-color/lib/components/slider/SliderSwatches.js","webpack://superset/./node_modules/react-color/lib/components/swatches/Swatches.js","webpack://superset/./node_modules/react-color/lib/components/swatches/SwatchesColor.js","webpack://superset/./node_modules/react-color/lib/components/swatches/SwatchesGroup.js","webpack://superset/./node_modules/react-color/lib/components/twitter/Twitter.js","webpack://superset/./node_modules/react-color/lib/helpers/alpha.js","webpack://superset/./node_modules/react-color/lib/helpers/checkboard.js","webpack://superset/./node_modules/react-color/lib/helpers/color.js","webpack://superset/./node_modules/react-color/lib/helpers/hue.js","webpack://superset/./node_modules/react-color/lib/helpers/interaction.js","webpack://superset/./node_modules/react-color/lib/helpers/saturation.js","webpack://superset/./node_modules/react-color/lib/index.js","webpack://superset/./node_modules/reactcss/lib/autoprefix.js","webpack://superset/./node_modules/reactcss/lib/components/active.js","webpack://superset/./node_modules/reactcss/lib/components/hover.js","webpack://superset/./node_modules/reactcss/lib/flattenNames.js","webpack://superset/./node_modules/reactcss/lib/index.js","webpack://superset/./node_modules/reactcss/lib/loop.js","webpack://superset/./node_modules/reactcss/lib/mergeClasses.js","webpack://superset/./node_modules/remove-accents/index.js","webpack://superset/./src/SqlLab/components/SaveDatasetModal/index.tsx","webpack://superset/./src/components/Timer/index.tsx","webpack://superset/./src/explore/exploreUtils/getParsedExploreURLParams.ts","webpack://superset/./src/components/CachedLabel/TooltipContent.tsx","webpack://superset/./src/components/CachedLabel/index.tsx","webpack://superset/./src/explore/components/ChartPills.tsx","webpack://superset/./src/explore/components/ExploreAlert.tsx","webpack://superset/./src/explore/components/ExploreChartPanel/index.jsx","webpack://superset/./src/explore/components/ExploreChartPanel/useResizeDetectorByObserver.ts","webpack://superset/./src/explore/components/ControlRow.tsx","webpack://superset/./src/explore/components/controls/CustomListItem/index.tsx","webpack://superset/./src/explore/components/controls/AnnotationLayerControl/index.jsx","webpack://superset/./src/explore/components/controls/BoundsControl.tsx","webpack://superset/./node_modules/react-sortable-hoc/dist/react-sortable-hoc.esm.js","webpack://superset/./src/explore/components/controls/CollectionControl/index.jsx","webpack://superset/./src/explore/components/controls/ColorPickerControl.jsx","webpack://superset/./src/explore/components/controls/ViewQueryModalFooter.tsx","webpack://superset/./src/explore/components/controls/DatasourceControl/index.jsx","webpack://superset/./src/explore/components/controls/MetricControl/AdhocMetricEditPopoverTitle.tsx","webpack://superset/./src/explore/components/controls/MetricControl/AdhocMetricEditPopover/index.jsx","webpack://superset/./src/explore/components/controls/MetricControl/AdhocMetricPopoverTrigger.tsx","webpack://superset/./src/explore/components/controls/MetricControl/AdhocMetricOption.jsx","webpack://superset/./src/explore/components/controls/MetricControl/MetricDefinitionValue.jsx","webpack://superset/./src/explore/components/controls/MetricControl/MetricsControl.jsx","webpack://superset/./src/explore/components/controls/FixedOrMetricControl/index.jsx","webpack://superset/./src/explore/components/controls/SelectAsyncControl/index.tsx","webpack://superset/./node_modules/rc-slider/es/util.js","webpack://superset/./node_modules/rc-slider/es/context.js","webpack://superset/./node_modules/rc-slider/es/Handles/Handle.js","webpack://superset/./node_modules/rc-slider/es/Handles/index.js","webpack://superset/./node_modules/rc-slider/es/Marks/Mark.js","webpack://superset/./node_modules/rc-slider/es/Marks/index.js","webpack://superset/./node_modules/rc-slider/es/Steps/Dot.js","webpack://superset/./node_modules/rc-slider/es/Steps/index.js","webpack://superset/./node_modules/rc-slider/es/Tracks/Track.js","webpack://superset/./node_modules/rc-slider/es/Tracks/index.js","webpack://superset/./node_modules/rc-slider/es/hooks/useDrag.js","webpack://superset/./node_modules/rc-slider/es/Slider.js","webpack://superset/./node_modules/rc-slider/es/hooks/useOffset.js","webpack://superset/./node_modules/rc-slider/es/index.js","webpack://superset/./node_modules/antd-v5/es/slider/SliderTooltip.js","webpack://superset/./node_modules/antd-v5/es/slider/style/index.js","webpack://superset/./node_modules/antd-v5/es/slider/useRafLock.js","webpack://superset/./node_modules/antd-v5/es/slider/index.js","webpack://superset/./src/components/Slider/index.tsx","webpack://superset/./src/explore/components/controls/TimeSeriesColumnControl/index.jsx","webpack://superset/./src/explore/components/controls/TimeOffsetControl.tsx","webpack://superset/./src/explore/components/controls/ViewportControl.jsx","webpack://superset/./src/explore/components/controls/VizTypeControl/FastVizSwitcher.tsx","webpack://superset/./src/explore/components/controls/VizTypeControl/index.tsx","webpack://superset/./src/explore/components/controls/ConditionalFormattingControl/FormattingPopoverContent.tsx","webpack://superset/./src/explore/components/controls/ConditionalFormattingControl/FormattingPopover.tsx","webpack://superset/./src/explore/components/controls/ConditionalFormattingControl/ConditionalFormattingControl.tsx","webpack://superset/./src/explore/components/controls/ConditionalFormattingControl/index.ts","webpack://superset/./src/explore/components/ExploreContainer/index.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndSelectLabel.tsx","webpack://superset/./src/explore/components/controls/ContourControl/ContourPopoverControl.tsx","webpack://superset/./src/explore/components/controls/ContourControl/ContourPopoverTrigger.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/Option.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/OptionWrapper.tsx","webpack://superset/./src/explore/components/controls/ContourControl/ContourOption.tsx","webpack://superset/./src/explore/components/controls/ContourControl/index.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/utils/optionSelector.ts","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/ColumnSelectPopover.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/useResizeButton.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndColumnSelectPopoverTitle.jsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/ColumnSelectPopoverTrigger.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndAdhocFilterOption.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndFilterSelect.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndMetricSelect.tsx","webpack://superset/./src/explore/components/controls/ColumnConfigControl/constants.tsx","webpack://superset/./src/explore/components/controls/ColumnConfigControl/types.ts","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ControlForm/controls.ts","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ControlForm/ControlFormItem.tsx","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ControlForm/index.tsx","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ColumnConfigPopover.tsx","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ColumnConfigItem.tsx","webpack://superset/./src/explore/components/controls/ComparisonRangeLabel.tsx","webpack://superset/./src/explore/components/controls/index.js","webpack://superset/./src/explore/components/controls/ColumnConfigControl/ColumnConfigControl.tsx","webpack://superset/./src/explore/components/controls/DndColumnSelectControl/DndColumnSelect.tsx","webpack://superset/./src/explore/components/DatasourcePanel/types.ts","webpack://superset/./src/explore/components/controls/HiddenControl.tsx","webpack://superset/./src/explore/components/controls/SliderControl.tsx","webpack://superset/./src/explore/components/controls/XAxisSortControl.tsx","webpack://superset/./src/explore/components/Control.tsx","webpack://superset/./src/explore/components/RunQueryButton/index.tsx","webpack://superset/./src/explore/components/StashFormDataContainer/index.tsx","webpack://superset/./src/explore/components/ControlPanelsContainer.tsx","webpack://superset/./src/explore/components/SaveModal.tsx","webpack://superset/./src/explore/components/DatasourcePanel/DatasourcePanelDragOption/index.tsx","webpack://superset/./src/explore/components/DatasourcePanel/DatasourcePanelItem.tsx","webpack://superset/./src/explore/components/DatasourcePanel/index.tsx","webpack://superset/./src/utils/getControlsForVizType.js","webpack://superset/./src/components/AlteredSliceTag/index.tsx","webpack://superset/./src/explore/components/ExploreChartHeader/index.jsx","webpack://superset/./src/explore/components/ExploreViewContainer/index.jsx","webpack://superset/./src/explore/fixtures.tsx","webpack://superset/./src/explore/controlUtils/getFormDataWithDashboardContext.ts","webpack://superset/./src/pages/Chart/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const getDatasourceAsSaveableDataset = source => ({\n  columns: source.columns,\n  name: source?.datasource_name || source?.name || 'Untitled',\n  dbId: source?.database?.id || source?.dbId,\n  sql: source?.sql || '',\n  catalog: source?.catalog,\n  schema: source?.schema,\n});\n","/*! geolib 2.0.23 by Manuel Bieh\r\n* Library to provide geo functions like distance calculation,\r\n* conversion of decimal coordinates to sexagesimal and vice versa, etc.\r\n* WGS 84 (World Geodetic System 1984)\r\n* \r\n* @author Manuel Bieh\r\n* @url http://www.manuelbieh.com/\r\n* @version 2.0.23\r\n* @license MIT \r\n**/;(function(global, undefined) {\n\n    \"use strict\";\n\n    function Geolib() {}\n\n    // Constants\n    Geolib.TO_RAD = Math.PI / 180;\n    Geolib.TO_DEG = 180 / Math.PI;\n    Geolib.PI_X2 = Math.PI * 2;\n    Geolib.PI_DIV4 = Math.PI / 4;\n\n    // Setting readonly defaults\n    var geolib = Object.create(Geolib.prototype, {\n        version: {\n            value: \"2.0.23\"\n        },\n        radius: {\n            value: 6378137\n        },\n        minLat: {\n            value: -90\n        },\n        maxLat: {\n            value: 90\n        },\n        minLon: {\n            value: -180\n        },\n        maxLon: {\n            value: 180\n        },\n        sexagesimalPattern: {\n            value: /^([0-9]{1,3})°\\s*([0-9]{1,3}(?:\\.(?:[0-9]{1,2}))?)'\\s*(([0-9]{1,3}(\\.([0-9]{1,4}))?)\"\\s*)?([NEOSW]?)$/\n        },\n        measures: {\n            value: Object.create(Object.prototype, {\n                \"m\" : {value: 1},\n                \"km\": {value: 0.001},\n                \"cm\": {value: 100},\n                \"mm\": {value: 1000},\n                \"mi\": {value: (1 / 1609.344)},\n                \"sm\": {value: (1 / 1852.216)},\n                \"ft\": {value: (100 / 30.48)},\n                \"in\": {value: (100 / 2.54)},\n                \"yd\": {value: (1 / 0.9144)}\n            })\n        },\n        prototype: {\n            value: Geolib.prototype\n        },\n        extend: {\n            value: function(methods, overwrite) {\n                for(var prop in methods) {\n                    if(typeof geolib.prototype[prop] === 'undefined' || overwrite === true) {\n                        if(typeof methods[prop] === 'function' && typeof methods[prop].bind === 'function') {\n                            geolib.prototype[prop] = methods[prop].bind(geolib);\n                        } else {\n                            geolib.prototype[prop] = methods[prop];\n                        }\n                    }\n                }\n            }\n        }\n    });\n\n    if (typeof(Number.prototype.toRad) === 'undefined') {\n        Number.prototype.toRad = function() {\n            return this * Geolib.TO_RAD;\n        };\n    }\n\n    if (typeof(Number.prototype.toDeg) === 'undefined') {\n        Number.prototype.toDeg = function() {\n            return this * Geolib.TO_DEG;\n        };\n    }\n\n    // Here comes the magic\n    geolib.extend({\n\n        decimal: {},\n\n        sexagesimal: {},\n\n        distance: null,\n\n        getKeys: function(point) {\n\n            // GeoJSON Array [longitude, latitude(, elevation)]\n            if(Object.prototype.toString.call(point) == '[object Array]') {\n\n                return {\n                    longitude: point.length >= 1 ? 0 : undefined,\n                    latitude: point.length >= 2 ? 1 : undefined,\n                    elevation: point.length >= 3 ? 2 : undefined\n                };\n\n            }\n\n            var getKey = function(possibleValues) {\n\n                var key;\n\n                possibleValues.every(function(val) {\n                    // TODO: check if point is an object\n                    if(typeof point != 'object') {\n                        return true;\n                    }\n                    return point.hasOwnProperty(val) ? (function() { key = val; return false; }()) : true;\n                });\n\n                return key;\n\n            };\n\n            var longitude = getKey(['lng', 'lon', 'longitude']);\n            var latitude = getKey(['lat', 'latitude']);\n            var elevation = getKey(['alt', 'altitude', 'elevation', 'elev']);\n\n            // return undefined if not at least one valid property was found\n            if(typeof latitude == 'undefined' &&\n                typeof longitude == 'undefined' &&\n                typeof elevation == 'undefined') {\n                return undefined;\n            }\n\n            return {\n                latitude: latitude,\n                longitude: longitude,\n                elevation: elevation\n            };\n\n        },\n\n        // returns latitude of a given point, converted to decimal\n        // set raw to true to avoid conversion\n        getLat: function(point, raw) {\n            return raw === true ? point[this.getKeys(point).latitude] : this.useDecimal(point[this.getKeys(point).latitude]);\n        },\n\n        // Alias for getLat\n        latitude: function(point) {\n            return this.getLat.call(this, point);\n        },\n\n        // returns longitude of a given point, converted to decimal\n        // set raw to true to avoid conversion\n        getLon: function(point, raw) {\n            return raw === true ? point[this.getKeys(point).longitude] : this.useDecimal(point[this.getKeys(point).longitude]);\n        },\n\n        // Alias for getLon\n        longitude: function(point) {\n            return this.getLon.call(this, point);\n        },\n\n        getElev: function(point) {\n            return point[this.getKeys(point).elevation];\n        },\n\n        // Alias for getElev\n        elevation: function(point) {\n            return this.getElev.call(this, point);\n        },\n\n        coords: function(point, raw) {\n\n            var retval = {\n                latitude: raw === true ? point[this.getKeys(point).latitude] : this.useDecimal(point[this.getKeys(point).latitude]),\n                longitude: raw === true ? point[this.getKeys(point).longitude] : this.useDecimal(point[this.getKeys(point).longitude])\n            };\n\n            var elev = point[this.getKeys(point).elevation];\n\n            if(typeof elev !== 'undefined') {\n                retval['elevation'] = elev;\n            }\n\n            return retval;\n\n        },\n\n        // Alias for coords\n        ll: function(point, raw) {\n            return this.coords.call(this, point, raw);\n        },\n\n\n        // checks if a variable contains a valid latlong object\n        validate: function(point) {\n\n            var keys = this.getKeys(point);\n\n            if(typeof keys === 'undefined' || typeof keys.latitude === 'undefined' || keys.longitude === 'undefined') {\n                return false;\n            }\n\n            var lat = point[keys.latitude];\n            var lng = point[keys.longitude];\n\n            if(typeof lat === 'undefined' || !this.isDecimal(lat) && !this.isSexagesimal(lat)) {\n                return false;\n            }\n\n            if(typeof lng === 'undefined' || !this.isDecimal(lng) && !this.isSexagesimal(lng)) {\n                return false;\n            }\n\n            lat = this.useDecimal(lat);\n            lng = this.useDecimal(lng);\n\n            if(lat < this.minLat || lat > this.maxLat || lng < this.minLon || lng > this.maxLon) {\n                return false;\n            }\n\n            return true;\n\n        },\n\n        /**\n        * Calculates geodetic distance between two points specified by latitude/longitude using\n        * Vincenty inverse formula for ellipsoids\n        * Vincenty Inverse Solution of Geodesics on the Ellipsoid (c) Chris Veness 2002-2010\n        * (Licensed under CC BY 3.0)\n        *\n        * @param    object    Start position {latitude: 123, longitude: 123}\n        * @param    object    End position {latitude: 123, longitude: 123}\n        * @param    integer   Accuracy (in meters)\n        * @param    integer   Precision (in decimal cases)\n        * @return   integer   Distance (in meters)\n        */\n        getDistance: function(start, end, accuracy, precision) {\n\n            accuracy = Math.floor(accuracy) || 1;\n            precision = Math.floor(precision) || 0;\n\n            var s = this.coords(start);\n            var e = this.coords(end);\n\n            var a = 6378137, b = 6356752.314245,  f = 1/298.257223563;  // WGS-84 ellipsoid params\n            var L = (e['longitude']-s['longitude']).toRad();\n\n            var cosSigma, sigma, sinAlpha, cosSqAlpha, cos2SigmaM, sinSigma;\n\n            var U1 = Math.atan((1-f) * Math.tan(parseFloat(s['latitude']).toRad()));\n            var U2 = Math.atan((1-f) * Math.tan(parseFloat(e['latitude']).toRad()));\n            var sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n            var sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);\n\n            var lambda = L, lambdaP, iterLimit = 100;\n            do {\n                var sinLambda = Math.sin(lambda), cosLambda = Math.cos(lambda);\n                sinSigma = (\n                    Math.sqrt(\n                        (\n                            cosU2 * sinLambda\n                        ) * (\n                            cosU2 * sinLambda\n                        ) + (\n                            cosU1 * sinU2 - sinU1 * cosU2 * cosLambda\n                        ) * (\n                            cosU1 * sinU2 - sinU1 * cosU2 * cosLambda\n                        )\n                    )\n                );\n                if (sinSigma === 0) {\n                    return geolib.distance = 0;  // co-incident points\n                }\n\n                cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;\n                sigma = Math.atan2(sinSigma, cosSigma);\n                sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;\n                cosSqAlpha = 1 - sinAlpha * sinAlpha;\n                cos2SigmaM = cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha;\n\n                if (isNaN(cos2SigmaM)) {\n                    cos2SigmaM = 0;  // equatorial line: cosSqAlpha=0 (§6)\n                }\n                var C = (\n                    f / 16 * cosSqAlpha * (\n                        4 + f * (\n                            4 - 3 * cosSqAlpha\n                        )\n                    )\n                );\n                lambdaP = lambda;\n                lambda = (\n                    L + (\n                        1 - C\n                    ) * f * sinAlpha * (\n                        sigma + C * sinSigma * (\n                            cos2SigmaM + C * cosSigma * (\n                                -1 + 2 * cos2SigmaM * cos2SigmaM\n                            )\n                        )\n                    )\n                );\n\n            } while (Math.abs(lambda-lambdaP) > 1e-12 && --iterLimit>0);\n\n            if (iterLimit === 0) {\n                return NaN;  // formula failed to converge\n            }\n\n            var uSq = (\n                cosSqAlpha * (\n                    a * a - b * b\n                ) / (\n                    b*b\n                )\n            );\n\n            var A = (\n                1 + uSq / 16384 * (\n                    4096 + uSq * (\n                        -768 + uSq * (\n                            320 - 175 * uSq\n                        )\n                    )\n                )\n            );\n\n            var B = (\n                uSq / 1024 * (\n                    256 + uSq * (\n                        -128 + uSq * (\n                            74-47 * uSq\n                        )\n                    )\n                )\n            );\n\n            var deltaSigma = (\n                B * sinSigma * (\n                    cos2SigmaM + B / 4 * (\n                        cosSigma * (\n                            -1 + 2 * cos2SigmaM * cos2SigmaM\n                        ) -B / 6 * cos2SigmaM * (\n                            -3 + 4 * sinSigma * sinSigma\n                        ) * (\n                            -3 + 4 * cos2SigmaM * cos2SigmaM\n                        )\n                    )\n                )\n            );\n\n            var distance = b * A * (sigma - deltaSigma);\n\n            distance = distance.toFixed(precision); // round to 1mm precision\n\n            //if (start.hasOwnProperty(elevation) && end.hasOwnProperty(elevation)) {\n            if (typeof this.elevation(start) !== 'undefined' && typeof this.elevation(end) !== 'undefined') {\n                var climb = Math.abs(this.elevation(start) - this.elevation(end));\n                distance = Math.sqrt(distance * distance + climb * climb);\n            }\n\n            return this.distance = Math.round(distance * Math.pow(10, precision) / accuracy) * accuracy / Math.pow(10, precision);\n\n            /*\n            // note: to return initial/final bearings in addition to distance, use something like:\n            var fwdAz = Math.atan2(cosU2*sinLambda,  cosU1*sinU2-sinU1*cosU2*cosLambda);\n            var revAz = Math.atan2(cosU1*sinLambda, -sinU1*cosU2+cosU1*sinU2*cosLambda);\n\n            return { distance: s, initialBearing: fwdAz.toDeg(), finalBearing: revAz.toDeg() };\n            */\n\n        },\n\n\n        /**\n        * Calculates the distance between two spots.\n        * This method is more simple but also far more inaccurate\n        *\n        * @param    object    Start position {latitude: 123, longitude: 123}\n        * @param    object    End position {latitude: 123, longitude: 123}\n        * @param    integer   Accuracy (in meters)\n        * @return   integer   Distance (in meters)\n        */\n        getDistanceSimple: function(start, end, accuracy) {\n\n            accuracy = Math.floor(accuracy) || 1;\n\n            var distance =\n                Math.round(\n                    Math.acos(\n                        Math.sin(\n                            this.latitude(end).toRad()\n                        ) *\n                        Math.sin(\n                            this.latitude(start).toRad()\n                        ) +\n                        Math.cos(\n                            this.latitude(end).toRad()\n                        ) *\n                        Math.cos(\n                            this.latitude(start).toRad()\n                        ) *\n                        Math.cos(\n                            this.longitude(start).toRad() - this.longitude(end).toRad()\n                        )\n                    ) * this.radius\n                );\n\n            return geolib.distance = Math.floor(Math.round(distance/accuracy)*accuracy);\n\n        },\n\n\n    /**\n        * Calculates the center of a collection of geo coordinates\n        *\n        * @param        array       Collection of coords [{latitude: 51.510, longitude: 7.1321}, {latitude: 49.1238, longitude: \"8° 30' W\"}, ...]\n        * @return       object      {latitude: centerLat, longitude: centerLng}\n        */\n        getCenter: function(coords) {\n\n            var coordsArray = coords;\n            if(typeof coords === 'object' && !(coords instanceof Array)) {\n\n                coordsArray = [];\n\n                for(var key in coords) {\n                    coordsArray.push(\n                        this.coords(coords[key])\n                    );\n                }\n\n            }\n\n            if(!coordsArray.length) {\n                return false;\n            }\n\n            var X = 0.0;\n            var Y = 0.0;\n            var Z = 0.0;\n            var lat, lon, hyp;\n\n            coordsArray.forEach(function(coord) {\n\n                lat = this.latitude(coord).toRad();\n                lon = this.longitude(coord).toRad();\n\n                X += Math.cos(lat) * Math.cos(lon);\n                Y += Math.cos(lat) * Math.sin(lon);\n                Z += Math.sin(lat);\n\n            }, this);\n\n            var nb_coords = coordsArray.length;\n            X = X / nb_coords;\n            Y = Y / nb_coords;\n            Z = Z / nb_coords;\n\n            lon = Math.atan2(Y, X);\n            hyp = Math.sqrt(X * X + Y * Y);\n            lat = Math.atan2(Z, hyp);\n\n            return {\n                latitude: (lat * Geolib.TO_DEG).toFixed(6),\n                longitude: (lon * Geolib.TO_DEG).toFixed(6)\n            };\n\n        },\n\n\n        /**\n        * Gets the max and min, latitude, longitude, and elevation (if provided).\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return   object      {maxLat: maxLat,\n        *                     minLat: minLat\n        *                     maxLng: maxLng,\n        *                     minLng: minLng,\n        *                     maxElev: maxElev,\n        *                     minElev: minElev}\n        */\n        getBounds: function(coords) {\n\n            if (!coords.length) {\n                return false;\n            }\n\n            var useElevation = this.elevation(coords[0]);\n\n            var stats = {\n                maxLat: -Infinity,\n                minLat: Infinity,\n                maxLng: -Infinity,\n                minLng: Infinity\n            };\n\n            if (typeof useElevation != 'undefined') {\n                stats.maxElev = 0;\n                stats.minElev = Infinity;\n            }\n\n            for (var i = 0, l = coords.length; i < l; ++i) {\n\n                stats.maxLat = Math.max(this.latitude(coords[i]), stats.maxLat);\n                stats.minLat = Math.min(this.latitude(coords[i]), stats.minLat);\n                stats.maxLng = Math.max(this.longitude(coords[i]), stats.maxLng);\n                stats.minLng = Math.min(this.longitude(coords[i]), stats.minLng);\n\n                if (useElevation) {\n                    stats.maxElev = Math.max(this.elevation(coords[i]), stats.maxElev);\n                    stats.minElev = Math.min(this.elevation(coords[i]), stats.minElev);\n                }\n\n            }\n\n            return stats;\n\n        },\n\n        /**\n        * Calculates the center of the bounds of geo coordinates.\n        *\n        * On polygons like political borders (eg. states)\n        * this may gives a closer result to human expectation, than `getCenter`,\n        * because that function can be disturbed by uneven distribution of\n        * point in different sides.\n        * Imagine the US state Oklahoma: `getCenter` on that gives a southern\n        * point, because the southern border contains a lot more nodes,\n        * than the others.\n        *\n        * @param        array       Collection of coords [{latitude: 51.510, longitude: 7.1321}, {latitude: 49.1238, longitude: \"8° 30' W\"}, ...]\n        * @return       object      {latitude: centerLat, longitude: centerLng}\n        */\n        getCenterOfBounds: function(coords) {\n            var b = this.getBounds(coords);\n            var latitude = b.minLat + ((b.maxLat - b.minLat) / 2);\n            var longitude = b.minLng + ((b.maxLng - b.minLng) / 2);\n            return {\n                latitude: parseFloat(latitude.toFixed(6)),\n                longitude: parseFloat(longitude.toFixed(6))\n            };\n        },\n\n\n        /**\n        * Computes the bounding coordinates of all points on the surface\n        * of the earth less than or equal to the specified great circle\n        * distance.\n        *\n        * @param object Point position {latitude: 123, longitude: 123}\n        * @param number Distance (in meters).\n        * @return array Collection of two points defining the SW and NE corners.\n        */\n        getBoundsOfDistance: function(point, distance) {\n\n            var latitude = this.latitude(point);\n            var longitude = this.longitude(point);\n\n            var radLat = latitude.toRad();\n            var radLon = longitude.toRad();\n\n            var radDist = distance / this.radius;\n            var minLat = radLat - radDist;\n            var maxLat = radLat + radDist;\n\n            var MAX_LAT_RAD = this.maxLat.toRad();\n            var MIN_LAT_RAD = this.minLat.toRad();\n            var MAX_LON_RAD = this.maxLon.toRad();\n            var MIN_LON_RAD = this.minLon.toRad();\n\n            var minLon;\n            var maxLon;\n\n            if (minLat > MIN_LAT_RAD && maxLat < MAX_LAT_RAD) {\n\n                var deltaLon = Math.asin(Math.sin(radDist) / Math.cos(radLat));\n                minLon = radLon - deltaLon;\n\n                if (minLon < MIN_LON_RAD) {\n                    minLon += Geolib.PI_X2;\n                }\n\n                maxLon = radLon + deltaLon;\n\n                if (maxLon > MAX_LON_RAD) {\n                    maxLon -= Geolib.PI_X2;\n                }\n\n            } else {\n                // A pole is within the distance.\n                minLat = Math.max(minLat, MIN_LAT_RAD);\n                maxLat = Math.min(maxLat, MAX_LAT_RAD);\n                minLon = MIN_LON_RAD;\n                maxLon = MAX_LON_RAD;\n            }\n\n            return [\n                // Southwest\n                {\n                    latitude: minLat.toDeg(),\n                    longitude: minLon.toDeg()\n                },\n                // Northeast\n                {\n                    latitude: maxLat.toDeg(),\n                    longitude: maxLon.toDeg()\n                }\n            ];\n\n        },\n\n\n        /**\n        * Checks whether a point is inside of a polygon or not.\n        * Note that the polygon coords must be in correct order!\n        *\n        * @param        object      coordinate to check e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       bool        true if the coordinate is inside the given polygon\n        */\n        isPointInside: function(latlng, coords) {\n\n            for(var c = false, i = -1, l = coords.length, j = l - 1; ++i < l; j = i) {\n\n                if(\n                    (\n                        (this.longitude(coords[i]) <= this.longitude(latlng) && this.longitude(latlng) < this.longitude(coords[j])) ||\n                        (this.longitude(coords[j]) <= this.longitude(latlng) && this.longitude(latlng) < this.longitude(coords[i]))\n                    ) &&\n                    (\n                        this.latitude(latlng) < (this.latitude(coords[j]) - this.latitude(coords[i])) *\n                        (this.longitude(latlng) - this.longitude(coords[i])) /\n                        (this.longitude(coords[j]) - this.longitude(coords[i])) +\n                        this.latitude(coords[i])\n                    )\n                ) {\n                    c = !c;\n                }\n\n            }\n\n            return c;\n\n        },\n\n\n       /**\n        * Pre calculate the polygon coords, to speed up the point inside check.\n        * Use this function before calling isPointInsideWithPreparedPolygon()\n        * @see          Algorythm from http://alienryderflex.com/polygon/\n        * @param        array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        */\n        preparePolygonForIsPointInsideOptimized: function(coords) {\n\n            for(var i = 0, j = coords.length-1; i < coords.length; i++) {\n\n            if(this.longitude(coords[j]) === this.longitude(coords[i])) {\n\n                    coords[i].constant = this.latitude(coords[i]);\n                    coords[i].multiple = 0;\n\n                } else {\n\n                    coords[i].constant = this.latitude(coords[i]) - (\n                        this.longitude(coords[i]) * this.latitude(coords[j])\n                    ) / (\n                        this.longitude(coords[j]) - this.longitude(coords[i])\n                    ) + (\n                        this.longitude(coords[i])*this.latitude(coords[i])\n                    ) / (\n                        this.longitude(coords[j])-this.longitude(coords[i])\n                    );\n\n                    coords[i].multiple = (\n                        this.latitude(coords[j])-this.latitude(coords[i])\n                    ) / (\n                        this.longitude(coords[j])-this.longitude(coords[i])\n                    );\n\n                }\n\n                j=i;\n\n            }\n\n        },\n\n      /**\n       * Checks whether a point is inside of a polygon or not.\n       * \"This is useful if you have many points that need to be tested against the same (static) polygon.\"\n       * Please call the function preparePolygonForIsPointInsideOptimized() with the same coords object before using this function.\n       * Note that the polygon coords must be in correct order!\n       *\n       * @see          Algorythm from http://alienryderflex.com/polygon/\n       *\n       * @param     object      coordinate to check e.g. {latitude: 51.5023, longitude: 7.3815}\n       * @param     array       array with coords e.g. [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n       * @return        bool        true if the coordinate is inside the given polygon\n       */\n        isPointInsideWithPreparedPolygon: function(point, coords) {\n\n            var flgPointInside = false,\n            y = this.longitude(point),\n            x = this.latitude(point);\n\n            for(var i = 0, j = coords.length-1; i < coords.length; i++) {\n\n                if ((this.longitude(coords[i]) < y && this.longitude(coords[j]) >=y ||\n                    this.longitude(coords[j]) < y && this.longitude(coords[i]) >= y)) {\n\n                    flgPointInside^=(y*coords[i].multiple+coords[i].constant < x);\n\n                }\n\n                j=i;\n\n            }\n\n            return flgPointInside;\n\n        },\n\n\n        /**\n        * Shortcut for geolib.isPointInside()\n        */\n        isInside: function() {\n            return this.isPointInside.apply(this, arguments);\n        },\n\n\n        /**\n        * Checks whether a point is inside of a circle or not.\n        *\n        * @param        object      coordinate to check (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      coordinate of the circle's center (e.g. {latitude: 51.4812, longitude: 7.4025})\n        * @param        integer     maximum radius in meters\n        * @return       bool        true if the coordinate is within the given radius\n        */\n        isPointInCircle: function(latlng, center, radius) {\n            return this.getDistance(latlng, center) < radius;\n        },\n\n\n        /**\n        * Shortcut for geolib.isPointInCircle()\n        */\n        withinRadius: function() {\n            return this.isPointInCircle.apply(this, arguments);\n        },\n\n\n        /**\n        * Gets rhumb line bearing of two points. Find out about the difference between rhumb line and\n        * great circle bearing on Wikipedia. It's quite complicated. Rhumb line should be fine in most cases:\n        *\n        * http://en.wikipedia.org/wiki/Rhumb_line#General_and_mathematical_description\n        *\n        * Function heavily based on Doug Vanderweide's great PHP version (licensed under GPL 3.0)\n        * http://www.dougv.com/2009/07/13/calculating-the-bearing-and-compass-rose-direction-between-two-latitude-longitude-coordinates-in-php/\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @return       integer     calculated bearing\n        */\n        getRhumbLineBearing: function(originLL, destLL) {\n\n            // difference of longitude coords\n            var diffLon = this.longitude(destLL).toRad() - this.longitude(originLL).toRad();\n\n            // difference latitude coords phi\n            var diffPhi = Math.log(\n                Math.tan(\n                    this.latitude(destLL).toRad() / 2 + Geolib.PI_DIV4\n                ) /\n                Math.tan(\n                    this.latitude(originLL).toRad() / 2 + Geolib.PI_DIV4\n                )\n            );\n\n            // recalculate diffLon if it is greater than pi\n            if(Math.abs(diffLon) > Math.PI) {\n                if(diffLon > 0) {\n                    diffLon = (Geolib.PI_X2 - diffLon) * -1;\n                }\n                else {\n                    diffLon = Geolib.PI_X2 + diffLon;\n                }\n            }\n\n            //return the angle, normalized\n            return (Math.atan2(diffLon, diffPhi).toDeg() + 360) % 360;\n\n        },\n\n\n        /**\n        * Gets great circle bearing of two points. See description of getRhumbLineBearing for more information\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @return       integer     calculated bearing\n        */\n        getBearing: function(originLL, destLL) {\n\n            destLL['latitude'] = this.latitude(destLL);\n            destLL['longitude'] = this.longitude(destLL);\n            originLL['latitude'] = this.latitude(originLL);\n            originLL['longitude'] = this.longitude(originLL);\n\n            var bearing = (\n                (\n                    Math.atan2(\n                        Math.sin(\n                            destLL['longitude'].toRad() -\n                            originLL['longitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['latitude'].toRad()\n                        ),\n                        Math.cos(\n                            originLL['latitude'].toRad()\n                        ) *\n                        Math.sin(\n                            destLL['latitude'].toRad()\n                        ) -\n                        Math.sin(\n                            originLL['latitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['latitude'].toRad()\n                        ) *\n                        Math.cos(\n                            destLL['longitude'].toRad() - originLL['longitude'].toRad()\n                        )\n                    )\n                ).toDeg() + 360\n            ) % 360;\n\n            return bearing;\n\n        },\n\n\n        /**\n        * Gets the compass direction from an origin coordinate to a destination coordinate.\n        *\n        * @param        object      origin coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n        * @param        object      destination coordinate\n        * @param        string      Bearing mode. Can be either circle or rhumbline\n        * @return       object      Returns an object with a rough (NESW) and an exact direction (NNE, NE, ENE, E, ESE, etc).\n        */\n        getCompassDirection: function(originLL, destLL, bearingMode) {\n\n            var direction;\n            var bearing;\n\n            if(bearingMode == 'circle') {\n                // use great circle bearing\n                bearing = this.getBearing(originLL, destLL);\n            } else {\n                // default is rhumb line bearing\n                bearing = this.getRhumbLineBearing(originLL, destLL);\n            }\n\n            switch(Math.round(bearing/22.5)) {\n                case 1:\n                    direction = {exact: \"NNE\", rough: \"N\"};\n                    break;\n                case 2:\n                    direction = {exact: \"NE\", rough: \"N\"};\n                    break;\n                case 3:\n                    direction = {exact: \"ENE\", rough: \"E\"};\n                    break;\n                case 4:\n                    direction = {exact: \"E\", rough: \"E\"};\n                    break;\n                case 5:\n                    direction = {exact: \"ESE\", rough: \"E\"};\n                    break;\n                case 6:\n                    direction = {exact: \"SE\", rough: \"E\"};\n                    break;\n                case 7:\n                    direction = {exact: \"SSE\", rough: \"S\"};\n                    break;\n                case 8:\n                    direction = {exact: \"S\", rough: \"S\"};\n                    break;\n                case 9:\n                    direction = {exact: \"SSW\", rough: \"S\"};\n                    break;\n                case 10:\n                    direction = {exact: \"SW\", rough: \"S\"};\n                    break;\n                case 11:\n                    direction = {exact: \"WSW\", rough: \"W\"};\n                    break;\n                case 12:\n                    direction = {exact: \"W\", rough: \"W\"};\n                    break;\n                case 13:\n                    direction = {exact: \"WNW\", rough: \"W\"};\n                    break;\n                case 14:\n                    direction = {exact: \"NW\", rough: \"W\"};\n                    break;\n                case 15:\n                    direction = {exact: \"NNW\", rough: \"N\"};\n                    break;\n                default:\n                    direction = {exact: \"N\", rough: \"N\"};\n            }\n\n            direction['bearing'] = bearing;\n            return direction;\n\n        },\n\n\n        /**\n        * Shortcut for getCompassDirection\n        */\n        getDirection: function(originLL, destLL, bearingMode) {\n            return this.getCompassDirection.apply(this, arguments);\n        },\n\n\n        /**\n        * Sorts an array of coords by distance from a reference coordinate\n        *\n        * @param        object      reference coordinate e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       array       ordered array\n        */\n        orderByDistance: function(latlng, coords) {\n\n            var coordsArray = Object.keys(coords).map(function(idx) {\n                var distance = this.getDistance(latlng, coords[idx]);\n                var augmentedCoord = Object.create(coords[idx]);\n                augmentedCoord.distance = distance;\n                augmentedCoord.key = idx;\n                return augmentedCoord;\n            }, this);\n\n            return coordsArray.sort(function(a, b) {\n                return a.distance - b.distance;\n            });\n\n        },\n\n        /**\n        * Check if a point lies in line created by two other points\n        *\n        * @param    object    Point to check: {latitude: 123, longitude: 123}\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @return   boolean\n        */\n        isPointInLine: function(point, start, end) {\n\n            return (this.getDistance(start, point, 1, 3)+this.getDistance(point, end, 1, 3)).toFixed(3)==this.getDistance(start, end, 1, 3);\n        },\n\n                /**\n        * Check if a point lies within a given distance from a line created by two other points\n        *\n        * @param    object    Point to check: {latitude: 123, longitude: 123}\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @pararm   float     maximum distance from line\n        * @return   boolean\n        */\n        isPointNearLine: function(point, start, end, distance) {\n            return this.getDistanceFromLine(point, start, end) < distance;\n        },\n\n                     /**\n        * return the minimum distance from a point to a line\n        *\n        * @param    object    Point away from line\n        * @param    object    Start of line {latitude: 123, longitude: 123}\n        * @param    object    End of line {latitude: 123, longitude: 123}\n        * @return   float     distance from point to line\n        */\n        getDistanceFromLine: function(point, start, end) {\n            var d1 = this.getDistance(start, point, 1, 3);\n            var d2 = this.getDistance(point, end, 1, 3);\n            var d3 = this.getDistance(start, end, 1, 3);\n            var distance = 0;\n\n            // alpha is the angle between the line from start to point, and from start to end //\n            var alpha = Math.acos((d1*d1 + d3*d3 - d2*d2)/(2*d1*d3));\n            // beta is the angle between the line from end to point and from end to start //\n            var beta = Math.acos((d2*d2 + d3*d3 - d1*d1)/(2*d2*d3));\n\n            // if the angle is greater than 90 degrees, then the minimum distance is the\n            // line from the start to the point //\n            if(alpha>Math.PI/2) {\n                distance = d1;\n            }\n            // same for the beta //\n            else if(beta > Math.PI/2) {\n                distance = d2;\n            }\n            // otherwise the minimum distance is achieved through a line perpendular to the start-end line,\n            // which goes from the start-end line to the point //\n            else {\n                distance = Math.sin(alpha) * d1;\n            }\n\n            return distance;\n        },\n\n        /**\n        * Finds the nearest coordinate to a reference coordinate\n        *\n        * @param        object      reference coordinate e.g. {latitude: 51.5023, longitude: 7.3815}\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       array       ordered array\n        */\n        findNearest: function(latlng, coords, offset, limit) {\n\n            offset = offset || 0;\n            limit = limit || 1;\n            var ordered = this.orderByDistance(latlng, coords);\n\n            if(limit === 1) {\n                return ordered[offset];\n            } else {\n                return ordered.splice(offset, limit);\n            }\n\n        },\n\n\n        /**\n        * Calculates the length of a given path\n        *\n        * @param        mixed       array or object with coords [{latitude: 51.5143, longitude: 7.4138}, {latitude: 123, longitude: 123}, ...]\n        * @return       integer     length of the path (in meters)\n        */\n        getPathLength: function(coords) {\n\n            var dist = 0;\n            var last;\n\n            for (var i = 0, l = coords.length; i < l; ++i) {\n                if(last) {\n                    //console.log(coords[i], last, this.getDistance(coords[i], last));\n                    dist += this.getDistance(this.coords(coords[i]), last);\n                }\n                last = this.coords(coords[i]);\n            }\n\n            return dist;\n\n        },\n\n\n        /**\n        * Calculates the speed between to points within a given time span.\n        *\n        * @param        object      coords with javascript timestamp {latitude: 51.5143, longitude: 7.4138, time: 1360231200880}\n        * @param        object      coords with javascript timestamp {latitude: 51.5502, longitude: 7.4323, time: 1360245600460}\n        * @param        object      options (currently \"unit\" is the only option. Default: km(h));\n        * @return       float       speed in unit per hour\n        */\n        getSpeed: function(start, end, options) {\n\n            var unit = options && options.unit || 'km';\n\n            if(unit == 'mph') {\n                unit = 'mi';\n            } else if(unit == 'kmh') {\n                unit = 'km';\n            }\n\n            var distance = geolib.getDistance(start, end);\n            var time = ((end.time*1)/1000) - ((start.time*1)/1000);\n            var mPerHr = (distance/time)*3600;\n            var speed = Math.round(mPerHr * this.measures[unit] * 10000)/10000;\n            return speed;\n\n        },\n\n\n        /**\n         * Computes the destination point given an initial point, a distance\n         * and a bearing\n         *\n         * see http://www.movable-type.co.uk/scripts/latlong.html for the original code\n         *\n         * @param        object     start coordinate (e.g. {latitude: 51.5023, longitude: 7.3815})\n         * @param        float      longitude of the inital point in degree\n         * @param        float      distance to go from the inital point in meter\n         * @param        float      bearing in degree of the direction to go, e.g. 0 = north, 180 = south\n         * @param        float      optional (in meter), defaults to mean radius of the earth\n         * @return       object     {latitude: destLat (in degree), longitude: destLng (in degree)}\n         */\n        computeDestinationPoint: function(start, distance, bearing, radius) {\n\n            var lat = this.latitude(start);\n            var lng = this.longitude(start);\n\n            radius = (typeof radius === 'undefined') ? this.radius : Number(radius);\n\n            var δ = Number(distance) / radius; // angular distance in radians\n            var θ = Number(bearing).toRad();\n\n            var φ1 = Number(lat).toRad();\n            var λ1 = Number(lng).toRad();\n\n            var φ2 = Math.asin( Math.sin(φ1)*Math.cos(δ) +\n                Math.cos(φ1)*Math.sin(δ)*Math.cos(θ) );\n            var λ2 = λ1 + Math.atan2(Math.sin(θ)*Math.sin(δ)*Math.cos(φ1),\n                    Math.cos(δ)-Math.sin(φ1)*Math.sin(φ2));\n            λ2 = (λ2+3*Math.PI) % (2*Math.PI) - Math.PI; // normalise to -180..+180°\n\n            return {\n                latitude: φ2.toDeg(),\n                longitude: λ2.toDeg()\n            };\n\n        },\n\n\n        /**\n        * Converts a distance from meters to km, mm, cm, mi, ft, in or yd\n        *\n        * @param        string      Format to be converted in\n        * @param        float       Distance in meters\n        * @param        float       Decimal places for rounding (default: 4)\n        * @return       float       Converted distance\n        */\n        convertUnit: function(unit, distance, round) {\n\n            if(distance === 0) {\n\n                return 0;\n\n            } else if(typeof distance === 'undefined') {\n\n                if(this.distance === null) {\n                    throw new Error('No distance was given');\n                } else if(this.distance === 0) {\n                    return 0;\n                } else {\n                    distance = this.distance;\n                }\n\n            }\n\n            unit = unit || 'm';\n            round = (null == round ? 4 : round);\n\n            if(typeof this.measures[unit] !== 'undefined') {\n                return this.round(distance * this.measures[unit], round);\n            } else {\n                throw new Error('Unknown unit for conversion.');\n            }\n\n        },\n\n\n        /**\n        * Checks if a value is in decimal format or, if neccessary, converts to decimal\n        *\n        * @param        mixed       Value(s) to be checked/converted (array of latlng objects, latlng object, sexagesimal string, float)\n        * @return       float       Input data in decimal format\n        */\n        useDecimal: function(value) {\n\n            if(Object.prototype.toString.call(value) === '[object Array]') {\n\n                var geolib = this;\n\n                value = value.map(function(val) {\n\n                    //if(!isNaN(parseFloat(val))) {\n                    if(geolib.isDecimal(val)) {\n\n                        return geolib.useDecimal(val);\n\n                    } else if(typeof val == 'object') {\n\n                        if(geolib.validate(val)) {\n\n                            return geolib.coords(val);\n\n                        } else {\n\n                            for(var prop in val) {\n                                val[prop] = geolib.useDecimal(val[prop]);\n                            }\n\n                            return val;\n\n                        }\n\n                    } else if(geolib.isSexagesimal(val)) {\n\n                        return geolib.sexagesimal2decimal(val);\n\n                    } else {\n\n                        return val;\n\n                    }\n\n                });\n\n                return value;\n\n            } else if(typeof value === 'object' && this.validate(value)) {\n\n                return this.coords(value);\n\n            } else if(typeof value === 'object') {\n\n                for(var prop in value) {\n                    value[prop] = this.useDecimal(value[prop]);\n                }\n\n                return value;\n\n            }\n\n\n            if (this.isDecimal(value)) {\n\n                return parseFloat(value);\n\n            } else if(this.isSexagesimal(value) === true) {\n\n                return parseFloat(this.sexagesimal2decimal(value));\n\n            }\n\n            throw new Error('Unknown format.');\n\n        },\n\n        /**\n        * Converts a decimal coordinate value to sexagesimal format\n        *\n        * @param        float       decimal\n        * @return       string      Sexagesimal value (XX° YY' ZZ\")\n        */\n        decimal2sexagesimal: function(dec) {\n\n            if (dec in this.sexagesimal) {\n                return this.sexagesimal[dec];\n            }\n\n            var tmp = dec.toString().split('.');\n\n            var deg = Math.abs(tmp[0]);\n            var min = ('0.' + (tmp[1] || 0))*60;\n            var sec = min.toString().split('.');\n\n            min = Math.floor(min);\n            sec = (('0.' + (sec[1] || 0)) * 60).toFixed(2);\n\n            this.sexagesimal[dec] = (deg + '° ' + min + \"' \" + sec + '\"');\n\n            return this.sexagesimal[dec];\n\n        },\n\n\n        /**\n        * Converts a sexagesimal coordinate to decimal format\n        *\n        * @param        float       Sexagesimal coordinate\n        * @return       string      Decimal value (XX.XXXXXXXX)\n        */\n        sexagesimal2decimal: function(sexagesimal) {\n\n            if (sexagesimal in this.decimal) {\n                return this.decimal[sexagesimal];\n            }\n\n            var regEx = new RegExp(this.sexagesimalPattern);\n            var data = regEx.exec(sexagesimal);\n            var min = 0, sec = 0;\n\n            if(data) {\n                min = parseFloat(data[2]/60);\n                sec = parseFloat(data[4]/3600) || 0;\n            }\n\n            var dec = ((parseFloat(data[1]) + min + sec)).toFixed(8);\n            //var   dec = ((parseFloat(data[1]) + min + sec));\n\n                // South and West are negative decimals\n                dec = (data[7] == 'S' || data[7] == 'W') ? parseFloat(-dec) : parseFloat(dec);\n                //dec = (data[7] == 'S' || data[7] == 'W') ? -dec : dec;\n\n            this.decimal[sexagesimal] = dec;\n\n            return dec;\n\n        },\n\n\n        /**\n        * Checks if a value is in decimal format\n        *\n        * @param        string      Value to be checked\n        * @return       bool        True if in sexagesimal format\n        */\n        isDecimal: function(value) {\n\n            value = value.toString().replace(/\\s*/, '');\n\n            // looks silly but works as expected\n            // checks if value is in decimal format\n            return (!isNaN(parseFloat(value)) && parseFloat(value) == value);\n\n        },\n\n\n        /**\n        * Checks if a value is in sexagesimal format\n        *\n        * @param        string      Value to be checked\n        * @return       bool        True if in sexagesimal format\n        */\n        isSexagesimal: function(value) {\n\n            value = value.toString().replace(/\\s*/, '');\n\n            return this.sexagesimalPattern.test(value);\n\n        },\n\n        round: function(value, n) {\n            var decPlace = Math.pow(10, n);\n            return Math.round(value * decPlace)/decPlace;\n        }\n\n    });\n\n    // Node module\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n\n        module.exports = geolib;\n\n        // react native\n        if (typeof global === 'object') {\n          global.geolib = geolib;\n        }\n\n    // AMD module\n    } else if (typeof define === \"function\" && define.amd) {\n\n        define(\"geolib\", [], function () {\n            return geolib;\n        });\n\n    // we're in a browser\n    } else {\n\n        global.geolib = geolib;\n\n    }\n\n}(this));\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","module.exports = require('./forEach');\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var baseForOwn = require('./_baseForOwn'),\n    castFunction = require('./_castFunction');\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, castFunction(iteratee));\n}\n\nmodule.exports = forOwn;\n","var root = require('./_root'),\n    toString = require('./toString');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeParseInt = root.parseInt;\n\n/**\n * Converts `string` to an integer of the specified radix. If `radix` is\n * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n * hexadecimal, in which case a `radix` of `16` is used.\n *\n * **Note:** This method aligns with the\n * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category String\n * @param {string} string The string to convert.\n * @param {number} [radix=10] The radix to interpret `value` by.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.parseInt('08');\n * // => 8\n *\n * _.map(['6', '08', '10'], _.parseInt);\n * // => [6, 8, 10]\n */\nfunction parseInt(string, radix, guard) {\n  if (guard || radix == null) {\n    radix = 0;\n  } else if (radix) {\n    radix = +radix;\n  }\n  return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n}\n\nmodule.exports = parseInt;\n","import removeAccents from 'remove-accents';\n\n/**\n * @name match-sorter\n * @license MIT license.\n * @copyright (c) 2020 Kent C. Dodds\n * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)\n */\nconst rankings = {\n  CASE_SENSITIVE_EQUAL: 7,\n  EQUAL: 6,\n  STARTS_WITH: 5,\n  WORD_STARTS_WITH: 4,\n  CONTAINS: 3,\n  ACRONYM: 2,\n  MATCHES: 1,\n  NO_MATCH: 0\n};\nconst defaultBaseSortFn = (a, b) => String(a.rankedValue).localeCompare(String(b.rankedValue));\n\n/**\n * Takes an array of items and a value and returns a new array with the items that match the given value\n * @param {Array} items - the items to sort\n * @param {String} value - the value to use for ranking\n * @param {Object} options - Some options to configure the sorter\n * @return {Array} - the new sorted array\n */\nfunction matchSorter(items, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    keys,\n    threshold = rankings.MATCHES,\n    baseSort = defaultBaseSortFn,\n    sorter = matchedItems => matchedItems.sort((a, b) => sortRankedValues(a, b, baseSort))\n  } = options;\n  const matchedItems = items.reduce(reduceItemsToRanked, []);\n  return sorter(matchedItems).map(_ref => {\n    let {\n      item\n    } = _ref;\n    return item;\n  });\n  function reduceItemsToRanked(matches, item, index) {\n    const rankingInfo = getHighestRanking(item, keys, value, options);\n    const {\n      rank,\n      keyThreshold = threshold\n    } = rankingInfo;\n    if (rank >= keyThreshold) {\n      matches.push({\n        ...rankingInfo,\n        item,\n        index\n      });\n    }\n    return matches;\n  }\n}\nmatchSorter.rankings = rankings;\n\n/**\n * Gets the highest ranking for value for the given item based on its values for the given keys\n * @param {*} item - the item to rank\n * @param {Array} keys - the keys to get values from the item for the ranking\n * @param {String} value - the value to rank against\n * @param {Object} options - options to control the ranking\n * @return {{rank: Number, keyIndex: Number, keyThreshold: Number}} - the highest ranking\n */\nfunction getHighestRanking(item, keys, value, options) {\n  if (!keys) {\n    // if keys is not specified, then we assume the item given is ready to be matched\n    const stringItem = item;\n    return {\n      // ends up being duplicate of 'item' in matches but consistent\n      rankedValue: stringItem,\n      rank: getMatchRanking(stringItem, value, options),\n      keyIndex: -1,\n      keyThreshold: options.threshold\n    };\n  }\n  const valuesToRank = getAllValuesToRank(item, keys);\n  return valuesToRank.reduce((_ref2, _ref3, i) => {\n    let {\n      rank,\n      rankedValue,\n      keyIndex,\n      keyThreshold\n    } = _ref2;\n    let {\n      itemValue,\n      attributes\n    } = _ref3;\n    let newRank = getMatchRanking(itemValue, value, options);\n    let newRankedValue = rankedValue;\n    const {\n      minRanking,\n      maxRanking,\n      threshold\n    } = attributes;\n    if (newRank < minRanking && newRank >= rankings.MATCHES) {\n      newRank = minRanking;\n    } else if (newRank > maxRanking) {\n      newRank = maxRanking;\n    }\n    if (newRank > rank) {\n      rank = newRank;\n      keyIndex = i;\n      keyThreshold = threshold;\n      newRankedValue = itemValue;\n    }\n    return {\n      rankedValue: newRankedValue,\n      rank,\n      keyIndex,\n      keyThreshold\n    };\n  }, {\n    rankedValue: item,\n    rank: rankings.NO_MATCH,\n    keyIndex: -1,\n    keyThreshold: options.threshold\n  });\n}\n\n/**\n * Gives a rankings score based on how well the two strings match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @param {Object} options - options for the match (like keepDiacritics for comparison)\n * @returns {Number} the ranking for how well stringToRank matches testString\n */\nfunction getMatchRanking(testString, stringToRank, options) {\n  testString = prepareValueForComparison(testString, options);\n  stringToRank = prepareValueForComparison(stringToRank, options);\n\n  // too long\n  if (stringToRank.length > testString.length) {\n    return rankings.NO_MATCH;\n  }\n\n  // case sensitive equals\n  if (testString === stringToRank) {\n    return rankings.CASE_SENSITIVE_EQUAL;\n  }\n\n  // Lower casing before further comparison\n  testString = testString.toLowerCase();\n  stringToRank = stringToRank.toLowerCase();\n\n  // case insensitive equals\n  if (testString === stringToRank) {\n    return rankings.EQUAL;\n  }\n\n  // starts with\n  if (testString.startsWith(stringToRank)) {\n    return rankings.STARTS_WITH;\n  }\n\n  // word starts with\n  if (testString.includes(` ${stringToRank}`)) {\n    return rankings.WORD_STARTS_WITH;\n  }\n\n  // contains\n  if (testString.includes(stringToRank)) {\n    return rankings.CONTAINS;\n  } else if (stringToRank.length === 1) {\n    // If the only character in the given stringToRank\n    //   isn't even contained in the testString, then\n    //   it's definitely not a match.\n    return rankings.NO_MATCH;\n  }\n\n  // acronym\n  if (getAcronym(testString).includes(stringToRank)) {\n    return rankings.ACRONYM;\n  }\n\n  // will return a number between rankings.MATCHES and\n  // rankings.MATCHES + 1 depending  on how close of a match it is.\n  return getClosenessRanking(testString, stringToRank);\n}\n\n/**\n * Generates an acronym for a string.\n *\n * @param {String} string the string for which to produce the acronym\n * @returns {String} the acronym\n */\nfunction getAcronym(string) {\n  let acronym = '';\n  const wordsInString = string.split(' ');\n  wordsInString.forEach(wordInString => {\n    const splitByHyphenWords = wordInString.split('-');\n    splitByHyphenWords.forEach(splitByHyphenWord => {\n      acronym += splitByHyphenWord.substr(0, 1);\n    });\n  });\n  return acronym;\n}\n\n/**\n * Returns a score based on how spread apart the\n * characters from the stringToRank are within the testString.\n * A number close to rankings.MATCHES represents a loose match. A number close\n * to rankings.MATCHES + 1 represents a tighter match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @returns {Number} the number between rankings.MATCHES and\n * rankings.MATCHES + 1 for how well stringToRank matches testString\n */\nfunction getClosenessRanking(testString, stringToRank) {\n  let matchingInOrderCharCount = 0;\n  let charNumber = 0;\n  function findMatchingCharacter(matchChar, string, index) {\n    for (let j = index, J = string.length; j < J; j++) {\n      const stringChar = string[j];\n      if (stringChar === matchChar) {\n        matchingInOrderCharCount += 1;\n        return j + 1;\n      }\n    }\n    return -1;\n  }\n  function getRanking(spread) {\n    const spreadPercentage = 1 / spread;\n    const inOrderPercentage = matchingInOrderCharCount / stringToRank.length;\n    const ranking = rankings.MATCHES + inOrderPercentage * spreadPercentage;\n    return ranking;\n  }\n  const firstIndex = findMatchingCharacter(stringToRank[0], testString, 0);\n  if (firstIndex < 0) {\n    return rankings.NO_MATCH;\n  }\n  charNumber = firstIndex;\n  for (let i = 1, I = stringToRank.length; i < I; i++) {\n    const matchChar = stringToRank[i];\n    charNumber = findMatchingCharacter(matchChar, testString, charNumber);\n    const found = charNumber > -1;\n    if (!found) {\n      return rankings.NO_MATCH;\n    }\n  }\n  const spread = charNumber - firstIndex;\n  return getRanking(spread);\n}\n\n/**\n * Sorts items that have a rank, index, and keyIndex\n * @param {Object} a - the first item to sort\n * @param {Object} b - the second item to sort\n * @return {Number} -1 if a should come first, 1 if b should come first, 0 if equal\n */\nfunction sortRankedValues(a, b, baseSort) {\n  const aFirst = -1;\n  const bFirst = 1;\n  const {\n    rank: aRank,\n    keyIndex: aKeyIndex\n  } = a;\n  const {\n    rank: bRank,\n    keyIndex: bKeyIndex\n  } = b;\n  const same = aRank === bRank;\n  if (same) {\n    if (aKeyIndex === bKeyIndex) {\n      // use the base sort function as a tie-breaker\n      return baseSort(a, b);\n    } else {\n      return aKeyIndex < bKeyIndex ? aFirst : bFirst;\n    }\n  } else {\n    return aRank > bRank ? aFirst : bFirst;\n  }\n}\n\n/**\n * Prepares value for comparison by stringifying it, removing diacritics (if specified)\n * @param {String} value - the value to clean\n * @param {Object} options - {keepDiacritics: whether to remove diacritics}\n * @return {String} the prepared value\n */\nfunction prepareValueForComparison(value, _ref4) {\n  let {\n    keepDiacritics\n  } = _ref4;\n  // value might not actually be a string at this point (we don't get to choose)\n  // so part of preparing the value for comparison is ensure that it is a string\n  value = `${value}`; // toString\n  if (!keepDiacritics) {\n    value = removeAccents(value);\n  }\n  return value;\n}\n\n/**\n * Gets value for key in item at arbitrarily nested keypath\n * @param {Object} item - the item\n * @param {Object|Function} key - the potentially nested keypath or property callback\n * @return {Array} - an array containing the value(s) at the nested keypath\n */\nfunction getItemValues(item, key) {\n  if (typeof key === 'object') {\n    key = key.key;\n  }\n  let value;\n  if (typeof key === 'function') {\n    value = key(item);\n  } else if (item == null) {\n    value = null;\n  } else if (Object.hasOwnProperty.call(item, key)) {\n    value = item[key];\n  } else if (key.includes('.')) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return getNestedValues(key, item);\n  } else {\n    value = null;\n  }\n\n  // because `value` can also be undefined\n  if (value == null) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value;\n  }\n  return [String(value)];\n}\n\n/**\n * Given path: \"foo.bar.baz\"\n * And item: {foo: {bar: {baz: 'buzz'}}}\n *   -> 'buzz'\n * @param path a dot-separated set of keys\n * @param item the item to get the value from\n */\nfunction getNestedValues(path, item) {\n  const keys = path.split('.');\n  let values = [item];\n  for (let i = 0, I = keys.length; i < I; i++) {\n    const nestedKey = keys[i];\n    let nestedValues = [];\n    for (let j = 0, J = values.length; j < J; j++) {\n      const nestedItem = values[j];\n      if (nestedItem == null) continue;\n      if (Object.hasOwnProperty.call(nestedItem, nestedKey)) {\n        const nestedValue = nestedItem[nestedKey];\n        if (nestedValue != null) {\n          nestedValues.push(nestedValue);\n        }\n      } else if (nestedKey === '*') {\n        // ensure that values is an array\n        nestedValues = nestedValues.concat(nestedItem);\n      }\n    }\n    values = nestedValues;\n  }\n  if (Array.isArray(values[0])) {\n    // keep allowing the implicit wildcard for an array of strings at the end of\n    // the path; don't use `.flat()` because that's not available in node.js v10\n    const result = [];\n    return result.concat(...values);\n  }\n  // Based on our logic it should be an array of strings by now...\n  // assuming the user's path terminated in strings\n  return values;\n}\n\n/**\n * Gets all the values for the given keys in the given item and returns an array of those values\n * @param item - the item from which the values will be retrieved\n * @param keys - the keys to use to retrieve the values\n * @return objects with {itemValue, attributes}\n */\nfunction getAllValuesToRank(item, keys) {\n  const allValues = [];\n  for (let j = 0, J = keys.length; j < J; j++) {\n    const key = keys[j];\n    const attributes = getKeyAttributes(key);\n    const itemValues = getItemValues(item, key);\n    for (let i = 0, I = itemValues.length; i < I; i++) {\n      allValues.push({\n        itemValue: itemValues[i],\n        attributes\n      });\n    }\n  }\n  return allValues;\n}\nconst defaultKeyAttributes = {\n  maxRanking: Infinity,\n  minRanking: -Infinity\n};\n/**\n * Gets all the attributes for the given key\n * @param key - the key from which the attributes will be retrieved\n * @return object containing the key's attributes\n */\nfunction getKeyAttributes(key) {\n  if (typeof key === 'string') {\n    return defaultKeyAttributes;\n  }\n  return {\n    ...defaultKeyAttributes,\n    ...key\n  };\n}\n\n/*\neslint\n  no-continue: \"off\",\n*/\n\nexport { defaultBaseSortFn, matchSorter, rankings };\n","export var red = {\"50\":\"#ffebee\",\"100\":\"#ffcdd2\",\"200\":\"#ef9a9a\",\"300\":\"#e57373\",\"400\":\"#ef5350\",\"500\":\"#f44336\",\"600\":\"#e53935\",\"700\":\"#d32f2f\",\"800\":\"#c62828\",\"900\":\"#b71c1c\",\"a100\":\"#ff8a80\",\"a200\":\"#ff5252\",\"a400\":\"#ff1744\",\"a700\":\"#d50000\"};\nexport var pink = {\"50\":\"#fce4ec\",\"100\":\"#f8bbd0\",\"200\":\"#f48fb1\",\"300\":\"#f06292\",\"400\":\"#ec407a\",\"500\":\"#e91e63\",\"600\":\"#d81b60\",\"700\":\"#c2185b\",\"800\":\"#ad1457\",\"900\":\"#880e4f\",\"a100\":\"#ff80ab\",\"a200\":\"#ff4081\",\"a400\":\"#f50057\",\"a700\":\"#c51162\"};\nexport var purple = {\"50\":\"#f3e5f5\",\"100\":\"#e1bee7\",\"200\":\"#ce93d8\",\"300\":\"#ba68c8\",\"400\":\"#ab47bc\",\"500\":\"#9c27b0\",\"600\":\"#8e24aa\",\"700\":\"#7b1fa2\",\"800\":\"#6a1b9a\",\"900\":\"#4a148c\",\"a100\":\"#ea80fc\",\"a200\":\"#e040fb\",\"a400\":\"#d500f9\",\"a700\":\"#aa00ff\"};\nexport var deepPurple = {\"50\":\"#ede7f6\",\"100\":\"#d1c4e9\",\"200\":\"#b39ddb\",\"300\":\"#9575cd\",\"400\":\"#7e57c2\",\"500\":\"#673ab7\",\"600\":\"#5e35b1\",\"700\":\"#512da8\",\"800\":\"#4527a0\",\"900\":\"#311b92\",\"a100\":\"#b388ff\",\"a200\":\"#7c4dff\",\"a400\":\"#651fff\",\"a700\":\"#6200ea\"};\nexport var indigo = {\"50\":\"#e8eaf6\",\"100\":\"#c5cae9\",\"200\":\"#9fa8da\",\"300\":\"#7986cb\",\"400\":\"#5c6bc0\",\"500\":\"#3f51b5\",\"600\":\"#3949ab\",\"700\":\"#303f9f\",\"800\":\"#283593\",\"900\":\"#1a237e\",\"a100\":\"#8c9eff\",\"a200\":\"#536dfe\",\"a400\":\"#3d5afe\",\"a700\":\"#304ffe\"};\nexport var blue = {\"50\":\"#e3f2fd\",\"100\":\"#bbdefb\",\"200\":\"#90caf9\",\"300\":\"#64b5f6\",\"400\":\"#42a5f5\",\"500\":\"#2196f3\",\"600\":\"#1e88e5\",\"700\":\"#1976d2\",\"800\":\"#1565c0\",\"900\":\"#0d47a1\",\"a100\":\"#82b1ff\",\"a200\":\"#448aff\",\"a400\":\"#2979ff\",\"a700\":\"#2962ff\"};\nexport var lightBlue = {\"50\":\"#e1f5fe\",\"100\":\"#b3e5fc\",\"200\":\"#81d4fa\",\"300\":\"#4fc3f7\",\"400\":\"#29b6f6\",\"500\":\"#03a9f4\",\"600\":\"#039be5\",\"700\":\"#0288d1\",\"800\":\"#0277bd\",\"900\":\"#01579b\",\"a100\":\"#80d8ff\",\"a200\":\"#40c4ff\",\"a400\":\"#00b0ff\",\"a700\":\"#0091ea\"};\nexport var cyan = {\"50\":\"#e0f7fa\",\"100\":\"#b2ebf2\",\"200\":\"#80deea\",\"300\":\"#4dd0e1\",\"400\":\"#26c6da\",\"500\":\"#00bcd4\",\"600\":\"#00acc1\",\"700\":\"#0097a7\",\"800\":\"#00838f\",\"900\":\"#006064\",\"a100\":\"#84ffff\",\"a200\":\"#18ffff\",\"a400\":\"#00e5ff\",\"a700\":\"#00b8d4\"};\nexport var teal = {\"50\":\"#e0f2f1\",\"100\":\"#b2dfdb\",\"200\":\"#80cbc4\",\"300\":\"#4db6ac\",\"400\":\"#26a69a\",\"500\":\"#009688\",\"600\":\"#00897b\",\"700\":\"#00796b\",\"800\":\"#00695c\",\"900\":\"#004d40\",\"a100\":\"#a7ffeb\",\"a200\":\"#64ffda\",\"a400\":\"#1de9b6\",\"a700\":\"#00bfa5\"};\nexport var green = {\"50\":\"#e8f5e9\",\"100\":\"#c8e6c9\",\"200\":\"#a5d6a7\",\"300\":\"#81c784\",\"400\":\"#66bb6a\",\"500\":\"#4caf50\",\"600\":\"#43a047\",\"700\":\"#388e3c\",\"800\":\"#2e7d32\",\"900\":\"#1b5e20\",\"a100\":\"#b9f6ca\",\"a200\":\"#69f0ae\",\"a400\":\"#00e676\",\"a700\":\"#00c853\"};\nexport var lightGreen = {\"50\":\"#f1f8e9\",\"100\":\"#dcedc8\",\"200\":\"#c5e1a5\",\"300\":\"#aed581\",\"400\":\"#9ccc65\",\"500\":\"#8bc34a\",\"600\":\"#7cb342\",\"700\":\"#689f38\",\"800\":\"#558b2f\",\"900\":\"#33691e\",\"a100\":\"#ccff90\",\"a200\":\"#b2ff59\",\"a400\":\"#76ff03\",\"a700\":\"#64dd17\"};\nexport var lime = {\"50\":\"#f9fbe7\",\"100\":\"#f0f4c3\",\"200\":\"#e6ee9c\",\"300\":\"#dce775\",\"400\":\"#d4e157\",\"500\":\"#cddc39\",\"600\":\"#c0ca33\",\"700\":\"#afb42b\",\"800\":\"#9e9d24\",\"900\":\"#827717\",\"a100\":\"#f4ff81\",\"a200\":\"#eeff41\",\"a400\":\"#c6ff00\",\"a700\":\"#aeea00\"};\nexport var yellow = {\"50\":\"#fffde7\",\"100\":\"#fff9c4\",\"200\":\"#fff59d\",\"300\":\"#fff176\",\"400\":\"#ffee58\",\"500\":\"#ffeb3b\",\"600\":\"#fdd835\",\"700\":\"#fbc02d\",\"800\":\"#f9a825\",\"900\":\"#f57f17\",\"a100\":\"#ffff8d\",\"a200\":\"#ffff00\",\"a400\":\"#ffea00\",\"a700\":\"#ffd600\"};\nexport var amber = {\"50\":\"#fff8e1\",\"100\":\"#ffecb3\",\"200\":\"#ffe082\",\"300\":\"#ffd54f\",\"400\":\"#ffca28\",\"500\":\"#ffc107\",\"600\":\"#ffb300\",\"700\":\"#ffa000\",\"800\":\"#ff8f00\",\"900\":\"#ff6f00\",\"a100\":\"#ffe57f\",\"a200\":\"#ffd740\",\"a400\":\"#ffc400\",\"a700\":\"#ffab00\"};\nexport var orange = {\"50\":\"#fff3e0\",\"100\":\"#ffe0b2\",\"200\":\"#ffcc80\",\"300\":\"#ffb74d\",\"400\":\"#ffa726\",\"500\":\"#ff9800\",\"600\":\"#fb8c00\",\"700\":\"#f57c00\",\"800\":\"#ef6c00\",\"900\":\"#e65100\",\"a100\":\"#ffd180\",\"a200\":\"#ffab40\",\"a400\":\"#ff9100\",\"a700\":\"#ff6d00\"};\nexport var deepOrange = {\"50\":\"#fbe9e7\",\"100\":\"#ffccbc\",\"200\":\"#ffab91\",\"300\":\"#ff8a65\",\"400\":\"#ff7043\",\"500\":\"#ff5722\",\"600\":\"#f4511e\",\"700\":\"#e64a19\",\"800\":\"#d84315\",\"900\":\"#bf360c\",\"a100\":\"#ff9e80\",\"a200\":\"#ff6e40\",\"a400\":\"#ff3d00\",\"a700\":\"#dd2c00\"};\nexport var brown = {\"50\":\"#efebe9\",\"100\":\"#d7ccc8\",\"200\":\"#bcaaa4\",\"300\":\"#a1887f\",\"400\":\"#8d6e63\",\"500\":\"#795548\",\"600\":\"#6d4c41\",\"700\":\"#5d4037\",\"800\":\"#4e342e\",\"900\":\"#3e2723\"};\nexport var grey = {\"50\":\"#fafafa\",\"100\":\"#f5f5f5\",\"200\":\"#eeeeee\",\"300\":\"#e0e0e0\",\"400\":\"#bdbdbd\",\"500\":\"#9e9e9e\",\"600\":\"#757575\",\"700\":\"#616161\",\"800\":\"#424242\",\"900\":\"#212121\"};\nexport var blueGrey = {\"50\":\"#eceff1\",\"100\":\"#cfd8dc\",\"200\":\"#b0bec5\",\"300\":\"#90a4ae\",\"400\":\"#78909c\",\"500\":\"#607d8b\",\"600\":\"#546e7a\",\"700\":\"#455a64\",\"800\":\"#37474f\",\"900\":\"#263238\"};\nexport var darkText = {\"primary\":\"rgba(0, 0, 0, 0.87)\",\"secondary\":\"rgba(0, 0, 0, 0.54)\",\"disabled\":\"rgba(0, 0, 0, 0.38)\",\"dividers\":\"rgba(0, 0, 0, 0.12)\"};\nexport var lightText = {\"primary\":\"rgba(255, 255, 255, 1)\",\"secondary\":\"rgba(255, 255, 255, 0.7)\",\"disabled\":\"rgba(255, 255, 255, 0.5)\",\"dividers\":\"rgba(255, 255, 255, 0.12)\"};\nexport var darkIcons = {\"active\":\"rgba(0, 0, 0, 0.54)\",\"inactive\":\"rgba(0, 0, 0, 0.38)\"};\nexport var lightIcons = {\"active\":\"rgba(255, 255, 255, 1)\",\"inactive\":\"rgba(255, 255, 255, 0.5)\"};\nexport var white = \"#ffffff\";\nexport var black = \"#000000\";\n\nexport default {\n  red: red,\n  pink: pink,\n  purple: purple,\n  deepPurple: deepPurple,\n  indigo: indigo,\n  blue: blue,\n  lightBlue: lightBlue,\n  cyan: cyan,\n  teal: teal,\n  green: green,\n  lightGreen: lightGreen,\n  lime: lime,\n  yellow: yellow,\n  amber: amber,\n  orange: orange,\n  deepOrange: deepOrange,\n  brown: brown,\n  grey: grey,\n  blueGrey: blueGrey,\n  darkText: darkText,\n  lightText: lightText,\n  darkIcons: darkIcons,\n  lightIcons: lightIcons,\n  white: white,\n  black: black\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlphaPicker = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _AlphaPointer = require('./AlphaPointer');\n\nvar _AlphaPointer2 = _interopRequireDefault(_AlphaPointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AlphaPicker = exports.AlphaPicker = function AlphaPicker(_ref) {\n  var rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      style = _ref.style,\n      renderers = _ref.renderers,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        position: 'relative',\n        width: width,\n        height: height\n      },\n      alpha: {\n        radius: '2px',\n        style: style\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'alpha-picker ' + className },\n    _react2.default.createElement(_common.Alpha, _extends({}, styles.alpha, {\n      rgb: rgb,\n      hsl: hsl,\n      pointer: pointer,\n      renderers: renderers,\n      onChange: onChange,\n      direction: direction\n    }))\n  );\n};\n\nAlphaPicker.defaultProps = {\n  width: '316px',\n  height: '16px',\n  direction: 'horizontal',\n  pointer: _AlphaPointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(AlphaPicker);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlphaPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AlphaPointer = exports.AlphaPointer = function AlphaPointer(_ref) {\n  var direction = _ref.direction;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '18px',\n        height: '18px',\n        borderRadius: '50%',\n        transform: 'translate(-9px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    },\n    'vertical': {\n      picker: {\n        transform: 'translate(-3px, -9px)'\n      }\n    }\n  }, { vertical: direction === 'vertical' });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = AlphaPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Block = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nvar _BlockSwatches = require('./BlockSwatches');\n\nvar _BlockSwatches2 = _interopRequireDefault(_BlockSwatches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Block = exports.Block = function Block(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      hex = _ref.hex,\n      colors = _ref.colors,\n      width = _ref.width,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var transparent = hex === 'transparent';\n  var handleChange = function handleChange(hexCode, e) {\n    _color2.default.isValidHex(hexCode) && onChange({\n      hex: hexCode,\n      source: 'hex'\n    }, e);\n  };\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        boxShadow: '0 1px rgba(0,0,0,.1)',\n        borderRadius: '6px',\n        position: 'relative'\n      },\n      head: {\n        height: '110px',\n        background: hex,\n        borderRadius: '6px 6px 0 0',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        position: 'relative'\n      },\n      body: {\n        padding: '10px'\n      },\n      label: {\n        fontSize: '18px',\n        color: _color2.default.getContrastingColor(hex),\n        position: 'relative'\n      },\n      triangle: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 10px 10px 10px',\n        borderColor: 'transparent transparent ' + hex + ' transparent',\n        position: 'absolute',\n        top: '-10px',\n        left: '50%',\n        marginLeft: '-10px'\n      },\n      input: {\n        width: '100%',\n        fontSize: '12px',\n        color: '#666',\n        border: '0px',\n        outline: 'none',\n        height: '22px',\n        boxShadow: 'inset 0 0 0 1px #ddd',\n        borderRadius: '4px',\n        padding: '0 7px',\n        boxSizing: 'border-box'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      }\n    }\n  }, { 'hide-triangle': triangle === 'hide' });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'block-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangle }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.head },\n      transparent && _react2.default.createElement(_common.Checkboard, { borderRadius: '6px 6px 0 0' }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.label },\n        hex\n      )\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      _react2.default.createElement(_BlockSwatches2.default, { colors: colors, onClick: handleChange, onSwatchHover: onSwatchHover }),\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input },\n        value: hex,\n        onChange: handleChange\n      })\n    )\n  );\n};\n\nBlock.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  triangle: _propTypes2.default.oneOf(['top', 'hide'])\n};\n\nBlock.defaultProps = {\n  width: 170,\n  colors: ['#D9E3F0', '#F47373', '#697689', '#37D67A', '#2CCCE4', '#555555', '#dce775', '#ff8a65', '#ba68c8'],\n  triangle: 'top'\n};\n\nexports.default = (0, _common.ColorWrap)(Block);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockSwatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BlockSwatches = exports.BlockSwatches = function BlockSwatches(_ref) {\n  var colors = _ref.colors,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        marginRight: '-10px'\n      },\n      swatch: {\n        width: '22px',\n        height: '22px',\n        float: 'left',\n        marginRight: '10px',\n        marginBottom: '10px',\n        borderRadius: '4px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatches },\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_common.Swatch, {\n        key: c,\n        color: c,\n        style: styles.swatch,\n        onClick: onClick,\n        onHover: onSwatchHover,\n        focusStyle: {\n          boxShadow: '0 0 4px ' + c\n        }\n      });\n    }),\n    _react2.default.createElement('div', { style: styles.clear })\n  );\n};\n\nexports.default = BlockSwatches;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Chrome = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _ChromeFields = require('./ChromeFields');\n\nvar _ChromeFields2 = _interopRequireDefault(_ChromeFields);\n\nvar _ChromePointer = require('./ChromePointer');\n\nvar _ChromePointer2 = _interopRequireDefault(_ChromePointer);\n\nvar _ChromePointerCircle = require('./ChromePointerCircle');\n\nvar _ChromePointerCircle2 = _interopRequireDefault(_ChromePointerCircle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Chrome = exports.Chrome = function Chrome(_ref) {\n  var onChange = _ref.onChange,\n      disableAlpha = _ref.disableAlpha,\n      rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      hsv = _ref.hsv,\n      hex = _ref.hex,\n      renderers = _ref.renderers,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        background: '#fff',\n        borderRadius: '2px',\n        boxShadow: '0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)',\n        boxSizing: 'initial',\n        width: '225px',\n        fontFamily: 'Menlo'\n      },\n      saturation: {\n        width: '100%',\n        paddingBottom: '55%',\n        position: 'relative',\n        borderRadius: '2px 2px 0 0',\n        overflow: 'hidden'\n      },\n      Saturation: {\n        radius: '2px 2px 0 0'\n      },\n      body: {\n        padding: '16px 16px 12px'\n      },\n      controls: {\n        display: 'flex'\n      },\n      color: {\n        width: '32px'\n      },\n      swatch: {\n        marginTop: '6px',\n        width: '16px',\n        height: '16px',\n        borderRadius: '8px',\n        position: 'relative',\n        overflow: 'hidden'\n      },\n      active: {\n        absolute: '0px 0px 0px 0px',\n        borderRadius: '8px',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.1)',\n        background: 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + rgb.a + ')',\n        zIndex: '2'\n      },\n      toggles: {\n        flex: '1'\n      },\n      hue: {\n        height: '10px',\n        position: 'relative',\n        marginBottom: '8px'\n      },\n      Hue: {\n        radius: '2px'\n      },\n      alpha: {\n        height: '10px',\n        position: 'relative'\n      },\n      Alpha: {\n        radius: '2px'\n      }\n    },\n    'disableAlpha': {\n      color: {\n        width: '22px'\n      },\n      alpha: {\n        display: 'none'\n      },\n      hue: {\n        marginBottom: '0px'\n      },\n      swatch: {\n        width: '10px',\n        height: '10px',\n        marginTop: '0px'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'chrome-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.saturation },\n      _react2.default.createElement(_common.Saturation, {\n        style: styles.Saturation,\n        hsl: hsl,\n        hsv: hsv,\n        pointer: _ChromePointerCircle2.default,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      _react2.default.createElement(\n        'div',\n        { style: styles.controls, className: 'flexbox-fix' },\n        _react2.default.createElement(\n          'div',\n          { style: styles.color },\n          _react2.default.createElement(\n            'div',\n            { style: styles.swatch },\n            _react2.default.createElement('div', { style: styles.active }),\n            _react2.default.createElement(_common.Checkboard, { renderers: renderers })\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.toggles },\n          _react2.default.createElement(\n            'div',\n            { style: styles.hue },\n            _react2.default.createElement(_common.Hue, {\n              style: styles.Hue,\n              hsl: hsl,\n              pointer: _ChromePointer2.default,\n              onChange: onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.Alpha, {\n              style: styles.Alpha,\n              rgb: rgb,\n              hsl: hsl,\n              pointer: _ChromePointer2.default,\n              renderers: renderers,\n              onChange: onChange\n            })\n          )\n        )\n      ),\n      _react2.default.createElement(_ChromeFields2.default, {\n        rgb: rgb,\n        hsl: hsl,\n        hex: hex,\n        onChange: onChange,\n        disableAlpha: disableAlpha\n      })\n    )\n  );\n};\n\nChrome.propTypes = {\n  disableAlpha: _propTypes2.default.bool\n};\n\nChrome.defaultProps = {\n  disableAlpha: false\n};\n\nexports.default = (0, _common.ColorWrap)(Chrome);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromeFields = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable react/no-did-mount-set-state, no-param-reassign */\n\nvar ChromeFields = exports.ChromeFields = function (_React$Component) {\n  _inherits(ChromeFields, _React$Component);\n\n  function ChromeFields() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ChromeFields);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ChromeFields.__proto__ || Object.getPrototypeOf(ChromeFields)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      view: ''\n    }, _this.toggleViews = function () {\n      if (_this.state.view === 'hex') {\n        _this.setState({ view: 'rgb' });\n      } else if (_this.state.view === 'rgb') {\n        _this.setState({ view: 'hsl' });\n      } else if (_this.state.view === 'hsl') {\n        if (_this.props.hsl.a === 1) {\n          _this.setState({ view: 'hex' });\n        } else {\n          _this.setState({ view: 'rgb' });\n        }\n      }\n    }, _this.handleChange = function (data, e) {\n      if (data.hex) {\n        _color2.default.isValidHex(data.hex) && _this.props.onChange({\n          hex: data.hex,\n          source: 'hex'\n        }, e);\n      } else if (data.r || data.g || data.b) {\n        _this.props.onChange({\n          r: data.r || _this.props.rgb.r,\n          g: data.g || _this.props.rgb.g,\n          b: data.b || _this.props.rgb.b,\n          source: 'rgb'\n        }, e);\n      } else if (data.a) {\n        if (data.a < 0) {\n          data.a = 0;\n        } else if (data.a > 1) {\n          data.a = 1;\n        }\n\n        _this.props.onChange({\n          h: _this.props.hsl.h,\n          s: _this.props.hsl.s,\n          l: _this.props.hsl.l,\n          a: Math.round(data.a * 100) / 100,\n          source: 'rgb'\n        }, e);\n      } else if (data.h || data.s || data.l) {\n        _this.props.onChange({\n          h: data.h || _this.props.hsl.h,\n          s: Number(data.s && data.s || _this.props.hsl.s),\n          l: Number(data.l && data.l || _this.props.hsl.l),\n          source: 'hsl'\n        }, e);\n      }\n    }, _this.showHighlight = function (e) {\n      e.target.style.background = '#eee';\n    }, _this.hideHighlight = function (e) {\n      e.target.style.background = 'transparent';\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ChromeFields, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.hsl.a === 1 && this.state.view !== 'hex') {\n        this.setState({ view: 'hex' });\n      } else if (this.state.view !== 'rgb' && this.state.view !== 'hsl') {\n        this.setState({ view: 'rgb' });\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.hsl.a !== 1 && this.state.view === 'hex') {\n        this.setState({ view: 'rgb' });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          wrap: {\n            paddingTop: '16px',\n            display: 'flex'\n          },\n          fields: {\n            flex: '1',\n            display: 'flex',\n            marginLeft: '-6px'\n          },\n          field: {\n            paddingLeft: '6px',\n            width: '100%'\n          },\n          alpha: {\n            paddingLeft: '6px',\n            width: '100%'\n          },\n          toggle: {\n            width: '32px',\n            textAlign: 'right',\n            position: 'relative'\n          },\n          icon: {\n            marginRight: '-4px',\n            marginTop: '12px',\n            cursor: 'pointer',\n            position: 'relative'\n          },\n          iconHighlight: {\n            position: 'absolute',\n            width: '24px',\n            height: '28px',\n            background: '#eee',\n            borderRadius: '4px',\n            top: '10px',\n            left: '12px',\n            display: 'none'\n          },\n          input: {\n            fontSize: '11px',\n            color: '#333',\n            width: '100%',\n            borderRadius: '2px',\n            border: 'none',\n            boxShadow: 'inset 0 0 0 1px #dadada',\n            height: '21px',\n            textAlign: 'center'\n          },\n          label: {\n            textTransform: 'uppercase',\n            fontSize: '11px',\n            lineHeight: '11px',\n            color: '#969696',\n            textAlign: 'center',\n            display: 'block',\n            marginTop: '12px'\n          },\n          svg: {\n            width: '24px',\n            height: '24px',\n            border: '1px transparent solid',\n            borderRadius: '5px'\n          }\n        },\n        'disableAlpha': {\n          alpha: {\n            display: 'none'\n          }\n        }\n      }, this.props, this.state);\n\n      var fields = void 0;\n      if (this.state.view === 'hex') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'hex', value: this.props.hex,\n              onChange: this.handleChange\n            })\n          )\n        );\n      } else if (this.state.view === 'rgb') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'r',\n              value: this.props.rgb.r,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'g',\n              value: this.props.rgb.g,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'b',\n              value: this.props.rgb.b,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'a',\n              value: this.props.rgb.a,\n              arrowOffset: 0.01,\n              onChange: this.handleChange\n            })\n          )\n        );\n      } else if (this.state.view === 'hsl') {\n        fields = _react2.default.createElement(\n          'div',\n          { style: styles.fields, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'h',\n              value: Math.round(this.props.hsl.h),\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 's',\n              value: Math.round(this.props.hsl.s * 100) + '%',\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.field },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'l',\n              value: Math.round(this.props.hsl.l * 100) + '%',\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.alpha },\n            _react2.default.createElement(_common.EditableInput, {\n              style: { input: styles.input, label: styles.label },\n              label: 'a',\n              value: this.props.hsl.a,\n              arrowOffset: 0.01,\n              onChange: this.handleChange\n            })\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.wrap, className: 'flexbox-fix' },\n        fields,\n        _react2.default.createElement(\n          'div',\n          { style: styles.toggle },\n          _react2.default.createElement(\n            'div',\n            { style: styles.icon, onClick: this.toggleViews, ref: function ref(icon) {\n                return _this2.icon = icon;\n              } },\n            _react2.default.createElement(\n              'svg',\n              {\n                style: styles.svg,\n                viewBox: '0 0 24 24',\n                onMouseOver: this.showHighlight,\n                onMouseEnter: this.showHighlight,\n                onMouseOut: this.hideHighlight\n              },\n              _react2.default.createElement('path', {\n                ref: function ref(iconUp) {\n                  return _this2.iconUp = iconUp;\n                },\n                fill: '#333',\n                d: 'M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z'\n              }),\n              _react2.default.createElement('path', {\n                ref: function ref(iconDown) {\n                  return _this2.iconDown = iconDown;\n                },\n                fill: '#333',\n                d: 'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z'\n              })\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return ChromeFields;\n}(_react2.default.Component);\n\nexports.default = ChromeFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromePointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ChromePointer = exports.ChromePointer = function ChromePointer() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        transform: 'translate(-6px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = ChromePointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChromePointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ChromePointerCircle = exports.ChromePointerCircle = function ChromePointerCircle() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        boxShadow: 'inset 0 0 0 1px #fff',\n        transform: 'translate(-6px, -6px)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = ChromePointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Circle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _materialColors = require('material-colors');\n\nvar material = _interopRequireWildcard(_materialColors);\n\nvar _common = require('../common');\n\nvar _CircleSwatch = require('./CircleSwatch');\n\nvar _CircleSwatch2 = _interopRequireDefault(_CircleSwatch);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Circle = exports.Circle = function Circle(_ref) {\n  var width = _ref.width,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      circleSize = _ref.circleSize,\n      circleSpacing = _ref.circleSpacing,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        display: 'flex',\n        flexWrap: 'wrap',\n        marginRight: -circleSpacing,\n        marginBottom: -circleSpacing\n      }\n    }\n  });\n\n  var handleChange = function handleChange(hexCode, e) {\n    return onChange({ hex: hexCode, source: 'hex' }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'circle-picker ' + className },\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_CircleSwatch2.default, {\n        key: c,\n        color: c,\n        onClick: handleChange,\n        onSwatchHover: onSwatchHover,\n        active: hex === c.toLowerCase(),\n        circleSize: circleSize,\n        circleSpacing: circleSpacing\n      });\n    })\n  );\n};\n\nCircle.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  circleSize: _propTypes2.default.number,\n  circleSpacing: _propTypes2.default.number\n};\n\nCircle.defaultProps = {\n  width: 252,\n  circleSize: 28,\n  circleSpacing: 14,\n  colors: [material.red['500'], material.pink['500'], material.purple['500'], material.deepPurple['500'], material.indigo['500'], material.blue['500'], material.lightBlue['500'], material.cyan['500'], material.teal['500'], material.green['500'], material.lightGreen['500'], material.lime['500'], material.yellow['500'], material.amber['500'], material.orange['500'], material.deepOrange['500'], material.brown['500'], material.blueGrey['500']]\n};\n\nexports.default = (0, _common.ColorWrap)(Circle);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CircleSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CircleSwatch = exports.CircleSwatch = function CircleSwatch(_ref) {\n  var color = _ref.color,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      hover = _ref.hover,\n      active = _ref.active,\n      circleSize = _ref.circleSize,\n      circleSpacing = _ref.circleSpacing;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        width: circleSize,\n        height: circleSize,\n        marginRight: circleSpacing,\n        marginBottom: circleSpacing,\n        transform: 'scale(1)',\n        transition: '100ms transform ease'\n      },\n      Swatch: {\n        borderRadius: '50%',\n        background: 'transparent',\n        boxShadow: 'inset 0 0 0 ' + circleSize / 2 + 'px ' + color,\n        transition: '100ms box-shadow ease'\n      }\n    },\n    'hover': {\n      swatch: {\n        transform: 'scale(1.2)'\n      }\n    },\n    'active': {\n      Swatch: {\n        boxShadow: 'inset 0 0 0 3px ' + color\n      }\n    }\n  }, { hover: hover, active: active });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatch },\n    _react2.default.createElement(_common.Swatch, {\n      style: styles.Swatch,\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: styles.Swatch.boxShadow + ', 0 0 5px ' + color }\n    })\n  );\n};\n\nCircleSwatch.defaultProps = {\n  circleSize: 28,\n  circleSpacing: 14\n};\n\nexports.default = (0, _reactcss.handleHover)(CircleSwatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Alpha = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _alpha = require('../../helpers/alpha');\n\nvar alpha = _interopRequireWildcard(_alpha);\n\nvar _Checkboard = require('./Checkboard');\n\nvar _Checkboard2 = _interopRequireDefault(_Checkboard);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Alpha = exports.Alpha = function (_ref) {\n  _inherits(Alpha, _ref);\n\n  function Alpha() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Alpha);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = Alpha.__proto__ || Object.getPrototypeOf(Alpha)).call.apply(_ref2, [this].concat(args))), _this), _this.handleChange = function (e, skip) {\n      var change = alpha.calculateChange(e, skip, _this.props, _this.container);\n      change && _this.props.onChange && _this.props.onChange(change, e);\n    }, _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    }, _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    }, _this.unbindEventListeners = function () {\n      window.removeEventListener('mousemove', _this.handleChange);\n      window.removeEventListener('mouseup', _this.handleMouseUp);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Alpha, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var rgb = this.props.rgb;\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          alpha: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius\n          },\n          checkboard: {\n            absolute: '0px 0px 0px 0px',\n            overflow: 'hidden',\n            borderRadius: this.props.radius\n          },\n          gradient: {\n            absolute: '0px 0px 0px 0px',\n            background: 'linear-gradient(to right, rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 0) 0%,\\n           rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 1) 100%)',\n            boxShadow: this.props.shadow,\n            borderRadius: this.props.radius\n          },\n          container: {\n            position: 'relative',\n            height: '100%',\n            margin: '0 3px'\n          },\n          pointer: {\n            position: 'absolute',\n            left: rgb.a * 100 + '%'\n          },\n          slider: {\n            width: '4px',\n            borderRadius: '1px',\n            height: '8px',\n            boxShadow: '0 0 2px rgba(0, 0, 0, .6)',\n            background: '#fff',\n            marginTop: '1px',\n            transform: 'translateX(-2px)'\n          }\n        },\n        'vertical': {\n          gradient: {\n            background: 'linear-gradient(to bottom, rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 0) 0%,\\n           rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ', 1) 100%)'\n          },\n          pointer: {\n            left: 0,\n            top: rgb.a * 100 + '%'\n          }\n        },\n        'overwrite': _extends({}, this.props.style)\n      }, {\n        vertical: this.props.direction === 'vertical',\n        overwrite: true\n      });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.alpha },\n        _react2.default.createElement(\n          'div',\n          { style: styles.checkboard },\n          _react2.default.createElement(_Checkboard2.default, { renderers: this.props.renderers })\n        ),\n        _react2.default.createElement('div', { style: styles.gradient }),\n        _react2.default.createElement(\n          'div',\n          {\n            style: styles.container,\n            ref: function ref(container) {\n              return _this2.container = container;\n            },\n            onMouseDown: this.handleMouseDown,\n            onTouchMove: this.handleChange,\n            onTouchStart: this.handleChange\n          },\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.slider })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Alpha;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Alpha;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Checkboard = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _checkboard = require('../../helpers/checkboard');\n\nvar checkboard = _interopRequireWildcard(_checkboard);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Checkboard = exports.Checkboard = function Checkboard(_ref) {\n  var white = _ref.white,\n      grey = _ref.grey,\n      size = _ref.size,\n      renderers = _ref.renderers,\n      borderRadius = _ref.borderRadius,\n      boxShadow = _ref.boxShadow;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      grid: {\n        borderRadius: borderRadius,\n        boxShadow: boxShadow,\n        absolute: '0px 0px 0px 0px',\n        background: 'url(' + checkboard.get(white, grey, size, renderers.canvas) + ') center left'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.grid });\n};\n\nCheckboard.defaultProps = {\n  size: 8,\n  white: 'transparent',\n  grey: 'rgba(0,0,0,.08)',\n  renderers: {}\n};\n\nexports.default = Checkboard;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorWrap = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _debounce = require('lodash/debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorWrap = exports.ColorWrap = function ColorWrap(Picker) {\n  var ColorPicker = function (_ref) {\n    _inherits(ColorPicker, _ref);\n\n    function ColorPicker(props) {\n      _classCallCheck(this, ColorPicker);\n\n      var _this = _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).call(this));\n\n      _this.handleChange = function (data, event) {\n        var isValidColor = _color2.default.simpleCheckForValidColor(data);\n        if (isValidColor) {\n          var colors = _color2.default.toState(data, data.h || _this.state.oldHue);\n          _this.setState(colors);\n          _this.props.onChangeComplete && _this.debounce(_this.props.onChangeComplete, colors, event);\n          _this.props.onChange && _this.props.onChange(colors, event);\n        }\n      };\n\n      _this.handleSwatchHover = function (data, event) {\n        var isValidColor = _color2.default.simpleCheckForValidColor(data);\n        if (isValidColor) {\n          var colors = _color2.default.toState(data, data.h || _this.state.oldHue);\n          _this.setState(colors);\n          _this.props.onSwatchHover && _this.props.onSwatchHover(colors, event);\n        }\n      };\n\n      _this.state = _extends({}, _color2.default.toState(props.color, 0));\n\n      _this.debounce = (0, _debounce2.default)(function (fn, data, event) {\n        fn(data, event);\n      }, 100);\n      return _this;\n    }\n\n    _createClass(ColorPicker, [{\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        this.setState(_extends({}, _color2.default.toState(nextProps.color, this.state.oldHue)));\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var optionalEvents = {};\n        if (this.props.onSwatchHover) {\n          optionalEvents.onSwatchHover = this.handleSwatchHover;\n        }\n\n        return _react2.default.createElement(Picker, _extends({}, this.props, this.state, {\n          onChange: this.handleChange\n        }, optionalEvents));\n      }\n    }]);\n\n    return ColorPicker;\n  }(_react.PureComponent || _react.Component);\n\n  ColorPicker.propTypes = _extends({}, Picker.propTypes);\n\n  ColorPicker.defaultProps = _extends({}, Picker.defaultProps, {\n    color: {\n      h: 250,\n      s: 0.50,\n      l: 0.20,\n      a: 1\n    }\n  });\n\n  return ColorPicker;\n};\n\nexports.default = ColorWrap;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EditableInput = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EditableInput = exports.EditableInput = function (_ref) {\n  _inherits(EditableInput, _ref);\n\n  function EditableInput(props) {\n    _classCallCheck(this, EditableInput);\n\n    var _this = _possibleConstructorReturn(this, (EditableInput.__proto__ || Object.getPrototypeOf(EditableInput)).call(this));\n\n    _this.handleBlur = function () {\n      if (_this.state.blurValue) {\n        _this.setState({ value: _this.state.blurValue, blurValue: null });\n      }\n    };\n\n    _this.handleChange = function (e) {\n      if (_this.props.label) {\n        _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, e.target.value), e);\n      } else {\n        _this.props.onChange && _this.props.onChange(e.target.value, e);\n      }\n\n      _this.setState({ value: e.target.value });\n    };\n\n    _this.handleKeyDown = function (e) {\n      // In case `e.target.value` is a percentage remove the `%` character\n      // and update accordingly with a percentage\n      // https://github.com/casesandberg/react-color/issues/383\n      var stringValue = String(e.target.value);\n      var isPercentage = stringValue.indexOf('%') > -1;\n      var number = Number(stringValue.replace(/%/g, ''));\n      if (!isNaN(number)) {\n        var amount = _this.props.arrowOffset || 1;\n\n        // Up\n        if (e.keyCode === 38) {\n          if (_this.props.label !== null) {\n            _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, number + amount), e);\n          } else {\n            _this.props.onChange && _this.props.onChange(number + amount, e);\n          }\n\n          if (isPercentage) {\n            _this.setState({ value: number + amount + '%' });\n          } else {\n            _this.setState({ value: number + amount });\n          }\n        }\n\n        // Down\n        if (e.keyCode === 40) {\n          if (_this.props.label !== null) {\n            _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, number - amount), e);\n          } else {\n            _this.props.onChange && _this.props.onChange(number - amount, e);\n          }\n\n          if (isPercentage) {\n            _this.setState({ value: number - amount + '%' });\n          } else {\n            _this.setState({ value: number - amount });\n          }\n        }\n      }\n    };\n\n    _this.handleDrag = function (e) {\n      if (_this.props.dragLabel) {\n        var newValue = Math.round(_this.props.value + e.movementX);\n        if (newValue >= 0 && newValue <= _this.props.dragMax) {\n          _this.props.onChange && _this.props.onChange(_defineProperty({}, _this.props.label, newValue), e);\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (e) {\n      if (_this.props.dragLabel) {\n        e.preventDefault();\n        _this.handleDrag(e);\n        window.addEventListener('mousemove', _this.handleDrag);\n        window.addEventListener('mouseup', _this.handleMouseUp);\n      }\n    };\n\n    _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    };\n\n    _this.unbindEventListeners = function () {\n      window.removeEventListener('mousemove', _this.handleDrag);\n      window.removeEventListener('mouseup', _this.handleMouseUp);\n    };\n\n    _this.state = {\n      value: String(props.value).toUpperCase(),\n      blurValue: String(props.value).toUpperCase()\n    };\n    return _this;\n  }\n\n  _createClass(EditableInput, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var input = this.input;\n      if (nextProps.value !== this.state.value) {\n        if (input === document.activeElement) {\n          this.setState({ blurValue: String(nextProps.value).toUpperCase() });\n        } else {\n          this.setState({ value: String(nextProps.value).toUpperCase(), blurValue: !this.state.blurValue && String(nextProps.value).toUpperCase() });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          wrap: {\n            position: 'relative'\n          }\n        },\n        'user-override': {\n          wrap: this.props.style && this.props.style.wrap ? this.props.style.wrap : {},\n          input: this.props.style && this.props.style.input ? this.props.style.input : {},\n          label: this.props.style && this.props.style.label ? this.props.style.label : {}\n        },\n        'dragLabel-true': {\n          label: {\n            cursor: 'ew-resize'\n          }\n        }\n      }, {\n        'user-override': true\n      }, this.props);\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.wrap },\n        _react2.default.createElement('input', {\n          style: styles.input,\n          ref: function ref(input) {\n            return _this2.input = input;\n          },\n          value: this.state.value,\n          onKeyDown: this.handleKeyDown,\n          onChange: this.handleChange,\n          onBlur: this.handleBlur,\n          placeholder: this.props.placeholder,\n          spellCheck: 'false'\n        }),\n        this.props.label && !this.props.hideLabel ? _react2.default.createElement(\n          'span',\n          { style: styles.label, onMouseDown: this.handleMouseDown },\n          this.props.label\n        ) : null\n      );\n    }\n  }]);\n\n  return EditableInput;\n}(_react.PureComponent || _react.Component);\n\nexports.default = EditableInput;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Hue = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _hue = require('../../helpers/hue');\n\nvar hue = _interopRequireWildcard(_hue);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Hue = exports.Hue = function (_ref) {\n  _inherits(Hue, _ref);\n\n  function Hue() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Hue);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = Hue.__proto__ || Object.getPrototypeOf(Hue)).call.apply(_ref2, [this].concat(args))), _this), _this.handleChange = function (e, skip) {\n      var change = hue.calculateChange(e, skip, _this.props, _this.container);\n      change && _this.props.onChange && _this.props.onChange(change, e);\n    }, _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    }, _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Hue, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'unbindEventListeners',\n    value: function unbindEventListeners() {\n      window.removeEventListener('mousemove', this.handleChange);\n      window.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props$direction = this.props.direction,\n          direction = _props$direction === undefined ? 'horizontal' : _props$direction;\n\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          hue: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius,\n            boxShadow: this.props.shadow\n          },\n          container: {\n            padding: '0 2px',\n            position: 'relative',\n            height: '100%',\n            borderRadius: this.props.radius\n          },\n          pointer: {\n            position: 'absolute',\n            left: this.props.hsl.h * 100 / 360 + '%'\n          },\n          slider: {\n            marginTop: '1px',\n            width: '4px',\n            borderRadius: '1px',\n            height: '8px',\n            boxShadow: '0 0 2px rgba(0, 0, 0, .6)',\n            background: '#fff',\n            transform: 'translateX(-2px)'\n          }\n        },\n        'vertical': {\n          pointer: {\n            left: '0px',\n            top: -(this.props.hsl.h * 100 / 360) + 100 + '%'\n          }\n        }\n      }, { vertical: direction === 'vertical' });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.hue },\n        _react2.default.createElement(\n          'div',\n          {\n            className: 'hue-' + direction,\n            style: styles.container,\n            ref: function ref(container) {\n              return _this2.container = container;\n            },\n            onMouseDown: this.handleMouseDown,\n            onTouchMove: this.handleChange,\n            onTouchStart: this.handleChange\n          },\n          _react2.default.createElement(\n            'style',\n            null,\n            '\\n            .hue-horizontal {\\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n\\n            .hue-vertical {\\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n          '\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.slider })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Hue;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Hue;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Raised = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Raised = exports.Raised = function Raised(_ref) {\n  var zDepth = _ref.zDepth,\n      radius = _ref.radius,\n      background = _ref.background,\n      children = _ref.children;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      wrap: {\n        position: 'relative',\n        display: 'inline-block'\n      },\n      content: {\n        position: 'relative'\n      },\n      bg: {\n        absolute: '0px 0px 0px 0px',\n        boxShadow: '0 ' + zDepth + 'px ' + zDepth * 4 + 'px rgba(0,0,0,.24)',\n        borderRadius: radius,\n        background: background\n      }\n    },\n    'zDepth-0': {\n      bg: {\n        boxShadow: 'none'\n      }\n    },\n\n    'zDepth-1': {\n      bg: {\n        boxShadow: '0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)'\n      }\n    },\n    'zDepth-2': {\n      bg: {\n        boxShadow: '0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)'\n      }\n    },\n    'zDepth-3': {\n      bg: {\n        boxShadow: '0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)'\n      }\n    },\n    'zDepth-4': {\n      bg: {\n        boxShadow: '0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)'\n      }\n    },\n    'zDepth-5': {\n      bg: {\n        boxShadow: '0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)'\n      }\n    },\n    'square': {\n      bg: {\n        borderRadius: '0'\n      }\n    },\n    'circle': {\n      bg: {\n        borderRadius: '50%'\n      }\n    }\n  }, { 'zDepth-1': zDepth === 1 });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.wrap },\n    _react2.default.createElement('div', { style: styles.bg }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.content },\n      children\n    )\n  );\n};\n\nRaised.propTypes = {\n  background: _propTypes2.default.string,\n  zDepth: _propTypes2.default.oneOf([0, 1, 2, 3, 4, 5]),\n  radius: _propTypes2.default.number\n};\n\nRaised.defaultProps = {\n  background: '#fff',\n  zDepth: 1,\n  radius: 2\n};\n\nexports.default = Raised;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Saturation = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _throttle = require('lodash/throttle');\n\nvar _throttle2 = _interopRequireDefault(_throttle);\n\nvar _saturation = require('../../helpers/saturation');\n\nvar saturation = _interopRequireWildcard(_saturation);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Saturation = exports.Saturation = function (_ref) {\n  _inherits(Saturation, _ref);\n\n  function Saturation(props) {\n    _classCallCheck(this, Saturation);\n\n    var _this = _possibleConstructorReturn(this, (Saturation.__proto__ || Object.getPrototypeOf(Saturation)).call(this, props));\n\n    _this.handleChange = function (e, skip) {\n      _this.props.onChange && _this.throttle(_this.props.onChange, saturation.calculateChange(e, skip, _this.props, _this.container), e);\n    };\n\n    _this.handleMouseDown = function (e) {\n      _this.handleChange(e, true);\n      window.addEventListener('mousemove', _this.handleChange);\n      window.addEventListener('mouseup', _this.handleMouseUp);\n    };\n\n    _this.handleMouseUp = function () {\n      _this.unbindEventListeners();\n    };\n\n    _this.throttle = (0, _throttle2.default)(function (fn, data, e) {\n      fn(data, e);\n    }, 50);\n    return _this;\n  }\n\n  _createClass(Saturation, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unbindEventListeners();\n    }\n  }, {\n    key: 'unbindEventListeners',\n    value: function unbindEventListeners() {\n      window.removeEventListener('mousemove', this.handleChange);\n      window.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _ref2 = this.props.style || {},\n          color = _ref2.color,\n          white = _ref2.white,\n          black = _ref2.black,\n          pointer = _ref2.pointer,\n          circle = _ref2.circle;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          color: {\n            absolute: '0px 0px 0px 0px',\n            background: 'hsl(' + this.props.hsl.h + ',100%, 50%)',\n            borderRadius: this.props.radius\n          },\n          white: {\n            absolute: '0px 0px 0px 0px',\n            borderRadius: this.props.radius\n          },\n          black: {\n            absolute: '0px 0px 0px 0px',\n            boxShadow: this.props.shadow,\n            borderRadius: this.props.radius\n          },\n          pointer: {\n            position: 'absolute',\n            top: -(this.props.hsv.v * 100) + 100 + '%',\n            left: this.props.hsv.s * 100 + '%',\n            cursor: 'default'\n          },\n          circle: {\n            width: '4px',\n            height: '4px',\n            boxShadow: '0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\\n            0 0 1px 2px rgba(0,0,0,.4)',\n            borderRadius: '50%',\n            cursor: 'hand',\n            transform: 'translate(-2px, -2px)'\n          }\n        },\n        'custom': {\n          color: color,\n          white: white,\n          black: black,\n          pointer: pointer,\n          circle: circle\n        }\n      }, { 'custom': !!this.props.style });\n\n      return _react2.default.createElement(\n        'div',\n        {\n          style: styles.color,\n          ref: function ref(container) {\n            return _this2.container = container;\n          },\n          onMouseDown: this.handleMouseDown,\n          onTouchMove: this.handleChange,\n          onTouchStart: this.handleChange\n        },\n        _react2.default.createElement(\n          'style',\n          null,\n          '\\n          .saturation-white {\\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\\n          }\\n          .saturation-black {\\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\\n          }\\n        '\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.white, className: 'saturation-white' },\n          _react2.default.createElement('div', { style: styles.black, className: 'saturation-black' }),\n          _react2.default.createElement(\n            'div',\n            { style: styles.pointer },\n            this.props.pointer ? _react2.default.createElement(this.props.pointer, this.props) : _react2.default.createElement('div', { style: styles.circle })\n          )\n        )\n      );\n    }\n  }]);\n\n  return Saturation;\n}(_react.PureComponent || _react.Component);\n\nexports.default = Saturation;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Swatch = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _interaction = require('../../helpers/interaction');\n\nvar _ = require('./');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ENTER = 13;\n\nvar Swatch = exports.Swatch = function Swatch(_ref) {\n  var color = _ref.color,\n      style = _ref.style,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onHover = _ref.onHover,\n      _ref$title = _ref.title,\n      title = _ref$title === undefined ? color : _ref$title,\n      children = _ref.children,\n      focus = _ref.focus,\n      _ref$focusStyle = _ref.focusStyle,\n      focusStyle = _ref$focusStyle === undefined ? {} : _ref$focusStyle;\n\n  var transparent = color === 'transparent';\n  var styles = (0, _reactcss2.default)({\n    default: {\n      swatch: _extends({\n        background: color,\n        height: '100%',\n        width: '100%',\n        cursor: 'pointer',\n        position: 'relative',\n        outline: 'none'\n      }, style, focus ? focusStyle : {})\n    }\n  });\n\n  var handleClick = function handleClick(e) {\n    return onClick(color, e);\n  };\n  var handleKeyDown = function handleKeyDown(e) {\n    return e.keyCode === ENTER && onClick(color, e);\n  };\n  var handleHover = function handleHover(e) {\n    return onHover(color, e);\n  };\n\n  var optionalEvents = {};\n  if (onHover) {\n    optionalEvents.onMouseOver = handleHover;\n  }\n\n  return _react2.default.createElement(\n    'div',\n    _extends({\n      style: styles.swatch,\n      onClick: handleClick,\n      title: title,\n      tabIndex: 0,\n      onKeyDown: handleKeyDown\n    }, optionalEvents),\n    children,\n    transparent && _react2.default.createElement(_.Checkboard, {\n      borderRadius: styles.swatch.borderRadius,\n      boxShadow: 'inset 0 0 0 1px rgba(0,0,0,0.1)'\n    })\n  );\n};\n\nexports.default = (0, _interaction.handleFocus)(Swatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Alpha = require('./Alpha');\n\nObject.defineProperty(exports, 'Alpha', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Alpha).default;\n  }\n});\n\nvar _Checkboard = require('./Checkboard');\n\nObject.defineProperty(exports, 'Checkboard', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Checkboard).default;\n  }\n});\n\nvar _EditableInput = require('./EditableInput');\n\nObject.defineProperty(exports, 'EditableInput', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_EditableInput).default;\n  }\n});\n\nvar _Hue = require('./Hue');\n\nObject.defineProperty(exports, 'Hue', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hue).default;\n  }\n});\n\nvar _Raised = require('./Raised');\n\nObject.defineProperty(exports, 'Raised', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Raised).default;\n  }\n});\n\nvar _Saturation = require('./Saturation');\n\nObject.defineProperty(exports, 'Saturation', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Saturation).default;\n  }\n});\n\nvar _ColorWrap = require('./ColorWrap');\n\nObject.defineProperty(exports, 'ColorWrap', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ColorWrap).default;\n  }\n});\n\nvar _Swatch = require('./Swatch');\n\nObject.defineProperty(exports, 'Swatch', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Swatch).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Compact = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nvar _CompactColor = require('./CompactColor');\n\nvar _CompactColor2 = _interopRequireDefault(_CompactColor);\n\nvar _CompactFields = require('./CompactFields');\n\nvar _CompactFields2 = _interopRequireDefault(_CompactFields);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Compact = exports.Compact = function Compact(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      rgb = _ref.rgb,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      Compact: {\n        background: '#f6f6f6',\n        radius: '4px'\n      },\n      compact: {\n        paddingTop: '5px',\n        paddingLeft: '5px',\n        boxSizing: 'initial',\n        width: '240px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else {\n      onChange(data, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    _common.Raised,\n    { style: styles.Compact },\n    _react2.default.createElement(\n      'div',\n      { style: styles.compact, className: 'compact-picker ' + className },\n      _react2.default.createElement(\n        'div',\n        null,\n        (0, _map2.default)(colors, function (c) {\n          return _react2.default.createElement(_CompactColor2.default, {\n            key: c,\n            color: c,\n            active: c.toLowerCase() === hex,\n            onClick: handleChange,\n            onSwatchHover: onSwatchHover\n          });\n        }),\n        _react2.default.createElement('div', { style: styles.clear })\n      ),\n      _react2.default.createElement(_CompactFields2.default, { hex: hex, rgb: rgb, onChange: handleChange })\n    )\n  );\n};\n\nCompact.propTypes = {\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string)\n};\n\nCompact.defaultProps = {\n  colors: ['#4D4D4D', '#999999', '#FFFFFF', '#F44E3B', '#FE9200', '#FCDC00', '#DBDF00', '#A4DD00', '#68CCCA', '#73D8FF', '#AEA1FF', '#FDA1FF', '#333333', '#808080', '#cccccc', '#D33115', '#E27300', '#FCC400', '#B0BC00', '#68BC00', '#16A5A5', '#009CE0', '#7B64FF', '#FA28FF', '#000000', '#666666', '#B3B3B3', '#9F0500', '#C45100', '#FB9E00', '#808900', '#194D33', '#0C797D', '#0062B1', '#653294', '#AB149E']\n};\n\nexports.default = (0, _common.ColorWrap)(Compact);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CompactColor = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CompactColor = exports.CompactColor = function CompactColor(_ref) {\n  var color = _ref.color,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      color: {\n        background: color,\n        width: '15px',\n        height: '15px',\n        float: 'left',\n        marginRight: '5px',\n        marginBottom: '5px',\n        position: 'relative',\n        cursor: 'pointer'\n      },\n      dot: {\n        absolute: '5px 5px 5px 5px',\n        background: _color2.default.getContrastingColor(color),\n        borderRadius: '50%',\n        opacity: '0'\n      }\n    },\n    'active': {\n      dot: {\n        opacity: '1'\n      }\n    },\n    'color-#FFFFFF': {\n      color: {\n        boxShadow: 'inset 0 0 0 1px #ddd'\n      },\n      dot: {\n        background: '#000'\n      }\n    },\n    'transparent': {\n      dot: {\n        background: '#000'\n      }\n    }\n  }, { active: active, 'color-#FFFFFF': color === '#FFFFFF', 'transparent': color === 'transparent' });\n\n  return _react2.default.createElement(\n    _common.Swatch,\n    {\n      style: styles.color,\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: '0 0 4px ' + color }\n    },\n    _react2.default.createElement('div', { style: styles.dot })\n  );\n};\n\nexports.default = CompactColor;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CompactFields = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CompactFields = exports.CompactFields = function CompactFields(_ref) {\n  var hex = _ref.hex,\n      rgb = _ref.rgb,\n      onChange = _ref.onChange;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        display: 'flex',\n        paddingBottom: '6px',\n        paddingRight: '5px',\n        position: 'relative'\n      },\n      active: {\n        position: 'absolute',\n        top: '6px',\n        left: '5px',\n        height: '9px',\n        width: '9px',\n        background: hex\n      },\n      HEXwrap: {\n        flex: '6',\n        position: 'relative'\n      },\n      HEXinput: {\n        width: '80%',\n        padding: '0px',\n        paddingLeft: '20%',\n        border: 'none',\n        outline: 'none',\n        background: 'none',\n        fontSize: '12px',\n        color: '#333',\n        height: '16px'\n      },\n      HEXlabel: {\n        display: 'none'\n      },\n      RGBwrap: {\n        flex: '3',\n        position: 'relative'\n      },\n      RGBinput: {\n        width: '70%',\n        padding: '0px',\n        paddingLeft: '30%',\n        border: 'none',\n        outline: 'none',\n        background: 'none',\n        fontSize: '12px',\n        color: '#333',\n        height: '16px'\n      },\n      RGBlabel: {\n        position: 'absolute',\n        top: '3px',\n        left: '0px',\n        lineHeight: '16px',\n        textTransform: 'uppercase',\n        fontSize: '12px',\n        color: '#999'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    } else {\n      onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields, className: 'flexbox-fix' },\n    _react2.default.createElement('div', { style: styles.active }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n      label: 'hex',\n      value: hex,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'r',\n      value: rgb.r,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'g',\n      value: rgb.g,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'b',\n      value: rgb.b,\n      onChange: handleChange\n    })\n  );\n};\n\nexports.default = CompactFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Github = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _common = require('../common');\n\nvar _GithubSwatch = require('./GithubSwatch');\n\nvar _GithubSwatch2 = _interopRequireDefault(_GithubSwatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Github = exports.Github = function Github(_ref) {\n  var width = _ref.width,\n      colors = _ref.colors,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        border: '1px solid rgba(0,0,0,0.2)',\n        boxShadow: '0 3px 12px rgba(0,0,0,0.15)',\n        borderRadius: '4px',\n        position: 'relative',\n        padding: '5px',\n        display: 'flex',\n        flexWrap: 'wrap'\n      },\n      triangle: {\n        position: 'absolute',\n        border: '7px solid transparent',\n        borderBottomColor: '#fff'\n      },\n      triangleShadow: {\n        position: 'absolute',\n        border: '8px solid transparent',\n        borderBottomColor: 'rgba(0,0,0,0.15)'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      },\n      triangleShadow: {\n        display: 'none'\n      }\n    },\n    'top-left-triangle': {\n      triangle: {\n        top: '-14px',\n        left: '10px'\n      },\n      triangleShadow: {\n        top: '-16px',\n        left: '9px'\n      }\n    },\n    'top-right-triangle': {\n      triangle: {\n        top: '-14px',\n        right: '10px'\n      },\n      triangleShadow: {\n        top: '-16px',\n        right: '9px'\n      }\n    },\n    'bottom-left-triangle': {\n      triangle: {\n        top: '35px',\n        left: '10px',\n        transform: 'rotate(180deg)'\n      },\n      triangleShadow: {\n        top: '37px',\n        left: '9px',\n        transform: 'rotate(180deg)'\n      }\n    },\n    'bottom-right-triangle': {\n      triangle: {\n        top: '35px',\n        right: '10px',\n        transform: 'rotate(180deg)'\n      },\n      triangleShadow: {\n        top: '37px',\n        right: '9px',\n        transform: 'rotate(180deg)'\n      }\n    }\n  }, {\n    'hide-triangle': triangle === 'hide',\n    'top-left-triangle': triangle === 'top-left',\n    'top-right-triangle': triangle === 'top-right',\n    'bottom-left-triangle': triangle == 'bottom-left',\n    'bottom-right-triangle': triangle === 'bottom-right'\n  });\n\n  var handleChange = function handleChange(hex, e) {\n    return onChange({ hex: hex, source: 'hex' }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'github-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangleShadow }),\n    _react2.default.createElement('div', { style: styles.triangle }),\n    (0, _map2.default)(colors, function (c) {\n      return _react2.default.createElement(_GithubSwatch2.default, {\n        color: c,\n        key: c,\n        onClick: handleChange,\n        onSwatchHover: onSwatchHover\n      });\n    })\n  );\n};\n\nGithub.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  triangle: _propTypes2.default.oneOf(['hide', 'top-left', 'top-right', 'bottom-left', 'bottom-right'])\n};\n\nGithub.defaultProps = {\n  width: 200,\n  colors: ['#B80000', '#DB3E00', '#FCCB00', '#008B02', '#006B76', '#1273DE', '#004DCF', '#5300EB', '#EB9694', '#FAD0C3', '#FEF3BD', '#C1E1C5', '#BEDADC', '#C4DEF6', '#BED3F3', '#D4C4FB'],\n  triangle: 'top-left'\n};\n\nexports.default = (0, _common.ColorWrap)(Github);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GithubSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GithubSwatch = exports.GithubSwatch = function GithubSwatch(_ref) {\n  var hover = _ref.hover,\n      color = _ref.color,\n      onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var hoverSwatch = {\n    position: 'relative',\n    zIndex: '2',\n    outline: '2px solid #fff',\n    boxShadow: '0 0 5px 2px rgba(0,0,0,0.25)'\n  };\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        width: '25px',\n        height: '25px',\n        fontSize: '0'\n      }\n    },\n    'hover': {\n      swatch: hoverSwatch\n    }\n  }, { hover: hover });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatch },\n    _react2.default.createElement(_common.Swatch, {\n      color: color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: hoverSwatch\n    })\n  );\n};\n\nexports.default = (0, _reactcss.handleHover)(GithubSwatch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HuePicker = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _HuePointer = require('./HuePointer');\n\nvar _HuePointer2 = _interopRequireDefault(_HuePointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HuePicker = exports.HuePicker = function HuePicker(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      hsl = _ref.hsl,\n      direction = _ref.direction,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        position: 'relative',\n        width: width,\n        height: height\n      },\n      hue: {\n        radius: '2px'\n      }\n    }\n  });\n\n  // Overwrite to provide pure hue color\n  var handleChange = function handleChange(data) {\n    return onChange({ a: 1, h: data.h, l: 0.5, s: 1 });\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'hue-picker ' + className },\n    _react2.default.createElement(_common.Hue, _extends({}, styles.hue, {\n      hsl: hsl,\n      pointer: pointer,\n      onChange: handleChange,\n      direction: direction\n    }))\n  );\n};\n\nHuePicker.defaultProps = {\n  width: '316px',\n  height: '16px',\n  direction: 'horizontal',\n  pointer: _HuePointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(HuePicker);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderPointer = exports.SliderPointer = function SliderPointer(_ref) {\n  var direction = _ref.direction;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '18px',\n        height: '18px',\n        borderRadius: '50%',\n        transform: 'translate(-9px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    },\n    'vertical': {\n      picker: {\n        transform: 'translate(-3px, -9px)'\n      }\n    }\n  }, { vertical: direction === 'vertical' });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = SliderPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Material = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Material = exports.Material = function Material(_ref) {\n  var onChange = _ref.onChange,\n      hex = _ref.hex,\n      rgb = _ref.rgb,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      material: {\n        width: '98px',\n        height: '98px',\n        padding: '16px',\n        fontFamily: 'Roboto'\n      },\n      HEXwrap: {\n        position: 'relative'\n      },\n      HEXinput: {\n        width: '100%',\n        marginTop: '12px',\n        fontSize: '15px',\n        color: '#333',\n        padding: '0px',\n        border: '0px',\n        borderBottom: '2px solid ' + hex,\n        outline: 'none',\n        height: '30px'\n      },\n      HEXlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        fontSize: '11px',\n        color: '#999999',\n        textTransform: 'capitalize'\n      },\n      Hex: {\n        style: {}\n      },\n      RGBwrap: {\n        position: 'relative'\n      },\n      RGBinput: {\n        width: '100%',\n        marginTop: '12px',\n        fontSize: '15px',\n        color: '#333',\n        padding: '0px',\n        border: '0px',\n        borderBottom: '1px solid #eee',\n        outline: 'none',\n        height: '30px'\n      },\n      RGBlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        fontSize: '11px',\n        color: '#999999',\n        textTransform: 'capitalize'\n      },\n      split: {\n        display: 'flex',\n        marginRight: '-10px',\n        paddingTop: '11px'\n      },\n      third: {\n        flex: '1',\n        paddingRight: '10px'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    _common.Raised,\n    null,\n    _react2.default.createElement(\n      'div',\n      { style: styles.material, className: 'material-picker ' + className },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n        label: 'hex',\n        value: hex,\n        onChange: handleChange\n      }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.split, className: 'flexbox-fix' },\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'r', value: rgb.r,\n            onChange: handleChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'g',\n            value: rgb.g,\n            onChange: handleChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.third },\n          _react2.default.createElement(_common.EditableInput, {\n            style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n            label: 'b',\n            value: rgb.b,\n            onChange: handleChange\n          })\n        )\n      )\n    )\n  );\n};\n\nexports.default = (0, _common.ColorWrap)(Material);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Photoshop = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _PhotoshopFields = require('./PhotoshopFields');\n\nvar _PhotoshopFields2 = _interopRequireDefault(_PhotoshopFields);\n\nvar _PhotoshopPointerCircle = require('./PhotoshopPointerCircle');\n\nvar _PhotoshopPointerCircle2 = _interopRequireDefault(_PhotoshopPointerCircle);\n\nvar _PhotoshopPointer = require('./PhotoshopPointer');\n\nvar _PhotoshopPointer2 = _interopRequireDefault(_PhotoshopPointer);\n\nvar _PhotoshopButton = require('./PhotoshopButton');\n\nvar _PhotoshopButton2 = _interopRequireDefault(_PhotoshopButton);\n\nvar _PhotoshopPreviews = require('./PhotoshopPreviews');\n\nvar _PhotoshopPreviews2 = _interopRequireDefault(_PhotoshopPreviews);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Photoshop = exports.Photoshop = function (_React$Component) {\n  _inherits(Photoshop, _React$Component);\n\n  function Photoshop(props) {\n    _classCallCheck(this, Photoshop);\n\n    var _this = _possibleConstructorReturn(this, (Photoshop.__proto__ || Object.getPrototypeOf(Photoshop)).call(this));\n\n    _this.state = {\n      currentColor: props.hex\n    };\n    return _this;\n  }\n\n  _createClass(Photoshop, [{\n    key: 'render',\n    value: function render() {\n      var _props$className = this.props.className,\n          className = _props$className === undefined ? '' : _props$className;\n\n      var styles = (0, _reactcss2.default)({\n        'default': {\n          picker: {\n            background: '#DCDCDC',\n            borderRadius: '4px',\n            boxShadow: '0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)',\n            boxSizing: 'initial',\n            width: '513px'\n          },\n          head: {\n            backgroundImage: 'linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)',\n            borderBottom: '1px solid #B1B1B1',\n            boxShadow: 'inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)',\n            height: '23px',\n            lineHeight: '24px',\n            borderRadius: '4px 4px 0 0',\n            fontSize: '13px',\n            color: '#4D4D4D',\n            textAlign: 'center'\n          },\n          body: {\n            padding: '15px 15px 0',\n            display: 'flex'\n          },\n          saturation: {\n            width: '256px',\n            height: '256px',\n            position: 'relative',\n            border: '2px solid #B3B3B3',\n            borderBottom: '2px solid #F0F0F0',\n            overflow: 'hidden'\n          },\n          hue: {\n            position: 'relative',\n            height: '256px',\n            width: '19px',\n            marginLeft: '10px',\n            border: '2px solid #B3B3B3',\n            borderBottom: '2px solid #F0F0F0'\n          },\n          controls: {\n            width: '180px',\n            marginLeft: '10px'\n          },\n          top: {\n            display: 'flex'\n          },\n          previews: {\n            width: '60px'\n          },\n          actions: {\n            flex: '1',\n            marginLeft: '20px'\n          }\n        }\n      });\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.picker, className: 'photoshop-picker ' + className },\n        _react2.default.createElement(\n          'div',\n          { style: styles.head },\n          this.props.header\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.body, className: 'flexbox-fix' },\n          _react2.default.createElement(\n            'div',\n            { style: styles.saturation },\n            _react2.default.createElement(_common.Saturation, {\n              hsl: this.props.hsl,\n              hsv: this.props.hsv,\n              pointer: _PhotoshopPointerCircle2.default,\n              onChange: this.props.onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.hue },\n            _react2.default.createElement(_common.Hue, {\n              direction: 'vertical',\n              hsl: this.props.hsl,\n              pointer: _PhotoshopPointer2.default,\n              onChange: this.props.onChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { style: styles.controls },\n            _react2.default.createElement(\n              'div',\n              { style: styles.top, className: 'flexbox-fix' },\n              _react2.default.createElement(\n                'div',\n                { style: styles.previews },\n                _react2.default.createElement(_PhotoshopPreviews2.default, {\n                  rgb: this.props.rgb,\n                  currentColor: this.state.currentColor\n                })\n              ),\n              _react2.default.createElement(\n                'div',\n                { style: styles.actions },\n                _react2.default.createElement(_PhotoshopButton2.default, { label: 'OK', onClick: this.props.onAccept, active: true }),\n                _react2.default.createElement(_PhotoshopButton2.default, { label: 'Cancel', onClick: this.props.onCancel }),\n                _react2.default.createElement(_PhotoshopFields2.default, {\n                  onChange: this.props.onChange,\n                  rgb: this.props.rgb,\n                  hsv: this.props.hsv,\n                  hex: this.props.hex\n                })\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return Photoshop;\n}(_react2.default.Component);\n\nPhotoshop.propTypes = {\n  header: _propTypes2.default.string\n};\n\nPhotoshop.defaultProps = {\n  header: 'Color Picker'\n};\n\nexports.default = (0, _common.ColorWrap)(Photoshop);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopBotton = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopBotton = exports.PhotoshopBotton = function PhotoshopBotton(_ref) {\n  var onClick = _ref.onClick,\n      label = _ref.label,\n      children = _ref.children,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      button: {\n        backgroundImage: 'linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)',\n        border: '1px solid #878787',\n        borderRadius: '2px',\n        height: '20px',\n        boxShadow: '0 1px 0 0 #EAEAEA',\n        fontSize: '14px',\n        color: '#000',\n        lineHeight: '20px',\n        textAlign: 'center',\n        marginBottom: '10px',\n        cursor: 'pointer'\n      }\n    },\n    'active': {\n      button: {\n        boxShadow: '0 0 0 1px #878787'\n      }\n    }\n  }, { active: active });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.button, onClick: onClick },\n    label || children\n  );\n};\n\nexports.default = PhotoshopBotton;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPicker = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPicker = exports.PhotoshopPicker = function PhotoshopPicker(_ref) {\n  var onChange = _ref.onChange,\n      rgb = _ref.rgb,\n      hsv = _ref.hsv,\n      hex = _ref.hex;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        paddingTop: '5px',\n        paddingBottom: '9px',\n        width: '80px',\n        position: 'relative'\n      },\n      divider: {\n        height: '5px'\n      },\n      RGBwrap: {\n        position: 'relative'\n      },\n      RGBinput: {\n        marginLeft: '40%',\n        width: '40%',\n        height: '18px',\n        border: '1px solid #888888',\n        boxShadow: 'inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC',\n        marginBottom: '5px',\n        fontSize: '13px',\n        paddingLeft: '3px',\n        marginRight: '10px'\n      },\n      RGBlabel: {\n        left: '0px',\n        width: '34px',\n        textTransform: 'uppercase',\n        fontSize: '13px',\n        height: '18px',\n        lineHeight: '22px',\n        position: 'absolute'\n      },\n      HEXwrap: {\n        position: 'relative'\n      },\n      HEXinput: {\n        marginLeft: '20%',\n        width: '80%',\n        height: '18px',\n        border: '1px solid #888888',\n        boxShadow: 'inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC',\n        marginBottom: '6px',\n        fontSize: '13px',\n        paddingLeft: '3px'\n      },\n      HEXlabel: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        width: '14px',\n        textTransform: 'uppercase',\n        fontSize: '13px',\n        height: '18px',\n        lineHeight: '22px'\n      },\n      fieldSymbols: {\n        position: 'absolute',\n        top: '5px',\n        right: '-7px',\n        fontSize: '13px'\n      },\n      symbol: {\n        height: '20px',\n        lineHeight: '22px',\n        paddingBottom: '7px'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    if (data['#']) {\n      _color2.default.isValidHex(data['#']) && onChange({\n        hex: data['#'],\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        source: 'rgb'\n      }, e);\n    } else if (data.h || data.s || data.v) {\n      onChange({\n        h: data.h || hsv.h,\n        s: data.s || hsv.s,\n        v: data.v || hsv.v,\n        source: 'hsv'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields },\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'h',\n      value: Math.round(hsv.h),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 's',\n      value: Math.round(hsv.s * 100),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'v',\n      value: Math.round(hsv.v * 100),\n      onChange: handleChange\n    }),\n    _react2.default.createElement('div', { style: styles.divider }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'r',\n      value: rgb.r,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'g',\n      value: rgb.g,\n      onChange: handleChange\n    }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.RGBwrap, input: styles.RGBinput, label: styles.RGBlabel },\n      label: 'b',\n      value: rgb.b,\n      onChange: handleChange\n    }),\n    _react2.default.createElement('div', { style: styles.divider }),\n    _react2.default.createElement(_common.EditableInput, {\n      style: { wrap: styles.HEXwrap, input: styles.HEXinput, label: styles.HEXlabel },\n      label: '#',\n      value: hex.replace('#', ''),\n      onChange: handleChange\n    }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.fieldSymbols },\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '\\xB0'\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '%'\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.symbol },\n        '%'\n      )\n    )\n  );\n};\n\nexports.default = PhotoshopPicker;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPointerCircle = exports.PhotoshopPointerCircle = function PhotoshopPointerCircle() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      triangle: {\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '4px 0 4px 6px',\n        borderColor: 'transparent transparent transparent #fff',\n        position: 'absolute',\n        top: '1px',\n        left: '1px'\n      },\n      triangleBorder: {\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '5px 0 5px 8px',\n        borderColor: 'transparent transparent transparent #555'\n      },\n\n      left: {\n        Extend: 'triangleBorder',\n        transform: 'translate(-13px, -4px)'\n      },\n      leftInside: {\n        Extend: 'triangle',\n        transform: 'translate(-8px, -5px)'\n      },\n\n      right: {\n        Extend: 'triangleBorder',\n        transform: 'translate(20px, -14px) rotate(180deg)'\n      },\n      rightInside: {\n        Extend: 'triangle',\n        transform: 'translate(-8px, -5px)'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.pointer },\n    _react2.default.createElement(\n      'div',\n      { style: styles.left },\n      _react2.default.createElement('div', { style: styles.leftInside })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.right },\n      _react2.default.createElement('div', { style: styles.rightInside })\n    )\n  );\n};\n\nexports.default = PhotoshopPointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPointerCircle = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPointerCircle = exports.PhotoshopPointerCircle = function PhotoshopPointerCircle(_ref) {\n  var hsl = _ref.hsl;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        boxShadow: 'inset 0 0 0 1px #fff',\n        transform: 'translate(-6px, -6px)'\n      }\n    },\n    'black-outline': {\n      picker: {\n        boxShadow: 'inset 0 0 0 1px #000'\n      }\n    }\n  }, { 'black-outline': hsl.l > 0.5 });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = PhotoshopPointerCircle;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhotoshopPreviews = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PhotoshopPreviews = exports.PhotoshopPreviews = function PhotoshopPreviews(_ref) {\n  var rgb = _ref.rgb,\n      currentColor = _ref.currentColor;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        border: '1px solid #B3B3B3',\n        borderBottom: '1px solid #F0F0F0',\n        marginBottom: '2px',\n        marginTop: '1px'\n      },\n      new: {\n        height: '34px',\n        background: 'rgb(' + rgb.r + ',' + rgb.g + ', ' + rgb.b + ')',\n        boxShadow: 'inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000'\n      },\n      current: {\n        height: '34px',\n        background: currentColor,\n        boxShadow: 'inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000'\n      },\n      label: {\n        fontSize: '14px',\n        color: '#000',\n        textAlign: 'center'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    null,\n    _react2.default.createElement(\n      'div',\n      { style: styles.label },\n      'new'\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatches },\n      _react2.default.createElement('div', { style: styles.new }),\n      _react2.default.createElement('div', { style: styles.current })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.label },\n      'current'\n    )\n  );\n};\n\nexports.default = PhotoshopPreviews;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sketch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _SketchFields = require('./SketchFields');\n\nvar _SketchFields2 = _interopRequireDefault(_SketchFields);\n\nvar _SketchPresetColors = require('./SketchPresetColors');\n\nvar _SketchPresetColors2 = _interopRequireDefault(_SketchPresetColors);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Sketch = exports.Sketch = function Sketch(_ref) {\n  var width = _ref.width,\n      rgb = _ref.rgb,\n      hex = _ref.hex,\n      hsv = _ref.hsv,\n      hsl = _ref.hsl,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      disableAlpha = _ref.disableAlpha,\n      presetColors = _ref.presetColors,\n      renderers = _ref.renderers,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: width,\n        padding: '10px 10px 0',\n        boxSizing: 'initial',\n        background: '#fff',\n        borderRadius: '4px',\n        boxShadow: '0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)'\n      },\n      saturation: {\n        width: '100%',\n        paddingBottom: '75%',\n        position: 'relative',\n        overflow: 'hidden'\n      },\n      Saturation: {\n        radius: '3px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n      controls: {\n        display: 'flex'\n      },\n      sliders: {\n        padding: '4px 0',\n        flex: '1'\n      },\n      color: {\n        width: '24px',\n        height: '24px',\n        position: 'relative',\n        marginTop: '4px',\n        marginLeft: '4px',\n        borderRadius: '3px'\n      },\n      activeColor: {\n        absolute: '0px 0px 0px 0px',\n        borderRadius: '2px',\n        background: 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n      hue: {\n        position: 'relative',\n        height: '10px',\n        overflow: 'hidden'\n      },\n      Hue: {\n        radius: '2px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      },\n\n      alpha: {\n        position: 'relative',\n        height: '10px',\n        marginTop: '4px',\n        overflow: 'hidden'\n      },\n      Alpha: {\n        radius: '2px',\n        shadow: 'inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)'\n      }\n    },\n    'disableAlpha': {\n      color: {\n        height: '10px'\n      },\n      hue: {\n        height: '10px'\n      },\n      alpha: {\n        display: 'none'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'sketch-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.saturation },\n      _react2.default.createElement(_common.Saturation, {\n        style: styles.Saturation,\n        hsl: hsl,\n        hsv: hsv,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.controls, className: 'flexbox-fix' },\n      _react2.default.createElement(\n        'div',\n        { style: styles.sliders },\n        _react2.default.createElement(\n          'div',\n          { style: styles.hue },\n          _react2.default.createElement(_common.Hue, {\n            style: styles.Hue,\n            hsl: hsl,\n            onChange: onChange\n          })\n        ),\n        _react2.default.createElement(\n          'div',\n          { style: styles.alpha },\n          _react2.default.createElement(_common.Alpha, {\n            style: styles.Alpha,\n            rgb: rgb,\n            hsl: hsl,\n            renderers: renderers,\n            onChange: onChange\n          })\n        )\n      ),\n      _react2.default.createElement(\n        'div',\n        { style: styles.color },\n        _react2.default.createElement(_common.Checkboard, null),\n        _react2.default.createElement('div', { style: styles.activeColor })\n      )\n    ),\n    _react2.default.createElement(_SketchFields2.default, {\n      rgb: rgb,\n      hsl: hsl,\n      hex: hex,\n      onChange: onChange,\n      disableAlpha: disableAlpha\n    }),\n    _react2.default.createElement(_SketchPresetColors2.default, {\n      colors: presetColors,\n      onClick: onChange,\n      onSwatchHover: onSwatchHover\n    })\n  );\n};\n\nSketch.propTypes = {\n  disableAlpha: _propTypes2.default.bool,\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number])\n};\n\nSketch.defaultProps = {\n  disableAlpha: false,\n  width: 200,\n  presetColors: ['#D0021B', '#F5A623', '#F8E71C', '#8B572A', '#7ED321', '#417505', '#BD10E0', '#9013FE', '#4A90E2', '#50E3C2', '#B8E986', '#000000', '#4A4A4A', '#9B9B9B', '#FFFFFF']\n};\n\nexports.default = (0, _common.ColorWrap)(Sketch);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SketchFields = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-param-reassign */\n\nvar SketchFields = exports.SketchFields = function SketchFields(_ref) {\n  var onChange = _ref.onChange,\n      rgb = _ref.rgb,\n      hsl = _ref.hsl,\n      hex = _ref.hex,\n      disableAlpha = _ref.disableAlpha;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      fields: {\n        display: 'flex',\n        paddingTop: '4px'\n      },\n      single: {\n        flex: '1',\n        paddingLeft: '6px'\n      },\n      alpha: {\n        flex: '1',\n        paddingLeft: '6px'\n      },\n      double: {\n        flex: '2'\n      },\n      input: {\n        width: '80%',\n        padding: '4px 10% 3px',\n        border: 'none',\n        boxShadow: 'inset 0 0 0 1px #ccc',\n        fontSize: '11px'\n      },\n      label: {\n        display: 'block',\n        textAlign: 'center',\n        fontSize: '11px',\n        color: '#222',\n        paddingTop: '3px',\n        paddingBottom: '4px',\n        textTransform: 'capitalize'\n      }\n    },\n    'disableAlpha': {\n      alpha: {\n        display: 'none'\n      }\n    }\n  }, { disableAlpha: disableAlpha });\n\n  var handleChange = function handleChange(data, e) {\n    if (data.hex) {\n      _color2.default.isValidHex(data.hex) && onChange({\n        hex: data.hex,\n        source: 'hex'\n      }, e);\n    } else if (data.r || data.g || data.b) {\n      onChange({\n        r: data.r || rgb.r,\n        g: data.g || rgb.g,\n        b: data.b || rgb.b,\n        a: rgb.a,\n        source: 'rgb'\n      }, e);\n    } else if (data.a) {\n      if (data.a < 0) {\n        data.a = 0;\n      } else if (data.a > 100) {\n        data.a = 100;\n      }\n\n      data.a /= 100;\n      onChange({\n        h: hsl.h,\n        s: hsl.s,\n        l: hsl.l,\n        a: data.a,\n        source: 'rgb'\n      }, e);\n    }\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.fields, className: 'flexbox-fix' },\n    _react2.default.createElement(\n      'div',\n      { style: styles.double },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'hex',\n        value: hex.replace('#', ''),\n        onChange: handleChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'r',\n        value: rgb.r,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'g',\n        value: rgb.g,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.single },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'b',\n        value: rgb.b,\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '255'\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.alpha },\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input, label: styles.label },\n        label: 'a',\n        value: Math.round(rgb.a * 100),\n        onChange: handleChange,\n        dragLabel: 'true',\n        dragMax: '100'\n      })\n    )\n  );\n};\n\nexports.default = SketchFields;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SketchPresetColors = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SketchPresetColors = exports.SketchPresetColors = function SketchPresetColors(_ref) {\n  var colors = _ref.colors,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      colors: {\n        margin: '0 -10px',\n        padding: '10px 0 0 10px',\n        borderTop: '1px solid #eee',\n        display: 'flex',\n        flexWrap: 'wrap',\n        position: 'relative'\n      },\n      swatchWrap: {\n        width: '16px',\n        height: '16px',\n        margin: '0 10px 10px 0'\n      },\n      swatch: {\n        borderRadius: '3px',\n        boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15)'\n      }\n    },\n    'no-presets': {\n      colors: {\n        display: 'none'\n      }\n    }\n  }, {\n    'no-presets': !colors || !colors.length\n  });\n\n  var handleClick = function handleClick(hex, e) {\n    onClick({\n      hex: hex,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.colors, className: 'flexbox-fix' },\n    colors.map(function (colorObjOrString) {\n      var c = typeof colorObjOrString === 'string' ? { color: colorObjOrString } : colorObjOrString;\n      var key = '' + c.color + (c.title || '');\n      return _react2.default.createElement(\n        'div',\n        { key: key, style: styles.swatchWrap },\n        _react2.default.createElement(_common.Swatch, _extends({}, c, {\n          style: styles.swatch,\n          onClick: handleClick,\n          onHover: onSwatchHover,\n          focusStyle: {\n            boxShadow: 'inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ' + c.color\n          }\n        }))\n      );\n    })\n  );\n};\n\nSketchPresetColors.propTypes = {\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    color: _propTypes2.default.string,\n    title: _propTypes2.default.string\n  })])).isRequired\n};\n\nexports.default = SketchPresetColors;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Slider = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _common = require('../common');\n\nvar _SliderSwatches = require('./SliderSwatches');\n\nvar _SliderSwatches2 = _interopRequireDefault(_SliderSwatches);\n\nvar _SliderPointer = require('./SliderPointer');\n\nvar _SliderPointer2 = _interopRequireDefault(_SliderPointer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Slider = exports.Slider = function Slider(_ref) {\n  var hsl = _ref.hsl,\n      onChange = _ref.onChange,\n      pointer = _ref.pointer,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      hue: {\n        height: '12px',\n        position: 'relative'\n      },\n      Hue: {\n        radius: '2px'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'slider-picker ' + className },\n    _react2.default.createElement(\n      'div',\n      { style: styles.hue },\n      _react2.default.createElement(_common.Hue, {\n        style: styles.Hue,\n        hsl: hsl,\n        pointer: pointer,\n        onChange: onChange\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatches },\n      _react2.default.createElement(_SliderSwatches2.default, { hsl: hsl, onClick: onChange })\n    )\n  );\n};\n\nSlider.defaultProps = {\n  pointer: _SliderPointer2.default\n};\n\nexports.default = (0, _common.ColorWrap)(Slider);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderPointer = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderPointer = exports.SliderPointer = function SliderPointer() {\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: '14px',\n        height: '14px',\n        borderRadius: '6px',\n        transform: 'translate(-7px, -1px)',\n        backgroundColor: 'rgb(248, 248, 248)',\n        boxShadow: '0 1px 4px 0 rgba(0, 0, 0, 0.37)'\n      }\n    }\n  });\n\n  return _react2.default.createElement('div', { style: styles.picker });\n};\n\nexports.default = SliderPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderSwatch = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderSwatch = exports.SliderSwatch = function SliderSwatch(_ref) {\n  var hsl = _ref.hsl,\n      offset = _ref.offset,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      active = _ref.active,\n      first = _ref.first,\n      last = _ref.last;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatch: {\n        height: '12px',\n        background: 'hsl(' + hsl.h + ', 50%, ' + offset * 100 + '%)',\n        cursor: 'pointer'\n      }\n    },\n    'first': {\n      swatch: {\n        borderRadius: '2px 0 0 2px'\n      }\n    },\n    'last': {\n      swatch: {\n        borderRadius: '0 2px 2px 0'\n      }\n    },\n    'active': {\n      swatch: {\n        transform: 'scaleY(1.8)',\n        borderRadius: '3.6px/2px'\n      }\n    }\n  }, { active: active, first: first, last: last });\n\n  var handleClick = function handleClick(e) {\n    return onClick({\n      h: hsl.h,\n      s: 0.5,\n      l: offset,\n      source: 'hsl'\n    }, e);\n  };\n\n  return _react2.default.createElement('div', { style: styles.swatch, onClick: handleClick });\n};\n\nexports.default = SliderSwatch;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SliderSwatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _SliderSwatch = require('./SliderSwatch');\n\nvar _SliderSwatch2 = _interopRequireDefault(_SliderSwatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SliderSwatches = exports.SliderSwatches = function SliderSwatches(_ref) {\n  var onClick = _ref.onClick,\n      hsl = _ref.hsl;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      swatches: {\n        marginTop: '20px'\n      },\n      swatch: {\n        boxSizing: 'border-box',\n        width: '20%',\n        paddingRight: '1px',\n        float: 'left'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.swatches },\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.80',\n        active: Math.round(hsl.l * 100) / 100 === 0.80 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick,\n        first: true\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.65',\n        active: Math.round(hsl.l * 100) / 100 === 0.65 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.50',\n        active: Math.round(hsl.l * 100) / 100 === 0.50 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.35',\n        active: Math.round(hsl.l * 100) / 100 === 0.35 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick\n      })\n    ),\n    _react2.default.createElement(\n      'div',\n      { style: styles.swatch },\n      _react2.default.createElement(_SliderSwatch2.default, {\n        hsl: hsl,\n        offset: '.20',\n        active: Math.round(hsl.l * 100) / 100 === 0.20 && Math.round(hsl.s * 100) / 100 === 0.50,\n        onClick: onClick,\n        last: true\n      })\n    ),\n    _react2.default.createElement('div', { style: styles.clear })\n  );\n};\n\nexports.default = SliderSwatches;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Swatches = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _materialColors = require('material-colors');\n\nvar material = _interopRequireWildcard(_materialColors);\n\nvar _common = require('../common');\n\nvar _SwatchesGroup = require('./SwatchesGroup');\n\nvar _SwatchesGroup2 = _interopRequireDefault(_SwatchesGroup);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Swatches = exports.Swatches = function Swatches(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      colors = _ref.colors,\n      hex = _ref.hex,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      picker: {\n        width: width,\n        height: height\n      },\n      overflow: {\n        height: height,\n        overflowY: 'scroll'\n      },\n      body: {\n        padding: '16px 0 6px 16px'\n      },\n      clear: {\n        clear: 'both'\n      }\n    }\n  });\n\n  var handleChange = function handleChange(data, e) {\n    _color2.default.isValidHex(data) && onChange({\n      hex: data,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.picker, className: 'swatches-picker ' + className },\n    _react2.default.createElement(\n      _common.Raised,\n      null,\n      _react2.default.createElement(\n        'div',\n        { style: styles.overflow },\n        _react2.default.createElement(\n          'div',\n          { style: styles.body },\n          (0, _map2.default)(colors, function (group) {\n            return _react2.default.createElement(_SwatchesGroup2.default, {\n              key: group.toString(),\n              group: group,\n              active: hex,\n              onClick: handleChange,\n              onSwatchHover: onSwatchHover\n            });\n          }),\n          _react2.default.createElement('div', { style: styles.clear })\n        )\n      )\n    )\n  );\n};\n\nSwatches.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.arrayOf(_propTypes2.default.string))\n\n  /* eslint-disable max-len */\n};Swatches.defaultProps = {\n  width: 320,\n  height: 240,\n  colors: [[material.red['900'], material.red['700'], material.red['500'], material.red['300'], material.red['100']], [material.pink['900'], material.pink['700'], material.pink['500'], material.pink['300'], material.pink['100']], [material.purple['900'], material.purple['700'], material.purple['500'], material.purple['300'], material.purple['100']], [material.deepPurple['900'], material.deepPurple['700'], material.deepPurple['500'], material.deepPurple['300'], material.deepPurple['100']], [material.indigo['900'], material.indigo['700'], material.indigo['500'], material.indigo['300'], material.indigo['100']], [material.blue['900'], material.blue['700'], material.blue['500'], material.blue['300'], material.blue['100']], [material.lightBlue['900'], material.lightBlue['700'], material.lightBlue['500'], material.lightBlue['300'], material.lightBlue['100']], [material.cyan['900'], material.cyan['700'], material.cyan['500'], material.cyan['300'], material.cyan['100']], [material.teal['900'], material.teal['700'], material.teal['500'], material.teal['300'], material.teal['100']], ['#194D33', material.green['700'], material.green['500'], material.green['300'], material.green['100']], [material.lightGreen['900'], material.lightGreen['700'], material.lightGreen['500'], material.lightGreen['300'], material.lightGreen['100']], [material.lime['900'], material.lime['700'], material.lime['500'], material.lime['300'], material.lime['100']], [material.yellow['900'], material.yellow['700'], material.yellow['500'], material.yellow['300'], material.yellow['100']], [material.amber['900'], material.amber['700'], material.amber['500'], material.amber['300'], material.amber['100']], [material.orange['900'], material.orange['700'], material.orange['500'], material.orange['300'], material.orange['100']], [material.deepOrange['900'], material.deepOrange['700'], material.deepOrange['500'], material.deepOrange['300'], material.deepOrange['100']], [material.brown['900'], material.brown['700'], material.brown['500'], material.brown['300'], material.brown['100']], [material.blueGrey['900'], material.blueGrey['700'], material.blueGrey['500'], material.blueGrey['300'], material.blueGrey['100']], ['#000000', '#525252', '#969696', '#D9D9D9', '#FFFFFF']]\n};\n\nexports.default = (0, _common.ColorWrap)(Swatches);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwatchesColor = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SwatchesColor = exports.SwatchesColor = function SwatchesColor(_ref) {\n  var color = _ref.color,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === undefined ? function () {} : _ref$onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      first = _ref.first,\n      last = _ref.last,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      color: {\n        width: '40px',\n        height: '24px',\n        cursor: 'pointer',\n        background: color,\n        marginBottom: '1px'\n      },\n      check: {\n        fill: _color2.default.getContrastingColor(color),\n        marginLeft: '8px',\n        display: 'none'\n      }\n    },\n    'first': {\n      color: {\n        overflow: 'hidden',\n        borderRadius: '2px 2px 0 0'\n      }\n    },\n    'last': {\n      color: {\n        overflow: 'hidden',\n        borderRadius: '0 0 2px 2px'\n      }\n    },\n    'active': {\n      check: {\n        display: 'block'\n      }\n    },\n    'color-#FFFFFF': {\n      color: {\n        boxShadow: 'inset 0 0 0 1px #ddd'\n      },\n      check: {\n        fill: '#333'\n      }\n    },\n    'transparent': {\n      check: {\n        fill: '#333'\n      }\n    }\n  }, {\n    first: first,\n    last: last,\n    active: active,\n    'color-#FFFFFF': color === '#FFFFFF',\n    'transparent': color === 'transparent'\n  });\n\n  return _react2.default.createElement(\n    _common.Swatch,\n    {\n      color: color,\n      style: styles.color,\n      onClick: onClick,\n      onHover: onSwatchHover,\n      focusStyle: { boxShadow: '0 0 4px ' + color }\n    },\n    _react2.default.createElement(\n      'div',\n      { style: styles.check },\n      _react2.default.createElement(\n        'svg',\n        { style: { width: '24px', height: '24px' }, viewBox: '0 0 24 24' },\n        _react2.default.createElement('path', { d: 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z' })\n      )\n    )\n  );\n};\n\nexports.default = SwatchesColor;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwatchesGroup = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _SwatchesColor = require('./SwatchesColor');\n\nvar _SwatchesColor2 = _interopRequireDefault(_SwatchesColor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SwatchesGroup = exports.SwatchesGroup = function SwatchesGroup(_ref) {\n  var onClick = _ref.onClick,\n      onSwatchHover = _ref.onSwatchHover,\n      group = _ref.group,\n      active = _ref.active;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      group: {\n        paddingBottom: '10px',\n        width: '40px',\n        float: 'left',\n        marginRight: '10px'\n      }\n    }\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.group },\n    (0, _map2.default)(group, function (color, i) {\n      return _react2.default.createElement(_SwatchesColor2.default, {\n        key: color,\n        color: color,\n        active: color.toLowerCase() === active,\n        first: i === 0,\n        last: i === group.length - 1,\n        onClick: onClick,\n        onSwatchHover: onSwatchHover\n      });\n    })\n  );\n};\n\nexports.default = SwatchesGroup;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Twitter = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactcss = require('reactcss');\n\nvar _reactcss2 = _interopRequireDefault(_reactcss);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _color = require('../../helpers/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _common = require('../common');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Twitter = exports.Twitter = function Twitter(_ref) {\n  var onChange = _ref.onChange,\n      onSwatchHover = _ref.onSwatchHover,\n      hex = _ref.hex,\n      colors = _ref.colors,\n      width = _ref.width,\n      triangle = _ref.triangle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? '' : _ref$className;\n\n  var styles = (0, _reactcss2.default)({\n    'default': {\n      card: {\n        width: width,\n        background: '#fff',\n        border: '0 solid rgba(0,0,0,0.25)',\n        boxShadow: '0 1px 4px rgba(0,0,0,0.25)',\n        borderRadius: '4px',\n        position: 'relative'\n      },\n      body: {\n        padding: '15px 9px 9px 15px'\n      },\n      label: {\n        fontSize: '18px',\n        color: '#fff'\n      },\n      triangle: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 9px 10px 9px',\n        borderColor: 'transparent transparent #fff transparent',\n        position: 'absolute'\n      },\n      triangleShadow: {\n        width: '0px',\n        height: '0px',\n        borderStyle: 'solid',\n        borderWidth: '0 9px 10px 9px',\n        borderColor: 'transparent transparent rgba(0,0,0,.1) transparent',\n        position: 'absolute'\n      },\n      hash: {\n        background: '#F0F0F0',\n        height: '30px',\n        width: '30px',\n        borderRadius: '4px 0 0 4px',\n        float: 'left',\n        color: '#98A1A4',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      input: {\n        width: '100px',\n        fontSize: '14px',\n        color: '#666',\n        border: '0px',\n        outline: 'none',\n        height: '28px',\n        boxShadow: 'inset 0 0 0 1px #F0F0F0',\n        boxSizing: 'content-box',\n        borderRadius: '0 4px 4px 0',\n        float: 'left',\n        paddingLeft: '8px'\n      },\n      swatch: {\n        width: '30px',\n        height: '30px',\n        float: 'left',\n        borderRadius: '4px',\n        margin: '0 6px 6px 0'\n      },\n      clear: {\n        clear: 'both'\n      }\n    },\n    'hide-triangle': {\n      triangle: {\n        display: 'none'\n      },\n      triangleShadow: {\n        display: 'none'\n      }\n    },\n    'top-left-triangle': {\n      triangle: {\n        top: '-10px',\n        left: '12px'\n      },\n      triangleShadow: {\n        top: '-11px',\n        left: '12px'\n      }\n    },\n    'top-right-triangle': {\n      triangle: {\n        top: '-10px',\n        right: '12px'\n      },\n      triangleShadow: {\n        top: '-11px',\n        right: '12px'\n      }\n    }\n  }, {\n    'hide-triangle': triangle === 'hide',\n    'top-left-triangle': triangle === 'top-left',\n    'top-right-triangle': triangle === 'top-right'\n  });\n\n  var handleChange = function handleChange(hexcode, e) {\n    _color2.default.isValidHex(hexcode) && onChange({\n      hex: hexcode,\n      source: 'hex'\n    }, e);\n  };\n\n  return _react2.default.createElement(\n    'div',\n    { style: styles.card, className: 'twitter-picker ' + className },\n    _react2.default.createElement('div', { style: styles.triangleShadow }),\n    _react2.default.createElement('div', { style: styles.triangle }),\n    _react2.default.createElement(\n      'div',\n      { style: styles.body },\n      (0, _map2.default)(colors, function (c, i) {\n        return _react2.default.createElement(_common.Swatch, {\n          key: i,\n          color: c,\n          hex: c,\n          style: styles.swatch,\n          onClick: handleChange,\n          onHover: onSwatchHover,\n          focusStyle: {\n            boxShadow: '0 0 4px ' + c\n          }\n        });\n      }),\n      _react2.default.createElement(\n        'div',\n        { style: styles.hash },\n        '#'\n      ),\n      _react2.default.createElement(_common.EditableInput, {\n        style: { input: styles.input },\n        value: hex.replace('#', ''),\n        onChange: handleChange\n      }),\n      _react2.default.createElement('div', { style: styles.clear })\n    )\n  );\n};\n\nTwitter.propTypes = {\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  triangle: _propTypes2.default.oneOf(['hide', 'top-left', 'top-right']),\n  colors: _propTypes2.default.arrayOf(_propTypes2.default.string)\n};\n\nTwitter.defaultProps = {\n  width: 276,\n  colors: ['#FF6900', '#FCB900', '#7BDCB5', '#00D084', '#8ED1FC', '#0693E3', '#ABB8C3', '#EB144C', '#F78DA7', '#9900EF'],\n  triangle: 'top-left'\n};\n\nexports.default = (0, _common.ColorWrap)(Twitter);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n  var containerWidth = container.clientWidth;\n  var containerHeight = container.clientHeight;\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (props.direction === 'vertical') {\n    var a = void 0;\n    if (top < 0) {\n      a = 0;\n    } else if (top > containerHeight) {\n      a = 1;\n    } else {\n      a = Math.round(top * 100 / containerHeight) / 100;\n    }\n\n    if (props.hsl.a !== a) {\n      return {\n        h: props.hsl.h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: a,\n        source: 'rgb'\n      };\n    }\n  } else {\n    var _a = void 0;\n    if (left < 0) {\n      _a = 0;\n    } else if (left > containerWidth) {\n      _a = 1;\n    } else {\n      _a = Math.round(left * 100 / containerWidth) / 100;\n    }\n\n    if (props.a !== _a) {\n      return {\n        h: props.hsl.h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: _a,\n        source: 'rgb'\n      };\n    }\n  }\n  return null;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar checkboardCache = {};\n\nvar render = exports.render = function render(c1, c2, size, serverCanvas) {\n  if (typeof document === 'undefined' && !serverCanvas) {\n    return null;\n  }\n  var canvas = serverCanvas ? new serverCanvas() : document.createElement('canvas');\n  canvas.width = size * 2;\n  canvas.height = size * 2;\n  var ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return null;\n  } // If no context can be found, return early.\n  ctx.fillStyle = c1;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = c2;\n  ctx.fillRect(0, 0, size, size);\n  ctx.translate(size, size);\n  ctx.fillRect(0, 0, size, size);\n  return canvas.toDataURL();\n};\n\nvar get = exports.get = function get(c1, c2, size, serverCanvas) {\n  var key = c1 + '-' + c2 + '-' + size + (serverCanvas ? '-server' : '');\n  var checkboard = render(c1, c2, size, serverCanvas);\n\n  if (checkboardCache[key]) {\n    return checkboardCache[key];\n  }\n  checkboardCache[key] = checkboard;\n  return checkboard;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.red = undefined;\n\nvar _each = require('lodash/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nvar _tinycolor = require('tinycolor2');\n\nvar _tinycolor2 = _interopRequireDefault(_tinycolor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  simpleCheckForValidColor: function simpleCheckForValidColor(data) {\n    var keysToCheck = ['r', 'g', 'b', 'a', 'h', 's', 'l', 'v'];\n    var checked = 0;\n    var passed = 0;\n    (0, _each2.default)(keysToCheck, function (letter) {\n      if (data[letter]) {\n        checked += 1;\n        if (!isNaN(data[letter])) {\n          passed += 1;\n        }\n        if (letter === 's' || letter === 'l') {\n          var percentPatt = /^\\d+%$/;\n          if (percentPatt.test(data[letter])) {\n            passed += 1;\n          }\n        }\n      }\n    });\n    return checked === passed ? data : false;\n  },\n  toState: function toState(data, oldHue) {\n    var color = data.hex ? (0, _tinycolor2.default)(data.hex) : (0, _tinycolor2.default)(data);\n    var hsl = color.toHsl();\n    var hsv = color.toHsv();\n    var rgb = color.toRgb();\n    var hex = color.toHex();\n    if (hsl.s === 0) {\n      hsl.h = oldHue || 0;\n      hsv.h = oldHue || 0;\n    }\n    var transparent = hex === '000000' && rgb.a === 0;\n\n    return {\n      hsl: hsl,\n      hex: transparent ? 'transparent' : '#' + hex,\n      rgb: rgb,\n      hsv: hsv,\n      oldHue: data.h || oldHue || hsl.h,\n      source: data.source\n    };\n  },\n  isValidHex: function isValidHex(hex) {\n    // disable hex4 and hex8\n    var lh = String(hex).charAt(0) === '#' ? 1 : 0;\n    return hex.length !== 4 + lh && hex.length < 7 + lh && (0, _tinycolor2.default)(hex).isValid();\n  },\n  getContrastingColor: function getContrastingColor(data) {\n    if (!data) {\n      return '#fff';\n    }\n    var col = this.toState(data);\n    if (col.hex === 'transparent') {\n      return 'rgba(0,0,0,0.4)';\n    }\n    var yiq = (col.rgb.r * 299 + col.rgb.g * 587 + col.rgb.b * 114) / 1000;\n    return yiq >= 128 ? '#000' : '#fff';\n  }\n};\nvar red = exports.red = {\n  hsl: { a: 1, h: 0, l: 0.5, s: 1 },\n  hex: '#ff0000',\n  rgb: { r: 255, g: 0, b: 0, a: 1 },\n  hsv: { h: 0, s: 1, v: 1, a: 1 }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n  var containerWidth = container.clientWidth;\n  var containerHeight = container.clientHeight;\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (props.direction === 'vertical') {\n    var h = void 0;\n    if (top < 0) {\n      h = 359;\n    } else if (top > containerHeight) {\n      h = 0;\n    } else {\n      var percent = -(top * 100 / containerHeight) + 100;\n      h = 360 * percent / 100;\n    }\n\n    if (props.hsl.h !== h) {\n      return {\n        h: h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: props.hsl.a,\n        source: 'rgb'\n      };\n    }\n  } else {\n    var _h = void 0;\n    if (left < 0) {\n      _h = 0;\n    } else if (left > containerWidth) {\n      _h = 359;\n    } else {\n      var _percent = left * 100 / containerWidth;\n      _h = 360 * _percent / 100;\n    }\n\n    if (props.hsl.h !== _h) {\n      return {\n        h: _h,\n        s: props.hsl.s,\n        l: props.hsl.l,\n        a: props.hsl.a,\n        source: 'rgb'\n      };\n    }\n  }\n  return null;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleFocus = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable no-invalid-this */\n\n\nvar handleFocus = exports.handleFocus = function handleFocus(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n  return function (_React$Component) {\n    _inherits(Focus, _React$Component);\n\n    function Focus() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Focus);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Focus.__proto__ || Object.getPrototypeOf(Focus)).call.apply(_ref, [this].concat(args))), _this), _this.state = { focus: false }, _this.handleFocus = function () {\n        return _this.setState({ focus: true });\n      }, _this.handleBlur = function () {\n        return _this.setState({ focus: false });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Focus, [{\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(\n          Span,\n          { onFocus: this.handleFocus, onBlur: this.handleBlur },\n          _react2.default.createElement(Component, _extends({}, this.props, this.state))\n        );\n      }\n    }]);\n\n    return Focus;\n  }(_react2.default.Component);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar calculateChange = exports.calculateChange = function calculateChange(e, skip, props, container) {\n  e.preventDefault();\n\n  var _container$getBoundin = container.getBoundingClientRect(),\n      containerWidth = _container$getBoundin.width,\n      containerHeight = _container$getBoundin.height;\n\n  var x = typeof e.pageX === 'number' ? e.pageX : e.touches[0].pageX;\n  var y = typeof e.pageY === 'number' ? e.pageY : e.touches[0].pageY;\n  var left = x - (container.getBoundingClientRect().left + window.pageXOffset);\n  var top = y - (container.getBoundingClientRect().top + window.pageYOffset);\n\n  if (left < 0) {\n    left = 0;\n  } else if (left > containerWidth) {\n    left = containerWidth;\n  } else if (top < 0) {\n    top = 0;\n  } else if (top > containerHeight) {\n    top = containerHeight;\n  }\n\n  var saturation = left * 100 / containerWidth;\n  var bright = -(top * 100 / containerHeight) + 100;\n\n  return {\n    h: props.hsl.h,\n    s: saturation,\n    v: bright,\n    a: props.hsl.a,\n    source: 'rgb'\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomPicker = exports.TwitterPicker = exports.SwatchesPicker = exports.SliderPicker = exports.SketchPicker = exports.PhotoshopPicker = exports.MaterialPicker = exports.HuePicker = exports.GithubPicker = exports.CompactPicker = exports.ChromePicker = exports.default = exports.CirclePicker = exports.BlockPicker = exports.AlphaPicker = undefined;\n\nvar _Alpha = require('./components/alpha/Alpha');\n\nObject.defineProperty(exports, 'AlphaPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Alpha).default;\n  }\n});\n\nvar _Block = require('./components/block/Block');\n\nObject.defineProperty(exports, 'BlockPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Block).default;\n  }\n});\n\nvar _Circle = require('./components/circle/Circle');\n\nObject.defineProperty(exports, 'CirclePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Circle).default;\n  }\n});\n\nvar _Chrome = require('./components/chrome/Chrome');\n\nObject.defineProperty(exports, 'ChromePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Chrome).default;\n  }\n});\n\nvar _Compact = require('./components/compact/Compact');\n\nObject.defineProperty(exports, 'CompactPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Compact).default;\n  }\n});\n\nvar _Github = require('./components/github/Github');\n\nObject.defineProperty(exports, 'GithubPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Github).default;\n  }\n});\n\nvar _Hue = require('./components/hue/Hue');\n\nObject.defineProperty(exports, 'HuePicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hue).default;\n  }\n});\n\nvar _Material = require('./components/material/Material');\n\nObject.defineProperty(exports, 'MaterialPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Material).default;\n  }\n});\n\nvar _Photoshop = require('./components/photoshop/Photoshop');\n\nObject.defineProperty(exports, 'PhotoshopPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Photoshop).default;\n  }\n});\n\nvar _Sketch = require('./components/sketch/Sketch');\n\nObject.defineProperty(exports, 'SketchPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Sketch).default;\n  }\n});\n\nvar _Slider = require('./components/slider/Slider');\n\nObject.defineProperty(exports, 'SliderPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Slider).default;\n  }\n});\n\nvar _Swatches = require('./components/swatches/Swatches');\n\nObject.defineProperty(exports, 'SwatchesPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Swatches).default;\n  }\n});\n\nvar _Twitter = require('./components/twitter/Twitter');\n\nObject.defineProperty(exports, 'TwitterPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Twitter).default;\n  }\n});\n\nvar _ColorWrap = require('./components/common/ColorWrap');\n\nObject.defineProperty(exports, 'CustomPicker', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ColorWrap).default;\n  }\n});\n\nvar _Chrome2 = _interopRequireDefault(_Chrome);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Chrome2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.autoprefix = undefined;\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar transforms = {\n  borderRadius: function borderRadius(value) {\n    return {\n      msBorderRadius: value,\n      MozBorderRadius: value,\n      OBorderRadius: value,\n      WebkitBorderRadius: value,\n      borderRadius: value\n    };\n  },\n  boxShadow: function boxShadow(value) {\n    return {\n      msBoxShadow: value,\n      MozBoxShadow: value,\n      OBoxShadow: value,\n      WebkitBoxShadow: value,\n      boxShadow: value\n    };\n  },\n  userSelect: function userSelect(value) {\n    return {\n      WebkitTouchCallout: value,\n      KhtmlUserSelect: value,\n      MozUserSelect: value,\n      msUserSelect: value,\n      WebkitUserSelect: value,\n      userSelect: value\n    };\n  },\n\n  flex: function flex(value) {\n    return {\n      WebkitBoxFlex: value,\n      MozBoxFlex: value,\n      WebkitFlex: value,\n      msFlex: value,\n      flex: value\n    };\n  },\n  flexBasis: function flexBasis(value) {\n    return {\n      WebkitFlexBasis: value,\n      flexBasis: value\n    };\n  },\n  justifyContent: function justifyContent(value) {\n    return {\n      WebkitJustifyContent: value,\n      justifyContent: value\n    };\n  },\n\n  transition: function transition(value) {\n    return {\n      msTransition: value,\n      MozTransition: value,\n      OTransition: value,\n      WebkitTransition: value,\n      transition: value\n    };\n  },\n\n  transform: function transform(value) {\n    return {\n      msTransform: value,\n      MozTransform: value,\n      OTransform: value,\n      WebkitTransform: value,\n      transform: value\n    };\n  },\n  absolute: function absolute(value) {\n    var direction = value && value.split(' ');\n    return {\n      position: 'absolute',\n      top: direction && direction[0],\n      right: direction && direction[1],\n      bottom: direction && direction[2],\n      left: direction && direction[3]\n    };\n  },\n  extend: function extend(name, otherElementStyles) {\n    var otherStyle = otherElementStyles[name];\n    if (otherStyle) {\n      return otherStyle;\n    }\n    return {\n      'extend': name\n    };\n  }\n};\n\nvar autoprefix = exports.autoprefix = function autoprefix(elements) {\n  var prefixed = {};\n  (0, _forOwn3.default)(elements, function (styles, element) {\n    var expanded = {};\n    (0, _forOwn3.default)(styles, function (value, key) {\n      var transform = transforms[key];\n      if (transform) {\n        expanded = _extends({}, expanded, transform(value));\n      } else {\n        expanded[key] = value;\n      }\n    });\n    prefixed[element] = expanded;\n  });\n  return prefixed;\n};\n\nexports.default = autoprefix;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.active = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar active = exports.active = function active(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n\n  return function (_React$Component) {\n    _inherits(Active, _React$Component);\n\n    function Active() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Active);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Active.__proto__ || Object.getPrototypeOf(Active)).call.apply(_ref, [this].concat(args))), _this), _this.state = { active: false }, _this.handleMouseDown = function () {\n        return _this.setState({ active: true });\n      }, _this.handleMouseUp = function () {\n        return _this.setState({ active: false });\n      }, _this.render = function () {\n        return _react2.default.createElement(\n          Span,\n          { onMouseDown: _this.handleMouseDown, onMouseUp: _this.handleMouseUp },\n          _react2.default.createElement(Component, _extends({}, _this.props, _this.state))\n        );\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return Active;\n  }(_react2.default.Component);\n};\n\nexports.default = active;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hover = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar hover = exports.hover = function hover(Component) {\n  var Span = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'span';\n\n  return function (_React$Component) {\n    _inherits(Hover, _React$Component);\n\n    function Hover() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Hover);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Hover.__proto__ || Object.getPrototypeOf(Hover)).call.apply(_ref, [this].concat(args))), _this), _this.state = { hover: false }, _this.handleMouseOver = function () {\n        return _this.setState({ hover: true });\n      }, _this.handleMouseOut = function () {\n        return _this.setState({ hover: false });\n      }, _this.render = function () {\n        return _react2.default.createElement(\n          Span,\n          { onMouseOver: _this.handleMouseOver, onMouseOut: _this.handleMouseOut },\n          _react2.default.createElement(Component, _extends({}, _this.props, _this.state))\n        );\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return Hover;\n  }(_react2.default.Component);\n};\n\nexports.default = hover;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.flattenNames = undefined;\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _isPlainObject2 = require('lodash/isPlainObject');\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar flattenNames = exports.flattenNames = function flattenNames() {\n  var things = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n  var names = [];\n\n  (0, _map3.default)(things, function (thing) {\n    if (Array.isArray(thing)) {\n      flattenNames(thing).map(function (name) {\n        return names.push(name);\n      });\n    } else if ((0, _isPlainObject3.default)(thing)) {\n      (0, _forOwn3.default)(thing, function (value, key) {\n        value === true && names.push(key);\n        names.push(key + '-' + value);\n      });\n    } else if ((0, _isString3.default)(thing)) {\n      names.push(thing);\n    }\n  });\n\n  return names;\n};\n\nexports.default = flattenNames;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactCSS = exports.loop = exports.handleActive = exports.handleHover = exports.hover = undefined;\n\nvar _flattenNames = require('./flattenNames');\n\nvar _flattenNames2 = _interopRequireDefault(_flattenNames);\n\nvar _mergeClasses = require('./mergeClasses');\n\nvar _mergeClasses2 = _interopRequireDefault(_mergeClasses);\n\nvar _autoprefix = require('./autoprefix');\n\nvar _autoprefix2 = _interopRequireDefault(_autoprefix);\n\nvar _hover2 = require('./components/hover');\n\nvar _hover3 = _interopRequireDefault(_hover2);\n\nvar _active = require('./components/active');\n\nvar _active2 = _interopRequireDefault(_active);\n\nvar _loop2 = require('./loop');\n\nvar _loop3 = _interopRequireDefault(_loop2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.hover = _hover3.default;\nexports.handleHover = _hover3.default;\nexports.handleActive = _active2.default;\nexports.loop = _loop3.default;\nvar ReactCSS = exports.ReactCSS = function ReactCSS(classes) {\n  for (var _len = arguments.length, activations = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    activations[_key - 1] = arguments[_key];\n  }\n\n  var activeNames = (0, _flattenNames2.default)(activations);\n  var merged = (0, _mergeClasses2.default)(classes, activeNames);\n  return (0, _autoprefix2.default)(merged);\n};\n\nexports.default = ReactCSS;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar loopable = function loopable(i, length) {\n  var props = {};\n  var setProp = function setProp(name) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    props[name] = value;\n  };\n\n  i === 0 && setProp('first-child');\n  i === length - 1 && setProp('last-child');\n  (i === 0 || i % 2 === 0) && setProp('even');\n  Math.abs(i % 2) === 1 && setProp('odd');\n  setProp('nth-child', i);\n\n  return props;\n};\n\nexports.default = loopable;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mergeClasses = undefined;\n\nvar _forOwn2 = require('lodash/forOwn');\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _cloneDeep2 = require('lodash/cloneDeep');\n\nvar _cloneDeep3 = _interopRequireDefault(_cloneDeep2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mergeClasses = exports.mergeClasses = function mergeClasses(classes) {\n  var activeNames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var styles = classes.default && (0, _cloneDeep3.default)(classes.default) || {};\n  activeNames.map(function (name) {\n    var toMerge = classes[name];\n    if (toMerge) {\n      (0, _forOwn3.default)(toMerge, function (value, key) {\n        if (!styles[key]) {\n          styles[key] = {};\n        }\n\n        styles[key] = _extends({}, styles[key], toMerge[key]);\n      });\n    }\n\n    return name;\n  });\n  return styles;\n};\n\nexports.default = mergeClasses;","var characterMap = {\n\t\"À\": \"A\",\n\t\"Á\": \"A\",\n\t\"Â\": \"A\",\n\t\"Ã\": \"A\",\n\t\"Ä\": \"A\",\n\t\"Å\": \"A\",\n\t\"Ấ\": \"A\",\n\t\"Ắ\": \"A\",\n\t\"Ẳ\": \"A\",\n\t\"Ẵ\": \"A\",\n\t\"Ặ\": \"A\",\n\t\"Æ\": \"AE\",\n\t\"Ầ\": \"A\",\n\t\"Ằ\": \"A\",\n\t\"Ȃ\": \"A\",\n\t\"Ả\": \"A\",\n\t\"Ạ\": \"A\",\n\t\"Ẩ\": \"A\",\n\t\"Ẫ\": \"A\",\n\t\"Ậ\": \"A\",\n\t\"Ç\": \"C\",\n\t\"Ḉ\": \"C\",\n\t\"È\": \"E\",\n\t\"É\": \"E\",\n\t\"Ê\": \"E\",\n\t\"Ë\": \"E\",\n\t\"Ế\": \"E\",\n\t\"Ḗ\": \"E\",\n\t\"Ề\": \"E\",\n\t\"Ḕ\": \"E\",\n\t\"Ḝ\": \"E\",\n\t\"Ȇ\": \"E\",\n\t\"Ẻ\": \"E\",\n\t\"Ẽ\": \"E\",\n\t\"Ẹ\": \"E\",\n\t\"Ể\": \"E\",\n\t\"Ễ\": \"E\",\n\t\"Ệ\": \"E\",\n\t\"Ì\": \"I\",\n\t\"Í\": \"I\",\n\t\"Î\": \"I\",\n\t\"Ï\": \"I\",\n\t\"Ḯ\": \"I\",\n\t\"Ȋ\": \"I\",\n\t\"Ỉ\": \"I\",\n\t\"Ị\": \"I\",\n\t\"Ð\": \"D\",\n\t\"Ñ\": \"N\",\n\t\"Ò\": \"O\",\n\t\"Ó\": \"O\",\n\t\"Ô\": \"O\",\n\t\"Õ\": \"O\",\n\t\"Ö\": \"O\",\n\t\"Ø\": \"O\",\n\t\"Ố\": \"O\",\n\t\"Ṍ\": \"O\",\n\t\"Ṓ\": \"O\",\n\t\"Ȏ\": \"O\",\n\t\"Ỏ\": \"O\",\n\t\"Ọ\": \"O\",\n\t\"Ổ\": \"O\",\n\t\"Ỗ\": \"O\",\n\t\"Ộ\": \"O\",\n\t\"Ờ\": \"O\",\n\t\"Ở\": \"O\",\n\t\"Ỡ\": \"O\",\n\t\"Ớ\": \"O\",\n\t\"Ợ\": \"O\",\n\t\"Ù\": \"U\",\n\t\"Ú\": \"U\",\n\t\"Û\": \"U\",\n\t\"Ü\": \"U\",\n\t\"Ủ\": \"U\",\n\t\"Ụ\": \"U\",\n\t\"Ử\": \"U\",\n\t\"Ữ\": \"U\",\n\t\"Ự\": \"U\",\n\t\"Ý\": \"Y\",\n\t\"à\": \"a\",\n\t\"á\": \"a\",\n\t\"â\": \"a\",\n\t\"ã\": \"a\",\n\t\"ä\": \"a\",\n\t\"å\": \"a\",\n\t\"ấ\": \"a\",\n\t\"ắ\": \"a\",\n\t\"ẳ\": \"a\",\n\t\"ẵ\": \"a\",\n\t\"ặ\": \"a\",\n\t\"æ\": \"ae\",\n\t\"ầ\": \"a\",\n\t\"ằ\": \"a\",\n\t\"ȃ\": \"a\",\n\t\"ả\": \"a\",\n\t\"ạ\": \"a\",\n\t\"ẩ\": \"a\",\n\t\"ẫ\": \"a\",\n\t\"ậ\": \"a\",\n\t\"ç\": \"c\",\n\t\"ḉ\": \"c\",\n\t\"è\": \"e\",\n\t\"é\": \"e\",\n\t\"ê\": \"e\",\n\t\"ë\": \"e\",\n\t\"ế\": \"e\",\n\t\"ḗ\": \"e\",\n\t\"ề\": \"e\",\n\t\"ḕ\": \"e\",\n\t\"ḝ\": \"e\",\n\t\"ȇ\": \"e\",\n\t\"ẻ\": \"e\",\n\t\"ẽ\": \"e\",\n\t\"ẹ\": \"e\",\n\t\"ể\": \"e\",\n\t\"ễ\": \"e\",\n\t\"ệ\": \"e\",\n\t\"ì\": \"i\",\n\t\"í\": \"i\",\n\t\"î\": \"i\",\n\t\"ï\": \"i\",\n\t\"ḯ\": \"i\",\n\t\"ȋ\": \"i\",\n\t\"ỉ\": \"i\",\n\t\"ị\": \"i\",\n\t\"ð\": \"d\",\n\t\"ñ\": \"n\",\n\t\"ò\": \"o\",\n\t\"ó\": \"o\",\n\t\"ô\": \"o\",\n\t\"õ\": \"o\",\n\t\"ö\": \"o\",\n\t\"ø\": \"o\",\n\t\"ố\": \"o\",\n\t\"ṍ\": \"o\",\n\t\"ṓ\": \"o\",\n\t\"ȏ\": \"o\",\n\t\"ỏ\": \"o\",\n\t\"ọ\": \"o\",\n\t\"ổ\": \"o\",\n\t\"ỗ\": \"o\",\n\t\"ộ\": \"o\",\n\t\"ờ\": \"o\",\n\t\"ở\": \"o\",\n\t\"ỡ\": \"o\",\n\t\"ớ\": \"o\",\n\t\"ợ\": \"o\",\n\t\"ù\": \"u\",\n\t\"ú\": \"u\",\n\t\"û\": \"u\",\n\t\"ü\": \"u\",\n\t\"ủ\": \"u\",\n\t\"ụ\": \"u\",\n\t\"ử\": \"u\",\n\t\"ữ\": \"u\",\n\t\"ự\": \"u\",\n\t\"ý\": \"y\",\n\t\"ÿ\": \"y\",\n\t\"Ā\": \"A\",\n\t\"ā\": \"a\",\n\t\"Ă\": \"A\",\n\t\"ă\": \"a\",\n\t\"Ą\": \"A\",\n\t\"ą\": \"a\",\n\t\"Ć\": \"C\",\n\t\"ć\": \"c\",\n\t\"Ĉ\": \"C\",\n\t\"ĉ\": \"c\",\n\t\"Ċ\": \"C\",\n\t\"ċ\": \"c\",\n\t\"Č\": \"C\",\n\t\"č\": \"c\",\n\t\"C̆\": \"C\",\n\t\"c̆\": \"c\",\n\t\"Ď\": \"D\",\n\t\"ď\": \"d\",\n\t\"Đ\": \"D\",\n\t\"đ\": \"d\",\n\t\"Ē\": \"E\",\n\t\"ē\": \"e\",\n\t\"Ĕ\": \"E\",\n\t\"ĕ\": \"e\",\n\t\"Ė\": \"E\",\n\t\"ė\": \"e\",\n\t\"Ę\": \"E\",\n\t\"ę\": \"e\",\n\t\"Ě\": \"E\",\n\t\"ě\": \"e\",\n\t\"Ĝ\": \"G\",\n\t\"Ǵ\": \"G\",\n\t\"ĝ\": \"g\",\n\t\"ǵ\": \"g\",\n\t\"Ğ\": \"G\",\n\t\"ğ\": \"g\",\n\t\"Ġ\": \"G\",\n\t\"ġ\": \"g\",\n\t\"Ģ\": \"G\",\n\t\"ģ\": \"g\",\n\t\"Ĥ\": \"H\",\n\t\"ĥ\": \"h\",\n\t\"Ħ\": \"H\",\n\t\"ħ\": \"h\",\n\t\"Ḫ\": \"H\",\n\t\"ḫ\": \"h\",\n\t\"Ĩ\": \"I\",\n\t\"ĩ\": \"i\",\n\t\"Ī\": \"I\",\n\t\"ī\": \"i\",\n\t\"Ĭ\": \"I\",\n\t\"ĭ\": \"i\",\n\t\"Į\": \"I\",\n\t\"į\": \"i\",\n\t\"İ\": \"I\",\n\t\"ı\": \"i\",\n\t\"Ĳ\": \"IJ\",\n\t\"ĳ\": \"ij\",\n\t\"Ĵ\": \"J\",\n\t\"ĵ\": \"j\",\n\t\"Ķ\": \"K\",\n\t\"ķ\": \"k\",\n\t\"Ḱ\": \"K\",\n\t\"ḱ\": \"k\",\n\t\"K̆\": \"K\",\n\t\"k̆\": \"k\",\n\t\"Ĺ\": \"L\",\n\t\"ĺ\": \"l\",\n\t\"Ļ\": \"L\",\n\t\"ļ\": \"l\",\n\t\"Ľ\": \"L\",\n\t\"ľ\": \"l\",\n\t\"Ŀ\": \"L\",\n\t\"ŀ\": \"l\",\n\t\"Ł\": \"l\",\n\t\"ł\": \"l\",\n\t\"Ḿ\": \"M\",\n\t\"ḿ\": \"m\",\n\t\"M̆\": \"M\",\n\t\"m̆\": \"m\",\n\t\"Ń\": \"N\",\n\t\"ń\": \"n\",\n\t\"Ņ\": \"N\",\n\t\"ņ\": \"n\",\n\t\"Ň\": \"N\",\n\t\"ň\": \"n\",\n\t\"ŉ\": \"n\",\n\t\"N̆\": \"N\",\n\t\"n̆\": \"n\",\n\t\"Ō\": \"O\",\n\t\"ō\": \"o\",\n\t\"Ŏ\": \"O\",\n\t\"ŏ\": \"o\",\n\t\"Ő\": \"O\",\n\t\"ő\": \"o\",\n\t\"Œ\": \"OE\",\n\t\"œ\": \"oe\",\n\t\"P̆\": \"P\",\n\t\"p̆\": \"p\",\n\t\"Ŕ\": \"R\",\n\t\"ŕ\": \"r\",\n\t\"Ŗ\": \"R\",\n\t\"ŗ\": \"r\",\n\t\"Ř\": \"R\",\n\t\"ř\": \"r\",\n\t\"R̆\": \"R\",\n\t\"r̆\": \"r\",\n\t\"Ȓ\": \"R\",\n\t\"ȓ\": \"r\",\n\t\"Ś\": \"S\",\n\t\"ś\": \"s\",\n\t\"Ŝ\": \"S\",\n\t\"ŝ\": \"s\",\n\t\"Ş\": \"S\",\n\t\"Ș\": \"S\",\n\t\"ș\": \"s\",\n\t\"ş\": \"s\",\n\t\"Š\": \"S\",\n\t\"š\": \"s\",\n\t\"Ţ\": \"T\",\n\t\"ţ\": \"t\",\n\t\"ț\": \"t\",\n\t\"Ț\": \"T\",\n\t\"Ť\": \"T\",\n\t\"ť\": \"t\",\n\t\"Ŧ\": \"T\",\n\t\"ŧ\": \"t\",\n\t\"T̆\": \"T\",\n\t\"t̆\": \"t\",\n\t\"Ũ\": \"U\",\n\t\"ũ\": \"u\",\n\t\"Ū\": \"U\",\n\t\"ū\": \"u\",\n\t\"Ŭ\": \"U\",\n\t\"ŭ\": \"u\",\n\t\"Ů\": \"U\",\n\t\"ů\": \"u\",\n\t\"Ű\": \"U\",\n\t\"ű\": \"u\",\n\t\"Ų\": \"U\",\n\t\"ų\": \"u\",\n\t\"Ȗ\": \"U\",\n\t\"ȗ\": \"u\",\n\t\"V̆\": \"V\",\n\t\"v̆\": \"v\",\n\t\"Ŵ\": \"W\",\n\t\"ŵ\": \"w\",\n\t\"Ẃ\": \"W\",\n\t\"ẃ\": \"w\",\n\t\"X̆\": \"X\",\n\t\"x̆\": \"x\",\n\t\"Ŷ\": \"Y\",\n\t\"ŷ\": \"y\",\n\t\"Ÿ\": \"Y\",\n\t\"Y̆\": \"Y\",\n\t\"y̆\": \"y\",\n\t\"Ź\": \"Z\",\n\t\"ź\": \"z\",\n\t\"Ż\": \"Z\",\n\t\"ż\": \"z\",\n\t\"Ž\": \"Z\",\n\t\"ž\": \"z\",\n\t\"ſ\": \"s\",\n\t\"ƒ\": \"f\",\n\t\"Ơ\": \"O\",\n\t\"ơ\": \"o\",\n\t\"Ư\": \"U\",\n\t\"ư\": \"u\",\n\t\"Ǎ\": \"A\",\n\t\"ǎ\": \"a\",\n\t\"Ǐ\": \"I\",\n\t\"ǐ\": \"i\",\n\t\"Ǒ\": \"O\",\n\t\"ǒ\": \"o\",\n\t\"Ǔ\": \"U\",\n\t\"ǔ\": \"u\",\n\t\"Ǖ\": \"U\",\n\t\"ǖ\": \"u\",\n\t\"Ǘ\": \"U\",\n\t\"ǘ\": \"u\",\n\t\"Ǚ\": \"U\",\n\t\"ǚ\": \"u\",\n\t\"Ǜ\": \"U\",\n\t\"ǜ\": \"u\",\n\t\"Ứ\": \"U\",\n\t\"ứ\": \"u\",\n\t\"Ṹ\": \"U\",\n\t\"ṹ\": \"u\",\n\t\"Ǻ\": \"A\",\n\t\"ǻ\": \"a\",\n\t\"Ǽ\": \"AE\",\n\t\"ǽ\": \"ae\",\n\t\"Ǿ\": \"O\",\n\t\"ǿ\": \"o\",\n\t\"Þ\": \"TH\",\n\t\"þ\": \"th\",\n\t\"Ṕ\": \"P\",\n\t\"ṕ\": \"p\",\n\t\"Ṥ\": \"S\",\n\t\"ṥ\": \"s\",\n\t\"X́\": \"X\",\n\t\"x́\": \"x\",\n\t\"Ѓ\": \"Г\",\n\t\"ѓ\": \"г\",\n\t\"Ќ\": \"К\",\n\t\"ќ\": \"к\",\n\t\"A̋\": \"A\",\n\t\"a̋\": \"a\",\n\t\"E̋\": \"E\",\n\t\"e̋\": \"e\",\n\t\"I̋\": \"I\",\n\t\"i̋\": \"i\",\n\t\"Ǹ\": \"N\",\n\t\"ǹ\": \"n\",\n\t\"Ồ\": \"O\",\n\t\"ồ\": \"o\",\n\t\"Ṑ\": \"O\",\n\t\"ṑ\": \"o\",\n\t\"Ừ\": \"U\",\n\t\"ừ\": \"u\",\n\t\"Ẁ\": \"W\",\n\t\"ẁ\": \"w\",\n\t\"Ỳ\": \"Y\",\n\t\"ỳ\": \"y\",\n\t\"Ȁ\": \"A\",\n\t\"ȁ\": \"a\",\n\t\"Ȅ\": \"E\",\n\t\"ȅ\": \"e\",\n\t\"Ȉ\": \"I\",\n\t\"ȉ\": \"i\",\n\t\"Ȍ\": \"O\",\n\t\"ȍ\": \"o\",\n\t\"Ȑ\": \"R\",\n\t\"ȑ\": \"r\",\n\t\"Ȕ\": \"U\",\n\t\"ȕ\": \"u\",\n\t\"B̌\": \"B\",\n\t\"b̌\": \"b\",\n\t\"Č̣\": \"C\",\n\t\"č̣\": \"c\",\n\t\"Ê̌\": \"E\",\n\t\"ê̌\": \"e\",\n\t\"F̌\": \"F\",\n\t\"f̌\": \"f\",\n\t\"Ǧ\": \"G\",\n\t\"ǧ\": \"g\",\n\t\"Ȟ\": \"H\",\n\t\"ȟ\": \"h\",\n\t\"J̌\": \"J\",\n\t\"ǰ\": \"j\",\n\t\"Ǩ\": \"K\",\n\t\"ǩ\": \"k\",\n\t\"M̌\": \"M\",\n\t\"m̌\": \"m\",\n\t\"P̌\": \"P\",\n\t\"p̌\": \"p\",\n\t\"Q̌\": \"Q\",\n\t\"q̌\": \"q\",\n\t\"Ř̩\": \"R\",\n\t\"ř̩\": \"r\",\n\t\"Ṧ\": \"S\",\n\t\"ṧ\": \"s\",\n\t\"V̌\": \"V\",\n\t\"v̌\": \"v\",\n\t\"W̌\": \"W\",\n\t\"w̌\": \"w\",\n\t\"X̌\": \"X\",\n\t\"x̌\": \"x\",\n\t\"Y̌\": \"Y\",\n\t\"y̌\": \"y\",\n\t\"A̧\": \"A\",\n\t\"a̧\": \"a\",\n\t\"B̧\": \"B\",\n\t\"b̧\": \"b\",\n\t\"Ḑ\": \"D\",\n\t\"ḑ\": \"d\",\n\t\"Ȩ\": \"E\",\n\t\"ȩ\": \"e\",\n\t\"Ɛ̧\": \"E\",\n\t\"ɛ̧\": \"e\",\n\t\"Ḩ\": \"H\",\n\t\"ḩ\": \"h\",\n\t\"I̧\": \"I\",\n\t\"i̧\": \"i\",\n\t\"Ɨ̧\": \"I\",\n\t\"ɨ̧\": \"i\",\n\t\"M̧\": \"M\",\n\t\"m̧\": \"m\",\n\t\"O̧\": \"O\",\n\t\"o̧\": \"o\",\n\t\"Q̧\": \"Q\",\n\t\"q̧\": \"q\",\n\t\"U̧\": \"U\",\n\t\"u̧\": \"u\",\n\t\"X̧\": \"X\",\n\t\"x̧\": \"x\",\n\t\"Z̧\": \"Z\",\n\t\"z̧\": \"z\",\n\t\"й\":\"и\",\n\t\"Й\":\"И\",\n\t\"ё\":\"е\",\n\t\"Ё\":\"Е\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useCallback, useState, FormEvent } from 'react';\n\nimport { Radio } from 'src/components/Radio';\nimport { RadioChangeEvent, AsyncSelect } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport StyledModal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport {\n  styled,\n  t,\n  SupersetClient,\n  JsonResponse,\n  JsonObject,\n  QueryResponse,\n  QueryFormData,\n} from '@superset-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport rison from 'rison';\nimport { createDatasource } from 'src/SqlLab/actions/sqlLab';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { UserWithPermissionsAndRoles as User } from 'src/types/bootstrapTypes';\nimport {\n  DatasetRadioState,\n  EXPLORE_CHART_DEFAULT,\n  DatasetOwner,\n  SqlLabRootState,\n} from 'src/SqlLab/types';\nimport { mountExploreUrl } from 'src/explore/exploreUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\nimport { SelectValue } from 'antd/lib/select';\nimport { isEmpty, isString } from 'lodash';\n\ninterface QueryDatabase {\n  id?: number;\n}\n\nexport type ExploreQuery = QueryResponse & {\n  database?: QueryDatabase | null | undefined;\n};\n\nexport interface ISimpleColumn {\n  column_name?: string | null;\n  name?: string | null;\n  type?: string | null;\n  is_dttm?: boolean | null;\n}\n\nexport type Database = {\n  backend: string;\n  id: number;\n  parameter: object;\n};\n\nexport interface ISaveableDatasource {\n  columns: ISimpleColumn[];\n  name: string;\n  dbId: number;\n  sql: string;\n  templateParams?: string | object | null;\n  catalog?: string | null;\n  schema?: string | null;\n  database?: Database;\n}\n\ninterface SaveDatasetModalProps {\n  visible: boolean;\n  onHide: () => void;\n  buttonTextOnSave: string;\n  buttonTextOnOverwrite: string;\n  modalDescription?: string;\n  datasource: ISaveableDatasource;\n  openWindow?: boolean;\n  formData?: Omit<QueryFormData, 'datasource'>;\n}\n\nconst Styles = styled.div`\n  .sdm-body {\n    margin: 0 8px;\n  }\n  .sdm-input {\n    margin-left: 45px;\n    width: 401px;\n  }\n  .sdm-autocomplete {\n    width: 401px;\n    align-self: center;\n  }\n  .sdm-radio {\n    display: block;\n    height: 30px;\n    margin: 10px 0px;\n    line-height: 30px;\n  }\n  .sdm-overwrite-msg {\n    margin: 7px;\n  }\n  .sdm-overwrite-container {\n    flex: 1 1 auto;\n    display: flex;\n  }\n`;\n\nconst updateDataset = async (\n  dbId: number,\n  datasetId: number,\n  sql: string,\n  columns: Array<Record<string, any>>,\n  owners: [number],\n  overrideColumns: boolean,\n) => {\n  const endpoint = `api/v1/dataset/${datasetId}?override_columns=${overrideColumns}`;\n  const headers = { 'Content-Type': 'application/json' };\n  const body = JSON.stringify({\n    sql,\n    columns,\n    owners,\n    database_id: dbId,\n  });\n\n  const data: JsonResponse = await SupersetClient.put({\n    endpoint,\n    headers,\n    body,\n  });\n  return data.json.result;\n};\n\nconst UNTITLED = t('Untitled Dataset');\n\nexport const SaveDatasetModal = ({\n  visible,\n  onHide,\n  buttonTextOnSave,\n  buttonTextOnOverwrite,\n  modalDescription,\n  datasource,\n  openWindow = true,\n  formData = {},\n}: SaveDatasetModalProps) => {\n  const defaultVizType = useSelector<SqlLabRootState, string>(\n    state => state.common?.conf?.DEFAULT_VIZ_TYPE || 'table',\n  );\n\n  const getDefaultDatasetName = () =>\n    `${datasource?.name || UNTITLED} ${moment().format('L HH:mm:ss')}`;\n  const [datasetName, setDatasetName] = useState(getDefaultDatasetName());\n  const [newOrOverwrite, setNewOrOverwrite] = useState(\n    DatasetRadioState.SaveNew,\n  );\n  const [shouldOverwriteDataset, setShouldOverwriteDataset] = useState(false);\n  const [datasetToOverwrite, setDatasetToOverwrite] = useState<\n    Record<string, any>\n  >({});\n  const [selectedDatasetToOverwrite, setSelectedDatasetToOverwrite] = useState<\n    SelectValue | undefined\n  >(undefined);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const user = useSelector<SqlLabRootState, User>(state => state.user);\n  const dispatch = useDispatch<(dispatch: any) => Promise<JsonObject>>();\n\n  const createWindow = (url: string) => {\n    if (openWindow) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      window.location.href = url;\n    }\n  };\n  const formDataWithDefaults = {\n    ...EXPLORE_CHART_DEFAULT,\n    ...(formData || {}),\n  };\n  const handleOverwriteDataset = async () => {\n    // if user wants to overwrite a dataset we need to prompt them\n    if (!shouldOverwriteDataset) {\n      setShouldOverwriteDataset(true);\n      return;\n    }\n    setLoading(true);\n\n    const [, key] = await Promise.all([\n      updateDataset(\n        datasource?.dbId,\n        datasetToOverwrite?.datasetid,\n        datasource?.sql,\n        datasource?.columns?.map(\n          (d: { column_name: string; type: string; is_dttm: boolean }) => ({\n            column_name: d.column_name,\n            type: d.type,\n            is_dttm: d.is_dttm,\n          }),\n        ),\n        datasetToOverwrite?.owners?.map((o: DatasetOwner) => o.id),\n        true,\n      ),\n      postFormData(datasetToOverwrite.datasetid, 'table', {\n        ...formDataWithDefaults,\n        datasource: `${datasetToOverwrite.datasetid}__table`,\n        ...(defaultVizType === 'table' && {\n          all_columns: datasource?.columns?.map(column => column.column_name),\n        }),\n      }),\n    ]);\n    setLoading(false);\n\n    const url = mountExploreUrl(null, {\n      [URL_PARAMS.formDataKey.name]: key,\n    });\n    createWindow(url);\n\n    setShouldOverwriteDataset(false);\n    setDatasetName(getDefaultDatasetName());\n    onHide();\n  };\n\n  const loadDatasetOverwriteOptions = useCallback(\n    async (input = '') => {\n      const { userId } = user;\n      const queryParams = rison.encode({\n        filters: [\n          {\n            col: 'table_name',\n            opr: 'ct',\n            value: input,\n          },\n          {\n            col: 'owners',\n            opr: 'rel_m_m',\n            value: userId,\n          },\n        ],\n        order_column: 'changed_on_delta_humanized',\n        order_direction: 'desc',\n      });\n\n      return SupersetClient.get({\n        endpoint: `/api/v1/dataset/?q=${queryParams}`,\n      }).then(response => ({\n        data: response.json.result.map(\n          (r: { table_name: string; id: number; owners: [DatasetOwner] }) => ({\n            value: r.table_name,\n            label: r.table_name,\n            datasetid: r.id,\n            owners: r.owners,\n          }),\n        ),\n        totalCount: response.json.count,\n      }));\n    },\n    [user],\n  );\n\n  const handleSaveInDataset = () => {\n    setLoading(true);\n    const selectedColumns = datasource?.columns ?? [];\n\n    // The filters param is only used to test jinja templates.\n    // Remove the special filters entry from the templateParams\n    // before saving the dataset.\n    let templateParams;\n    if (isString(datasource?.templateParams)) {\n      const p = JSON.parse(datasource.templateParams);\n      /* eslint-disable-next-line no-underscore-dangle */\n      if (p._filters) {\n        /* eslint-disable-next-line no-underscore-dangle */\n        delete p._filters;\n        // eslint-disable-next-line no-param-reassign\n        templateParams = JSON.stringify(p);\n      }\n    }\n\n    dispatch(\n      createDatasource({\n        sql: datasource.sql,\n        dbId: datasource.dbId || datasource?.database?.id,\n        catalog: datasource?.catalog,\n        schema: datasource?.schema,\n        templateParams,\n        datasourceName: datasetName,\n      }),\n    )\n      .then((data: { id: number }) =>\n        postFormData(data.id, 'table', {\n          ...formDataWithDefaults,\n          datasource: `${data.id}__table`,\n          ...(defaultVizType === 'table' && {\n            all_columns: selectedColumns.map(column => column.column_name),\n          }),\n        }),\n      )\n      .then((key: string) => {\n        setLoading(false);\n        const url = mountExploreUrl(null, {\n          [URL_PARAMS.formDataKey.name]: key,\n        });\n        createWindow(url);\n        setDatasetName(getDefaultDatasetName());\n        onHide();\n      })\n      .catch(() => {\n        setLoading(false);\n        addDangerToast(t('An error occurred saving dataset'));\n      });\n  };\n\n  const handleOverwriteDatasetOption = (value: SelectValue, option: any) => {\n    setDatasetToOverwrite(option);\n    setSelectedDatasetToOverwrite(value);\n  };\n\n  const handleDatasetNameChange = (e: FormEvent<HTMLInputElement>) => {\n    // @ts-expect-error\n    setDatasetName(e.target.value);\n  };\n\n  const handleOverwriteCancel = () => {\n    setShouldOverwriteDataset(false);\n    setDatasetToOverwrite({});\n  };\n\n  const disableSaveAndExploreBtn =\n    (newOrOverwrite === DatasetRadioState.SaveNew &&\n      datasetName.length === 0) ||\n    (newOrOverwrite === DatasetRadioState.OverwriteDataset &&\n      isEmpty(selectedDatasetToOverwrite));\n\n  const filterAutocompleteOption = (\n    inputValue: string,\n    option: { value: string; datasetid: number },\n  ) => option.value.toLowerCase().includes(inputValue.toLowerCase());\n\n  return (\n    <StyledModal\n      show={visible}\n      title={t('Save or Overwrite Dataset')}\n      onHide={onHide}\n      footer={\n        <>\n          {newOrOverwrite === DatasetRadioState.SaveNew && (\n            <Button\n              disabled={disableSaveAndExploreBtn}\n              buttonStyle=\"primary\"\n              onClick={handleSaveInDataset}\n              loading={loading}\n            >\n              {buttonTextOnSave}\n            </Button>\n          )}\n          {newOrOverwrite === DatasetRadioState.OverwriteDataset && (\n            <>\n              {shouldOverwriteDataset && (\n                <Button onClick={handleOverwriteCancel}>{t('Back')}</Button>\n              )}\n              <Button\n                className=\"md\"\n                buttonStyle=\"primary\"\n                onClick={handleOverwriteDataset}\n                disabled={disableSaveAndExploreBtn}\n                loading={loading}\n              >\n                {buttonTextOnOverwrite}\n              </Button>\n            </>\n          )}\n        </>\n      }\n    >\n      <Styles>\n        {!shouldOverwriteDataset && (\n          <div className=\"sdm-body\">\n            {modalDescription && (\n              <div className=\"sdm-prompt\">{modalDescription}</div>\n            )}\n            <Radio.Group\n              onChange={(e: RadioChangeEvent) => {\n                setNewOrOverwrite(Number(e.target.value));\n              }}\n              value={newOrOverwrite}\n            >\n              <Radio className=\"sdm-radio\" value={1}>\n                {t('Save as new')}\n                <Input\n                  className=\"sdm-input\"\n                  value={datasetName}\n                  onChange={handleDatasetNameChange}\n                  disabled={newOrOverwrite !== 1}\n                />\n              </Radio>\n              <div className=\"sdm-overwrite-container\">\n                <Radio className=\"sdm-radio\" value={2}>\n                  {t('Overwrite existing')}\n                </Radio>\n                <div className=\"sdm-autocomplete\">\n                  <AsyncSelect\n                    allowClear\n                    showSearch\n                    placeholder={t('Select or type dataset name')}\n                    ariaLabel={t('Existing dataset')}\n                    onChange={handleOverwriteDatasetOption}\n                    options={input => loadDatasetOverwriteOptions(input)}\n                    value={selectedDatasetToOverwrite}\n                    filterOption={filterAutocompleteOption}\n                    disabled={newOrOverwrite !== 2}\n                    getPopupContainer={() => document.body}\n                  />\n                </div>\n              </div>\n            </Radio.Group>\n          </div>\n        )}\n        {shouldOverwriteDataset && (\n          <div className=\"sdm-overwrite-msg\">\n            {t('Are you sure you want to overwrite this dataset?')}\n          </div>\n        )}\n      </Styles>\n    </StyledModal>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport Label, { Type } from 'src/components/Label';\n\nimport { now, fDuration } from 'src/utils/dates';\n\nexport interface TimerProps {\n  endTime?: number;\n  isRunning: boolean;\n  startTime?: number;\n  status?: Type;\n}\n\nconst TimerLabel = styled(Label)`\n  text-align: left;\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n`;\n\nexport default function Timer({\n  endTime,\n  isRunning,\n  startTime,\n  status = 'success',\n}: TimerProps) {\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef<ReturnType<typeof setInterval>>();\n\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n\n  return (\n    <TimerLabel type={status} role=\"timer\">\n      {clockStr}\n    </TimerLabel>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport interface Location {\n  search: string;\n  pathname: string;\n}\n\n// mapping { url_param: v1_explore_request_param }\nconst EXPLORE_URL_SEARCH_PARAMS = {\n  form_data: {\n    name: 'form_data',\n    parser: (formData: string) => {\n      const formDataObject = JSON.parse(formData);\n      if (formDataObject.datasource) {\n        const [datasource_id, datasource_type] =\n          formDataObject.datasource.split('__');\n        formDataObject.datasource_id = datasource_id;\n        formDataObject.datasource_type = datasource_type;\n        delete formDataObject.datasource;\n      }\n      return formDataObject;\n    },\n  },\n  slice_id: {\n    name: 'slice_id',\n  },\n  datasource_id: {\n    name: 'datasource_id',\n  },\n  datasource_type: {\n    name: 'datasource_type',\n  },\n  datasource: {\n    name: 'datasource',\n    parser: (datasource: string) => {\n      const [datasource_id, datasource_type] = datasource.split('__');\n      return { datasource_id, datasource_type };\n    },\n  },\n  form_data_key: {\n    name: 'form_data_key',\n  },\n  permalink_key: {\n    name: 'permalink_key',\n  },\n  viz_type: {\n    name: 'viz_type',\n  },\n  dashboard_id: {\n    name: 'dashboard_id',\n  },\n};\n\nconst EXPLORE_URL_PATH_PARAMS = {\n  p: 'permalink_key', // permalink\n  table: 'datasource_id',\n};\n\n// search params can be placed in form_data object\n// we need to \"flatten\" the search params to use them with /v1/explore endpoint\nconst getParsedExploreURLSearchParams = (search: string) => {\n  const urlSearchParams = new URLSearchParams(search);\n  return Array.from(urlSearchParams.keys()).reduce((acc, currentParam) => {\n    const paramValue = urlSearchParams.get(currentParam);\n    if (paramValue === null) {\n      return acc;\n    }\n    let parsedParamValue;\n    try {\n      parsedParamValue =\n        EXPLORE_URL_SEARCH_PARAMS[currentParam].parser?.(paramValue) ??\n        paramValue;\n    } catch {\n      parsedParamValue = paramValue;\n    }\n    if (typeof parsedParamValue === 'object') {\n      return { ...acc, ...parsedParamValue };\n    }\n    const key = EXPLORE_URL_SEARCH_PARAMS[currentParam]?.name || currentParam;\n    return {\n      ...acc,\n      [key]: parsedParamValue,\n    };\n  }, {});\n};\n\n// path params need to be transformed to search params to use them with /v1/explore endpoint\nconst getParsedExploreURLPathParams = (pathname: string) =>\n  Object.keys(EXPLORE_URL_PATH_PARAMS).reduce((acc, currentParam) => {\n    const re = new RegExp(`/(${currentParam})/(\\\\w+)`);\n    const pathGroups = pathname.match(re);\n    if (pathGroups?.[2]) {\n      return { ...acc, [EXPLORE_URL_PATH_PARAMS[currentParam]]: pathGroups[2] };\n    }\n    return acc;\n  }, {});\n\nexport const getParsedExploreURLParams = (\n  location: Location = window.location,\n) =>\n  new URLSearchParams(\n    Object.entries({\n      ...getParsedExploreURLSearchParams(location.search),\n      ...getParsedExploreURLPathParams(location.pathname),\n    })\n      .map(entry => entry.join('='))\n      .join('&'),\n  );\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC } from 'react';\nimport moment from 'moment';\nimport { t } from '@superset-ui/core';\n\ninterface Props {\n  cachedTimestamp?: string;\n}\nexport const TooltipContent: FC<Props> = ({ cachedTimestamp }) => {\n  const cachedText = cachedTimestamp ? (\n    <span>\n      {t('Loaded data cached')}\n      <b> {moment.utc(cachedTimestamp).fromNow()}</b>\n    </span>\n  ) : (\n    t('Loaded from cache')\n  );\n\n  return (\n    <span data-test=\"tooltip-content\">\n      {cachedText}. {t('Click to force-refresh')}\n    </span>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, MouseEventHandler, FC } from 'react';\n\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { TooltipContent } from './TooltipContent';\n\nexport interface CacheLabelProps {\n  onClick?: MouseEventHandler<HTMLElement>;\n  cachedTimestamp?: string;\n  className?: string;\n}\n\nconst CacheLabel: FC<CacheLabelProps> = ({\n  className,\n  onClick,\n  cachedTimestamp,\n}) => {\n  const [hovered, setHovered] = useState(false);\n\n  const labelType = hovered ? 'primary' : 'default';\n  return (\n    <Tooltip\n      title={<TooltipContent cachedTimestamp={cachedTimestamp} />}\n      id=\"cache-desc-tooltip\"\n    >\n      <Label\n        className={`${className}`}\n        type={labelType}\n        onClick={onClick}\n        onMouseOver={() => setHovered(true)}\n        onMouseOut={() => setHovered(false)}\n      >\n        {t('Cached')} <i className=\"fa fa-refresh\" />\n      </Label>\n    </Tooltip>\n  );\n};\n\nexport default CacheLabel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { forwardRef, RefObject } from 'react';\nimport { css, QueryData, SupersetTheme } from '@superset-ui/core';\nimport RowCountLabel from 'src/explore/components/RowCountLabel';\nimport CachedLabel from 'src/components/CachedLabel';\nimport Timer from 'src/components/Timer';\nimport { Type } from 'src/components/Label';\n\nconst CHART_STATUS_MAP = {\n  failed: 'danger' as Type,\n  loading: 'warning' as Type,\n  success: 'success' as Type,\n};\n\nexport type ChartPillsProps = {\n  queriesResponse: QueryData[];\n  chartStatus: keyof typeof CHART_STATUS_MAP;\n  chartUpdateStartTime: number;\n  chartUpdateEndTime: number;\n  refreshCachedQuery: () => void;\n  rowLimit: string | number;\n};\n\nexport const ChartPills = forwardRef(\n  (\n    {\n      queriesResponse,\n      chartStatus,\n      chartUpdateStartTime,\n      chartUpdateEndTime,\n      refreshCachedQuery,\n      rowLimit,\n    }: ChartPillsProps,\n    ref: RefObject<HTMLDivElement>,\n  ) => {\n    const isLoading = chartStatus === 'loading';\n    const firstQueryResponse = queriesResponse?.[0];\n    return (\n      <div ref={ref}>\n        <div\n          css={(theme: SupersetTheme) => css`\n            display: flex;\n            justify-content: flex-end;\n            padding-bottom: ${theme.gridUnit * 4}px;\n            & .ant-tag:last-of-type {\n              margin: 0;\n            }\n          `}\n        >\n          {!isLoading && firstQueryResponse && (\n            <RowCountLabel\n              rowcount={Number(firstQueryResponse.sql_rowcount) || 0}\n              limit={Number(rowLimit) || 0}\n            />\n          )}\n          {!isLoading && firstQueryResponse?.is_cached && (\n            <CachedLabel\n              onClick={refreshCachedQuery}\n              cachedTimestamp={firstQueryResponse.cached_dttm}\n            />\n          )}\n          <Timer\n            startTime={chartUpdateStartTime}\n            endTime={chartUpdateEndTime}\n            isRunning={isLoading}\n            status={CHART_STATUS_MAP[chartStatus]}\n          />\n        </div>\n      </div>\n    );\n  },\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { forwardRef, RefObject, MouseEvent } from 'react';\nimport { css, styled } from '@superset-ui/core';\nimport Button from 'src/components/Button';\n\ninterface ControlPanelAlertProps {\n  title: string;\n  bodyText: string;\n  primaryButtonAction?: (e: MouseEvent) => void;\n  secondaryButtonAction?: (e: MouseEvent) => void;\n  primaryButtonText?: string;\n  secondaryButtonText?: string;\n  type: 'info' | 'warning' | 'error';\n  className?: string;\n}\n\nconst AlertContainer = styled.div`\n  ${({ theme }) => css`\n    margin: ${theme.gridUnit * 4}px;\n    padding: ${theme.gridUnit * 4}px;\n\n    border: 1px solid ${theme.colors.info.base};\n    background-color: ${theme.colors.info.light2};\n    border-radius: 2px;\n\n    color: ${theme.colors.info.dark2};\n    font-size: ${theme.typography.sizes.m}px;\n\n    p {\n      margin-bottom: ${theme.gridUnit}px;\n    }\n\n    & a,\n    & span[role='button'] {\n      color: inherit;\n      text-decoration: underline;\n      &:hover {\n        color: ${theme.colors.info.dark1};\n      }\n    }\n\n    &.alert-type-warning {\n      border-color: ${theme.colors.alert.base};\n      background-color: ${theme.colors.alert.light2};\n\n      p {\n        color: ${theme.colors.alert.dark2};\n      }\n\n      & a:hover,\n      & span[role='button']:hover {\n        color: ${theme.colors.alert.dark1};\n      }\n    }\n  `}\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  button {\n    line-height: 1;\n  }\n`;\n\nconst Title = styled.p`\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\nconst typeChart = {\n  warning: 'warning',\n  danger: 'danger',\n};\n\nexport const ExploreAlert = forwardRef(\n  (\n    {\n      title,\n      bodyText,\n      primaryButtonAction,\n      secondaryButtonAction,\n      primaryButtonText,\n      secondaryButtonText,\n      type = 'info',\n      className = '',\n    }: ControlPanelAlertProps,\n    ref: RefObject<HTMLDivElement>,\n  ) => (\n    <AlertContainer className={`alert-type-${type} ${className}`} ref={ref}>\n      <Title>{title}</Title>\n      <p>{bodyText}</p>\n      {primaryButtonText && primaryButtonAction && (\n        <ButtonContainer>\n          {secondaryButtonAction && secondaryButtonText && (\n            <Button\n              buttonStyle=\"link\"\n              buttonSize=\"small\"\n              onClick={secondaryButtonAction}\n            >\n              {secondaryButtonText}\n            </Button>\n          )}\n          <Button\n            buttonStyle={type in typeChart ? typeChart[type] : 'primary'}\n            buttonSize=\"small\"\n            onClick={primaryButtonAction}\n          >\n            {primaryButtonText}\n          </Button>\n        </ButtonContainer>\n      )}\n    </AlertContainer>\n  ),\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Split from 'react-split';\nimport {\n  css,\n  DatasourceType,\n  ensureIsArray,\n  isFeatureEnabled,\n  FeatureFlag,\n  getChartMetadataRegistry,\n  styled,\n  SupersetClient,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  getItem,\n  setItem,\n  LocalStorageKeys,\n} from 'src/utils/localStorageHelpers';\nimport Alert from 'src/components/Alert';\nimport { SaveDatasetModal } from 'src/SqlLab/components/SaveDatasetModal';\nimport { getDatasourceAsSaveableDataset } from 'src/utils/datasourceUtils';\nimport { buildV1ChartDataPayload } from 'src/explore/exploreUtils';\nimport { getChartRequiredFieldsMissingMessage } from 'src/utils/getChartRequiredFieldsMissingMessage';\nimport { DataTablesPane } from '../DataTablesPane';\nimport { ChartPills } from '../ChartPills';\nimport { ExploreAlert } from '../ExploreAlert';\nimport useResizeDetectorByObserver from './useResizeDetectorByObserver';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  onQuery: PropTypes.func,\n  can_overwrite: PropTypes.bool.isRequired,\n  can_download: PropTypes.bool.isRequired,\n  datasource: PropTypes.object,\n  dashboardId: PropTypes.number,\n  column_formats: PropTypes.object,\n  containerId: PropTypes.string.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  vizType: PropTypes.string.isRequired,\n  form_data: PropTypes.object,\n  ownState: PropTypes.object,\n  standalone: PropTypes.bool,\n  force: PropTypes.bool,\n  timeout: PropTypes.number,\n  chartIsStale: PropTypes.bool,\n  chart: chartPropShape,\n  errorMessage: PropTypes.node,\n  triggerRender: PropTypes.bool,\n};\n\nconst GUTTER_SIZE_FACTOR = 1.25;\n\nconst INITIAL_SIZES = [100, 0];\nconst MIN_SIZES = [300, 65];\nconst DEFAULT_SOUTH_PANE_HEIGHT_PERCENT = 40;\n\nconst Styles = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  align-content: stretch;\n  overflow: auto;\n  box-shadow: none;\n  height: 100%;\n\n  & > div {\n    height: 100%;\n  }\n\n  .gutter {\n    border-top: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    width: ${({ theme }) => theme.gridUnit * 9}px;\n    margin: ${({ theme }) => theme.gridUnit * GUTTER_SIZE_FACTOR}px auto;\n  }\n\n  .gutter.gutter-vertical {\n    display: ${({ showSplite }) => (showSplite ? 'block' : 'none')};\n    cursor: row-resize;\n  }\n\n  .ant-collapse {\n    .ant-tabs {\n      height: 100%;\n      .ant-tabs-nav {\n        padding-left: ${({ theme }) => theme.gridUnit * 5}px;\n        margin: 0;\n      }\n      .ant-tabs-content-holder {\n        overflow: hidden;\n        .ant-tabs-content {\n          height: 100%;\n        }\n      }\n    }\n  }\n`;\n\nconst ExploreChartPanel = ({\n  chart,\n  slice,\n  vizType,\n  ownState,\n  triggerRender,\n  force,\n  datasource,\n  errorMessage,\n  form_data: formData,\n  onQuery,\n  actions,\n  timeout,\n  standalone,\n  chartIsStale,\n  chartAlert,\n  can_download: canDownload,\n}) => {\n  const theme = useTheme();\n  const gutterMargin = theme.gridUnit * GUTTER_SIZE_FACTOR;\n  const gutterHeight = theme.gridUnit * GUTTER_SIZE_FACTOR;\n  const {\n    ref: chartPanelRef,\n    observerRef: resizeObserverRef,\n    width: chartPanelWidth,\n    height: chartPanelHeight,\n  } = useResizeDetectorByObserver();\n  const [splitSizes, setSplitSizes] = useState(\n    isFeatureEnabled(FeatureFlag.DatapanelClosedByDefault)\n      ? INITIAL_SIZES\n      : getItem(LocalStorageKeys.ChartSplitSizes, INITIAL_SIZES),\n  );\n  const [showSplite, setShowSplit] = useState(\n    isFeatureEnabled(FeatureFlag.DatapanelClosedByDefault)\n      ? false\n      : getItem(LocalStorageKeys.IsDatapanelOpen, false),\n  );\n\n  const [showDatasetModal, setShowDatasetModal] = useState(false);\n\n  const metaDataRegistry = getChartMetadataRegistry();\n  const { useLegacyApi } = metaDataRegistry.get(vizType) ?? {};\n  const vizTypeNeedsDataset =\n    useLegacyApi && datasource.type !== DatasourceType.Table;\n  // added boolean column to below show boolean so that the errors aren't overlapping\n  const showAlertBanner =\n    !chartAlert &&\n    chartIsStale &&\n    !vizTypeNeedsDataset &&\n    chart.chartStatus !== 'failed' &&\n    ensureIsArray(chart.queriesResponse).length > 0;\n\n  const updateQueryContext = useCallback(\n    async function fetchChartData() {\n      if (slice && slice.query_context === null) {\n        const queryContext = buildV1ChartDataPayload({\n          formData: slice.form_data,\n          force,\n          resultFormat: 'json',\n          resultType: 'full',\n          setDataMask: null,\n          ownState: null,\n        });\n\n        await SupersetClient.put({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            query_context: JSON.stringify(queryContext),\n            query_context_generation: true,\n          }),\n        });\n      }\n    },\n    [slice],\n  );\n\n  useEffect(() => {\n    updateQueryContext();\n  }, [updateQueryContext]);\n\n  useEffect(() => {\n    setItem(LocalStorageKeys.ChartSplitSizes, splitSizes);\n  }, [splitSizes]);\n\n  const onDragEnd = useCallback(sizes => {\n    setSplitSizes(sizes);\n  }, []);\n\n  const refreshCachedQuery = useCallback(() => {\n    actions.setForceQuery(true);\n    actions.postChartFormData(\n      formData,\n      true,\n      timeout,\n      chart.id,\n      undefined,\n      ownState,\n    );\n    actions.updateQueryFormData(formData, chart.id);\n  }, [actions, chart.id, formData, ownState, timeout]);\n\n  const onCollapseChange = useCallback(isOpen => {\n    let splitSizes;\n    if (!isOpen) {\n      splitSizes = INITIAL_SIZES;\n    } else {\n      splitSizes = [\n        100 - DEFAULT_SOUTH_PANE_HEIGHT_PERCENT,\n        DEFAULT_SOUTH_PANE_HEIGHT_PERCENT,\n      ];\n    }\n    setSplitSizes(splitSizes);\n    setShowSplit(isOpen);\n  }, []);\n\n  const renderChart = useCallback(\n    () => (\n      <div\n        css={css`\n          min-height: 0;\n          flex: 1;\n          overflow: auto;\n        `}\n        ref={chartPanelRef}\n      >\n        {chartPanelWidth && chartPanelHeight && (\n          <ChartContainer\n            width={Math.floor(chartPanelWidth)}\n            height={chartPanelHeight}\n            ownState={ownState}\n            annotationData={chart.annotationData}\n            chartAlert={chart.chartAlert}\n            chartStackTrace={chart.chartStackTrace}\n            chartId={chart.id}\n            chartStatus={chart.chartStatus}\n            triggerRender={triggerRender}\n            force={force}\n            datasource={datasource}\n            errorMessage={errorMessage}\n            formData={formData}\n            latestQueryFormData={chart.latestQueryFormData}\n            onQuery={onQuery}\n            queriesResponse={chart.queriesResponse}\n            chartIsStale={chartIsStale}\n            setControlValue={actions.setControlValue}\n            timeout={timeout}\n            triggerQuery={chart.triggerQuery}\n            vizType={vizType}\n          />\n        )}\n      </div>\n    ),\n    [\n      actions.setControlValue,\n      chart.annotationData,\n      chart.chartAlert,\n      chart.chartStackTrace,\n      chart.chartStatus,\n      chart.id,\n      chart.latestQueryFormData,\n      chart.queriesResponse,\n      chart.triggerQuery,\n      chartIsStale,\n      chartPanelHeight,\n      chartPanelRef,\n      chartPanelWidth,\n      datasource,\n      errorMessage,\n      force,\n      formData,\n      onQuery,\n      ownState,\n      timeout,\n      triggerRender,\n      vizType,\n    ],\n  );\n\n  const panelBody = useMemo(\n    () => (\n      <div\n        className=\"panel-body\"\n        css={css`\n          display: flex;\n          flex-direction: column;\n        `}\n        ref={resizeObserverRef}\n      >\n        {vizTypeNeedsDataset && (\n          <Alert\n            message={t('Chart type requires a dataset')}\n            type=\"error\"\n            css={theme => css`\n              margin: 0 0 ${theme.gridUnit * 4}px 0;\n            `}\n            description={\n              <>\n                {t(\n                  'This chart type is not supported when using an unsaved query as a chart source. ',\n                )}\n                <span\n                  role=\"button\"\n                  tabIndex={0}\n                  onClick={() => setShowDatasetModal(true)}\n                  css={{ textDecoration: 'underline' }}\n                >\n                  {t('Create a dataset')}\n                </span>\n                {t(' to visualize your data.')}\n              </>\n            }\n          />\n        )}\n        {showAlertBanner && (\n          <ExploreAlert\n            title={\n              errorMessage\n                ? t('Required control values have been removed')\n                : t('Your chart is not up to date')\n            }\n            bodyText={\n              errorMessage ? (\n                getChartRequiredFieldsMissingMessage(false)\n              ) : (\n                <span>\n                  {t(\n                    'You updated the values in the control panel, but the chart was not updated automatically. Run the query by clicking on the \"Update chart\" button or',\n                  )}{' '}\n                  <span role=\"button\" tabIndex={0} onClick={onQuery}>\n                    {t('click here')}\n                  </span>\n                  .\n                </span>\n              )\n            }\n            type=\"warning\"\n            css={theme => css`\n              margin: 0 0 ${theme.gridUnit * 4}px 0;\n            `}\n          />\n        )}\n        <ChartPills\n          queriesResponse={chart.queriesResponse}\n          chartStatus={chart.chartStatus}\n          chartUpdateStartTime={chart.chartUpdateStartTime}\n          chartUpdateEndTime={chart.chartUpdateEndTime}\n          refreshCachedQuery={refreshCachedQuery}\n          rowLimit={formData?.row_limit}\n        />\n        {renderChart()}\n      </div>\n    ),\n    [\n      resizeObserverRef,\n      showAlertBanner,\n      errorMessage,\n      onQuery,\n      chart.queriesResponse,\n      chart.chartStatus,\n      chart.chartUpdateStartTime,\n      chart.chartUpdateEndTime,\n      refreshCachedQuery,\n      formData?.row_limit,\n      renderChart,\n    ],\n  );\n\n  const standaloneChartBody = useMemo(() => renderChart(), [renderChart]);\n\n  const [queryFormData, setQueryFormData] = useState(chart.latestQueryFormData);\n\n  useEffect(() => {\n    // only update when `latestQueryFormData` changes AND `triggerRender`\n    // is false. No update should be done when only `triggerRender` changes,\n    // as this can trigger a query downstream based on incomplete form data.\n    // (`latestQueryFormData` is only updated when a a valid request has been\n    // triggered).\n    if (!triggerRender) {\n      setQueryFormData(chart.latestQueryFormData);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chart.latestQueryFormData]);\n\n  const elementStyle = useCallback(\n    (dimension, elementSize, gutterSize) => ({\n      [dimension]: `calc(${elementSize}% - ${gutterSize + gutterMargin}px)`,\n    }),\n    [gutterMargin],\n  );\n\n  if (standalone) {\n    // dom manipulation hack to get rid of the bootstrap theme's body background\n    const standaloneClass = 'background-transparent';\n    const bodyClasses = document.body.className.split(' ');\n    if (!bodyClasses.includes(standaloneClass)) {\n      document.body.className += ` ${standaloneClass}`;\n    }\n    return (\n      <div id=\"app\" data-test=\"standalone-app\" ref={resizeObserverRef}>\n        {standaloneChartBody}\n      </div>\n    );\n  }\n\n  return (\n    <Styles\n      className=\"panel panel-default chart-container\"\n      showSplite={showSplite}\n    >\n      <Split\n        sizes={splitSizes}\n        minSize={MIN_SIZES}\n        direction=\"vertical\"\n        gutterSize={gutterHeight}\n        onDragEnd={onDragEnd}\n        elementStyle={elementStyle}\n        expandToMin\n      >\n        {panelBody}\n        <DataTablesPane\n          ownState={ownState}\n          queryFormData={queryFormData}\n          datasource={datasource}\n          queryForce={force}\n          onCollapseChange={onCollapseChange}\n          chartStatus={chart.chartStatus}\n          errorMessage={errorMessage}\n          actions={actions}\n          canDownload={canDownload}\n        />\n      </Split>\n      {showDatasetModal && (\n        <SaveDatasetModal\n          visible={showDatasetModal}\n          onHide={() => setShowDatasetModal(false)}\n          buttonTextOnSave={t('Save')}\n          buttonTextOnOverwrite={t('Overwrite')}\n          datasource={getDatasourceAsSaveableDataset(datasource)}\n          openWindow={false}\n          formData={formData}\n        />\n      )}\n    </Styles>\n  );\n};\n\nExploreChartPanel.propTypes = propTypes;\n\nexport default ExploreChartPanel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useCallback, useRef } from 'react';\nimport { useResizeDetector } from 'react-resize-detector';\n\nexport default function useResizeDetectorByObserver() {\n  const ref = useRef<HTMLDivElement>();\n  const [{ width, height }, setChartPanelSize] = useState<{\n    width?: number;\n    height?: number;\n  }>({});\n  const onResize = useCallback(() => {\n    if (ref.current) {\n      const { width, height } = ref.current.getBoundingClientRect?.() || {};\n      setChartPanelSize({ width, height });\n    }\n  }, []);\n  const { ref: observerRef } = useResizeDetector({\n    refreshMode: 'debounce',\n    refreshRate: 300,\n    onResize,\n  });\n\n  return {\n    ref,\n    observerRef,\n    width,\n    height,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, ReactElement } from 'react';\n\nconst NUM_COLUMNS = 12;\n\ntype Control = ReactElement | null;\n\nexport default function ControlRow({ controls }: { controls: Control[] }) {\n  const isHiddenControl = useCallback((control: Control) => {\n    const props =\n      control && 'shouldStash' in control.props\n        ? control.props.children.props\n        : control?.props;\n    return props?.type === 'HiddenControl' || props?.isVisible === false;\n  }, []);\n  // Invisible control should not be counted\n  // in the columns number\n  const countableControls = controls.filter(\n    control => !isHiddenControl(control),\n  );\n  const colSize = countableControls.length\n    ? NUM_COLUMNS / countableControls.length\n    : NUM_COLUMNS;\n  return (\n    <div className=\"row\">\n      {controls.map((control, i) => (\n        <div\n          data-test=\"control-item\"\n          className={`col-lg-${colSize} col-xs-12`}\n          style={{\n            display: isHiddenControl(control) ? 'none' : 'block',\n          }}\n          key={i}\n        >\n          {control}\n        </div>\n      ))}\n    </div>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useTheme } from '@superset-ui/core';\nimport { List, ListItemProps } from 'src/components';\n\nexport interface CustomListItemProps extends ListItemProps {\n  selectable: boolean;\n}\n\nexport default function CustomListItem(props: CustomListItemProps) {\n  const { selectable, children, ...rest } = props;\n  const theme = useTheme();\n  const css = {\n    '&.ant-list-item': {\n      padding: `${theme.gridUnit + 2}px ${theme.gridUnit * 3}px`,\n      ':first-of-type': {\n        borderTopLeftRadius: theme.gridUnit,\n        borderTopRightRadius: theme.gridUnit,\n      },\n      ':last-of-type': {\n        borderBottomLeftRadius: theme.gridUnit,\n        borderBottomRightRadius: theme.gridUnit,\n      },\n    },\n  };\n\n  if (selectable) {\n    css['&:hover'] = {\n      cursor: 'pointer',\n      backgroundColor: theme.colors.grayscale.light4,\n    };\n  }\n\n  return (\n    <List.Item {...rest} css={css}>\n      {children}\n    </List.Item>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement,\n} from '../ControlPopover/ControlPopover';\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => <div style={{ width: 450, height: 368 }} />,\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func,\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {},\n};\n\nclass AnnotationLayerControl extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null,\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError),\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map(anno =>\n        anno === originalAnnotation ? newAnnotation : anno,\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true,\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState(prevState => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter(anno => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = annotation?.name || '_new';\n\n    return (\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\n        <AnnotationLayer\n          {...annotation}\n          error={error}\n          colorScheme={this.props.colorScheme}\n          vizType={this.props.vizType}\n          addAnnotationLayer={newAnnotation =>\n            this.addAnnotationLayer(annotation, newAnnotation)\n          }\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\n          close={() => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        <i\n          className=\"fa fa-refresh\"\n          style={{ color: theme.colors.primary.base }}\n          aria-hidden\n        />\n      );\n    }\n    if (annotationError[anno.name]) {\n      return (\n        <InfoTooltipWithTrigger\n          label=\"validation-errors\"\n          bsStyle=\"danger\"\n          tooltip={annotationError[anno.name]}\n        />\n      );\n    }\n    if (!anno.show) {\n      return <span style={{ color: theme.colors.error.base }}> Hidden </span>;\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) => (\n      <ControlPopover\n        key={i}\n        trigger=\"click\"\n        title={t('Edit annotation layer')}\n        css={theme => ({\n          '&:hover': {\n            cursor: 'pointer',\n            backgroundColor: theme.colors.grayscale.light4,\n          },\n        })}\n        content={this.renderPopover(\n          i,\n          anno,\n          this.props.annotationError[anno.name],\n        )}\n        visible={this.state.popoverVisible[i]}\n        onVisibleChange={visible => this.handleVisibleChange(visible, i)}\n      >\n        <CustomListItem selectable>\n          <span>{anno.name}</span>\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\n        </CustomListItem>\n      </ControlPopover>\n    ));\n\n    const addLayerPopoverKey = 'add';\n    return (\n      <div>\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\n          {annotations}\n          <ControlPopover\n            trigger=\"click\"\n            content={this.renderPopover(addLayerPopoverKey, addedAnnotation)}\n            title={t('Add annotation layer')}\n            visible={this.state.popoverVisible[addLayerPopoverKey]}\n            destroyTooltipOnHide\n            onVisibleChange={visible =>\n              this.handleVisibleChange(visible, addLayerPopoverKey)\n            }\n          >\n            <CustomListItem selectable>\n              <i\n                data-test=\"add-annotation-layer-button\"\n                className=\"fa fa-plus\"\n              />{' '}\n              &nbsp; {t('Add annotation layer')}\n            </CustomListItem>\n          </ControlPopover>\n        </List>\n      </div>\n    );\n  }\n}\n\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: explore.controls?.color_scheme?.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: annotationObj =>\n      dispatch(runAnnotationQuery(annotationObj)),\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(themedAnnotationLayerControl);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { InputNumber } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\nimport { debounce, parseInt } from 'lodash';\nimport ControlHeader from 'src/explore/components/ControlHeader';\n\ntype ValueType = (number | null)[];\n\nexport type BoundsControlProps = {\n  onChange?: (value: ValueType) => void;\n  value?: ValueType;\n};\n\nconst StyledDiv = styled.div`\n  display: flex;\n`;\n\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst parseNumber = (value: undefined | number | string | null) => {\n  if (\n    value === null ||\n    value === undefined ||\n    (typeof value === 'string' && Number.isNaN(parseInt(value)))\n  ) {\n    return null;\n  }\n  return Number(value);\n};\n\nexport default function BoundsControl({\n  onChange = () => {},\n  value = [null, null],\n  ...props\n}: BoundsControlProps) {\n  const [minMax, setMinMax] = useState<ValueType>([\n    parseNumber(value[0]),\n    parseNumber(value[1]),\n  ]);\n  const min = value[0];\n  const max = value[1];\n  const debouncedOnChange = useRef(debounce(onChange, 300)).current;\n\n  const update = (mm: ValueType) => {\n    setMinMax(mm);\n    debouncedOnChange([\n      mm[0] === undefined ? null : mm[0],\n      mm[1] === undefined ? null : mm[1],\n    ]);\n  };\n\n  useEffect(() => {\n    setMinMax([parseNumber(min), parseNumber(max)]);\n  }, [min, max]);\n\n  const onMinChange = (value: number | string | undefined) => {\n    update([parseNumber(value), minMax[1]]);\n  };\n\n  const onMaxChange = (value: number | string | undefined) => {\n    update([minMax[0], parseNumber(value)]);\n  };\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <StyledDiv>\n        <MinInput\n          data-test=\"min-bound\"\n          placeholder={t('Min')}\n          // emit (string | number | undefined)\n          onChange={onMinChange}\n          // accept (number | undefined)\n          value={minMax[0] === null ? undefined : minMax[0]}\n        />\n        <MaxInput\n          data-test=\"max-bound\"\n          placeholder={t('Max')}\n          // emit (number | string | undefined)\n          onChange={onMaxChange}\n          // accept (number | undefined)\n          value={minMax[1] === null ? undefined : minMax[1]}\n        />\n      </StyledDiv>\n    </div>\n  );\n}\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { createRef, createElement, Component, createContext } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport invariant from 'invariant';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport PropTypes from 'prop-types';\n\nvar Manager = function () {\n  function Manager() {\n    _classCallCheck(this, Manager);\n\n    _defineProperty(this, \"refs\", {});\n  }\n\n  _createClass(Manager, [{\n    key: \"add\",\n    value: function add(collection, ref) {\n      if (!this.refs[collection]) {\n        this.refs[collection] = [];\n      }\n\n      this.refs[collection].push(ref);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(collection, ref) {\n      var index = this.getIndex(collection, ref);\n\n      if (index !== -1) {\n        this.refs[collection].splice(index, 1);\n      }\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.active;\n    }\n  }, {\n    key: \"getActive\",\n    value: function getActive() {\n      var _this = this;\n\n      return this.refs[this.active.collection].find(function (_ref) {\n        var node = _ref.node;\n        return node.sortableInfo.index == _this.active.index;\n      });\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(collection, ref) {\n      return this.refs[collection].indexOf(ref);\n    }\n  }, {\n    key: \"getOrderedRefs\",\n    value: function getOrderedRefs() {\n      var collection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.active.collection;\n      return this.refs[collection].sort(sortByIndex);\n    }\n  }]);\n\n  return Manager;\n}();\n\nfunction sortByIndex(_ref2, _ref3) {\n  var index1 = _ref2.node.sortableInfo.index;\n  var index2 = _ref3.node.sortableInfo.index;\n  return index1 - index2;\n}\n\nfunction arrayMove(array, from, to) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof console !== 'undefined') {\n      console.warn(\"Deprecation warning: arrayMove will no longer be exported by 'react-sortable-hoc' in the next major release. Please install the `array-move` package locally instead. https://www.npmjs.com/package/array-move\");\n    }\n  }\n\n  array = array.slice();\n  array.splice(to < 0 ? array.length + to : to, 0, array.splice(from, 1)[0]);\n  return array;\n}\nfunction omit(obj, keysToOmit) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (keysToOmit.indexOf(key) === -1) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\nvar events = {\n  end: ['touchend', 'touchcancel', 'mouseup'],\n  move: ['touchmove', 'mousemove'],\n  start: ['touchstart', 'mousedown']\n};\nvar vendorPrefix = function () {\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    return '';\n  }\n\n  var styles = window.getComputedStyle(document.documentElement, '') || ['-moz-hidden-iframe'];\n  var pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || styles.OLink === '' && ['', 'o'])[1];\n\n  switch (pre) {\n    case 'ms':\n      return 'ms';\n\n    default:\n      return pre && pre.length ? pre[0].toUpperCase() + pre.substr(1) : '';\n  }\n}();\nfunction setInlineStyles(node, styles) {\n  Object.keys(styles).forEach(function (key) {\n    node.style[key] = styles[key];\n  });\n}\nfunction setTranslate3d(node, translate) {\n  node.style[\"\".concat(vendorPrefix, \"Transform\")] = translate == null ? '' : \"translate3d(\".concat(translate.x, \"px,\").concat(translate.y, \"px,0)\");\n}\nfunction setTransitionDuration(node, duration) {\n  node.style[\"\".concat(vendorPrefix, \"TransitionDuration\")] = duration == null ? '' : \"\".concat(duration, \"ms\");\n}\nfunction closest(el, fn) {\n  while (el) {\n    if (fn(el)) {\n      return el;\n    }\n\n    el = el.parentNode;\n  }\n\n  return null;\n}\nfunction limit(min, max, value) {\n  return Math.max(min, Math.min(value, max));\n}\n\nfunction getPixelValue(stringValue) {\n  if (stringValue.substr(-2) === 'px') {\n    return parseFloat(stringValue);\n  }\n\n  return 0;\n}\n\nfunction getElementMargin(element) {\n  var style = window.getComputedStyle(element);\n  return {\n    bottom: getPixelValue(style.marginBottom),\n    left: getPixelValue(style.marginLeft),\n    right: getPixelValue(style.marginRight),\n    top: getPixelValue(style.marginTop)\n  };\n}\nfunction provideDisplayName(prefix, Component$$1) {\n  var componentName = Component$$1.displayName || Component$$1.name;\n  return componentName ? \"\".concat(prefix, \"(\").concat(componentName, \")\") : prefix;\n}\nfunction getScrollAdjustedBoundingClientRect(node, scrollDelta) {\n  var boundingClientRect = node.getBoundingClientRect();\n  return {\n    top: boundingClientRect.top + scrollDelta.top,\n    left: boundingClientRect.left + scrollDelta.left\n  };\n}\nfunction getPosition(event) {\n  if (event.touches && event.touches.length) {\n    return {\n      x: event.touches[0].pageX,\n      y: event.touches[0].pageY\n    };\n  } else if (event.changedTouches && event.changedTouches.length) {\n    return {\n      x: event.changedTouches[0].pageX,\n      y: event.changedTouches[0].pageY\n    };\n  } else {\n    return {\n      x: event.pageX,\n      y: event.pageY\n    };\n  }\n}\nfunction isTouchEvent(event) {\n  return event.touches && event.touches.length || event.changedTouches && event.changedTouches.length;\n}\nfunction getEdgeOffset(node, parent) {\n  var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    left: 0,\n    top: 0\n  };\n\n  if (!node) {\n    return undefined;\n  }\n\n  var nodeOffset = {\n    left: offset.left + node.offsetLeft,\n    top: offset.top + node.offsetTop\n  };\n\n  if (node.parentNode === parent) {\n    return nodeOffset;\n  }\n\n  return getEdgeOffset(node.parentNode, parent, nodeOffset);\n}\nfunction getTargetIndex(newIndex, prevIndex, oldIndex) {\n  if (newIndex < oldIndex && newIndex > prevIndex) {\n    return newIndex - 1;\n  } else if (newIndex > oldIndex && newIndex < prevIndex) {\n    return newIndex + 1;\n  } else {\n    return newIndex;\n  }\n}\nfunction getLockPixelOffset(_ref) {\n  var lockOffset = _ref.lockOffset,\n      width = _ref.width,\n      height = _ref.height;\n  var offsetX = lockOffset;\n  var offsetY = lockOffset;\n  var unit = 'px';\n\n  if (typeof lockOffset === 'string') {\n    var match = /^[+-]?\\d*(?:\\.\\d*)?(px|%)$/.exec(lockOffset);\n    invariant(match !== null, 'lockOffset value should be a number or a string of a ' + 'number followed by \"px\" or \"%\". Given %s', lockOffset);\n    offsetX = parseFloat(lockOffset);\n    offsetY = parseFloat(lockOffset);\n    unit = match[1];\n  }\n\n  invariant(isFinite(offsetX) && isFinite(offsetY), 'lockOffset value should be a finite. Given %s', lockOffset);\n\n  if (unit === '%') {\n    offsetX = offsetX * width / 100;\n    offsetY = offsetY * height / 100;\n  }\n\n  return {\n    x: offsetX,\n    y: offsetY\n  };\n}\nfunction getLockPixelOffsets(_ref2) {\n  var height = _ref2.height,\n      width = _ref2.width,\n      lockOffset = _ref2.lockOffset;\n  var offsets = Array.isArray(lockOffset) ? lockOffset : [lockOffset, lockOffset];\n  invariant(offsets.length === 2, 'lockOffset prop of SortableContainer should be a single ' + 'value or an array of exactly two values. Given %s', lockOffset);\n\n  var _offsets = _slicedToArray(offsets, 2),\n      minLockOffset = _offsets[0],\n      maxLockOffset = _offsets[1];\n\n  return [getLockPixelOffset({\n    height: height,\n    lockOffset: minLockOffset,\n    width: width\n  }), getLockPixelOffset({\n    height: height,\n    lockOffset: maxLockOffset,\n    width: width\n  })];\n}\n\nfunction isScrollable(el) {\n  var computedStyle = window.getComputedStyle(el);\n  var overflowRegex = /(auto|scroll)/;\n  var properties = ['overflow', 'overflowX', 'overflowY'];\n  return properties.find(function (property) {\n    return overflowRegex.test(computedStyle[property]);\n  });\n}\n\nfunction getScrollingParent(el) {\n  if (!(el instanceof HTMLElement)) {\n    return null;\n  } else if (isScrollable(el)) {\n    return el;\n  } else {\n    return getScrollingParent(el.parentNode);\n  }\n}\nfunction getContainerGridGap(element) {\n  var style = window.getComputedStyle(element);\n\n  if (style.display === 'grid') {\n    return {\n      x: getPixelValue(style.gridColumnGap),\n      y: getPixelValue(style.gridRowGap)\n    };\n  }\n\n  return {\n    x: 0,\n    y: 0\n  };\n}\nvar KEYCODE = {\n  TAB: 9,\n  ESC: 27,\n  SPACE: 32,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\nvar NodeType = {\n  Anchor: 'A',\n  Button: 'BUTTON',\n  Canvas: 'CANVAS',\n  Input: 'INPUT',\n  Option: 'OPTION',\n  Textarea: 'TEXTAREA',\n  Select: 'SELECT'\n};\nfunction cloneNode(node) {\n  var selector = 'input, textarea, select, canvas, [contenteditable]';\n  var fields = node.querySelectorAll(selector);\n  var clonedNode = node.cloneNode(true);\n\n  var clonedFields = _toConsumableArray(clonedNode.querySelectorAll(selector));\n\n  clonedFields.forEach(function (field, i) {\n    if (field.type !== 'file') {\n      field.value = fields[i].value;\n    }\n\n    if (field.type === 'radio' && field.name) {\n      field.name = \"__sortableClone__\".concat(field.name);\n    }\n\n    if (field.tagName === NodeType.Canvas && fields[i].width > 0 && fields[i].height > 0) {\n      var destCtx = field.getContext('2d');\n      destCtx.drawImage(fields[i], 0, 0);\n    }\n  });\n  return clonedNode;\n}\n\nfunction sortableHandle(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    withRef: false\n  };\n  return _temp = _class = function (_React$Component) {\n    _inherits(WithSortableHandle, _React$Component);\n\n    function WithSortableHandle() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, WithSortableHandle);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WithSortableHandle)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"wrappedInstance\", createRef());\n\n      return _this;\n    }\n\n    _createClass(WithSortableHandle, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var node = findDOMNode(this);\n        node.sortableHandle = true;\n      }\n    }, {\n      key: \"getWrappedInstance\",\n      value: function getWrappedInstance() {\n        invariant(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call');\n        return this.wrappedInstance.current;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var ref = config.withRef ? this.wrappedInstance : null;\n        return createElement(WrappedComponent, _extends({\n          ref: ref\n        }, this.props));\n      }\n    }]);\n\n    return WithSortableHandle;\n  }(Component), _defineProperty(_class, \"displayName\", provideDisplayName('sortableHandle', WrappedComponent)), _temp;\n}\nfunction isSortableHandle(node) {\n  return node.sortableHandle != null;\n}\n\nvar AutoScroller = function () {\n  function AutoScroller(container, onScrollCallback) {\n    _classCallCheck(this, AutoScroller);\n\n    this.container = container;\n    this.onScrollCallback = onScrollCallback;\n  }\n\n  _createClass(AutoScroller, [{\n    key: \"clear\",\n    value: function clear() {\n      if (this.interval == null) {\n        return;\n      }\n\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref) {\n      var _this = this;\n\n      var translate = _ref.translate,\n          minTranslate = _ref.minTranslate,\n          maxTranslate = _ref.maxTranslate,\n          width = _ref.width,\n          height = _ref.height;\n      var direction = {\n        x: 0,\n        y: 0\n      };\n      var speed = {\n        x: 1,\n        y: 1\n      };\n      var acceleration = {\n        x: 10,\n        y: 10\n      };\n      var _this$container = this.container,\n          scrollTop = _this$container.scrollTop,\n          scrollLeft = _this$container.scrollLeft,\n          scrollHeight = _this$container.scrollHeight,\n          scrollWidth = _this$container.scrollWidth,\n          clientHeight = _this$container.clientHeight,\n          clientWidth = _this$container.clientWidth;\n      var isTop = scrollTop === 0;\n      var isBottom = scrollHeight - scrollTop - clientHeight === 0;\n      var isLeft = scrollLeft === 0;\n      var isRight = scrollWidth - scrollLeft - clientWidth === 0;\n\n      if (translate.y >= maxTranslate.y - height / 2 && !isBottom) {\n        direction.y = 1;\n        speed.y = acceleration.y * Math.abs((maxTranslate.y - height / 2 - translate.y) / height);\n      } else if (translate.x >= maxTranslate.x - width / 2 && !isRight) {\n        direction.x = 1;\n        speed.x = acceleration.x * Math.abs((maxTranslate.x - width / 2 - translate.x) / width);\n      } else if (translate.y <= minTranslate.y + height / 2 && !isTop) {\n        direction.y = -1;\n        speed.y = acceleration.y * Math.abs((translate.y - height / 2 - minTranslate.y) / height);\n      } else if (translate.x <= minTranslate.x + width / 2 && !isLeft) {\n        direction.x = -1;\n        speed.x = acceleration.x * Math.abs((translate.x - width / 2 - minTranslate.x) / width);\n      }\n\n      if (this.interval) {\n        this.clear();\n        this.isAutoScrolling = false;\n      }\n\n      if (direction.x !== 0 || direction.y !== 0) {\n        this.interval = setInterval(function () {\n          _this.isAutoScrolling = true;\n          var offset = {\n            left: speed.x * direction.x,\n            top: speed.y * direction.y\n          };\n          _this.container.scrollTop += offset.top;\n          _this.container.scrollLeft += offset.left;\n\n          _this.onScrollCallback(offset);\n        }, 5);\n      }\n    }\n  }]);\n\n  return AutoScroller;\n}();\n\nfunction defaultGetHelperDimensions(_ref) {\n  var node = _ref.node;\n  return {\n    height: node.offsetHeight,\n    width: node.offsetWidth\n  };\n}\n\nfunction defaultShouldCancelStart(event) {\n  var interactiveElements = [NodeType.Input, NodeType.Textarea, NodeType.Select, NodeType.Option, NodeType.Button];\n\n  if (interactiveElements.indexOf(event.target.tagName) !== -1) {\n    return true;\n  }\n\n  if (closest(event.target, function (el) {\n    return el.contentEditable === 'true';\n  })) {\n    return true;\n  }\n\n  return false;\n}\n\nvar propTypes = {\n  axis: PropTypes.oneOf(['x', 'y', 'xy']),\n  contentWindow: PropTypes.any,\n  disableAutoscroll: PropTypes.bool,\n  distance: PropTypes.number,\n  getContainer: PropTypes.func,\n  getHelperDimensions: PropTypes.func,\n  helperClass: PropTypes.string,\n  helperContainer: PropTypes.oneOfType([PropTypes.func, typeof HTMLElement === 'undefined' ? PropTypes.any : PropTypes.instanceOf(HTMLElement)]),\n  hideSortableGhost: PropTypes.bool,\n  keyboardSortingTransitionDuration: PropTypes.number,\n  lockAxis: PropTypes.string,\n  lockOffset: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))]),\n  lockToContainerEdges: PropTypes.bool,\n  onSortEnd: PropTypes.func,\n  onSortMove: PropTypes.func,\n  onSortOver: PropTypes.func,\n  onSortStart: PropTypes.func,\n  pressDelay: PropTypes.number,\n  pressThreshold: PropTypes.number,\n  keyCodes: PropTypes.shape({\n    lift: PropTypes.arrayOf(PropTypes.number),\n    drop: PropTypes.arrayOf(PropTypes.number),\n    cancel: PropTypes.arrayOf(PropTypes.number),\n    up: PropTypes.arrayOf(PropTypes.number),\n    down: PropTypes.arrayOf(PropTypes.number)\n  }),\n  shouldCancelStart: PropTypes.func,\n  transitionDuration: PropTypes.number,\n  updateBeforeSortStart: PropTypes.func,\n  useDragHandle: PropTypes.bool,\n  useWindowAsScrollContainer: PropTypes.bool\n};\nvar defaultKeyCodes = {\n  lift: [KEYCODE.SPACE],\n  drop: [KEYCODE.SPACE],\n  cancel: [KEYCODE.ESC],\n  up: [KEYCODE.UP, KEYCODE.LEFT],\n  down: [KEYCODE.DOWN, KEYCODE.RIGHT]\n};\nvar defaultProps = {\n  axis: 'y',\n  disableAutoscroll: false,\n  distance: 0,\n  getHelperDimensions: defaultGetHelperDimensions,\n  hideSortableGhost: true,\n  lockOffset: '50%',\n  lockToContainerEdges: false,\n  pressDelay: 0,\n  pressThreshold: 5,\n  keyCodes: defaultKeyCodes,\n  shouldCancelStart: defaultShouldCancelStart,\n  transitionDuration: 300,\n  useWindowAsScrollContainer: false\n};\nvar omittedProps = Object.keys(propTypes);\nfunction validateProps(props) {\n  invariant(!(props.distance && props.pressDelay), 'Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.');\n}\n\nfunction _finallyRethrows(body, finalizer) {\n  try {\n    var result = body();\n  } catch (e) {\n    return finalizer(true, e);\n  }\n\n  if (result && result.then) {\n    return result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n  }\n\n  return finalizer(false, value);\n}\nvar SortableContext = createContext({\n  manager: {}\n});\nfunction sortableContainer(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    withRef: false\n  };\n  return _temp = _class = function (_React$Component) {\n    _inherits(WithSortableContainer, _React$Component);\n\n    function WithSortableContainer(props) {\n      var _this;\n\n      _classCallCheck(this, WithSortableContainer);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WithSortableContainer).call(this, props));\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {});\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleStart\", function (event) {\n        var _this$props = _this.props,\n            distance = _this$props.distance,\n            shouldCancelStart = _this$props.shouldCancelStart;\n\n        if (event.button === 2 || shouldCancelStart(event)) {\n          return;\n        }\n\n        _this.touched = true;\n        _this.position = getPosition(event);\n        var node = closest(event.target, function (el) {\n          return el.sortableInfo != null;\n        });\n\n        if (node && node.sortableInfo && _this.nodeIsChild(node) && !_this.state.sorting) {\n          var useDragHandle = _this.props.useDragHandle;\n          var _node$sortableInfo = node.sortableInfo,\n              index = _node$sortableInfo.index,\n              collection = _node$sortableInfo.collection,\n              disabled = _node$sortableInfo.disabled;\n\n          if (disabled) {\n            return;\n          }\n\n          if (useDragHandle && !closest(event.target, isSortableHandle)) {\n            return;\n          }\n\n          _this.manager.active = {\n            collection: collection,\n            index: index\n          };\n\n          if (!isTouchEvent(event) && event.target.tagName === NodeType.Anchor) {\n            event.preventDefault();\n          }\n\n          if (!distance) {\n            if (_this.props.pressDelay === 0) {\n              _this.handlePress(event);\n            } else {\n              _this.pressTimer = setTimeout(function () {\n                return _this.handlePress(event);\n              }, _this.props.pressDelay);\n            }\n          }\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"nodeIsChild\", function (node) {\n        return node.sortableInfo.manager === _this.manager;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleMove\", function (event) {\n        var _this$props2 = _this.props,\n            distance = _this$props2.distance,\n            pressThreshold = _this$props2.pressThreshold;\n\n        if (!_this.state.sorting && _this.touched && !_this._awaitingUpdateBeforeSortStart) {\n          var position = getPosition(event);\n          var delta = {\n            x: _this.position.x - position.x,\n            y: _this.position.y - position.y\n          };\n          var combinedDelta = Math.abs(delta.x) + Math.abs(delta.y);\n          _this.delta = delta;\n\n          if (!distance && (!pressThreshold || combinedDelta >= pressThreshold)) {\n            clearTimeout(_this.cancelTimer);\n            _this.cancelTimer = setTimeout(_this.cancel, 0);\n          } else if (distance && combinedDelta >= distance && _this.manager.isActive()) {\n            _this.handlePress(event);\n          }\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleEnd\", function () {\n        _this.touched = false;\n\n        _this.cancel();\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"cancel\", function () {\n        var distance = _this.props.distance;\n        var sorting = _this.state.sorting;\n\n        if (!sorting) {\n          if (!distance) {\n            clearTimeout(_this.pressTimer);\n          }\n\n          _this.manager.active = null;\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handlePress\", function (event) {\n        try {\n          var active = _this.manager.getActive();\n\n          var _temp6 = function () {\n            if (active) {\n              var _temp7 = function _temp7() {\n                var index = _node.sortableInfo.index;\n                var margin = getElementMargin(_node);\n                var gridGap = getContainerGridGap(_this.container);\n\n                var containerBoundingRect = _this.scrollContainer.getBoundingClientRect();\n\n                var dimensions = _getHelperDimensions({\n                  index: index,\n                  node: _node,\n                  collection: _collection\n                });\n\n                _this.node = _node;\n                _this.margin = margin;\n                _this.gridGap = gridGap;\n                _this.width = dimensions.width;\n                _this.height = dimensions.height;\n                _this.marginOffset = {\n                  x: _this.margin.left + _this.margin.right + _this.gridGap.x,\n                  y: Math.max(_this.margin.top, _this.margin.bottom, _this.gridGap.y)\n                };\n                _this.boundingClientRect = _node.getBoundingClientRect();\n                _this.containerBoundingRect = containerBoundingRect;\n                _this.index = index;\n                _this.newIndex = index;\n                _this.axis = {\n                  x: _axis.indexOf('x') >= 0,\n                  y: _axis.indexOf('y') >= 0\n                };\n                _this.offsetEdge = getEdgeOffset(_node, _this.container);\n\n                if (_isKeySorting) {\n                  _this.initialOffset = getPosition(_objectSpread({}, event, {\n                    pageX: _this.boundingClientRect.left,\n                    pageY: _this.boundingClientRect.top\n                  }));\n                } else {\n                  _this.initialOffset = getPosition(event);\n                }\n\n                _this.initialScroll = {\n                  left: _this.scrollContainer.scrollLeft,\n                  top: _this.scrollContainer.scrollTop\n                };\n                _this.initialWindowScroll = {\n                  left: window.pageXOffset,\n                  top: window.pageYOffset\n                };\n                _this.helper = _this.helperContainer.appendChild(cloneNode(_node));\n                setInlineStyles(_this.helper, {\n                  boxSizing: 'border-box',\n                  height: \"\".concat(_this.height, \"px\"),\n                  left: \"\".concat(_this.boundingClientRect.left - margin.left, \"px\"),\n                  pointerEvents: 'none',\n                  position: 'fixed',\n                  top: \"\".concat(_this.boundingClientRect.top - margin.top, \"px\"),\n                  width: \"\".concat(_this.width, \"px\")\n                });\n\n                if (_isKeySorting) {\n                  _this.helper.focus();\n                }\n\n                if (_hideSortableGhost) {\n                  _this.sortableGhost = _node;\n                  setInlineStyles(_node, {\n                    opacity: 0,\n                    visibility: 'hidden'\n                  });\n                }\n\n                _this.minTranslate = {};\n                _this.maxTranslate = {};\n\n                if (_isKeySorting) {\n                  var _ref = _useWindowAsScrollContainer ? {\n                    top: 0,\n                    left: 0,\n                    width: _this.contentWindow.innerWidth,\n                    height: _this.contentWindow.innerHeight\n                  } : _this.containerBoundingRect,\n                      containerTop = _ref.top,\n                      containerLeft = _ref.left,\n                      containerWidth = _ref.width,\n                      containerHeight = _ref.height;\n\n                  var containerBottom = containerTop + containerHeight;\n                  var containerRight = containerLeft + containerWidth;\n\n                  if (_this.axis.x) {\n                    _this.minTranslate.x = containerLeft - _this.boundingClientRect.left;\n                    _this.maxTranslate.x = containerRight - (_this.boundingClientRect.left + _this.width);\n                  }\n\n                  if (_this.axis.y) {\n                    _this.minTranslate.y = containerTop - _this.boundingClientRect.top;\n                    _this.maxTranslate.y = containerBottom - (_this.boundingClientRect.top + _this.height);\n                  }\n                } else {\n                  if (_this.axis.x) {\n                    _this.minTranslate.x = (_useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - _this.boundingClientRect.left - _this.width / 2;\n                    _this.maxTranslate.x = (_useWindowAsScrollContainer ? _this.contentWindow.innerWidth : containerBoundingRect.left + containerBoundingRect.width) - _this.boundingClientRect.left - _this.width / 2;\n                  }\n\n                  if (_this.axis.y) {\n                    _this.minTranslate.y = (_useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - _this.boundingClientRect.top - _this.height / 2;\n                    _this.maxTranslate.y = (_useWindowAsScrollContainer ? _this.contentWindow.innerHeight : containerBoundingRect.top + containerBoundingRect.height) - _this.boundingClientRect.top - _this.height / 2;\n                  }\n                }\n\n                if (_helperClass) {\n                  _helperClass.split(' ').forEach(function (className) {\n                    return _this.helper.classList.add(className);\n                  });\n                }\n\n                _this.listenerNode = event.touches ? event.target : _this.contentWindow;\n\n                if (_isKeySorting) {\n                  _this.listenerNode.addEventListener('wheel', _this.handleKeyEnd, true);\n\n                  _this.listenerNode.addEventListener('mousedown', _this.handleKeyEnd, true);\n\n                  _this.listenerNode.addEventListener('keydown', _this.handleKeyDown);\n                } else {\n                  events.move.forEach(function (eventName) {\n                    return _this.listenerNode.addEventListener(eventName, _this.handleSortMove, false);\n                  });\n                  events.end.forEach(function (eventName) {\n                    return _this.listenerNode.addEventListener(eventName, _this.handleSortEnd, false);\n                  });\n                }\n\n                _this.setState({\n                  sorting: true,\n                  sortingIndex: index\n                });\n\n                if (_onSortStart) {\n                  _onSortStart({\n                    node: _node,\n                    index: index,\n                    collection: _collection,\n                    isKeySorting: _isKeySorting,\n                    nodes: _this.manager.getOrderedRefs(),\n                    helper: _this.helper\n                  }, event);\n                }\n\n                if (_isKeySorting) {\n                  _this.keyMove(0);\n                }\n              };\n\n              var _this$props3 = _this.props,\n                  _axis = _this$props3.axis,\n                  _getHelperDimensions = _this$props3.getHelperDimensions,\n                  _helperClass = _this$props3.helperClass,\n                  _hideSortableGhost = _this$props3.hideSortableGhost,\n                  updateBeforeSortStart = _this$props3.updateBeforeSortStart,\n                  _onSortStart = _this$props3.onSortStart,\n                  _useWindowAsScrollContainer = _this$props3.useWindowAsScrollContainer;\n              var _node = active.node,\n                  _collection = active.collection;\n              var _isKeySorting = _this.manager.isKeySorting;\n\n              var _temp8 = function () {\n                if (typeof updateBeforeSortStart === 'function') {\n                  _this._awaitingUpdateBeforeSortStart = true;\n\n                  var _temp9 = _finallyRethrows(function () {\n                    var index = _node.sortableInfo.index;\n                    return Promise.resolve(updateBeforeSortStart({\n                      collection: _collection,\n                      index: index,\n                      node: _node,\n                      isKeySorting: _isKeySorting\n                    }, event)).then(function () {});\n                  }, function (_wasThrown, _result) {\n                    _this._awaitingUpdateBeforeSortStart = false;\n                    if (_wasThrown) throw _result;\n                    return _result;\n                  });\n\n                  if (_temp9 && _temp9.then) return _temp9.then(function () {});\n                }\n              }();\n\n              return _temp8 && _temp8.then ? _temp8.then(_temp7) : _temp7(_temp8);\n            }\n          }();\n\n          return Promise.resolve(_temp6 && _temp6.then ? _temp6.then(function () {}) : void 0);\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleSortMove\", function (event) {\n        var onSortMove = _this.props.onSortMove;\n\n        if (typeof event.preventDefault === 'function' && event.cancelable) {\n          event.preventDefault();\n        }\n\n        _this.updateHelperPosition(event);\n\n        _this.animateNodes();\n\n        _this.autoscroll();\n\n        if (onSortMove) {\n          onSortMove(event);\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleSortEnd\", function (event) {\n        var _this$props4 = _this.props,\n            hideSortableGhost = _this$props4.hideSortableGhost,\n            onSortEnd = _this$props4.onSortEnd;\n        var _this$manager = _this.manager,\n            collection = _this$manager.active.collection,\n            isKeySorting = _this$manager.isKeySorting;\n\n        var nodes = _this.manager.getOrderedRefs();\n\n        if (_this.listenerNode) {\n          if (isKeySorting) {\n            _this.listenerNode.removeEventListener('wheel', _this.handleKeyEnd, true);\n\n            _this.listenerNode.removeEventListener('mousedown', _this.handleKeyEnd, true);\n\n            _this.listenerNode.removeEventListener('keydown', _this.handleKeyDown);\n          } else {\n            events.move.forEach(function (eventName) {\n              return _this.listenerNode.removeEventListener(eventName, _this.handleSortMove);\n            });\n            events.end.forEach(function (eventName) {\n              return _this.listenerNode.removeEventListener(eventName, _this.handleSortEnd);\n            });\n          }\n        }\n\n        _this.helper.parentNode.removeChild(_this.helper);\n\n        if (hideSortableGhost && _this.sortableGhost) {\n          setInlineStyles(_this.sortableGhost, {\n            opacity: '',\n            visibility: ''\n          });\n        }\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var _node2 = nodes[i];\n          var el = _node2.node;\n          _node2.edgeOffset = null;\n          _node2.boundingClientRect = null;\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n          _node2.translate = null;\n        }\n\n        _this.autoScroller.clear();\n\n        _this.manager.active = null;\n        _this.manager.isKeySorting = false;\n\n        _this.setState({\n          sorting: false,\n          sortingIndex: null\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            collection: collection,\n            newIndex: _this.newIndex,\n            oldIndex: _this.index,\n            isKeySorting: isKeySorting,\n            nodes: nodes\n          }, event);\n        }\n\n        _this.touched = false;\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"autoscroll\", function () {\n        var disableAutoscroll = _this.props.disableAutoscroll;\n        var isKeySorting = _this.manager.isKeySorting;\n\n        if (disableAutoscroll) {\n          _this.autoScroller.clear();\n\n          return;\n        }\n\n        if (isKeySorting) {\n          var translate = _objectSpread({}, _this.translate);\n\n          var scrollX = 0;\n          var scrollY = 0;\n\n          if (_this.axis.x) {\n            translate.x = Math.min(_this.maxTranslate.x, Math.max(_this.minTranslate.x, _this.translate.x));\n            scrollX = _this.translate.x - translate.x;\n          }\n\n          if (_this.axis.y) {\n            translate.y = Math.min(_this.maxTranslate.y, Math.max(_this.minTranslate.y, _this.translate.y));\n            scrollY = _this.translate.y - translate.y;\n          }\n\n          _this.translate = translate;\n          setTranslate3d(_this.helper, _this.translate);\n          _this.scrollContainer.scrollLeft += scrollX;\n          _this.scrollContainer.scrollTop += scrollY;\n          return;\n        }\n\n        _this.autoScroller.update({\n          height: _this.height,\n          maxTranslate: _this.maxTranslate,\n          minTranslate: _this.minTranslate,\n          translate: _this.translate,\n          width: _this.width\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onAutoScroll\", function (offset) {\n        _this.translate.x += offset.left;\n        _this.translate.y += offset.top;\n\n        _this.animateNodes();\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleKeyDown\", function (event) {\n        var keyCode = event.keyCode;\n        var _this$props5 = _this.props,\n            shouldCancelStart = _this$props5.shouldCancelStart,\n            _this$props5$keyCodes = _this$props5.keyCodes,\n            customKeyCodes = _this$props5$keyCodes === void 0 ? {} : _this$props5$keyCodes;\n\n        var keyCodes = _objectSpread({}, defaultKeyCodes, customKeyCodes);\n\n        if (_this.manager.active && !_this.manager.isKeySorting || !_this.manager.active && (!keyCodes.lift.includes(keyCode) || shouldCancelStart(event) || !_this.isValidSortingTarget(event))) {\n          return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (keyCodes.lift.includes(keyCode) && !_this.manager.active) {\n          _this.keyLift(event);\n        } else if (keyCodes.drop.includes(keyCode) && _this.manager.active) {\n          _this.keyDrop(event);\n        } else if (keyCodes.cancel.includes(keyCode)) {\n          _this.newIndex = _this.manager.active.index;\n\n          _this.keyDrop(event);\n        } else if (keyCodes.up.includes(keyCode)) {\n          _this.keyMove(-1);\n        } else if (keyCodes.down.includes(keyCode)) {\n          _this.keyMove(1);\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"keyLift\", function (event) {\n        var target = event.target;\n        var node = closest(target, function (el) {\n          return el.sortableInfo != null;\n        });\n        var _node$sortableInfo2 = node.sortableInfo,\n            index = _node$sortableInfo2.index,\n            collection = _node$sortableInfo2.collection;\n        _this.initialFocusedNode = target;\n        _this.manager.isKeySorting = true;\n        _this.manager.active = {\n          index: index,\n          collection: collection\n        };\n\n        _this.handlePress(event);\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"keyMove\", function (shift) {\n        var nodes = _this.manager.getOrderedRefs();\n\n        var lastIndex = nodes[nodes.length - 1].node.sortableInfo.index;\n        var newIndex = _this.newIndex + shift;\n        var prevIndex = _this.newIndex;\n\n        if (newIndex < 0 || newIndex > lastIndex) {\n          return;\n        }\n\n        _this.prevIndex = prevIndex;\n        _this.newIndex = newIndex;\n        var targetIndex = getTargetIndex(_this.newIndex, _this.prevIndex, _this.index);\n        var target = nodes.find(function (_ref2) {\n          var node = _ref2.node;\n          return node.sortableInfo.index === targetIndex;\n        });\n        var targetNode = target.node;\n        var scrollDelta = _this.containerScrollDelta;\n        var targetBoundingClientRect = target.boundingClientRect || getScrollAdjustedBoundingClientRect(targetNode, scrollDelta);\n        var targetTranslate = target.translate || {\n          x: 0,\n          y: 0\n        };\n        var targetPosition = {\n          top: targetBoundingClientRect.top + targetTranslate.y - scrollDelta.top,\n          left: targetBoundingClientRect.left + targetTranslate.x - scrollDelta.left\n        };\n        var shouldAdjustForSize = prevIndex < newIndex;\n        var sizeAdjustment = {\n          x: shouldAdjustForSize && _this.axis.x ? targetNode.offsetWidth - _this.width : 0,\n          y: shouldAdjustForSize && _this.axis.y ? targetNode.offsetHeight - _this.height : 0\n        };\n\n        _this.handleSortMove({\n          pageX: targetPosition.left + sizeAdjustment.x,\n          pageY: targetPosition.top + sizeAdjustment.y,\n          ignoreTransition: shift === 0\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"keyDrop\", function (event) {\n        _this.handleSortEnd(event);\n\n        if (_this.initialFocusedNode) {\n          _this.initialFocusedNode.focus();\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleKeyEnd\", function (event) {\n        if (_this.manager.active) {\n          _this.keyDrop(event);\n        }\n      });\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"isValidSortingTarget\", function (event) {\n        var useDragHandle = _this.props.useDragHandle;\n        var target = event.target;\n        var node = closest(target, function (el) {\n          return el.sortableInfo != null;\n        });\n        return node && node.sortableInfo && !node.sortableInfo.disabled && (useDragHandle ? isSortableHandle(target) : target.sortableInfo);\n      });\n\n      var manager = new Manager();\n      validateProps(props);\n      _this.manager = manager;\n      _this.wrappedInstance = createRef();\n      _this.sortableContextValue = {\n        manager: manager\n      };\n      _this.events = {\n        end: _this.handleEnd,\n        move: _this.handleMove,\n        start: _this.handleStart\n      };\n      return _this;\n    }\n\n    _createClass(WithSortableContainer, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var useWindowAsScrollContainer = this.props.useWindowAsScrollContainer;\n        var container = this.getContainer();\n        Promise.resolve(container).then(function (containerNode) {\n          _this2.container = containerNode;\n          _this2.document = _this2.container.ownerDocument || document;\n          var contentWindow = _this2.props.contentWindow || _this2.document.defaultView || window;\n          _this2.contentWindow = typeof contentWindow === 'function' ? contentWindow() : contentWindow;\n          _this2.scrollContainer = useWindowAsScrollContainer ? _this2.document.scrollingElement || _this2.document.documentElement : getScrollingParent(_this2.container) || _this2.container;\n          _this2.autoScroller = new AutoScroller(_this2.scrollContainer, _this2.onAutoScroll);\n          Object.keys(_this2.events).forEach(function (key) {\n            return events[key].forEach(function (eventName) {\n              return _this2.container.addEventListener(eventName, _this2.events[key], false);\n            });\n          });\n\n          _this2.container.addEventListener('keydown', _this2.handleKeyDown);\n        });\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var _this3 = this;\n\n        if (this.helper && this.helper.parentNode) {\n          this.helper.parentNode.removeChild(this.helper);\n        }\n\n        if (!this.container) {\n          return;\n        }\n\n        Object.keys(this.events).forEach(function (key) {\n          return events[key].forEach(function (eventName) {\n            return _this3.container.removeEventListener(eventName, _this3.events[key]);\n          });\n        });\n        this.container.removeEventListener('keydown', this.handleKeyDown);\n      }\n    }, {\n      key: \"updateHelperPosition\",\n      value: function updateHelperPosition(event) {\n        var _this$props6 = this.props,\n            lockAxis = _this$props6.lockAxis,\n            lockOffset = _this$props6.lockOffset,\n            lockToContainerEdges = _this$props6.lockToContainerEdges,\n            transitionDuration = _this$props6.transitionDuration,\n            _this$props6$keyboard = _this$props6.keyboardSortingTransitionDuration,\n            keyboardSortingTransitionDuration = _this$props6$keyboard === void 0 ? transitionDuration : _this$props6$keyboard;\n        var isKeySorting = this.manager.isKeySorting;\n        var ignoreTransition = event.ignoreTransition;\n        var offset = getPosition(event);\n        var translate = {\n          x: offset.x - this.initialOffset.x,\n          y: offset.y - this.initialOffset.y\n        };\n        translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n        translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n        this.translate = translate;\n\n        if (lockToContainerEdges) {\n          var _getLockPixelOffsets = getLockPixelOffsets({\n            height: this.height,\n            lockOffset: lockOffset,\n            width: this.width\n          }),\n              _getLockPixelOffsets2 = _slicedToArray(_getLockPixelOffsets, 2),\n              minLockOffset = _getLockPixelOffsets2[0],\n              maxLockOffset = _getLockPixelOffsets2[1];\n\n          var minOffset = {\n            x: this.width / 2 - minLockOffset.x,\n            y: this.height / 2 - minLockOffset.y\n          };\n          var maxOffset = {\n            x: this.width / 2 - maxLockOffset.x,\n            y: this.height / 2 - maxLockOffset.y\n          };\n          translate.x = limit(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n          translate.y = limit(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n        }\n\n        if (lockAxis === 'x') {\n          translate.y = 0;\n        } else if (lockAxis === 'y') {\n          translate.x = 0;\n        }\n\n        if (isKeySorting && keyboardSortingTransitionDuration && !ignoreTransition) {\n          setTransitionDuration(this.helper, keyboardSortingTransitionDuration);\n        }\n\n        setTranslate3d(this.helper, translate);\n      }\n    }, {\n      key: \"animateNodes\",\n      value: function animateNodes() {\n        var _this$props7 = this.props,\n            transitionDuration = _this$props7.transitionDuration,\n            hideSortableGhost = _this$props7.hideSortableGhost,\n            onSortOver = _this$props7.onSortOver;\n        var containerScrollDelta = this.containerScrollDelta,\n            windowScrollDelta = this.windowScrollDelta;\n        var nodes = this.manager.getOrderedRefs();\n        var sortingOffset = {\n          left: this.offsetEdge.left + this.translate.x + containerScrollDelta.left,\n          top: this.offsetEdge.top + this.translate.y + containerScrollDelta.top\n        };\n        var isKeySorting = this.manager.isKeySorting;\n        var prevIndex = this.newIndex;\n        this.newIndex = null;\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var _node3 = nodes[i].node;\n          var index = _node3.sortableInfo.index;\n          var width = _node3.offsetWidth;\n          var height = _node3.offsetHeight;\n          var offset = {\n            height: this.height > height ? height / 2 : this.height / 2,\n            width: this.width > width ? width / 2 : this.width / 2\n          };\n          var mustShiftBackward = isKeySorting && index > this.index && index <= prevIndex;\n          var mustShiftForward = isKeySorting && index < this.index && index >= prevIndex;\n          var translate = {\n            x: 0,\n            y: 0\n          };\n          var edgeOffset = nodes[i].edgeOffset;\n\n          if (!edgeOffset) {\n            edgeOffset = getEdgeOffset(_node3, this.container);\n            nodes[i].edgeOffset = edgeOffset;\n\n            if (isKeySorting) {\n              nodes[i].boundingClientRect = getScrollAdjustedBoundingClientRect(_node3, containerScrollDelta);\n            }\n          }\n\n          var nextNode = i < nodes.length - 1 && nodes[i + 1];\n          var prevNode = i > 0 && nodes[i - 1];\n\n          if (nextNode && !nextNode.edgeOffset) {\n            nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.container);\n\n            if (isKeySorting) {\n              nextNode.boundingClientRect = getScrollAdjustedBoundingClientRect(nextNode.node, containerScrollDelta);\n            }\n          }\n\n          if (index === this.index) {\n            if (hideSortableGhost) {\n              this.sortableGhost = _node3;\n              setInlineStyles(_node3, {\n                opacity: 0,\n                visibility: 'hidden'\n              });\n            }\n\n            continue;\n          }\n\n          if (transitionDuration) {\n            setTransitionDuration(_node3, transitionDuration);\n          }\n\n          if (this.axis.x) {\n            if (this.axis.y) {\n              if (mustShiftForward || index < this.index && (sortingOffset.left + windowScrollDelta.left - offset.width <= edgeOffset.left && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height || sortingOffset.top + windowScrollDelta.top + offset.height <= edgeOffset.top)) {\n                translate.x = this.width + this.marginOffset.x;\n\n                if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width) {\n                  if (nextNode) {\n                    translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                    translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                  }\n                }\n\n                if (this.newIndex === null) {\n                  this.newIndex = index;\n                }\n              } else if (mustShiftBackward || index > this.index && (sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top || sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top + height)) {\n                translate.x = -(this.width + this.marginOffset.x);\n\n                if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width) {\n                  if (prevNode) {\n                    translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                    translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                  }\n                }\n\n                this.newIndex = index;\n              }\n            } else {\n              if (mustShiftBackward || index > this.index && sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left) {\n                translate.x = -(this.width + this.marginOffset.x);\n                this.newIndex = index;\n              } else if (mustShiftForward || index < this.index && sortingOffset.left + windowScrollDelta.left <= edgeOffset.left + offset.width) {\n                translate.x = this.width + this.marginOffset.x;\n\n                if (this.newIndex == null) {\n                  this.newIndex = index;\n                }\n              }\n            }\n          } else if (this.axis.y) {\n            if (mustShiftBackward || index > this.index && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top) {\n              translate.y = -(this.height + this.marginOffset.y);\n              this.newIndex = index;\n            } else if (mustShiftForward || index < this.index && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height) {\n              translate.y = this.height + this.marginOffset.y;\n\n              if (this.newIndex == null) {\n                this.newIndex = index;\n              }\n            }\n          }\n\n          setTranslate3d(_node3, translate);\n          nodes[i].translate = translate;\n        }\n\n        if (this.newIndex == null) {\n          this.newIndex = this.index;\n        }\n\n        if (isKeySorting) {\n          this.newIndex = prevIndex;\n        }\n\n        var oldIndex = isKeySorting ? this.prevIndex : prevIndex;\n\n        if (onSortOver && this.newIndex !== oldIndex) {\n          onSortOver({\n            collection: this.manager.active.collection,\n            index: this.index,\n            newIndex: this.newIndex,\n            oldIndex: oldIndex,\n            isKeySorting: isKeySorting,\n            nodes: nodes,\n            helper: this.helper\n          });\n        }\n      }\n    }, {\n      key: \"getWrappedInstance\",\n      value: function getWrappedInstance() {\n        invariant(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call');\n        return this.wrappedInstance.current;\n      }\n    }, {\n      key: \"getContainer\",\n      value: function getContainer() {\n        var getContainer = this.props.getContainer;\n\n        if (typeof getContainer !== 'function') {\n          return findDOMNode(this);\n        }\n\n        return getContainer(config.withRef ? this.getWrappedInstance() : undefined);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var ref = config.withRef ? this.wrappedInstance : null;\n        return createElement(SortableContext.Provider, {\n          value: this.sortableContextValue\n        }, createElement(WrappedComponent, _extends({\n          ref: ref\n        }, omit(this.props, omittedProps))));\n      }\n    }, {\n      key: \"helperContainer\",\n      get: function get() {\n        var helperContainer = this.props.helperContainer;\n\n        if (typeof helperContainer === 'function') {\n          return helperContainer();\n        }\n\n        return this.props.helperContainer || this.document.body;\n      }\n    }, {\n      key: \"containerScrollDelta\",\n      get: function get() {\n        var useWindowAsScrollContainer = this.props.useWindowAsScrollContainer;\n\n        if (useWindowAsScrollContainer) {\n          return {\n            left: 0,\n            top: 0\n          };\n        }\n\n        return {\n          left: this.scrollContainer.scrollLeft - this.initialScroll.left,\n          top: this.scrollContainer.scrollTop - this.initialScroll.top\n        };\n      }\n    }, {\n      key: \"windowScrollDelta\",\n      get: function get() {\n        return {\n          left: this.contentWindow.pageXOffset - this.initialWindowScroll.left,\n          top: this.contentWindow.pageYOffset - this.initialWindowScroll.top\n        };\n      }\n    }]);\n\n    return WithSortableContainer;\n  }(Component), _defineProperty(_class, \"displayName\", provideDisplayName('sortableList', WrappedComponent)), _defineProperty(_class, \"defaultProps\", defaultProps), _defineProperty(_class, \"propTypes\", propTypes), _temp;\n}\n\nvar propTypes$1 = {\n  index: PropTypes.number.isRequired,\n  collection: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  disabled: PropTypes.bool\n};\nvar omittedProps$1 = Object.keys(propTypes$1);\nfunction sortableElement(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    withRef: false\n  };\n  return _temp = _class = function (_React$Component) {\n    _inherits(WithSortableElement, _React$Component);\n\n    function WithSortableElement() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, WithSortableElement);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WithSortableElement)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"wrappedInstance\", createRef());\n\n      return _this;\n    }\n\n    _createClass(WithSortableElement, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.register();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (this.node) {\n          if (prevProps.index !== this.props.index) {\n            this.node.sortableInfo.index = this.props.index;\n          }\n\n          if (prevProps.disabled !== this.props.disabled) {\n            this.node.sortableInfo.disabled = this.props.disabled;\n          }\n        }\n\n        if (prevProps.collection !== this.props.collection) {\n          this.unregister(prevProps.collection);\n          this.register();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.unregister();\n      }\n    }, {\n      key: \"register\",\n      value: function register() {\n        var _this$props = this.props,\n            collection = _this$props.collection,\n            disabled = _this$props.disabled,\n            index = _this$props.index;\n        var node = findDOMNode(this);\n        node.sortableInfo = {\n          collection: collection,\n          disabled: disabled,\n          index: index,\n          manager: this.context.manager\n        };\n        this.node = node;\n        this.ref = {\n          node: node\n        };\n        this.context.manager.add(collection, this.ref);\n      }\n    }, {\n      key: \"unregister\",\n      value: function unregister() {\n        var collection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.collection;\n        this.context.manager.remove(collection, this.ref);\n      }\n    }, {\n      key: \"getWrappedInstance\",\n      value: function getWrappedInstance() {\n        invariant(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call');\n        return this.wrappedInstance.current;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var ref = config.withRef ? this.wrappedInstance : null;\n        return createElement(WrappedComponent, _extends({\n          ref: ref\n        }, omit(this.props, omittedProps$1)));\n      }\n    }]);\n\n    return WithSortableElement;\n  }(Component), _defineProperty(_class, \"displayName\", provideDisplayName('sortableElement', WrappedComponent)), _defineProperty(_class, \"contextType\", SortableContext), _defineProperty(_class, \"propTypes\", propTypes$1), _defineProperty(_class, \"defaultProps\", {\n    collection: 0\n  }), _temp;\n}\n\nexport { sortableContainer as SortableContainer, sortableContainer, sortableElement as SortableElement, sortableElement, sortableHandle as SortableHandle, sortableHandle, arrayMove };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { nanoid } from 'nanoid';\nimport { t, withTheme } from '@superset-ui/core';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport Icons from 'src/components/Icons';\nimport {\n  HeaderContainer,\n  AddIconButton,\n} from 'src/explore/components/controls/OptionControls';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport controlMap from '..';\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: t('Empty collection'),\n  itemGenerator: () => ({ key: nanoid(11) }),\n  keyAccessor: o => o.key,\n  value: [],\n  addTooltip: t('Add an item'),\n};\nconst SortableListItem = SortableElement(CustomListItem);\nconst SortableList = SortableContainer(List);\nconst SortableDragger = SortableHandle(() => (\n  <i\n    role=\"img\"\n    aria-label=\"drag\"\n    className=\"fa fa-bars text-primary\"\n    style={{ cursor: 'ns-resize' }}\n  />\n));\n\nclass CollectionControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onAdd = this.onAdd.bind(this);\n  }\n\n  onChange(i, value) {\n    const newValue = [...this.props.value];\n    newValue[i] = { ...this.props.value[i], ...value };\n    this.props.onChange(newValue);\n  }\n\n  onAdd() {\n    this.props.onChange(this.props.value.concat([this.props.itemGenerator()]));\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n\n  removeItem(i) {\n    this.props.onChange(this.props.value.filter((o, ix) => i !== ix));\n  }\n\n  renderList() {\n    if (this.props.value.length === 0) {\n      return <div className=\"text-muted\">{this.props.placeholder}</div>;\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      <SortableList\n        useDragHandle\n        lockAxis=\"y\"\n        onSortEnd={this.onSortEnd.bind(this)}\n        bordered\n        css={theme => ({\n          borderRadius: theme.gridUnit,\n        })}\n      >\n        {this.props.value.map((o, i) => {\n          // label relevant only for header, not here\n          const { label, ...commonProps } = this.props;\n          return (\n            <SortableListItem\n              className=\"clearfix\"\n              css={{ justifyContent: 'flex-start' }}\n              key={this.props.keyAccessor(o)}\n              index={i}\n            >\n              <SortableDragger />\n              <div\n                css={theme => ({\n                  flex: 1,\n                  marginLeft: theme.gridUnit * 2,\n                  marginRight: theme.gridUnit * 2,\n                })}\n              >\n                <Control\n                  {...commonProps}\n                  {...o}\n                  onChange={this.onChange.bind(this, i)}\n                />\n              </div>\n              <InfoTooltipWithTrigger\n                icon=\"times\"\n                label=\"remove-item\"\n                tooltip={t('Remove item')}\n                bsStyle=\"primary\"\n                onClick={this.removeItem.bind(this, i)}\n              />\n            </SortableListItem>\n          );\n        })}\n      </SortableList>\n    );\n  }\n\n  render() {\n    const { theme } = this.props;\n    return (\n      <div data-test=\"CollectionControl\" className=\"CollectionControl\">\n        <HeaderContainer>\n          <ControlHeader {...this.props} />\n          <AddIconButton onClick={this.onAdd}>\n            <Icons.PlusLarge\n              iconSize=\"s\"\n              iconColor={theme.colors.grayscale.light5}\n            />\n          </AddIconButton>\n        </HeaderContainer>\n        {this.renderList()}\n      </div>\n    );\n  }\n}\n\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;\n\nexport default withTheme(CollectionControl);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { SketchPicker } from 'react-color';\nimport { getCategoricalSchemeRegistry, styled, css } from '@superset-ui/core';\nimport Popover from 'src/components/Popover';\nimport ControlHeader from '../ControlHeader';\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n};\n\nconst swatchCommon = {\n  position: 'absolute',\n  width: '50px',\n  height: '20px',\n  top: '0px',\n  left: '0px',\n  right: '0px',\n  bottom: '0px',\n};\n\nconst StyledSwatch = styled.div`\n  ${({ theme }) => `\n      width: 50px;\n      height: 20px;\n      position: relative;\n      padding: ${theme.gridUnit}px;\n      borderRadius: ${theme.borderRadius}px;\n      display: inline-block;\n      cursor: pointer;\n    `}\n`;\n\nconst styles = {\n  color: {\n    ...swatchCommon,\n    borderRadius: '2px',\n  },\n  checkerboard: {\n    ...swatchCommon,\n    background:\n      'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center',\n  },\n};\nexport default class ColorPickerControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(col) {\n    this.props.onChange(col.rgb);\n  }\n\n  renderPopover() {\n    const presetColors = getCategoricalSchemeRegistry()\n      .get()\n      .colors.filter((s, i) => i < 7);\n    return (\n      <div id=\"filter-popover\" className=\"color-popover\">\n        <SketchPicker\n          css={css`\n            // We need to use important here as these are element level styles\n            padding: 0 !important;\n            box-shadow: none !important;\n          `}\n          color={this.props.value}\n          onChange={this.onChange}\n          presetColors={presetColors}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const c = this.props.value || { r: 0, g: 0, b: 0, a: 0 };\n    const colStyle = {\n      ...styles.color,\n      background: `rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,\n    };\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Popover\n          trigger=\"click\"\n          placement=\"right\"\n          content={this.renderPopover()}\n        >\n          <StyledSwatch>\n            <div style={styles.checkerboard} />\n            <div style={colStyle} />\n          </StyledSwatch>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPickerControl.propTypes = propTypes;\nColorPickerControl.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FC } from 'react';\nimport { isObject } from 'lodash';\nimport { t, SupersetClient } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport { useHistory } from 'react-router-dom';\n\ninterface SimpleDataSource {\n  id: string;\n  sql: string;\n  type: string;\n}\n\ninterface ViewQueryModalFooterProps {\n  closeModal?: Function;\n  changeDatasource?: Function;\n  datasource?: SimpleDataSource;\n}\n\nconst CLOSE = t('Close');\nconst SAVE_AS_DATASET = t('Save as Dataset');\nconst OPEN_IN_SQL_LAB = t('Open in SQL Lab');\n\nconst ViewQueryModalFooter: FC<ViewQueryModalFooterProps> = (props: {\n  closeModal: () => void;\n  changeDatasource: () => void;\n  datasource: SimpleDataSource;\n}) => {\n  const history = useHistory();\n  const viewInSQLLab = (\n    openInNewWindow: boolean,\n    id: string,\n    type: string,\n    sql: string,\n  ) => {\n    const payload = {\n      datasourceKey: `${id}__${type}`,\n      sql,\n    };\n    if (openInNewWindow) {\n      SupersetClient.postForm('/sqllab/', payload);\n    } else {\n      history.push({\n        pathname: '/sqllab',\n        state: {\n          requestedQuery: payload,\n        },\n      });\n    }\n  };\n\n  const openSQL = (openInNewWindow: boolean) => {\n    const { datasource } = props;\n    if (isObject(datasource)) {\n      const { id, type, sql } = datasource;\n      viewInSQLLab(openInNewWindow, id, type, sql);\n    }\n  };\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          props?.closeModal?.();\n          props?.changeDatasource?.();\n        }}\n      >\n        {SAVE_AS_DATASET}\n      </Button>\n      <Button onClick={({ metaKey }) => openSQL(Boolean(metaKey))}>\n        {OPEN_IN_SQL_LAB}\n      </Button>\n      <Button\n        buttonStyle=\"primary\"\n        onClick={() => {\n          props?.closeModal?.();\n        }}\n      >\n        {CLOSE}\n      </Button>\n    </div>\n  );\n};\n\nexport default ViewQueryModalFooter;\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  DatasourceType,\n  SupersetClient,\n  styled,\n  t,\n  withTheme,\n} from '@superset-ui/core';\nimport { getTemporalColumns } from '@superset-ui/chart-controls';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport {\n  ChangeDatasourceModal,\n  DatasourceModal,\n} from 'src/components/Datasource';\nimport Button from 'src/components/Button';\nimport ErrorAlert from 'src/components/ErrorMessage/ErrorAlert';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport { URL_PARAMS } from 'src/constants';\nimport { getDatasourceAsSaveableDataset } from 'src/utils/datasourceUtils';\nimport {\n  userHasPermission,\n  isUserAdmin,\n} from 'src/dashboard/util/permissionUtils';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport ViewQueryModalFooter from 'src/explore/components/controls/ViewQueryModalFooter';\nimport ViewQuery from 'src/explore/components/controls/ViewQuery';\nimport { SaveDatasetModal } from 'src/SqlLab/components/SaveDatasetModal';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { isString } from 'lodash';\nimport { Link } from 'react-router-dom';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  value: PropTypes.string,\n  datasource: PropTypes.object.isRequired,\n  form_data: PropTypes.object.isRequired,\n  isEditable: PropTypes.bool,\n  onDatasourceSave: PropTypes.func,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  onDatasourceSave: null,\n  value: null,\n  isEditable: true,\n};\n\nconst Styles = styled.div`\n  .data-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    padding: ${({ theme }) => 4 * theme.gridUnit}px;\n    padding-right: ${({ theme }) => 2 * theme.gridUnit}px;\n  }\n  .error-alert {\n    margin: ${({ theme }) => 2 * theme.gridUnit}px;\n  }\n  .ant-dropdown-trigger {\n    margin-left: ${({ theme }) => 2 * theme.gridUnit}px;\n    box-shadow: none;\n    &:active {\n      box-shadow: none;\n    }\n  }\n  .btn-group .open .dropdown-toggle {\n    box-shadow: none;\n    &.button-default {\n      background: none;\n    }\n  }\n  i.angle {\n    color: ${({ theme }) => theme.colors.primary.base};\n  }\n  svg.datasource-modal-trigger {\n    color: ${({ theme }) => theme.colors.primary.base};\n    cursor: pointer;\n  }\n  .title-select {\n    flex: 1 1 100%;\n    display: inline-block;\n    background-color: ${({ theme }) => theme.colors.grayscale.light3};\n    padding: ${({ theme }) => theme.gridUnit * 2}px;\n    border-radius: ${({ theme }) => theme.borderRadius}px;\n    text-align: center;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n  .datasource-svg {\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\n    flex: none;\n  }\n  span[aria-label='dataset-physical'] {\n    color: ${({ theme }) => theme.colors.grayscale.base};\n  }\n  span[aria-label='more-vert'] {\n    color: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\n\nconst CHANGE_DATASET = 'change_dataset';\nconst VIEW_IN_SQL_LAB = 'view_in_sql_lab';\nconst EDIT_DATASET = 'edit_dataset';\nconst QUERY_PREVIEW = 'query_preview';\nconst SAVE_AS_DATASET = 'save_as_dataset';\n\n// If the string is longer than this value's number characters we add\n// a tooltip for user can see the full name by hovering over the visually truncated string in UI\nconst VISIBLE_TITLE_LENGTH = 25;\n\n// Assign icon for each DatasourceType.  If no icon assingment is found in the lookup, no icon will render\nexport const datasourceIconLookup = {\n  [DatasourceType.Query]: (\n    <Icons.ConsoleSqlOutlined className=\"datasource-svg\" />\n  ),\n  [DatasourceType.Table]: <Icons.DatasetPhysical className=\"datasource-svg\" />,\n};\n\n// Render title for datasource with tooltip only if text is longer than VISIBLE_TITLE_LENGTH\nexport const renderDatasourceTitle = (displayString, tooltip) =>\n  displayString?.length > VISIBLE_TITLE_LENGTH ? (\n    // Add a tooltip only for long names that will be visually truncated\n    <Tooltip title={tooltip}>\n      <span className=\"title-select\">{displayString}</span>\n    </Tooltip>\n  ) : (\n    <span title={tooltip} className=\"title-select\">\n      {displayString}\n    </span>\n  );\n\n// Different data source types use different attributes for the display title\nexport const getDatasourceTitle = datasource => {\n  if (datasource?.type === 'query') return datasource?.sql;\n  return datasource?.name || '';\n};\n\nconst preventRouterLinkWhileMetaClicked = evt => {\n  if (evt.metaKey) {\n    evt.preventDefault();\n  } else {\n    evt.stopPropagation();\n  }\n};\n\nclass DatasourceControl extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showEditDatasourceModal: false,\n      showChangeDatasourceModal: false,\n      showSaveDatasetModal: false,\n    };\n  }\n\n  onDatasourceSave = datasource => {\n    this.props.actions.changeDatasource(datasource);\n    const { temporalColumns, defaultTemporalColumn } =\n      getTemporalColumns(datasource);\n    const { columns } = datasource;\n    // the current granularity_sqla might not be a temporal column anymore\n    const timeCol = this.props.form_data?.granularity_sqla;\n    const isGranularitySqalTemporal = columns.find(\n      ({ column_name }) => column_name === timeCol,\n    )?.is_dttm;\n    // the current main_dttm_col might not be a temporal column anymore\n    const isDefaultTemporal = columns.find(\n      ({ column_name }) => column_name === defaultTemporalColumn,\n    )?.is_dttm;\n\n    // if the current granularity_sqla is empty or it is not a temporal column anymore\n    // let's update the control value\n    if (datasource.type === 'table' && !isGranularitySqalTemporal) {\n      const temporalColumn = isDefaultTemporal\n        ? defaultTemporalColumn\n        : temporalColumns?.[0];\n      this.props.actions.setControlValue(\n        'granularity_sqla',\n        temporalColumn || null,\n      );\n    }\n\n    if (this.props.onDatasourceSave) {\n      this.props.onDatasourceSave(datasource);\n    }\n  };\n\n  toggleShowDatasource = () => {\n    this.setState(({ showDatasource }) => ({\n      showDatasource: !showDatasource,\n    }));\n  };\n\n  toggleChangeDatasourceModal = () => {\n    this.setState(({ showChangeDatasourceModal }) => ({\n      showChangeDatasourceModal: !showChangeDatasourceModal,\n    }));\n  };\n\n  toggleEditDatasourceModal = () => {\n    this.setState(({ showEditDatasourceModal }) => ({\n      showEditDatasourceModal: !showEditDatasourceModal,\n    }));\n  };\n\n  toggleSaveDatasetModal = () => {\n    this.setState(({ showSaveDatasetModal }) => ({\n      showSaveDatasetModal: !showSaveDatasetModal,\n    }));\n  };\n\n  handleMenuItemClick = ({ key }) => {\n    switch (key) {\n      case CHANGE_DATASET:\n        this.toggleChangeDatasourceModal();\n        break;\n\n      case EDIT_DATASET:\n        this.toggleEditDatasourceModal();\n        break;\n\n      case VIEW_IN_SQL_LAB:\n        {\n          const { datasource } = this.props;\n          const payload = {\n            datasourceKey: `${datasource.id}__${datasource.type}`,\n            sql: datasource.sql,\n          };\n          SupersetClient.postForm('/sqllab/', {\n            form_data: safeStringify(payload),\n          });\n        }\n        break;\n\n      case SAVE_AS_DATASET:\n        this.toggleSaveDatasetModal();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const {\n      showChangeDatasourceModal,\n      showEditDatasourceModal,\n      showSaveDatasetModal,\n    } = this.state;\n    const { datasource, onChange, theme } = this.props;\n    const isMissingDatasource = !datasource?.id;\n    let isMissingParams = false;\n    if (isMissingDatasource) {\n      const datasourceId = getUrlParam(URL_PARAMS.datasourceId);\n      const sliceId = getUrlParam(URL_PARAMS.sliceId);\n\n      if (!datasourceId && !sliceId) {\n        isMissingParams = true;\n      }\n    }\n\n    const { user } = this.props;\n    const allowEdit =\n      datasource.owners?.map(o => o.id || o.value).includes(user.userId) ||\n      isUserAdmin(user);\n\n    const canAccessSqlLab = userHasPermission(user, 'SQL Lab', 'menu_access');\n\n    const editText = t('Edit dataset');\n    const requestedQuery = {\n      datasourceKey: `${datasource.id}__${datasource.type}`,\n      sql: datasource.sql,\n    };\n\n    const defaultDatasourceMenu = (\n      <Menu onClick={this.handleMenuItemClick}>\n        {this.props.isEditable && !isMissingDatasource && (\n          <Menu.Item\n            key={EDIT_DATASET}\n            data-test=\"edit-dataset\"\n            disabled={!allowEdit}\n          >\n            {!allowEdit ? (\n              <Tooltip\n                title={t(\n                  'You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.',\n                )}\n              >\n                {editText}\n              </Tooltip>\n            ) : (\n              editText\n            )}\n          </Menu.Item>\n        )}\n        <Menu.Item key={CHANGE_DATASET}>{t('Swap dataset')}</Menu.Item>\n        {!isMissingDatasource && canAccessSqlLab && (\n          <Menu.Item key={VIEW_IN_SQL_LAB}>\n            <Link\n              to={{\n                pathname: '/sqllab',\n                state: { requestedQuery },\n              }}\n              onClick={preventRouterLinkWhileMetaClicked}\n            >\n              {t('View in SQL Lab')}\n            </Link>\n          </Menu.Item>\n        )}\n      </Menu>\n    );\n\n    const queryDatasourceMenu = (\n      <Menu onClick={this.handleMenuItemClick}>\n        <Menu.Item key={QUERY_PREVIEW}>\n          <ModalTrigger\n            triggerNode={\n              <span data-test=\"view-query-menu-item\">{t('Query preview')}</span>\n            }\n            modalTitle={t('Query preview')}\n            modalBody={\n              <ViewQuery\n                sql={datasource?.sql || datasource?.select_star || ''}\n              />\n            }\n            modalFooter={\n              <ViewQueryModalFooter\n                changeDatasource={this.toggleSaveDatasetModal}\n                datasource={datasource}\n              />\n            }\n            draggable={false}\n            resizable={false}\n            responsive\n          />\n        </Menu.Item>\n        {canAccessSqlLab && (\n          <Menu.Item key={VIEW_IN_SQL_LAB}>\n            <Link\n              to={{\n                pathname: '/sqllab',\n                state: { requestedQuery },\n              }}\n              onClick={preventRouterLinkWhileMetaClicked}\n            >\n              {t('View in SQL Lab')}\n            </Link>\n          </Menu.Item>\n        )}\n        <Menu.Item key={SAVE_AS_DATASET}>{t('Save as dataset')}</Menu.Item>\n      </Menu>\n    );\n\n    const { health_check_message: healthCheckMessage } = datasource;\n\n    let extra;\n    if (datasource?.extra) {\n      if (isString(datasource.extra)) {\n        try {\n          extra = JSON.parse(datasource.extra);\n        } catch {} // eslint-disable-line no-empty\n      } else {\n        extra = datasource.extra; // eslint-disable-line prefer-destructuring\n      }\n    }\n\n    const titleText = isMissingDatasource\n      ? t('Missing dataset')\n      : getDatasourceTitle(datasource);\n\n    const tooltip = titleText;\n\n    return (\n      <Styles data-test=\"datasource-control\" className=\"DatasourceControl\">\n        <div className=\"data-container\">\n          {datasourceIconLookup[datasource?.type]}\n          {renderDatasourceTitle(titleText, tooltip)}\n          {healthCheckMessage && (\n            <Tooltip title={healthCheckMessage}>\n              <Icons.AlertSolid iconColor={theme.colors.warning.base} />\n            </Tooltip>\n          )}\n          {extra?.warning_markdown && (\n            <WarningIconWithTooltip warningMarkdown={extra.warning_markdown} />\n          )}\n          <AntdDropdown\n            overlay={\n              datasource.type === DatasourceType.Query\n                ? queryDatasourceMenu\n                : defaultDatasourceMenu\n            }\n            trigger={['click']}\n            data-test=\"datasource-menu\"\n          >\n            <Icons.MoreVert\n              className=\"datasource-modal-trigger\"\n              data-test=\"datasource-menu-trigger\"\n            />\n          </AntdDropdown>\n        </div>\n        {/* missing dataset */}\n        {isMissingDatasource && isMissingParams && (\n          <div className=\"error-alert\">\n            <ErrorAlert\n              level=\"warning\"\n              title={t('Missing URL parameters')}\n              source=\"explore\"\n              subtitle={\n                <>\n                  <p>\n                    {t(\n                      'The URL is missing the dataset_id or slice_id parameters.',\n                    )}\n                  </p>\n                </>\n              }\n            />\n          </div>\n        )}\n        {isMissingDatasource && !isMissingParams && (\n          <div className=\"error-alert\">\n            <ErrorAlert\n              level=\"warning\"\n              title={t('Missing dataset')}\n              source=\"explore\"\n              subtitle={\n                <>\n                  <p>\n                    {t(\n                      'The dataset linked to this chart may have been deleted.',\n                    )}\n                  </p>\n                  <p>\n                    <Button\n                      buttonStyle=\"primary\"\n                      onClick={() =>\n                        this.handleMenuItemClick({ key: CHANGE_DATASET })\n                      }\n                    >\n                      {t('Swap dataset')}\n                    </Button>\n                  </p>\n                </>\n              }\n            />\n          </div>\n        )}\n        {showEditDatasourceModal && (\n          <DatasourceModal\n            datasource={datasource}\n            show={showEditDatasourceModal}\n            onDatasourceSave={this.onDatasourceSave}\n            onHide={this.toggleEditDatasourceModal}\n          />\n        )}\n        {showChangeDatasourceModal && (\n          <ChangeDatasourceModal\n            onDatasourceSave={this.onDatasourceSave}\n            onHide={this.toggleChangeDatasourceModal}\n            show={showChangeDatasourceModal}\n            onChange={onChange}\n          />\n        )}\n        {showSaveDatasetModal && (\n          <SaveDatasetModal\n            visible={showSaveDatasetModal}\n            onHide={this.toggleSaveDatasetModal}\n            buttonTextOnSave={t('Save')}\n            buttonTextOnOverwrite={t('Overwrite')}\n            modalDescription={t(\n              'Save this query as a virtual dataset to continue exploring',\n            )}\n            datasource={getDatasourceAsSaveableDataset(datasource)}\n            openWindow={false}\n            formData={this.props.form_data}\n          />\n        )}\n      </Styles>\n    );\n  }\n}\n\nDatasourceControl.propTypes = propTypes;\nDatasourceControl.defaultProps = defaultProps;\n\nexport default withTheme(DatasourceControl);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ChangeEventHandler,\n  FocusEvent,\n  KeyboardEvent,\n  useCallback,\n  useState,\n  FC,\n} from 'react';\n\nimport { t, styled } from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Tooltip } from 'src/components/Tooltip';\n\nconst TitleLabel = styled.span`\n  display: inline-block;\n  padding: 2px 0;\n`;\n\nconst StyledInput = styled(Input)`\n  border-radius: ${({ theme }) => theme.borderRadius};\n  height: 26px;\n  padding-left: ${({ theme }) => theme.gridUnit * 2.5}px;\n`;\n\nexport interface AdhocMetricEditPopoverTitleProps {\n  title?: {\n    label?: string;\n    hasCustomLabel?: boolean;\n  };\n  isEditDisabled?: boolean;\n  onChange: ChangeEventHandler<HTMLInputElement>;\n}\n\nconst AdhocMetricEditPopoverTitle: FC<AdhocMetricEditPopoverTitleProps> = ({\n  title,\n  isEditDisabled,\n  onChange,\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const defaultLabel = t('My metric');\n\n  const handleMouseOver = useCallback(() => setIsHovered(true), []);\n  const handleMouseOut = useCallback(() => setIsHovered(false), []);\n  const handleClick = useCallback(() => setIsEditMode(true), []);\n  const handleBlur = useCallback(() => setIsEditMode(false), []);\n\n  const handleKeyPress = useCallback(\n    (ev: KeyboardEvent<HTMLInputElement>) => {\n      if (ev.key === 'Enter') {\n        ev.preventDefault();\n        handleBlur();\n      }\n    },\n    [handleBlur],\n  );\n\n  const handleInputBlur = useCallback(\n    (e: FocusEvent<HTMLInputElement>) => {\n      if (e.target.value === '') {\n        onChange(e);\n      }\n\n      handleBlur();\n    },\n    [onChange, handleBlur],\n  );\n\n  if (isEditDisabled) {\n    return (\n      <span data-test=\"AdhocMetricTitle\">{title?.label || defaultLabel}</span>\n    );\n  }\n\n  if (isEditMode) {\n    return (\n      <StyledInput\n        type=\"text\"\n        placeholder={title?.label}\n        value={title?.hasCustomLabel ? title.label : ''}\n        autoFocus\n        onChange={onChange}\n        onBlur={handleInputBlur}\n        onKeyPress={handleKeyPress}\n        data-test=\"AdhocMetricEditTitle#input\"\n      />\n    );\n  }\n\n  return (\n    <Tooltip placement=\"top\" title={t('Click to edit label')}>\n      <span\n        className=\"AdhocMetricEditPopoverTitle inline-editable\"\n        data-test=\"AdhocMetricEditTitle#trigger\"\n        onMouseOver={handleMouseOver}\n        onMouseOut={handleMouseOut}\n        onClick={handleClick}\n        onBlur={handleBlur}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <TitleLabel>{title?.label || defaultLabel}</TitleLabel>\n        &nbsp;\n        <i\n          className=\"fa fa-pencil\"\n          style={{ color: isHovered ? 'black' : 'grey' }}\n        />\n      </span>\n    </Tooltip>\n  );\n};\n\nexport default AdhocMetricEditPopoverTitle;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable camelcase */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  isDefined,\n  t,\n  styled,\n  ensureIsArray,\n  DatasourceType,\n} from '@superset-ui/core';\nimport Tabs from 'src/components/Tabs';\nimport Button from 'src/components/Button';\nimport { Select } from 'src/components';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { EmptyStateSmall } from 'src/components/EmptyState';\nimport { Form, FormItem } from 'src/components/Form';\nimport { SQLEditor } from 'src/components/AsyncAceEditor';\nimport sqlKeywords from 'src/SqlLab/utils/sqlKeywords';\nimport { noOp } from 'src/utils/common';\nimport {\n  AGGREGATES_OPTIONS,\n  POPOVER_INITIAL_HEIGHT,\n  POPOVER_INITIAL_WIDTH,\n} from 'src/explore/constants';\nimport columnType from 'src/explore/components/controls/MetricControl/columnType';\nimport savedMetricType from 'src/explore/components/controls/MetricControl/savedMetricType';\nimport AdhocMetric, {\n  EXPRESSION_TYPES,\n} from 'src/explore/components/controls/MetricControl/AdhocMetric';\nimport {\n  StyledMetricOption,\n  StyledColumnOption,\n} from 'src/explore/components/optionRenderers';\nimport { getColumnKeywords } from 'src/explore/controlUtils/getColumnKeywords';\n\nconst propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  getCurrentTab: PropTypes.func,\n  getCurrentLabel: PropTypes.func,\n  adhocMetric: PropTypes.instanceOf(AdhocMetric).isRequired,\n  columns: PropTypes.arrayOf(columnType),\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\n  savedMetric: savedMetricType,\n  datasource: PropTypes.object,\n  isNewMetric: PropTypes.bool,\n  isLabelModified: PropTypes.bool,\n};\n\nconst defaultProps = {\n  columns: [],\n  getCurrentTab: noOp,\n  isNewMetric: false,\n};\n\nconst StyledSelect = styled(Select)`\n  .metric-option {\n    & > svg {\n      min-width: ${({ theme }) => `${theme.gridUnit * 4}px`};\n    }\n    & > .option-label {\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n`;\n\nexport const SAVED_TAB_KEY = 'SAVED';\n\nexport default class AdhocMetricEditPopover extends PureComponent {\n  // \"Saved\" is a default tab unless there are no saved metrics for dataset\n  defaultActiveTabKey = this.getDefaultTab();\n\n  constructor(props) {\n    super(props);\n    this.onSave = this.onSave.bind(this);\n    this.onResetStateAndClose = this.onResetStateAndClose.bind(this);\n    this.onColumnChange = this.onColumnChange.bind(this);\n    this.onAggregateChange = this.onAggregateChange.bind(this);\n    this.onSavedMetricChange = this.onSavedMetricChange.bind(this);\n    this.onSqlExpressionChange = this.onSqlExpressionChange.bind(this);\n    this.onDragDown = this.onDragDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTabChange = this.onTabChange.bind(this);\n    this.handleAceEditorRef = this.handleAceEditorRef.bind(this);\n    this.refreshAceEditor = this.refreshAceEditor.bind(this);\n    this.getDefaultTab = this.getDefaultTab.bind(this);\n\n    this.state = {\n      adhocMetric: this.props.adhocMetric,\n      savedMetric: this.props.savedMetric,\n      width: POPOVER_INITIAL_WIDTH,\n      height: POPOVER_INITIAL_HEIGHT,\n    };\n    document.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  componentDidMount() {\n    this.props.getCurrentTab(this.defaultActiveTabKey);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.adhocMetric?.sqlExpression !==\n        this.state.adhocMetric?.sqlExpression ||\n      prevState.adhocMetric?.aggregate !== this.state.adhocMetric?.aggregate ||\n      prevState.adhocMetric?.column?.column_name !==\n        this.state.adhocMetric?.column?.column_name ||\n      prevState.savedMetric?.metric_name !== this.state.savedMetric?.metric_name\n    ) {\n      this.props.getCurrentLabel({\n        savedMetricLabel:\n          this.state.savedMetric?.verbose_name ||\n          this.state.savedMetric?.metric_name,\n        adhocMetricLabel: this.state.adhocMetric?.getDefaultLabel(),\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mouseup', this.onMouseUp);\n    document.removeEventListener('mousemove', this.onMouseMove);\n  }\n\n  getDefaultTab() {\n    const { adhocMetric, savedMetric, savedMetricsOptions, isNewMetric } =\n      this.props;\n    if (isDefined(adhocMetric.column) || isDefined(adhocMetric.sqlExpression)) {\n      return adhocMetric.expressionType;\n    }\n    if (\n      (isNewMetric || savedMetric.metric_name) &&\n      Array.isArray(savedMetricsOptions) &&\n      savedMetricsOptions.length > 0\n    ) {\n      return SAVED_TAB_KEY;\n    }\n    return adhocMetric.expressionType;\n  }\n\n  onSave() {\n    const { adhocMetric, savedMetric } = this.state;\n\n    const metric = savedMetric?.metric_name ? savedMetric : adhocMetric;\n    const oldMetric = this.props.savedMetric?.metric_name\n      ? this.props.savedMetric\n      : this.props.adhocMetric;\n    this.props.onChange(\n      {\n        ...metric,\n      },\n      oldMetric,\n    );\n    this.props.onClose();\n  }\n\n  onResetStateAndClose() {\n    this.setState(\n      {\n        adhocMetric: this.props.adhocMetric,\n        savedMetric: this.props.savedMetric,\n      },\n      this.props.onClose,\n    );\n  }\n\n  onColumnChange(columnName) {\n    const column = this.props.columns.find(\n      column => column.column_name === columnName,\n    );\n    this.setState(prevState => ({\n      adhocMetric: prevState.adhocMetric.duplicateWith({\n        column,\n        expressionType: EXPRESSION_TYPES.SIMPLE,\n      }),\n      savedMetric: undefined,\n    }));\n  }\n\n  onAggregateChange(aggregate) {\n    // we construct this object explicitly to overwrite the value in the case aggregate is null\n    this.setState(prevState => ({\n      adhocMetric: prevState.adhocMetric.duplicateWith({\n        aggregate,\n        expressionType: EXPRESSION_TYPES.SIMPLE,\n      }),\n      savedMetric: undefined,\n    }));\n  }\n\n  onSavedMetricChange(savedMetricName) {\n    const savedMetric = this.props.savedMetricsOptions.find(\n      metric => metric.metric_name === savedMetricName,\n    );\n    this.setState(prevState => ({\n      savedMetric,\n      adhocMetric: prevState.adhocMetric.duplicateWith({\n        column: undefined,\n        aggregate: undefined,\n        sqlExpression: undefined,\n        expressionType: EXPRESSION_TYPES.SIMPLE,\n      }),\n    }));\n  }\n\n  onSqlExpressionChange(sqlExpression) {\n    this.setState(prevState => ({\n      adhocMetric: prevState.adhocMetric.duplicateWith({\n        sqlExpression,\n        expressionType: EXPRESSION_TYPES.SQL,\n      }),\n      savedMetric: undefined,\n    }));\n  }\n\n  onDragDown(e) {\n    this.dragStartX = e.clientX;\n    this.dragStartY = e.clientY;\n    this.dragStartWidth = this.state.width;\n    this.dragStartHeight = this.state.height;\n    document.addEventListener('mousemove', this.onMouseMove);\n  }\n\n  onMouseMove(e) {\n    this.props.onResize();\n    this.setState({\n      width: Math.max(\n        this.dragStartWidth + (e.clientX - this.dragStartX),\n        POPOVER_INITIAL_WIDTH,\n      ),\n      height: Math.max(\n        this.dragStartHeight + (e.clientY - this.dragStartY),\n        POPOVER_INITIAL_HEIGHT,\n      ),\n    });\n  }\n\n  onMouseUp() {\n    document.removeEventListener('mousemove', this.onMouseMove);\n  }\n\n  onTabChange(tab) {\n    this.refreshAceEditor();\n    this.props.getCurrentTab(tab);\n  }\n\n  handleAceEditorRef(ref) {\n    if (ref) {\n      this.aceEditorRef = ref;\n    }\n  }\n\n  refreshAceEditor() {\n    setTimeout(() => {\n      if (this.aceEditorRef) {\n        this.aceEditorRef.editor?.resize?.();\n      }\n    }, 0);\n  }\n\n  renderColumnOption(option) {\n    const column = { ...option };\n    if (column.metric_name && !column.verbose_name) {\n      column.verbose_name = column.metric_name;\n    }\n    return <StyledColumnOption column={column} showType />;\n  }\n\n  renderMetricOption(savedMetric) {\n    return <StyledMetricOption metric={savedMetric} showType />;\n  }\n\n  render() {\n    const {\n      adhocMetric: propsAdhocMetric,\n      savedMetric: propsSavedMetric,\n      columns,\n      savedMetricsOptions,\n      onChange,\n      onClose,\n      onResize,\n      datasource,\n      isNewMetric,\n      isLabelModified,\n      ...popoverProps\n    } = this.props;\n    const { adhocMetric, savedMetric } = this.state;\n    const keywords = sqlKeywords.concat(getColumnKeywords(columns));\n\n    const columnValue =\n      (adhocMetric.column && adhocMetric.column.column_name) ||\n      adhocMetric.inferSqlExpressionColumn();\n\n    // autofocus on column if there's no value in column; otherwise autofocus on aggregate\n    const columnSelectProps = {\n      ariaLabel: t('Select column'),\n      placeholder: t('%s column(s)', columns.length),\n      value: columnValue,\n      onChange: this.onColumnChange,\n      allowClear: true,\n      autoFocus: !columnValue,\n    };\n\n    const aggregateSelectProps = {\n      ariaLabel: t('Select aggregate options'),\n      placeholder: t('%s aggregates(s)', AGGREGATES_OPTIONS.length),\n      value: adhocMetric.aggregate || adhocMetric.inferSqlExpressionAggregate(),\n      onChange: this.onAggregateChange,\n      allowClear: true,\n      autoFocus: !!columnValue,\n    };\n\n    const savedSelectProps = {\n      ariaLabel: t('Select saved metrics'),\n      placeholder: t('%s saved metric(s)', savedMetricsOptions?.length ?? 0),\n      value: savedMetric?.metric_name,\n      onChange: this.onSavedMetricChange,\n      allowClear: true,\n      autoFocus: true,\n    };\n\n    const stateIsValid = adhocMetric.isValid() || savedMetric?.metric_name;\n    const hasUnsavedChanges =\n      isLabelModified ||\n      isNewMetric ||\n      !adhocMetric.equals(propsAdhocMetric) ||\n      (!(\n        typeof savedMetric?.metric_name === 'undefined' &&\n        typeof propsSavedMetric?.metric_name === 'undefined'\n      ) &&\n        savedMetric?.metric_name !== propsSavedMetric?.metric_name);\n\n    let extra = {};\n    if (datasource?.extra) {\n      try {\n        extra = JSON.parse(datasource.extra);\n      } catch {} // eslint-disable-line no-empty\n    }\n\n    return (\n      <Form\n        layout=\"vertical\"\n        id=\"metrics-edit-popover\"\n        data-test=\"metrics-edit-popover\"\n        {...popoverProps}\n      >\n        <Tabs\n          id=\"adhoc-metric-edit-tabs\"\n          data-test=\"adhoc-metric-edit-tabs\"\n          defaultActiveKey={this.defaultActiveTabKey}\n          className=\"adhoc-metric-edit-tabs\"\n          style={{ height: this.state.height, width: this.state.width }}\n          onChange={this.onTabChange}\n          allowOverflow\n        >\n          <Tabs.TabPane key={SAVED_TAB_KEY} tab={t('Saved')}>\n            {ensureIsArray(savedMetricsOptions).length > 0 ? (\n              <FormItem label={t('Saved metric')}>\n                <StyledSelect\n                  options={ensureIsArray(savedMetricsOptions).map(\n                    savedMetric => ({\n                      value: savedMetric.metric_name,\n                      label: savedMetric.metric_name,\n                      customLabel: this.renderMetricOption(savedMetric),\n                      key: savedMetric.id,\n                    }),\n                  )}\n                  {...savedSelectProps}\n                />\n              </FormItem>\n            ) : datasource.type === DatasourceType.Table ? (\n              <EmptyStateSmall\n                image=\"empty.svg\"\n                title={t('No saved metrics found')}\n                description={t(\n                  'Add metrics to dataset in \"Edit datasource\" modal',\n                )}\n              />\n            ) : (\n              <EmptyStateSmall\n                image=\"empty.svg\"\n                title={t('No saved metrics found')}\n                description={\n                  <>\n                    <span\n                      tabIndex={0}\n                      role=\"button\"\n                      onClick={() => {\n                        this.props.handleDatasetModal(true);\n                        this.props.onClose();\n                      }}\n                    >\n                      {t('Create a dataset')}\n                    </span>\n                    {t(' to add metrics')}\n                  </>\n                }\n              />\n            )}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            key={EXPRESSION_TYPES.SIMPLE}\n            tab={\n              extra.disallow_adhoc_metrics ? (\n                <Tooltip\n                  title={t(\n                    'Simple ad-hoc metrics are not enabled for this dataset',\n                  )}\n                >\n                  {t('Simple')}\n                </Tooltip>\n              ) : (\n                t('Simple')\n              )\n            }\n            disabled={extra.disallow_adhoc_metrics}\n          >\n            <FormItem label={t('column')}>\n              <Select\n                options={columns.map(column => ({\n                  value: column.column_name,\n                  label: column.verbose_name || column.column_name,\n                  key: column.id,\n                  customLabel: this.renderColumnOption(column),\n                }))}\n                {...columnSelectProps}\n              />\n            </FormItem>\n            <FormItem label={t('aggregate')}>\n              <Select\n                options={AGGREGATES_OPTIONS.map(option => ({\n                  value: option,\n                  label: option,\n                  key: option,\n                }))}\n                {...aggregateSelectProps}\n              />\n            </FormItem>\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            key={EXPRESSION_TYPES.SQL}\n            tab={\n              extra.disallow_adhoc_metrics ? (\n                <Tooltip\n                  title={t(\n                    'Custom SQL ad-hoc metrics are not enabled for this dataset',\n                  )}\n                >\n                  {t('Custom SQL')}\n                </Tooltip>\n              ) : (\n                t('Custom SQL')\n              )\n            }\n            data-test=\"adhoc-metric-edit-tab#custom\"\n            disabled={extra.disallow_adhoc_metrics}\n          >\n            <SQLEditor\n              data-test=\"sql-editor\"\n              showLoadingForImport\n              ref={this.handleAceEditorRef}\n              keywords={keywords}\n              height={`${this.state.height - 80}px`}\n              onChange={this.onSqlExpressionChange}\n              width=\"100%\"\n              showGutter={false}\n              value={\n                adhocMetric.sqlExpression ||\n                adhocMetric.translateToSql({ transformCountDistinct: true })\n              }\n              editorProps={{ $blockScrolling: true }}\n              enableLiveAutocompletion\n              className=\"filter-sql-editor\"\n              wrapEnabled\n            />\n          </Tabs.TabPane>\n        </Tabs>\n        <div>\n          <Button\n            buttonSize=\"small\"\n            onClick={this.onResetStateAndClose}\n            data-test=\"AdhocMetricEdit#cancel\"\n            cta\n          >\n            {t('Close')}\n          </Button>\n          <Button\n            disabled={!stateIsValid || !hasUnsavedChanges}\n            buttonStyle=\"primary\"\n            buttonSize=\"small\"\n            data-test=\"AdhocMetricEdit#save\"\n            onClick={this.onSave}\n            cta\n          >\n            {t('Save')}\n          </Button>\n          <i\n            role=\"button\"\n            aria-label=\"Resize\"\n            tabIndex={0}\n            onMouseDown={this.onDragDown}\n            className=\"fa fa-expand edit-popover-resize text-muted\"\n          />\n        </div>\n      </Form>\n    );\n  }\n}\nAdhocMetricEditPopover.propTypes = propTypes;\nAdhocMetricEditPopover.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent, ReactNode } from 'react';\nimport { Metric, t } from '@superset-ui/core';\nimport AdhocMetricEditPopoverTitle from 'src/explore/components/controls/MetricControl/AdhocMetricEditPopoverTitle';\nimport { ExplorePopoverContent } from 'src/explore/components/ExploreContentPopover';\nimport {\n  ISaveableDatasource,\n  SaveDatasetModal,\n} from 'src/SqlLab/components/SaveDatasetModal';\nimport { Datasource } from 'src/explore/types';\nimport AdhocMetricEditPopover, {\n  SAVED_TAB_KEY,\n} from './AdhocMetricEditPopover';\nimport AdhocMetric from './AdhocMetric';\nimport { savedMetricType } from './types';\nimport ControlPopover from '../ControlPopover/ControlPopover';\n\nexport type AdhocMetricPopoverTriggerProps = {\n  adhocMetric: AdhocMetric;\n  onMetricEdit(newMetric: Metric, oldMetric: Metric): void;\n  columns: { column_name: string; type: string }[];\n  savedMetricsOptions: savedMetricType[];\n  savedMetric: savedMetricType;\n  datasource: Datasource & ISaveableDatasource;\n  children: ReactNode;\n  isControlledComponent?: boolean;\n  visible?: boolean;\n  togglePopover?: (visible: boolean) => void;\n  closePopover?: () => void;\n  isNew?: boolean;\n};\n\nexport type AdhocMetricPopoverTriggerState = {\n  adhocMetric: AdhocMetric;\n  popoverVisible: boolean;\n  title: { label: string; hasCustomLabel: boolean };\n  currentLabel: string;\n  labelModified: boolean;\n  isTitleEditDisabled: boolean;\n  showSaveDatasetModal: boolean;\n};\n\nclass AdhocMetricPopoverTrigger extends PureComponent<\n  AdhocMetricPopoverTriggerProps,\n  AdhocMetricPopoverTriggerState\n> {\n  constructor(props: AdhocMetricPopoverTriggerProps) {\n    super(props);\n    this.onPopoverResize = this.onPopoverResize.bind(this);\n    this.onLabelChange = this.onLabelChange.bind(this);\n    this.closePopover = this.closePopover.bind(this);\n    this.togglePopover = this.togglePopover.bind(this);\n    this.getCurrentTab = this.getCurrentTab.bind(this);\n    this.getCurrentLabel = this.getCurrentLabel.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.handleDatasetModal = this.handleDatasetModal.bind(this);\n\n    this.state = {\n      adhocMetric: props.adhocMetric,\n      popoverVisible: false,\n      title: {\n        label: props.adhocMetric.label,\n        hasCustomLabel: props.adhocMetric.hasCustomLabel,\n      },\n      currentLabel: '',\n      labelModified: false,\n      isTitleEditDisabled: false,\n      showSaveDatasetModal: false,\n    };\n  }\n\n  static getDerivedStateFromProps(\n    nextProps: AdhocMetricPopoverTriggerProps,\n    prevState: AdhocMetricPopoverTriggerState,\n  ) {\n    if (prevState.adhocMetric.optionName !== nextProps.adhocMetric.optionName) {\n      return {\n        adhocMetric: nextProps.adhocMetric,\n        title: {\n          label: nextProps.adhocMetric.label,\n          hasCustomLabel: nextProps.adhocMetric.hasCustomLabel,\n        },\n        currentLabel: '',\n        labelModified: false,\n      };\n    }\n    return {\n      adhocMetric: nextProps.adhocMetric,\n    };\n  }\n\n  onLabelChange(e: any) {\n    const { verbose_name, metric_name } = this.props.savedMetric;\n    const defaultMetricLabel = this.props.adhocMetric?.getDefaultLabel();\n    const label = e.target.value;\n    this.setState(state => ({\n      title: {\n        label:\n          label ||\n          state.currentLabel ||\n          verbose_name ||\n          metric_name ||\n          defaultMetricLabel,\n        hasCustomLabel: !!label,\n      },\n      labelModified: true,\n    }));\n  }\n\n  onPopoverResize() {\n    this.forceUpdate();\n  }\n\n  handleDatasetModal(showModal: boolean) {\n    this.setState({ showSaveDatasetModal: showModal });\n  }\n\n  closePopover() {\n    this.togglePopover(false);\n    this.setState({\n      labelModified: false,\n    });\n  }\n\n  togglePopover(visible: boolean) {\n    this.setState({\n      popoverVisible: visible,\n    });\n  }\n\n  getCurrentTab(tab: string) {\n    this.setState({\n      isTitleEditDisabled: tab === SAVED_TAB_KEY,\n    });\n  }\n\n  getCurrentLabel({\n    savedMetricLabel,\n    adhocMetricLabel,\n  }: {\n    savedMetricLabel: string;\n    adhocMetricLabel: string;\n  }) {\n    const currentLabel = savedMetricLabel || adhocMetricLabel;\n    this.setState({\n      currentLabel,\n      labelModified: true,\n    });\n    if (savedMetricLabel || !this.state.title.hasCustomLabel) {\n      this.setState({\n        title: {\n          label: currentLabel,\n          hasCustomLabel: false,\n        },\n      });\n    }\n  }\n\n  onChange(newMetric: Metric, oldMetric: Metric) {\n    this.props.onMetricEdit({ ...newMetric, ...this.state.title }, oldMetric);\n  }\n\n  render() {\n    const {\n      adhocMetric,\n      savedMetric,\n      columns,\n      savedMetricsOptions,\n      datasource,\n      isControlledComponent,\n    } = this.props;\n    const { verbose_name, metric_name } = savedMetric;\n    const { hasCustomLabel, label } = adhocMetric;\n    const adhocMetricLabel = hasCustomLabel\n      ? label\n      : adhocMetric.getDefaultLabel();\n    const title = this.state.labelModified\n      ? this.state.title\n      : {\n          label: verbose_name || metric_name || adhocMetricLabel,\n          hasCustomLabel,\n        };\n\n    const { visible, togglePopover, closePopover } = isControlledComponent\n      ? {\n          visible: this.props.visible,\n          togglePopover: this.props.togglePopover,\n          closePopover: this.props.closePopover,\n        }\n      : {\n          visible: this.state.popoverVisible,\n          togglePopover: this.togglePopover,\n          closePopover: this.closePopover,\n        };\n\n    const overlayContent = (\n      <ExplorePopoverContent>\n        <AdhocMetricEditPopover\n          adhocMetric={adhocMetric}\n          columns={columns}\n          savedMetricsOptions={savedMetricsOptions}\n          savedMetric={savedMetric}\n          datasource={datasource}\n          handleDatasetModal={this.handleDatasetModal}\n          onResize={this.onPopoverResize}\n          onClose={closePopover}\n          onChange={this.onChange}\n          getCurrentTab={this.getCurrentTab}\n          getCurrentLabel={this.getCurrentLabel}\n          isNewMetric={this.props.isNew}\n          isLabelModified={\n            this.state.labelModified &&\n            adhocMetricLabel !== this.state.title.label\n          }\n        />\n      </ExplorePopoverContent>\n    );\n\n    const popoverTitle = (\n      <AdhocMetricEditPopoverTitle\n        title={title}\n        onChange={this.onLabelChange}\n        isEditDisabled={this.state.isTitleEditDisabled}\n      />\n    );\n\n    return (\n      <>\n        {this.state.showSaveDatasetModal && (\n          <SaveDatasetModal\n            visible={this.state.showSaveDatasetModal}\n            onHide={() => this.handleDatasetModal(false)}\n            buttonTextOnSave={t('Save')}\n            buttonTextOnOverwrite={t('Overwrite')}\n            modalDescription={t(\n              'Save this query as a virtual dataset to continue exploring',\n            )}\n            datasource={datasource}\n          />\n        )}\n        <ControlPopover\n          placement=\"right\"\n          trigger=\"click\"\n          content={overlayContent}\n          defaultVisible={visible}\n          visible={visible}\n          onVisibleChange={togglePopover}\n          title={popoverTitle}\n          destroyTooltipOnHide\n        >\n          {this.props.children}\n        </ControlPopover>\n      </>\n    );\n  }\n}\n\nexport default AdhocMetricPopoverTrigger;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { OptionControlLabel } from 'src/explore/components/controls/OptionControls';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport columnType from './columnType';\nimport AdhocMetric from './AdhocMetric';\nimport savedMetricType from './savedMetricType';\nimport AdhocMetricPopoverTrigger from './AdhocMetricPopoverTrigger';\n\nconst propTypes = {\n  adhocMetric: PropTypes.instanceOf(AdhocMetric),\n  onMetricEdit: PropTypes.func.isRequired,\n  onRemoveMetric: PropTypes.func,\n  columns: PropTypes.arrayOf(columnType),\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\n  savedMetric: savedMetricType,\n  datasource: PropTypes.object,\n  onMoveLabel: PropTypes.func,\n  onDropLabel: PropTypes.func,\n  index: PropTypes.number,\n  type: PropTypes.string,\n  multi: PropTypes.bool,\n  datasourceWarningMessage: PropTypes.string,\n};\n\nclass AdhocMetricOption extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.onRemoveMetric = this.onRemoveMetric.bind(this);\n  }\n\n  onRemoveMetric(e) {\n    e?.stopPropagation();\n    this.props.onRemoveMetric(this.props.index);\n  }\n\n  render() {\n    const {\n      adhocMetric,\n      onMetricEdit,\n      columns,\n      savedMetricsOptions,\n      savedMetric,\n      datasource,\n      onMoveLabel,\n      onDropLabel,\n      index,\n      type,\n      multi,\n      datasourceWarningMessage,\n    } = this.props;\n    const withCaret = !savedMetric.error_text;\n\n    return (\n      <AdhocMetricPopoverTrigger\n        adhocMetric={adhocMetric}\n        onMetricEdit={onMetricEdit}\n        columns={columns}\n        savedMetricsOptions={savedMetricsOptions}\n        savedMetric={savedMetric}\n        datasource={datasource}\n      >\n        <OptionControlLabel\n          savedMetric={savedMetric}\n          adhocMetric={adhocMetric}\n          label={adhocMetric.label}\n          onRemove={this.onRemoveMetric}\n          onMoveLabel={onMoveLabel}\n          onDropLabel={onDropLabel}\n          index={index}\n          type={type ?? DndItemType.AdhocMetricOption}\n          withCaret={withCaret}\n          isFunction\n          multi={multi}\n          datasourceWarningMessage={datasourceWarningMessage}\n        />\n      </AdhocMetricPopoverTrigger>\n    );\n  }\n}\n\nexport default AdhocMetricOption;\n\nAdhocMetricOption.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport columnType from './columnType';\nimport AdhocMetricOption from './AdhocMetricOption';\nimport AdhocMetric from './AdhocMetric';\nimport savedMetricType from './savedMetricType';\n\nconst propTypes = {\n  option: PropTypes.oneOfType([PropTypes.object, PropTypes.string]).isRequired,\n  index: PropTypes.number.isRequired,\n  onMetricEdit: PropTypes.func,\n  onRemoveMetric: PropTypes.func,\n  onMoveLabel: PropTypes.func,\n  onDropLabel: PropTypes.func,\n  columns: PropTypes.arrayOf(columnType),\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\n  savedMetricsOptions: PropTypes.arrayOf(savedMetricType),\n  multi: PropTypes.bool,\n  datasource: PropTypes.object,\n  datasourceWarningMessage: PropTypes.string,\n};\n\nexport default function MetricDefinitionValue({\n  option,\n  onMetricEdit,\n  onRemoveMetric,\n  columns,\n  savedMetrics,\n  savedMetricsOptions,\n  datasource,\n  onMoveLabel,\n  onDropLabel,\n  index,\n  type,\n  multi,\n  datasourceWarningMessage,\n}) {\n  const getSavedMetricByName = metricName =>\n    savedMetrics.find(metric => metric.metric_name === metricName);\n\n  let savedMetric;\n  if (typeof option === 'string') {\n    savedMetric = getSavedMetricByName(option);\n  } else if (option.metric_name) {\n    savedMetric = option;\n  }\n\n  if (option instanceof AdhocMetric || savedMetric) {\n    const adhocMetric =\n      option instanceof AdhocMetric ? option : new AdhocMetric({});\n\n    const metricOptionProps = {\n      onMetricEdit,\n      onRemoveMetric,\n      columns,\n      savedMetricsOptions,\n      datasource,\n      adhocMetric,\n      onMoveLabel,\n      onDropLabel,\n      index,\n      savedMetric: savedMetric ?? {},\n      type,\n      multi,\n      datasourceWarningMessage,\n    };\n\n    return <AdhocMetricOption {...metricOptionProps} />;\n  }\n  return null;\n}\nMetricDefinitionValue.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { ensureIsArray, t, useTheme, usePrevious } from '@superset-ui/core';\nimport { isEqual } from 'lodash';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport Icons from 'src/components/Icons';\nimport {\n  AddIconButton,\n  AddControlLabel,\n  HeaderContainer,\n  LabelsContainer,\n} from 'src/explore/components/controls/OptionControls';\nimport columnType from './columnType';\nimport MetricDefinitionValue from './MetricDefinitionValue';\nimport AdhocMetric from './AdhocMetric';\nimport savedMetricType from './savedMetricType';\nimport adhocMetricType from './adhocMetricType';\nimport AdhocMetricPopoverTrigger from './AdhocMetricPopoverTrigger';\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, adhocMetricType])),\n    PropTypes.oneOfType([PropTypes.string, adhocMetricType]),\n  ]),\n  columns: PropTypes.arrayOf(columnType),\n  savedMetrics: PropTypes.arrayOf(savedMetricType),\n  isLoading: PropTypes.bool,\n  multi: PropTypes.bool,\n  clearable: PropTypes.bool,\n  datasource: PropTypes.object,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  clearable: true,\n  savedMetrics: [],\n  columns: [],\n};\n\nfunction getOptionsForSavedMetrics(\n  savedMetrics,\n  currentMetricValues,\n  currentMetric,\n) {\n  return (\n    savedMetrics?.filter(savedMetric =>\n      Array.isArray(currentMetricValues)\n        ? !currentMetricValues.includes(savedMetric.metric_name) ||\n          savedMetric.metric_name === currentMetric\n        : savedMetric,\n    ) ?? []\n  );\n}\n\nfunction isDictionaryForAdhocMetric(value) {\n  return value && !(value instanceof AdhocMetric) && value.expressionType;\n}\n\n// adhoc metrics are stored as dictionaries in URL params. We convert them back into the\n// AdhocMetric class for typechecking, consistency and instance method access.\nfunction coerceAdhocMetrics(value) {\n  if (!value) {\n    return [];\n  }\n  if (!Array.isArray(value)) {\n    if (isDictionaryForAdhocMetric(value)) {\n      return [new AdhocMetric(value)];\n    }\n    return [value];\n  }\n  return value.map(val => {\n    if (isDictionaryForAdhocMetric(val)) {\n      return new AdhocMetric(val);\n    }\n    return val;\n  });\n}\n\nconst emptySavedMetric = { metric_name: '', expression: '' };\n\n// TODO: use typeguards to distinguish saved metrics from adhoc metrics\nconst getMetricsMatchingCurrentDataset = (value, columns, savedMetrics) =>\n  ensureIsArray(value).filter(metric => {\n    if (typeof metric === 'string' || metric.metric_name) {\n      return savedMetrics?.some(\n        savedMetric =>\n          savedMetric.metric_name === metric ||\n          savedMetric.metric_name === metric.metric_name,\n      );\n    }\n    return columns?.some(\n      column =>\n        !metric.column || metric.column.column_name === column.column_name,\n    );\n  });\n\nconst MetricsControl = ({\n  onChange,\n  multi,\n  value: propsValue,\n  columns,\n  savedMetrics,\n  datasource,\n  ...props\n}) => {\n  const [value, setValue] = useState(coerceAdhocMetrics(propsValue));\n  const theme = useTheme();\n  const prevColumns = usePrevious(columns);\n  const prevSavedMetrics = usePrevious(savedMetrics);\n\n  const handleChange = useCallback(\n    opts => {\n      // if clear out options\n      if (opts === null) {\n        onChange(null);\n        return;\n      }\n\n      const transformedOpts = ensureIsArray(opts);\n      const optionValues = transformedOpts\n        .map(option => {\n          // pre-defined metric\n          if (option.metric_name) {\n            return option.metric_name;\n          }\n          return option;\n        })\n        .filter(option => option);\n      onChange(multi ? optionValues : optionValues[0]);\n    },\n    [multi, onChange],\n  );\n\n  const onNewMetric = useCallback(\n    newMetric => {\n      const newValue = [...value, newMetric];\n      setValue(newValue);\n      handleChange(newValue);\n    },\n    [handleChange, value],\n  );\n\n  const onMetricEdit = useCallback(\n    (changedMetric, oldMetric) => {\n      const newValue = value.map(val => {\n        if (\n          // compare saved metrics\n          val === oldMetric.metric_name ||\n          // compare adhoc metrics\n          typeof val.optionName !== 'undefined'\n            ? val.optionName === oldMetric.optionName\n            : false\n        ) {\n          return changedMetric;\n        }\n        return val;\n      });\n      setValue(newValue);\n      handleChange(newValue);\n    },\n    [handleChange, value],\n  );\n\n  const onRemoveMetric = useCallback(\n    index => {\n      if (!Array.isArray(value)) {\n        return;\n      }\n      const valuesCopy = [...value];\n      valuesCopy.splice(index, 1);\n      setValue(valuesCopy);\n      handleChange(valuesCopy);\n    },\n    [handleChange, value],\n  );\n\n  const moveLabel = useCallback(\n    (dragIndex, hoverIndex) => {\n      const newValues = [...value];\n      [newValues[hoverIndex], newValues[dragIndex]] = [\n        newValues[dragIndex],\n        newValues[hoverIndex],\n      ];\n      setValue(newValues);\n    },\n    [value],\n  );\n\n  const isAddNewMetricDisabled = useCallback(\n    () => !multi && value.length > 0,\n    [multi, value.length],\n  );\n\n  const savedMetricOptions = useMemo(\n    () => getOptionsForSavedMetrics(savedMetrics, propsValue, null),\n    [propsValue, savedMetrics],\n  );\n\n  const newAdhocMetric = useMemo(() => new AdhocMetric({}), [value]);\n  const addNewMetricPopoverTrigger = useCallback(\n    trigger => {\n      if (isAddNewMetricDisabled()) {\n        return trigger;\n      }\n      return (\n        <AdhocMetricPopoverTrigger\n          adhocMetric={newAdhocMetric}\n          onMetricEdit={onNewMetric}\n          columns={columns}\n          savedMetricsOptions={savedMetricOptions}\n          savedMetric={emptySavedMetric}\n          datasource={datasource}\n          isNew\n        >\n          {trigger}\n        </AdhocMetricPopoverTrigger>\n      );\n    },\n    [\n      columns,\n      datasource,\n      isAddNewMetricDisabled,\n      newAdhocMetric,\n      onNewMetric,\n      savedMetricOptions,\n    ],\n  );\n\n  useEffect(() => {\n    // Remove selected custom metrics that do not exist in the dataset anymore\n    // Remove selected adhoc metrics that use columns which do not exist in the dataset anymore\n    if (\n      propsValue &&\n      (!isEqual(prevColumns, columns) ||\n        !isEqual(prevSavedMetrics, savedMetrics))\n    ) {\n      const matchingMetrics = getMetricsMatchingCurrentDataset(\n        propsValue,\n        columns,\n        savedMetrics,\n      );\n      if (!isEqual(matchingMetrics, propsValue)) {\n        handleChange(matchingMetrics);\n      }\n    }\n  }, [columns, handleChange, savedMetrics]);\n\n  useEffect(() => {\n    setValue(coerceAdhocMetrics(propsValue));\n  }, [propsValue]);\n\n  const onDropLabel = useCallback(\n    () => handleChange(value),\n    [handleChange, value],\n  );\n\n  const valueRenderer = useCallback(\n    (option, index) => (\n      <MetricDefinitionValue\n        key={index}\n        index={index}\n        option={option}\n        onMetricEdit={onMetricEdit}\n        onRemoveMetric={onRemoveMetric}\n        columns={columns}\n        datasource={datasource}\n        savedMetrics={savedMetrics}\n        savedMetricsOptions={getOptionsForSavedMetrics(\n          savedMetrics,\n          value,\n          value?.[index],\n        )}\n        onMoveLabel={moveLabel}\n        onDropLabel={onDropLabel}\n        multi={multi}\n      />\n    ),\n    [\n      columns,\n      datasource,\n      moveLabel,\n      multi,\n      onDropLabel,\n      onMetricEdit,\n      onRemoveMetric,\n      savedMetrics,\n      value,\n    ],\n  );\n\n  return (\n    <div className=\"metrics-select\">\n      <HeaderContainer>\n        <ControlHeader {...props} />\n        {addNewMetricPopoverTrigger(\n          <AddIconButton\n            disabled={isAddNewMetricDisabled()}\n            data-test=\"add-metric-button\"\n          >\n            <Icons.PlusLarge\n              iconSize=\"s\"\n              iconColor={theme.colors.grayscale.light5}\n            />\n          </AddIconButton>,\n        )}\n      </HeaderContainer>\n      <LabelsContainer>\n        {value.length > 0\n          ? value.map((value, index) => valueRenderer(value, index))\n          : addNewMetricPopoverTrigger(\n              <AddControlLabel>\n                <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\n                {t('Add metric')}\n              </AddControlLabel>,\n            )}\n      </LabelsContainer>\n    </div>\n  );\n};\n\nMetricsControl.propTypes = propTypes;\nMetricsControl.defaultProps = defaultProps;\n\nexport default MetricsControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric',\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 },\n};\n\nexport default class FixedOrMetricControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n      (props.value ? props.value.type : props.default.type) ||\n      controlTypes.fixed;\n    const value =\n      (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null,\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n        this.state.type === controlTypes.fixed\n          ? this.state.fixedValue\n          : this.state.metricValue,\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource\n      ? this.props.datasource.columns\n      : null;\n    const metrics = this.props.datasource\n      ? this.props.datasource.metrics\n      : null;\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Collapse\n          ghost\n          css={theme => css`\n            &.ant-collapse\n              > .ant-collapse-item.ant-collapse-no-arrow\n              > .ant-collapse-header {\n              border: 0px;\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\n              display: inline-block;\n            }\n            &.ant-collapse-ghost\n              > .ant-collapse-item\n              > .ant-collapse-content\n              > .ant-collapse-content-box {\n              padding: 0px;\n\n              & .well {\n                margin-bottom: 0px;\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n          `}\n        >\n          <Collapse.Panel\n            showArrow={false}\n            header={\n              <Label>\n                {this.state.type === controlTypes.fixed && (\n                  <span>{this.state.fixedValue}</span>\n                )}\n                {this.state.type === controlTypes.metric && (\n                  <span>\n                    <span>{t('metric')}: </span>\n                    <strong>\n                      {this.state.metricValue\n                        ? this.state.metricValue.label\n                        : null}\n                    </strong>\n                  </span>\n                )}\n              </Label>\n            }\n          >\n            <div className=\"well\">\n              <PopoverSection\n                title={t('Fixed')}\n                isSelected={type === controlTypes.fixed}\n                onSelect={() => {\n                  this.setType(controlTypes.fixed);\n                }}\n              >\n                <TextControl\n                  isFloat\n                  onChange={this.setFixedValue}\n                  onFocus={() => {\n                    this.setType(controlTypes.fixed);\n                  }}\n                  value={this.state.fixedValue}\n                />\n              </PopoverSection>\n              <PopoverSection\n                title={t('Based on a metric')}\n                isSelected={type === controlTypes.metric}\n                onSelect={() => {\n                  this.setType(controlTypes.metric);\n                }}\n              >\n                <MetricsControl\n                  name=\"metric\"\n                  columns={columns}\n                  savedMetrics={metrics}\n                  multi={false}\n                  onFocus={() => {\n                    this.setType(controlTypes.metric);\n                  }}\n                  onChange={this.setMetric}\n                  value={this.state.metricValue}\n                  datasource={this.props.datasource}\n                />\n              </PopoverSection>\n            </div>\n          </Collapse.Panel>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport { t, SupersetClient, getClientErrorObject } from '@superset-ui/core';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport { Select } from 'src/components';\nimport { SelectOptionsType, SelectProps } from 'src/components/Select/types';\nimport { SelectValue, LabeledValue } from 'antd/lib/select';\nimport withToasts from 'src/components/MessageToasts/withToasts';\n\ntype SelectAsyncProps = Omit<SelectProps, 'options' | 'ariaLabel' | 'onChange'>;\n\ninterface SelectAsyncControlProps extends SelectAsyncProps {\n  addDangerToast: (error: string) => void;\n  ariaLabel?: string;\n  dataEndpoint: string;\n  default?: SelectValue;\n  mutator?: (response: Record<string, any>) => SelectOptionsType;\n  multi?: boolean;\n  onChange: (val: SelectValue) => void;\n  // ControlHeader related props\n  description?: string;\n  hovered?: boolean;\n  label?: string;\n}\n\nfunction isLabeledValue(arg: any): arg is LabeledValue {\n  return arg.value !== undefined;\n}\n\nconst SelectAsyncControl = ({\n  addDangerToast,\n  allowClear = true,\n  ariaLabel,\n  dataEndpoint,\n  multi = true,\n  mutator,\n  onChange,\n  placeholder,\n  value,\n  ...props\n}: SelectAsyncControlProps) => {\n  const [options, setOptions] = useState<SelectOptionsType>([]);\n\n  const handleOnChange = (val: SelectValue) => {\n    let onChangeVal = val;\n    if (Array.isArray(val)) {\n      const values = val.map(v => (isLabeledValue(v) ? v.value : v));\n      onChangeVal = values;\n    }\n    if (isLabeledValue(val)) {\n      onChangeVal = val.value;\n    }\n    onChange(onChangeVal);\n  };\n\n  const getValue = () => {\n    const currentValue =\n      value || (props.default !== undefined ? props.default : undefined);\n\n    // safety check - the value is intended to be undefined but null was used\n    if (currentValue === null && !options.find(o => o.value === null)) {\n      return undefined;\n    }\n    return currentValue;\n  };\n\n  useEffect(() => {\n    const onError = (response: Response) =>\n      getClientErrorObject(response).then(e => {\n        const { error } = e;\n        addDangerToast(t('Error while fetching data: %s', error));\n      });\n    const loadOptions = () =>\n      SupersetClient.get({\n        endpoint: dataEndpoint,\n      })\n        .then(response => {\n          const data = mutator ? mutator(response.json) : response.json.result;\n          setOptions(data);\n        })\n        .catch(onError);\n    loadOptions();\n  }, [addDangerToast, dataEndpoint, mutator]);\n\n  return (\n    <Select\n      allowClear={allowClear}\n      ariaLabel={ariaLabel || t('Select ...')}\n      value={getValue()}\n      header={<ControlHeader {...props} />}\n      mode={multi ? 'multiple' : 'single'}\n      onChange={handleOnChange}\n      options={options}\n      placeholder={placeholder}\n    />\n  );\n};\n\nexport default withToasts(SelectAsyncControl);\n","export function getOffset(value, min, max) {\n  return (value - min) / (max - min);\n}\nexport function getDirectionStyle(direction, value, min, max) {\n  var offset = getOffset(value, min, max);\n  var positionStyle = {};\n  switch (direction) {\n    case 'rtl':\n      positionStyle.right = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateX(50%)';\n      break;\n    case 'btt':\n      positionStyle.bottom = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateY(50%)';\n      break;\n    case 'ttb':\n      positionStyle.top = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateY(-50%)';\n      break;\n    default:\n      positionStyle.left = \"\".concat(offset * 100, \"%\");\n      positionStyle.transform = 'translateX(-50%)';\n      break;\n  }\n  return positionStyle;\n}\n\n/** Return index value if is list or return value directly */\nexport function getIndex(value, index) {\n  return Array.isArray(value) ? value[index] : value;\n}","import * as React from 'react';\nvar SliderContext = /*#__PURE__*/React.createContext({\n  min: 0,\n  max: 0,\n  direction: 'ltr',\n  step: 1,\n  includedStart: 0,\n  includedEnd: 0,\n  tabIndex: 0,\n  keyboard: true,\n  styles: {},\n  classNames: {}\n});\nexport default SliderContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"value\", \"valueIndex\", \"onStartMove\", \"style\", \"render\", \"dragging\", \"onOffsetChange\", \"onChangeComplete\", \"onFocus\", \"onMouseEnter\"];\nimport cls from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle, getIndex } from \"../util\";\nvar Handle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    value = props.value,\n    valueIndex = props.valueIndex,\n    onStartMove = props.onStartMove,\n    style = props.style,\n    render = props.render,\n    dragging = props.dragging,\n    onOffsetChange = props.onOffsetChange,\n    onChangeComplete = props.onChangeComplete,\n    onFocus = props.onFocus,\n    onMouseEnter = props.onMouseEnter,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    disabled = _React$useContext.disabled,\n    keyboard = _React$useContext.keyboard,\n    range = _React$useContext.range,\n    tabIndex = _React$useContext.tabIndex,\n    ariaLabelForHandle = _React$useContext.ariaLabelForHandle,\n    ariaLabelledByForHandle = _React$useContext.ariaLabelledByForHandle,\n    ariaValueTextFormatterForHandle = _React$useContext.ariaValueTextFormatterForHandle,\n    styles = _React$useContext.styles,\n    classNames = _React$useContext.classNames;\n  var handlePrefixCls = \"\".concat(prefixCls, \"-handle\");\n\n  // ============================ Events ============================\n  var onInternalStartMove = function onInternalStartMove(e) {\n    if (!disabled) {\n      onStartMove(e, valueIndex);\n    }\n  };\n  var onInternalFocus = function onInternalFocus(e) {\n    onFocus === null || onFocus === void 0 || onFocus(e, valueIndex);\n  };\n  var onInternalMouseEnter = function onInternalMouseEnter(e) {\n    onMouseEnter(e, valueIndex);\n  };\n\n  // =========================== Keyboard ===========================\n  var onKeyDown = function onKeyDown(e) {\n    if (!disabled && keyboard) {\n      var offset = null;\n\n      // Change the value\n      switch (e.which || e.keyCode) {\n        case KeyCode.LEFT:\n          offset = direction === 'ltr' || direction === 'btt' ? -1 : 1;\n          break;\n        case KeyCode.RIGHT:\n          offset = direction === 'ltr' || direction === 'btt' ? 1 : -1;\n          break;\n\n        // Up is plus\n        case KeyCode.UP:\n          offset = direction !== 'ttb' ? 1 : -1;\n          break;\n\n        // Down is minus\n        case KeyCode.DOWN:\n          offset = direction !== 'ttb' ? -1 : 1;\n          break;\n        case KeyCode.HOME:\n          offset = 'min';\n          break;\n        case KeyCode.END:\n          offset = 'max';\n          break;\n        case KeyCode.PAGE_UP:\n          offset = 2;\n          break;\n        case KeyCode.PAGE_DOWN:\n          offset = -2;\n          break;\n      }\n      if (offset !== null) {\n        e.preventDefault();\n        onOffsetChange(offset, valueIndex);\n      }\n    }\n  };\n  var handleKeyUp = function handleKeyUp(e) {\n    switch (e.which || e.keyCode) {\n      case KeyCode.LEFT:\n      case KeyCode.RIGHT:\n      case KeyCode.UP:\n      case KeyCode.DOWN:\n      case KeyCode.HOME:\n      case KeyCode.END:\n      case KeyCode.PAGE_UP:\n      case KeyCode.PAGE_DOWN:\n        onChangeComplete === null || onChangeComplete === void 0 || onChangeComplete();\n        break;\n    }\n  };\n\n  // ============================ Offset ============================\n  var positionStyle = getDirectionStyle(direction, value, min, max);\n\n  // ============================ Render ============================\n  var divProps = {};\n  if (valueIndex !== null) {\n    var _getIndex;\n    divProps = {\n      tabIndex: disabled ? null : getIndex(tabIndex, valueIndex),\n      role: 'slider',\n      'aria-valuemin': min,\n      'aria-valuemax': max,\n      'aria-valuenow': value,\n      'aria-disabled': disabled,\n      'aria-label': getIndex(ariaLabelForHandle, valueIndex),\n      'aria-labelledby': getIndex(ariaLabelledByForHandle, valueIndex),\n      'aria-valuetext': (_getIndex = getIndex(ariaValueTextFormatterForHandle, valueIndex)) === null || _getIndex === void 0 ? void 0 : _getIndex(value),\n      'aria-orientation': direction === 'ltr' || direction === 'rtl' ? 'horizontal' : 'vertical',\n      onMouseDown: onInternalStartMove,\n      onTouchStart: onInternalStartMove,\n      onFocus: onInternalFocus,\n      onMouseEnter: onInternalMouseEnter,\n      onKeyDown: onKeyDown,\n      onKeyUp: handleKeyUp\n    };\n  }\n  var handleNode = /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref,\n    className: cls(handlePrefixCls, _defineProperty(_defineProperty({}, \"\".concat(handlePrefixCls, \"-\").concat(valueIndex + 1), valueIndex !== null && range), \"\".concat(handlePrefixCls, \"-dragging\"), dragging), classNames.handle),\n    style: _objectSpread(_objectSpread(_objectSpread({}, positionStyle), style), styles.handle)\n  }, divProps, restProps));\n\n  // Customize\n  if (render) {\n    handleNode = render(handleNode, {\n      index: valueIndex,\n      prefixCls: prefixCls,\n      value: value,\n      dragging: dragging\n    });\n  }\n  return handleNode;\n});\nif (process.env.NODE_ENV !== 'production') {\n  Handle.displayName = 'Handle';\n}\nexport default Handle;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"style\", \"onStartMove\", \"onOffsetChange\", \"values\", \"handleRender\", \"activeHandleRender\", \"draggingIndex\", \"onFocus\"];\nimport * as React from 'react';\nimport { getIndex } from \"../util\";\nimport Handle from \"./Handle\";\nvar Handles = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    onStartMove = props.onStartMove,\n    onOffsetChange = props.onOffsetChange,\n    values = props.values,\n    handleRender = props.handleRender,\n    activeHandleRender = props.activeHandleRender,\n    draggingIndex = props.draggingIndex,\n    onFocus = props.onFocus,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var handlesRef = React.useRef({});\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus(index) {\n        var _handlesRef$current$i;\n        (_handlesRef$current$i = handlesRef.current[index]) === null || _handlesRef$current$i === void 0 || _handlesRef$current$i.focus();\n      }\n    };\n  });\n\n  // =========================== Active ===========================\n  var _React$useState = React.useState(-1),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeIndex = _React$useState2[0],\n    setActiveIndex = _React$useState2[1];\n  var onHandleFocus = function onHandleFocus(e, index) {\n    setActiveIndex(index);\n    onFocus === null || onFocus === void 0 || onFocus(e);\n  };\n  var onHandleMouseEnter = function onHandleMouseEnter(e, index) {\n    setActiveIndex(index);\n  };\n\n  // =========================== Render ===========================\n  // Handle Props\n  var handleProps = _objectSpread({\n    prefixCls: prefixCls,\n    onStartMove: onStartMove,\n    onOffsetChange: onOffsetChange,\n    render: handleRender,\n    onFocus: onHandleFocus,\n    onMouseEnter: onHandleMouseEnter\n  }, restProps);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, values.map(function (value, index) {\n    return /*#__PURE__*/React.createElement(Handle, _extends({\n      ref: function ref(node) {\n        if (!node) {\n          delete handlesRef.current[index];\n        } else {\n          handlesRef.current[index] = node;\n        }\n      },\n      dragging: draggingIndex === index,\n      style: getIndex(style, index),\n      key: index,\n      value: value,\n      valueIndex: index\n    }, handleProps));\n  }), activeHandleRender && /*#__PURE__*/React.createElement(Handle, _extends({\n    key: \"a11y\"\n  }, handleProps, {\n    value: values[activeIndex],\n    valueIndex: null,\n    dragging: draggingIndex !== -1,\n    render: activeHandleRender,\n    style: {\n      pointerEvents: 'none'\n    },\n    tabIndex: null,\n    \"aria-hidden\": true\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Handles.displayName = 'Handles';\n}\nexport default Handles;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle } from \"../util\";\nvar Mark = function Mark(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    children = props.children,\n    value = props.value,\n    _onClick = props.onClick;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    includedStart = _React$useContext.includedStart,\n    includedEnd = _React$useContext.includedEnd,\n    included = _React$useContext.included;\n  var textCls = \"\".concat(prefixCls, \"-text\");\n\n  // ============================ Offset ============================\n  var positionStyle = getDirectionStyle(direction, value, min, max);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(textCls, _defineProperty({}, \"\".concat(textCls, \"-active\"), included && includedStart <= value && value <= includedEnd)),\n    style: _objectSpread(_objectSpread({}, positionStyle), style),\n    onMouseDown: function onMouseDown(e) {\n      e.stopPropagation();\n    },\n    onClick: function onClick() {\n      _onClick(value);\n    }\n  }, children);\n};\nexport default Mark;","import * as React from 'react';\nimport Mark from \"./Mark\";\nvar Marks = function Marks(props) {\n  var prefixCls = props.prefixCls,\n    marks = props.marks,\n    onClick = props.onClick;\n  var markPrefixCls = \"\".concat(prefixCls, \"-mark\");\n\n  // Not render mark if empty\n  if (!marks.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: markPrefixCls\n  }, marks.map(function (_ref) {\n    var value = _ref.value,\n      style = _ref.style,\n      label = _ref.label;\n    return /*#__PURE__*/React.createElement(Mark, {\n      key: value,\n      prefixCls: markPrefixCls,\n      style: style,\n      value: value,\n      onClick: onClick\n    }, label);\n  }));\n};\nexport default Marks;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getDirectionStyle } from \"../util\";\nvar Dot = function Dot(props) {\n  var prefixCls = props.prefixCls,\n    value = props.value,\n    style = props.style,\n    activeStyle = props.activeStyle;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    direction = _React$useContext.direction,\n    included = _React$useContext.included,\n    includedStart = _React$useContext.includedStart,\n    includedEnd = _React$useContext.includedEnd;\n  var dotClassName = \"\".concat(prefixCls, \"-dot\");\n  var active = included && includedStart <= value && value <= includedEnd;\n\n  // ============================ Offset ============================\n  var mergedStyle = _objectSpread(_objectSpread({}, getDirectionStyle(direction, value, min, max)), typeof style === 'function' ? style(value) : style);\n  if (active) {\n    mergedStyle = _objectSpread(_objectSpread({}, mergedStyle), typeof activeStyle === 'function' ? activeStyle(value) : activeStyle);\n  }\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(dotClassName, _defineProperty({}, \"\".concat(dotClassName, \"-active\"), active)),\n    style: mergedStyle\n  });\n};\nexport default Dot;","import * as React from 'react';\nimport SliderContext from \"../context\";\nimport Dot from \"./Dot\";\nvar Steps = function Steps(props) {\n  var prefixCls = props.prefixCls,\n    marks = props.marks,\n    dots = props.dots,\n    style = props.style,\n    activeStyle = props.activeStyle;\n  var _React$useContext = React.useContext(SliderContext),\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    step = _React$useContext.step;\n  var stepDots = React.useMemo(function () {\n    var dotSet = new Set();\n\n    // Add marks\n    marks.forEach(function (mark) {\n      dotSet.add(mark.value);\n    });\n\n    // Fill dots\n    if (dots && step !== null) {\n      var current = min;\n      while (current <= max) {\n        dotSet.add(current);\n        current += step;\n      }\n    }\n    return Array.from(dotSet);\n  }, [min, max, step, dots, marks]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-step\")\n  }, stepDots.map(function (dotValue) {\n    return /*#__PURE__*/React.createElement(Dot, {\n      prefixCls: prefixCls,\n      key: dotValue,\n      value: dotValue,\n      style: style,\n      activeStyle: activeStyle\n    });\n  }));\n};\nexport default Steps;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport cls from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getOffset } from \"../util\";\nvar Track = function Track(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    start = props.start,\n    end = props.end,\n    index = props.index,\n    onStartMove = props.onStartMove,\n    replaceCls = props.replaceCls;\n  var _React$useContext = React.useContext(SliderContext),\n    direction = _React$useContext.direction,\n    min = _React$useContext.min,\n    max = _React$useContext.max,\n    disabled = _React$useContext.disabled,\n    range = _React$useContext.range,\n    classNames = _React$useContext.classNames;\n  var trackPrefixCls = \"\".concat(prefixCls, \"-track\");\n  var offsetStart = getOffset(start, min, max);\n  var offsetEnd = getOffset(end, min, max);\n\n  // ============================ Events ============================\n  var onInternalStartMove = function onInternalStartMove(e) {\n    if (!disabled && onStartMove) {\n      onStartMove(e, -1);\n    }\n  };\n\n  // ============================ Render ============================\n  var positionStyle = {};\n  switch (direction) {\n    case 'rtl':\n      positionStyle.right = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.width = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    case 'btt':\n      positionStyle.bottom = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.height = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    case 'ttb':\n      positionStyle.top = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.height = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n      break;\n    default:\n      positionStyle.left = \"\".concat(offsetStart * 100, \"%\");\n      positionStyle.width = \"\".concat(offsetEnd * 100 - offsetStart * 100, \"%\");\n  }\n  var className = replaceCls || cls(trackPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(trackPrefixCls, \"-\").concat(index + 1), index !== null && range), \"\".concat(prefixCls, \"-track-draggable\"), onStartMove), classNames.track);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    style: _objectSpread(_objectSpread({}, positionStyle), style),\n    onMouseDown: onInternalStartMove,\n    onTouchStart: onInternalStartMove\n  });\n};\nexport default Track;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport cls from 'classnames';\nimport * as React from 'react';\nimport SliderContext from \"../context\";\nimport { getIndex } from \"../util\";\nimport Track from \"./Track\";\nvar Tracks = function Tracks(props) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    values = props.values,\n    startPoint = props.startPoint,\n    onStartMove = props.onStartMove;\n  var _React$useContext = React.useContext(SliderContext),\n    included = _React$useContext.included,\n    range = _React$useContext.range,\n    min = _React$useContext.min,\n    styles = _React$useContext.styles,\n    classNames = _React$useContext.classNames;\n\n  // =========================== List ===========================\n  var trackList = React.useMemo(function () {\n    if (!range) {\n      // null value do not have track\n      if (values.length === 0) {\n        return [];\n      }\n      var startValue = startPoint !== null && startPoint !== void 0 ? startPoint : min;\n      var endValue = values[0];\n      return [{\n        start: Math.min(startValue, endValue),\n        end: Math.max(startValue, endValue)\n      }];\n    }\n\n    // Multiple\n    var list = [];\n    for (var i = 0; i < values.length - 1; i += 1) {\n      list.push({\n        start: values[i],\n        end: values[i + 1]\n      });\n    }\n    return list;\n  }, [values, range, startPoint, min]);\n  if (!included) {\n    return null;\n  }\n\n  // ========================== Render ==========================\n  var tracksNode = classNames.tracks || styles.tracks ? /*#__PURE__*/React.createElement(Track, {\n    index: null,\n    prefixCls: prefixCls,\n    start: trackList[0].start,\n    end: trackList[trackList.length - 1].end,\n    replaceCls: cls(classNames.tracks, \"\".concat(prefixCls, \"-tracks\")),\n    style: styles.tracks\n  }) : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, tracksNode, trackList.map(function (_ref, index) {\n    var start = _ref.start,\n      end = _ref.end;\n    return /*#__PURE__*/React.createElement(Track, {\n      index: index,\n      prefixCls: prefixCls,\n      style: _objectSpread(_objectSpread({}, getIndex(style, index)), styles.track),\n      start: start,\n      end: end,\n      key: index,\n      onStartMove: onStartMove\n    });\n  }));\n};\nexport default Tracks;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEvent } from 'rc-util';\nimport * as React from 'react';\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  return {\n    pageX: obj.pageX,\n    pageY: obj.pageY\n  };\n}\nfunction useDrag(containerRef, direction, rawValues, min, max, formatValue, triggerChange, finishChange, offsetValues) {\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    draggingValue = _React$useState2[0],\n    setDraggingValue = _React$useState2[1];\n  var _React$useState3 = React.useState(-1),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    draggingIndex = _React$useState4[0],\n    setDraggingIndex = _React$useState4[1];\n  var _React$useState5 = React.useState(rawValues),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    cacheValues = _React$useState6[0],\n    setCacheValues = _React$useState6[1];\n  var _React$useState7 = React.useState(rawValues),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    originValues = _React$useState8[0],\n    setOriginValues = _React$useState8[1];\n  var mouseMoveEventRef = React.useRef(null);\n  var mouseUpEventRef = React.useRef(null);\n  React.useLayoutEffect(function () {\n    if (draggingIndex === -1) {\n      setCacheValues(rawValues);\n    }\n  }, [rawValues, draggingIndex]);\n\n  // Clean up event\n  React.useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveEventRef.current);\n      document.removeEventListener('mouseup', mouseUpEventRef.current);\n      document.removeEventListener('touchmove', mouseMoveEventRef.current);\n      document.removeEventListener('touchend', mouseUpEventRef.current);\n    };\n  }, []);\n  var flushValues = function flushValues(nextValues, nextValue) {\n    // Perf: Only update state when value changed\n    if (cacheValues.some(function (val, i) {\n      return val !== nextValues[i];\n    })) {\n      if (nextValue !== undefined) {\n        setDraggingValue(nextValue);\n      }\n      setCacheValues(nextValues);\n      triggerChange(nextValues);\n    }\n  };\n  var updateCacheValue = useEvent(function (valueIndex, offsetPercent) {\n    // Basic point offset\n\n    if (valueIndex === -1) {\n      // >>>> Dragging on the track\n      var startValue = originValues[0];\n      var endValue = originValues[originValues.length - 1];\n      var maxStartOffset = min - startValue;\n      var maxEndOffset = max - endValue;\n\n      // Get valid offset\n      var offset = offsetPercent * (max - min);\n      offset = Math.max(offset, maxStartOffset);\n      offset = Math.min(offset, maxEndOffset);\n\n      // Use first value to revert back of valid offset (like steps marks)\n      var formatStartValue = formatValue(startValue + offset);\n      offset = formatStartValue - startValue;\n      var cloneCacheValues = originValues.map(function (val) {\n        return val + offset;\n      });\n      flushValues(cloneCacheValues);\n    } else {\n      // >>>> Dragging on the handle\n      var offsetDist = (max - min) * offsetPercent;\n\n      // Always start with the valueIndex origin value\n      var cloneValues = _toConsumableArray(cacheValues);\n      cloneValues[valueIndex] = originValues[valueIndex];\n      var next = offsetValues(cloneValues, offsetDist, valueIndex, 'dist');\n      flushValues(next.values, next.value);\n    }\n  });\n  var onStartMove = function onStartMove(e, valueIndex, startValues) {\n    e.stopPropagation();\n\n    // 如果是点击 track 触发的，需要传入变化后的初始值，而不能直接用 rawValues\n    var initialValues = startValues || rawValues;\n    var originValue = initialValues[valueIndex];\n    setDraggingIndex(valueIndex);\n    setDraggingValue(originValue);\n    setOriginValues(initialValues);\n    var _getPosition = getPosition(e),\n      startX = _getPosition.pageX,\n      startY = _getPosition.pageY;\n\n    // Moving\n    var onMouseMove = function onMouseMove(event) {\n      event.preventDefault();\n      var _getPosition2 = getPosition(event),\n        moveX = _getPosition2.pageX,\n        moveY = _getPosition2.pageY;\n      var offsetX = moveX - startX;\n      var offsetY = moveY - startY;\n      var _containerRef$current = containerRef.current.getBoundingClientRect(),\n        width = _containerRef$current.width,\n        height = _containerRef$current.height;\n      var offSetPercent;\n      switch (direction) {\n        case 'btt':\n          offSetPercent = -offsetY / height;\n          break;\n        case 'ttb':\n          offSetPercent = offsetY / height;\n          break;\n        case 'rtl':\n          offSetPercent = -offsetX / width;\n          break;\n        default:\n          offSetPercent = offsetX / width;\n      }\n      updateCacheValue(valueIndex, offSetPercent);\n    };\n\n    // End\n    var onMouseUp = function onMouseUp(event) {\n      event.preventDefault();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('touchend', onMouseUp);\n      document.removeEventListener('touchmove', onMouseMove);\n      mouseMoveEventRef.current = null;\n      mouseUpEventRef.current = null;\n      setDraggingIndex(-1);\n      finishChange();\n    };\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchend', onMouseUp);\n    document.addEventListener('touchmove', onMouseMove);\n    mouseMoveEventRef.current = onMouseMove;\n    mouseUpEventRef.current = onMouseUp;\n  };\n\n  // Only return cache value when it mapping with rawValues\n  var returnValues = React.useMemo(function () {\n    var sourceValues = _toConsumableArray(rawValues).sort(function (a, b) {\n      return a - b;\n    });\n    var targetValues = _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n    return sourceValues.every(function (val, index) {\n      return val === targetValues[index];\n    }) ? cacheValues : rawValues;\n  }, [rawValues, cacheValues]);\n  return [draggingIndex, draggingValue, returnValues, onStartMove];\n}\nexport default useDrag;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport cls from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport Handles from \"./Handles\";\nimport Marks from \"./Marks\";\nimport Steps from \"./Steps\";\nimport Tracks from \"./Tracks\";\nimport SliderContext from \"./context\";\nimport useDrag from \"./hooks/useDrag\";\nimport useOffset from \"./hooks/useOffset\";\n\n/**\n * New:\n * - click mark to update range value\n * - handleRender\n * - Fix handle with count not correct\n * - Fix pushable not work in some case\n * - No more FindDOMNode\n * - Move all position related style into inline style\n * - Key: up is plus, down is minus\n * - fix Key with step = null not align with marks\n * - Change range should not trigger onChange\n * - keyboard support pushable\n */\n\nvar Slider = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-slider' : _props$prefixCls,\n    className = props.className,\n    style = props.style,\n    classNames = props.classNames,\n    styles = props.styles,\n    _props$disabled = props.disabled,\n    disabled = _props$disabled === void 0 ? false : _props$disabled,\n    _props$keyboard = props.keyboard,\n    keyboard = _props$keyboard === void 0 ? true : _props$keyboard,\n    autoFocus = props.autoFocus,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    _props$min = props.min,\n    min = _props$min === void 0 ? 0 : _props$min,\n    _props$max = props.max,\n    max = _props$max === void 0 ? 100 : _props$max,\n    _props$step = props.step,\n    step = _props$step === void 0 ? 1 : _props$step,\n    value = props.value,\n    defaultValue = props.defaultValue,\n    range = props.range,\n    count = props.count,\n    onChange = props.onChange,\n    onBeforeChange = props.onBeforeChange,\n    onAfterChange = props.onAfterChange,\n    onChangeComplete = props.onChangeComplete,\n    _props$allowCross = props.allowCross,\n    allowCross = _props$allowCross === void 0 ? true : _props$allowCross,\n    _props$pushable = props.pushable,\n    pushable = _props$pushable === void 0 ? false : _props$pushable,\n    draggableTrack = props.draggableTrack,\n    reverse = props.reverse,\n    vertical = props.vertical,\n    _props$included = props.included,\n    included = _props$included === void 0 ? true : _props$included,\n    startPoint = props.startPoint,\n    trackStyle = props.trackStyle,\n    handleStyle = props.handleStyle,\n    railStyle = props.railStyle,\n    dotStyle = props.dotStyle,\n    activeDotStyle = props.activeDotStyle,\n    marks = props.marks,\n    dots = props.dots,\n    handleRender = props.handleRender,\n    activeHandleRender = props.activeHandleRender,\n    _props$tabIndex = props.tabIndex,\n    tabIndex = _props$tabIndex === void 0 ? 0 : _props$tabIndex,\n    ariaLabelForHandle = props.ariaLabelForHandle,\n    ariaLabelledByForHandle = props.ariaLabelledByForHandle,\n    ariaValueTextFormatterForHandle = props.ariaValueTextFormatterForHandle;\n  var handlesRef = React.useRef(null);\n  var containerRef = React.useRef(null);\n  var direction = React.useMemo(function () {\n    if (vertical) {\n      return reverse ? 'ttb' : 'btt';\n    }\n    return reverse ? 'rtl' : 'ltr';\n  }, [reverse, vertical]);\n\n  // ============================ Range =============================\n  var mergedMin = React.useMemo(function () {\n    return isFinite(min) ? min : 0;\n  }, [min]);\n  var mergedMax = React.useMemo(function () {\n    return isFinite(max) ? max : 100;\n  }, [max]);\n\n  // ============================= Step =============================\n  var mergedStep = React.useMemo(function () {\n    return step !== null && step <= 0 ? 1 : step;\n  }, [step]);\n\n  // ============================= Push =============================\n  var mergedPush = React.useMemo(function () {\n    if (typeof pushable === 'boolean') {\n      return pushable ? mergedStep : false;\n    }\n    return pushable >= 0 ? pushable : false;\n  }, [pushable, mergedStep]);\n\n  // ============================ Marks =============================\n  var markList = React.useMemo(function () {\n    return Object.keys(marks || {}).map(function (key) {\n      var mark = marks[key];\n      var markObj = {\n        value: Number(key)\n      };\n      if (mark && _typeof(mark) === 'object' && ! /*#__PURE__*/React.isValidElement(mark) && ('label' in mark || 'style' in mark)) {\n        markObj.style = mark.style;\n        markObj.label = mark.label;\n      } else {\n        markObj.label = mark;\n      }\n      return markObj;\n    }).filter(function (_ref) {\n      var label = _ref.label;\n      return label || typeof label === 'number';\n    }).sort(function (a, b) {\n      return a.value - b.value;\n    });\n  }, [marks]);\n\n  // ============================ Format ============================\n  var _useOffset = useOffset(mergedMin, mergedMax, mergedStep, markList, allowCross, mergedPush),\n    _useOffset2 = _slicedToArray(_useOffset, 2),\n    formatValue = _useOffset2[0],\n    offsetValues = _useOffset2[1];\n\n  // ============================ Values ============================\n  var _useMergedState = useMergedState(defaultValue, {\n      value: value\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedValue = _useMergedState2[0],\n    setValue = _useMergedState2[1];\n  var rawValues = React.useMemo(function () {\n    var valueList = mergedValue === null || mergedValue === undefined ? [] : Array.isArray(mergedValue) ? mergedValue : [mergedValue];\n    var _valueList = _slicedToArray(valueList, 1),\n      _valueList$ = _valueList[0],\n      val0 = _valueList$ === void 0 ? mergedMin : _valueList$;\n    var returnValues = mergedValue === null ? [] : [val0];\n\n    // Format as range\n    if (range) {\n      returnValues = _toConsumableArray(valueList);\n\n      // When count provided or value is `undefined`, we fill values\n      if (count || mergedValue === undefined) {\n        var pointCount = count >= 0 ? count + 1 : 2;\n        returnValues = returnValues.slice(0, pointCount);\n\n        // Fill with count\n        while (returnValues.length < pointCount) {\n          var _returnValues;\n          returnValues.push((_returnValues = returnValues[returnValues.length - 1]) !== null && _returnValues !== void 0 ? _returnValues : mergedMin);\n        }\n      }\n      returnValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    // Align in range\n    returnValues.forEach(function (val, index) {\n      returnValues[index] = formatValue(val);\n    });\n    return returnValues;\n  }, [mergedValue, range, mergedMin, count, formatValue]);\n\n  // =========================== onChange ===========================\n  var rawValuesRef = React.useRef(rawValues);\n  rawValuesRef.current = rawValues;\n  var getTriggerValue = function getTriggerValue(triggerValues) {\n    return range ? triggerValues : triggerValues[0];\n  };\n  var triggerChange = function triggerChange(nextValues) {\n    // Order first\n    var cloneNextValues = _toConsumableArray(nextValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    // Trigger event if needed\n    if (onChange && !isEqual(cloneNextValues, rawValuesRef.current, true)) {\n      onChange(getTriggerValue(cloneNextValues));\n    }\n\n    // We set this later since it will re-render component immediately\n    setValue(cloneNextValues);\n  };\n  var finishChange = function finishChange() {\n    var finishValue = getTriggerValue(rawValuesRef.current);\n    onAfterChange === null || onAfterChange === void 0 || onAfterChange(finishValue);\n    warning(!onAfterChange, '[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead.');\n    onChangeComplete === null || onChangeComplete === void 0 || onChangeComplete(finishValue);\n  };\n  var _useDrag = useDrag(containerRef, direction, rawValues, mergedMin, mergedMax, formatValue, triggerChange, finishChange, offsetValues),\n    _useDrag2 = _slicedToArray(_useDrag, 4),\n    draggingIndex = _useDrag2[0],\n    draggingValue = _useDrag2[1],\n    cacheValues = _useDrag2[2],\n    onStartDrag = _useDrag2[3];\n  var changeToCloseValue = function changeToCloseValue(newValue, e) {\n    if (!disabled) {\n      var valueIndex = 0;\n      var valueDist = mergedMax - mergedMin;\n      rawValues.forEach(function (val, index) {\n        var dist = Math.abs(newValue - val);\n        if (dist <= valueDist) {\n          valueDist = dist;\n          valueIndex = index;\n        }\n      });\n\n      // Create new values\n      var cloneNextValues = _toConsumableArray(rawValues);\n      cloneNextValues[valueIndex] = newValue;\n\n      // Fill value to match default 2\n      if (range && !rawValues.length && count === undefined) {\n        cloneNextValues.push(newValue);\n      }\n      onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(cloneNextValues));\n      triggerChange(cloneNextValues);\n      if (e) {\n        var _document$activeEleme, _document$activeEleme2;\n        (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 || (_document$activeEleme2 = _document$activeEleme.blur) === null || _document$activeEleme2 === void 0 || _document$activeEleme2.call(_document$activeEleme);\n        handlesRef.current.focus(valueIndex);\n        onStartDrag(e, valueIndex, cloneNextValues);\n      }\n    }\n  };\n\n  // ============================ Click =============================\n  var onSliderMouseDown = function onSliderMouseDown(e) {\n    e.preventDefault();\n    var _containerRef$current = containerRef.current.getBoundingClientRect(),\n      width = _containerRef$current.width,\n      height = _containerRef$current.height,\n      left = _containerRef$current.left,\n      top = _containerRef$current.top,\n      bottom = _containerRef$current.bottom,\n      right = _containerRef$current.right;\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var percent;\n    switch (direction) {\n      case 'btt':\n        percent = (bottom - clientY) / height;\n        break;\n      case 'ttb':\n        percent = (clientY - top) / height;\n        break;\n      case 'rtl':\n        percent = (right - clientX) / width;\n        break;\n      default:\n        percent = (clientX - left) / width;\n    }\n    var nextValue = mergedMin + percent * (mergedMax - mergedMin);\n    changeToCloseValue(formatValue(nextValue), e);\n  };\n\n  // =========================== Keyboard ===========================\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    keyboardValue = _React$useState2[0],\n    setKeyboardValue = _React$useState2[1];\n  var onHandleOffsetChange = function onHandleOffsetChange(offset, valueIndex) {\n    if (!disabled) {\n      var next = offsetValues(rawValues, offset, valueIndex);\n      onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(rawValues));\n      triggerChange(next.values);\n      setKeyboardValue(next.value);\n    }\n  };\n  React.useEffect(function () {\n    if (keyboardValue !== null) {\n      var valueIndex = rawValues.indexOf(keyboardValue);\n      if (valueIndex >= 0) {\n        handlesRef.current.focus(valueIndex);\n      }\n    }\n    setKeyboardValue(null);\n  }, [keyboardValue]);\n\n  // ============================= Drag =============================\n  var mergedDraggableTrack = React.useMemo(function () {\n    if (draggableTrack && mergedStep === null) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`draggableTrack` is not supported when `step` is `null`.');\n      }\n      return false;\n    }\n    return draggableTrack;\n  }, [draggableTrack, mergedStep]);\n  var onStartMove = function onStartMove(e, valueIndex) {\n    onStartDrag(e, valueIndex);\n    onBeforeChange === null || onBeforeChange === void 0 || onBeforeChange(getTriggerValue(rawValuesRef.current));\n  };\n\n  // Auto focus for updated handle\n  var dragging = draggingIndex !== -1;\n  React.useEffect(function () {\n    if (!dragging) {\n      var valueIndex = rawValues.lastIndexOf(draggingValue);\n      handlesRef.current.focus(valueIndex);\n    }\n  }, [dragging]);\n\n  // =========================== Included ===========================\n  var sortedCacheValues = React.useMemo(function () {\n    return _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n  }, [cacheValues]);\n\n  // Provide a range values with included [min, max]\n  // Used for Track, Mark & Dot\n  var _React$useMemo = React.useMemo(function () {\n      if (!range) {\n        return [mergedMin, sortedCacheValues[0]];\n      }\n      return [sortedCacheValues[0], sortedCacheValues[sortedCacheValues.length - 1]];\n    }, [sortedCacheValues, range, mergedMin]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\n    includedStart = _React$useMemo2[0],\n    includedEnd = _React$useMemo2[1];\n\n  // ============================= Refs =============================\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus() {\n        handlesRef.current.focus(0);\n      },\n      blur: function blur() {\n        var _containerRef$current2;\n        var _document = document,\n          activeElement = _document.activeElement;\n        if ((_containerRef$current2 = containerRef.current) !== null && _containerRef$current2 !== void 0 && _containerRef$current2.contains(activeElement)) {\n          activeElement === null || activeElement === void 0 || activeElement.blur();\n        }\n      }\n    };\n  });\n\n  // ========================== Auto Focus ==========================\n  React.useEffect(function () {\n    if (autoFocus) {\n      handlesRef.current.focus(0);\n    }\n  }, []);\n\n  // =========================== Context ============================\n  var context = React.useMemo(function () {\n    return {\n      min: mergedMin,\n      max: mergedMax,\n      direction: direction,\n      disabled: disabled,\n      keyboard: keyboard,\n      step: mergedStep,\n      included: included,\n      includedStart: includedStart,\n      includedEnd: includedEnd,\n      range: range,\n      tabIndex: tabIndex,\n      ariaLabelForHandle: ariaLabelForHandle,\n      ariaLabelledByForHandle: ariaLabelledByForHandle,\n      ariaValueTextFormatterForHandle: ariaValueTextFormatterForHandle,\n      styles: styles || {},\n      classNames: classNames || {}\n    };\n  }, [mergedMin, mergedMax, direction, disabled, keyboard, mergedStep, included, includedStart, includedEnd, range, tabIndex, ariaLabelForHandle, ariaLabelledByForHandle, ariaValueTextFormatterForHandle, styles, classNames]);\n\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(SliderContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: cls(prefixCls, className, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-disabled\"), disabled), \"\".concat(prefixCls, \"-vertical\"), vertical), \"\".concat(prefixCls, \"-horizontal\"), !vertical), \"\".concat(prefixCls, \"-with-marks\"), markList.length)),\n    style: style,\n    onMouseDown: onSliderMouseDown\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cls(\"\".concat(prefixCls, \"-rail\"), classNames === null || classNames === void 0 ? void 0 : classNames.rail),\n    style: _objectSpread(_objectSpread({}, railStyle), styles === null || styles === void 0 ? void 0 : styles.rail)\n  }), /*#__PURE__*/React.createElement(Tracks, {\n    prefixCls: prefixCls,\n    style: trackStyle,\n    values: sortedCacheValues,\n    startPoint: startPoint,\n    onStartMove: mergedDraggableTrack ? onStartMove : undefined\n  }), /*#__PURE__*/React.createElement(Steps, {\n    prefixCls: prefixCls,\n    marks: markList,\n    dots: dots,\n    style: dotStyle,\n    activeStyle: activeDotStyle\n  }), /*#__PURE__*/React.createElement(Handles, {\n    ref: handlesRef,\n    prefixCls: prefixCls,\n    style: handleStyle,\n    values: cacheValues,\n    draggingIndex: draggingIndex,\n    onStartMove: onStartMove,\n    onOffsetChange: onHandleOffsetChange,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    handleRender: handleRender,\n    activeHandleRender: activeHandleRender,\n    onChangeComplete: finishChange\n  }), /*#__PURE__*/React.createElement(Marks, {\n    prefixCls: prefixCls,\n    marks: markList,\n    onClick: changeToCloseValue\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Slider.displayName = 'Slider';\n}\nexport default Slider;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\n\n/** Format the value in the range of [min, max] */\n\n/** Format value align with step */\n\n/** Format value align with step & marks */\n\nexport default function useOffset(min, max, step, markList, allowCross, pushable) {\n  var formatRangeValue = React.useCallback(function (val) {\n    return Math.max(min, Math.min(max, val));\n  }, [min, max]);\n  var formatStepValue = React.useCallback(function (val) {\n    if (step !== null) {\n      var stepValue = min + Math.round((formatRangeValue(val) - min) / step) * step;\n\n      // Cut number in case to be like 0.30000000000000004\n      var getDecimal = function getDecimal(num) {\n        return (String(num).split('.')[1] || '').length;\n      };\n      var maxDecimal = Math.max(getDecimal(step), getDecimal(max), getDecimal(min));\n      var fixedValue = Number(stepValue.toFixed(maxDecimal));\n      return min <= fixedValue && fixedValue <= max ? fixedValue : null;\n    }\n    return null;\n  }, [step, min, max, formatRangeValue]);\n  var formatValue = React.useCallback(function (val) {\n    var formatNextValue = formatRangeValue(val);\n\n    // List align values\n    var alignValues = markList.map(function (mark) {\n      return mark.value;\n    });\n    if (step !== null) {\n      alignValues.push(formatStepValue(val));\n    }\n\n    // min & max\n    alignValues.push(min, max);\n\n    // Align with marks\n    var closeValue = alignValues[0];\n    var closeDist = max - min;\n    alignValues.forEach(function (alignValue) {\n      var dist = Math.abs(formatNextValue - alignValue);\n      if (dist <= closeDist) {\n        closeValue = alignValue;\n        closeDist = dist;\n      }\n    });\n    return closeValue;\n  }, [min, max, markList, step, formatRangeValue, formatStepValue]);\n\n  // ========================== Offset ==========================\n  // Single Value\n  var offsetValue = function offsetValue(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    if (typeof offset === 'number') {\n      var nextValue;\n      var originValue = values[valueIndex];\n\n      // Only used for `dist` mode\n      var targetDistValue = originValue + offset;\n\n      // Compare next step value & mark value which is best match\n      var potentialValues = [];\n      markList.forEach(function (mark) {\n        potentialValues.push(mark.value);\n      });\n\n      // Min & Max\n      potentialValues.push(min, max);\n\n      // In case origin value is align with mark but not with step\n      potentialValues.push(formatStepValue(originValue));\n\n      // Put offset step value also\n      var sign = offset > 0 ? 1 : -1;\n      if (mode === 'unit') {\n        potentialValues.push(formatStepValue(originValue + sign * step));\n      } else {\n        potentialValues.push(formatStepValue(targetDistValue));\n      }\n\n      // Find close one\n      potentialValues = potentialValues.filter(function (val) {\n        return val !== null;\n      })\n      // Remove reverse value\n      .filter(function (val) {\n        return offset < 0 ? val <= originValue : val >= originValue;\n      });\n      if (mode === 'unit') {\n        // `unit` mode can not contain itself\n        potentialValues = potentialValues.filter(function (val) {\n          return val !== originValue;\n        });\n      }\n      var compareValue = mode === 'unit' ? originValue : targetDistValue;\n      nextValue = potentialValues[0];\n      var valueDist = Math.abs(nextValue - compareValue);\n      potentialValues.forEach(function (potentialValue) {\n        var dist = Math.abs(potentialValue - compareValue);\n        if (dist < valueDist) {\n          nextValue = potentialValue;\n          valueDist = dist;\n        }\n      });\n\n      // Out of range will back to range\n      if (nextValue === undefined) {\n        return offset < 0 ? min : max;\n      }\n\n      // `dist` mode\n      if (mode === 'dist') {\n        return nextValue;\n      }\n\n      // `unit` mode may need another round\n      if (Math.abs(offset) > 1) {\n        var cloneValues = _toConsumableArray(values);\n        cloneValues[valueIndex] = nextValue;\n        return offsetValue(cloneValues, offset - sign, valueIndex, mode);\n      }\n      return nextValue;\n    } else if (offset === 'min') {\n      return min;\n    } else if (offset === 'max') {\n      return max;\n    }\n  };\n\n  /** Same as `offsetValue` but return `changed` mark to tell value changed */\n  var offsetChangedValue = function offsetChangedValue(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    var originValue = values[valueIndex];\n    var nextValue = offsetValue(values, offset, valueIndex, mode);\n    return {\n      value: nextValue,\n      changed: nextValue !== originValue\n    };\n  };\n  var needPush = function needPush(dist) {\n    return pushable === null && dist === 0 || typeof pushable === 'number' && dist < pushable;\n  };\n\n  // Values\n  var offsetValues = function offsetValues(values, offset, valueIndex) {\n    var mode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'unit';\n    var nextValues = values.map(formatValue);\n    var originValue = nextValues[valueIndex];\n    var nextValue = offsetValue(nextValues, offset, valueIndex, mode);\n    nextValues[valueIndex] = nextValue;\n    if (allowCross === false) {\n      // >>>>> Allow Cross\n      var pushNum = pushable || 0;\n\n      // ============ AllowCross ===============\n      if (valueIndex > 0 && nextValues[valueIndex - 1] !== originValue) {\n        nextValues[valueIndex] = Math.max(nextValues[valueIndex], nextValues[valueIndex - 1] + pushNum);\n      }\n      if (valueIndex < nextValues.length - 1 && nextValues[valueIndex + 1] !== originValue) {\n        nextValues[valueIndex] = Math.min(nextValues[valueIndex], nextValues[valueIndex + 1] - pushNum);\n      }\n    } else if (typeof pushable === 'number' || pushable === null) {\n      // >>>>> Pushable\n      // =============== Push ==================\n\n      // >>>>>> Basic push\n      // End values\n      for (var i = valueIndex + 1; i < nextValues.length; i += 1) {\n        var changed = true;\n        while (needPush(nextValues[i] - nextValues[i - 1]) && changed) {\n          var _offsetChangedValue = offsetChangedValue(nextValues, 1, i);\n          nextValues[i] = _offsetChangedValue.value;\n          changed = _offsetChangedValue.changed;\n        }\n      }\n\n      // Start values\n      for (var _i = valueIndex; _i > 0; _i -= 1) {\n        var _changed = true;\n        while (needPush(nextValues[_i] - nextValues[_i - 1]) && _changed) {\n          var _offsetChangedValue2 = offsetChangedValue(nextValues, -1, _i - 1);\n          nextValues[_i - 1] = _offsetChangedValue2.value;\n          _changed = _offsetChangedValue2.changed;\n        }\n      }\n\n      // >>>>> Revert back to safe push range\n      // End to Start\n      for (var _i2 = nextValues.length - 1; _i2 > 0; _i2 -= 1) {\n        var _changed2 = true;\n        while (needPush(nextValues[_i2] - nextValues[_i2 - 1]) && _changed2) {\n          var _offsetChangedValue3 = offsetChangedValue(nextValues, -1, _i2 - 1);\n          nextValues[_i2 - 1] = _offsetChangedValue3.value;\n          _changed2 = _offsetChangedValue3.changed;\n        }\n      }\n\n      // Start to End\n      for (var _i3 = 0; _i3 < nextValues.length - 1; _i3 += 1) {\n        var _changed3 = true;\n        while (needPush(nextValues[_i3 + 1] - nextValues[_i3]) && _changed3) {\n          var _offsetChangedValue4 = offsetChangedValue(nextValues, 1, _i3 + 1);\n          nextValues[_i3 + 1] = _offsetChangedValue4.value;\n          _changed3 = _offsetChangedValue4.changed;\n        }\n      }\n    }\n    return {\n      value: nextValues[valueIndex],\n      values: nextValues\n    };\n  };\n  return [formatValue, offsetValues];\n}","import Slider from \"./Slider\";\nexport default Slider;","\"use client\";\n\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport raf from \"rc-util/es/raf\";\nimport { composeRef } from \"rc-util/es/ref\";\nimport Tooltip from '../tooltip';\nconst SliderTooltip = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    open\n  } = props;\n  const innerRef = useRef(null);\n  const rafRef = useRef(null);\n  function cancelKeepAlign() {\n    raf.cancel(rafRef.current);\n    rafRef.current = null;\n  }\n  function keepAlign() {\n    rafRef.current = raf(() => {\n      var _a;\n      (_a = innerRef.current) === null || _a === void 0 ? void 0 : _a.forceAlign();\n      rafRef.current = null;\n    });\n  }\n  React.useEffect(() => {\n    if (open) {\n      keepAlign();\n    } else {\n      cancelKeepAlign();\n    }\n    return cancelKeepAlign;\n  }, [open, props.title]);\n  return /*#__PURE__*/React.createElement(Tooltip, Object.assign({\n    ref: composeRef(innerRef, ref)\n  }, props));\n});\nif (process.env.NODE_ENV !== 'production') {\n  SliderTooltip.displayName = 'SliderTooltip';\n}\nexport default SliderTooltip;","import { unit } from '@ant-design/cssinjs';\nimport { TinyColor } from '@ctrl/tinycolor';\nimport { resetComponent } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\n// =============================== Base ===============================\nconst genBaseStyle = token => {\n  const {\n    componentCls,\n    antCls,\n    controlSize,\n    dotSize,\n    marginFull,\n    marginPart,\n    colorFillContentHover,\n    handleColorDisabled,\n    calc\n  } = token;\n  return {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      position: 'relative',\n      height: controlSize,\n      margin: `${unit(marginPart)} ${unit(marginFull)}`,\n      padding: 0,\n      cursor: 'pointer',\n      touchAction: 'none',\n      [`&-vertical`]: {\n        margin: `${unit(marginFull)} ${unit(marginPart)}`\n      },\n      [`${componentCls}-rail`]: {\n        position: 'absolute',\n        backgroundColor: token.railBg,\n        borderRadius: token.borderRadiusXS,\n        transition: `background-color ${token.motionDurationMid}`\n      },\n      [`${componentCls}-track,${componentCls}-tracks`]: {\n        position: 'absolute',\n        transition: `background-color ${token.motionDurationMid}`\n      },\n      [`${componentCls}-track`]: {\n        backgroundColor: token.trackBg,\n        borderRadius: token.borderRadiusXS\n      },\n      [`${componentCls}-track-draggable`]: {\n        boxSizing: 'content-box',\n        backgroundClip: 'content-box',\n        border: 'solid rgba(0,0,0,0)'\n      },\n      '&:hover': {\n        [`${componentCls}-rail`]: {\n          backgroundColor: token.railHoverBg\n        },\n        [`${componentCls}-track`]: {\n          backgroundColor: token.trackHoverBg\n        },\n        [`${componentCls}-dot`]: {\n          borderColor: colorFillContentHover\n        },\n        [`${componentCls}-handle::after`]: {\n          boxShadow: `0 0 0 ${unit(token.handleLineWidth)} ${token.colorPrimaryBorderHover}`\n        },\n        [`${componentCls}-dot-active`]: {\n          borderColor: token.dotActiveBorderColor\n        }\n      },\n      [`${componentCls}-handle`]: {\n        position: 'absolute',\n        width: token.handleSize,\n        height: token.handleSize,\n        outline: 'none',\n        // 扩大选区\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          insetInlineStart: calc(token.handleLineWidth).mul(-1).equal(),\n          insetBlockStart: calc(token.handleLineWidth).mul(-1).equal(),\n          width: calc(token.handleSize).add(calc(token.handleLineWidth).mul(2)).equal(),\n          height: calc(token.handleSize).add(calc(token.handleLineWidth).mul(2)).equal(),\n          backgroundColor: 'transparent'\n        },\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          insetBlockStart: 0,\n          insetInlineStart: 0,\n          width: token.handleSize,\n          height: token.handleSize,\n          backgroundColor: token.colorBgElevated,\n          boxShadow: `0 0 0 ${unit(token.handleLineWidth)} ${token.handleColor}`,\n          borderRadius: '50%',\n          cursor: 'pointer',\n          transition: `\n            inset-inline-start ${token.motionDurationMid},\n            inset-block-start ${token.motionDurationMid},\n            width ${token.motionDurationMid},\n            height ${token.motionDurationMid},\n            box-shadow ${token.motionDurationMid}\n          `\n        },\n        '&:hover, &:active, &:focus': {\n          '&::before': {\n            // -(\n            //   (token.handleSizeHover - token.handleSize) / 2 +\n            //   token.handleLineWidthHover\n            // ),\n            insetInlineStart: calc(token.handleSizeHover).sub(token.handleSize).div(2).add(token.handleLineWidthHover).mul(-1).equal(),\n            insetBlockStart: calc(token.handleSizeHover).sub(token.handleSize).div(2).add(token.handleLineWidthHover).mul(-1).equal(),\n            width: calc(token.handleSizeHover).add(calc(token.handleLineWidthHover).mul(2)).equal(),\n            height: calc(token.handleSizeHover).add(calc(token.handleLineWidthHover).mul(2)).equal()\n          },\n          '&::after': {\n            boxShadow: `0 0 0 ${unit(token.handleLineWidthHover)} ${token.handleActiveColor}`,\n            width: token.handleSizeHover,\n            height: token.handleSizeHover,\n            insetInlineStart: token.calc(token.handleSize).sub(token.handleSizeHover).div(2).equal(),\n            insetBlockStart: token.calc(token.handleSize).sub(token.handleSizeHover).div(2).equal()\n          }\n        }\n      },\n      [`&-lock ${componentCls}-handle`]: {\n        [`&::before, &::after`]: {\n          transition: 'none'\n        }\n      },\n      [`${componentCls}-mark`]: {\n        position: 'absolute',\n        fontSize: token.fontSize\n      },\n      [`${componentCls}-mark-text`]: {\n        position: 'absolute',\n        display: 'inline-block',\n        color: token.colorTextDescription,\n        textAlign: 'center',\n        wordBreak: 'keep-all',\n        cursor: 'pointer',\n        userSelect: 'none',\n        '&-active': {\n          color: token.colorText\n        }\n      },\n      [`${componentCls}-step`]: {\n        position: 'absolute',\n        background: 'transparent',\n        pointerEvents: 'none'\n      },\n      [`${componentCls}-dot`]: {\n        position: 'absolute',\n        width: dotSize,\n        height: dotSize,\n        backgroundColor: token.colorBgElevated,\n        border: `${unit(token.handleLineWidth)} solid ${token.dotBorderColor}`,\n        borderRadius: '50%',\n        cursor: 'pointer',\n        transition: `border-color ${token.motionDurationSlow}`,\n        pointerEvents: 'auto',\n        '&-active': {\n          borderColor: token.dotActiveBorderColor\n        }\n      },\n      [`&${componentCls}-disabled`]: {\n        cursor: 'not-allowed',\n        [`${componentCls}-rail`]: {\n          backgroundColor: `${token.railBg} !important`\n        },\n        [`${componentCls}-track`]: {\n          backgroundColor: `${token.trackBgDisabled} !important`\n        },\n        [`\n          ${componentCls}-dot\n        `]: {\n          backgroundColor: token.colorBgElevated,\n          borderColor: token.trackBgDisabled,\n          boxShadow: 'none',\n          cursor: 'not-allowed'\n        },\n        [`${componentCls}-handle::after`]: {\n          backgroundColor: token.colorBgElevated,\n          cursor: 'not-allowed',\n          width: token.handleSize,\n          height: token.handleSize,\n          boxShadow: `0 0 0 ${unit(token.handleLineWidth)} ${handleColorDisabled}`,\n          insetInlineStart: 0,\n          insetBlockStart: 0\n        },\n        [`\n          ${componentCls}-mark-text,\n          ${componentCls}-dot\n        `]: {\n          cursor: `not-allowed !important`\n        }\n      },\n      [`&-tooltip ${antCls}-tooltip-inner`]: {\n        minWidth: 'unset'\n      }\n    })\n  };\n};\n// ============================ Horizontal ============================\nconst genDirectionStyle = (token, horizontal) => {\n  const {\n    componentCls,\n    railSize,\n    handleSize,\n    dotSize,\n    marginFull,\n    calc\n  } = token;\n  const railPadding = horizontal ? 'paddingBlock' : 'paddingInline';\n  const full = horizontal ? 'width' : 'height';\n  const part = horizontal ? 'height' : 'width';\n  const handlePos = horizontal ? 'insetBlockStart' : 'insetInlineStart';\n  const markInset = horizontal ? 'top' : 'insetInlineStart';\n  const handlePosSize = calc(railSize).mul(3).sub(handleSize).div(2).equal();\n  const draggableBorderSize = calc(handleSize).sub(railSize).div(2).equal();\n  const draggableBorder = horizontal ? {\n    borderWidth: `${unit(draggableBorderSize)} 0`,\n    transform: `translateY(${unit(calc(draggableBorderSize).mul(-1).equal())})`\n  } : {\n    borderWidth: `0 ${unit(draggableBorderSize)}`,\n    transform: `translateX(${unit(token.calc(draggableBorderSize).mul(-1).equal())})`\n  };\n  return {\n    [railPadding]: railSize,\n    [part]: calc(railSize).mul(3).equal(),\n    [`${componentCls}-rail`]: {\n      [full]: '100%',\n      [part]: railSize\n    },\n    [`${componentCls}-track,${componentCls}-tracks`]: {\n      [part]: railSize\n    },\n    [`${componentCls}-track-draggable`]: Object.assign({}, draggableBorder),\n    [`${componentCls}-handle`]: {\n      [handlePos]: handlePosSize\n    },\n    [`${componentCls}-mark`]: {\n      // Reset all\n      insetInlineStart: 0,\n      top: 0,\n      // https://github.com/ant-design/ant-design/issues/43731\n      [markInset]: calc(railSize).mul(3).add(horizontal ? 0 : marginFull).equal(),\n      [full]: '100%'\n    },\n    [`${componentCls}-step`]: {\n      // Reset all\n      insetInlineStart: 0,\n      top: 0,\n      [markInset]: railSize,\n      [full]: '100%',\n      [part]: railSize\n    },\n    [`${componentCls}-dot`]: {\n      position: 'absolute',\n      [handlePos]: calc(railSize).sub(dotSize).div(2).equal()\n    }\n  };\n};\n// ============================ Horizontal ============================\nconst genHorizontalStyle = token => {\n  const {\n    componentCls,\n    marginPartWithMark\n  } = token;\n  return {\n    [`${componentCls}-horizontal`]: Object.assign(Object.assign({}, genDirectionStyle(token, true)), {\n      [`&${componentCls}-with-marks`]: {\n        marginBottom: marginPartWithMark\n      }\n    })\n  };\n};\n// ============================= Vertical =============================\nconst genVerticalStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return {\n    [`${componentCls}-vertical`]: Object.assign(Object.assign({}, genDirectionStyle(token, false)), {\n      height: '100%'\n    })\n  };\n};\n// ============================== Export ==============================\nexport const prepareComponentToken = token => {\n  // Handle line width is always width-er 1px\n  const increaseHandleWidth = 1;\n  const controlSize = token.controlHeightLG / 4;\n  const controlSizeHover = token.controlHeightSM / 2;\n  const handleLineWidth = token.lineWidth + increaseHandleWidth;\n  const handleLineWidthHover = token.lineWidth + increaseHandleWidth * 3;\n  return {\n    controlSize,\n    railSize: 4,\n    handleSize: controlSize,\n    handleSizeHover: controlSizeHover,\n    dotSize: 8,\n    handleLineWidth,\n    handleLineWidthHover,\n    railBg: token.colorFillTertiary,\n    railHoverBg: token.colorFillSecondary,\n    trackBg: token.colorPrimaryBorder,\n    trackHoverBg: token.colorPrimaryBorderHover,\n    handleColor: token.colorPrimaryBorder,\n    handleActiveColor: token.colorPrimary,\n    handleColorDisabled: new TinyColor(token.colorTextDisabled).onBackground(token.colorBgContainer).toHexShortString(),\n    dotBorderColor: token.colorBorderSecondary,\n    dotActiveBorderColor: token.colorPrimaryBorder,\n    trackBgDisabled: token.colorBgContainerDisabled\n  };\n};\nexport default genStyleHooks('Slider', token => {\n  const sliderToken = mergeToken(token, {\n    marginPart: token.calc(token.controlHeight).sub(token.controlSize).div(2).equal(),\n    marginFull: token.calc(token.controlSize).div(2).equal(),\n    marginPartWithMark: token.calc(token.controlHeightLG).sub(token.controlSize).equal()\n  });\n  return [genBaseStyle(sliderToken), genHorizontalStyle(sliderToken), genVerticalStyle(sliderToken)];\n}, prepareComponentToken);","import * as React from 'react';\nimport raf from \"rc-util/es/raf\";\nexport default function useRafLock() {\n  const [state, setState] = React.useState(false);\n  const rafRef = React.useRef();\n  const cleanup = () => {\n    raf.cancel(rafRef.current);\n  };\n  const setDelayState = nextState => {\n    cleanup();\n    if (nextState) {\n      setState(nextState);\n    } else {\n      rafRef.current = raf(() => {\n        setState(nextState);\n      });\n    }\n  };\n  React.useEffect(() => cleanup, []);\n  return [state, setDelayState];\n}","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React from 'react';\nimport classNames from 'classnames';\nimport RcSlider from 'rc-slider';\nimport raf from \"rc-util/es/raf\";\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport DisabledContext from '../config-provider/DisabledContext';\nimport SliderTooltip from './SliderTooltip';\nimport useStyle from './style';\nimport useRafLock from './useRafLock';\nfunction getTipFormatter(tipFormatter, legacyTipFormatter) {\n  if (tipFormatter || tipFormatter === null) {\n    return tipFormatter;\n  }\n  if (legacyTipFormatter || legacyTipFormatter === null) {\n    return legacyTipFormatter;\n  }\n  return val => typeof val === 'number' ? val.toString() : '';\n}\nconst Slider = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      range,\n      className,\n      rootClassName,\n      style,\n      disabled,\n      // Deprecated Props\n      tooltipPrefixCls: legacyTooltipPrefixCls,\n      tipFormatter: legacyTipFormatter,\n      tooltipVisible: legacyTooltipVisible,\n      getTooltipPopupContainer: legacyGetTooltipPopupContainer,\n      tooltipPlacement: legacyTooltipPlacement,\n      tooltip = {},\n      onChangeComplete\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"range\", \"className\", \"rootClassName\", \"style\", \"disabled\", \"tooltipPrefixCls\", \"tipFormatter\", \"tooltipVisible\", \"getTooltipPopupContainer\", \"tooltipPlacement\", \"tooltip\", \"onChangeComplete\"]);\n  const {\n    vertical\n  } = props;\n  const {\n    direction,\n    slider,\n    getPrefixCls,\n    getPopupContainer\n  } = React.useContext(ConfigContext);\n  const contextDisabled = React.useContext(DisabledContext);\n  const mergedDisabled = disabled !== null && disabled !== void 0 ? disabled : contextDisabled;\n  // =============================== Open ===============================\n  const [hoverOpen, setHoverOpen] = useRafLock();\n  const [focusOpen, setFocusOpen] = useRafLock();\n  const tooltipProps = Object.assign({}, tooltip);\n  const {\n    open: tooltipOpen,\n    placement: tooltipPlacement,\n    getPopupContainer: getTooltipPopupContainer,\n    prefixCls: customizeTooltipPrefixCls,\n    formatter: tipFormatter\n  } = tooltipProps;\n  const lockOpen = tooltipOpen !== null && tooltipOpen !== void 0 ? tooltipOpen : legacyTooltipVisible;\n  const activeOpen = (hoverOpen || focusOpen) && lockOpen !== false;\n  const mergedTipFormatter = getTipFormatter(tipFormatter, legacyTipFormatter);\n  // ============================= Change ==============================\n  const [dragging, setDragging] = useRafLock();\n  const onInternalChangeComplete = nextValues => {\n    onChangeComplete === null || onChangeComplete === void 0 ? void 0 : onChangeComplete(nextValues);\n    setDragging(false);\n  };\n  // ============================ Placement ============================\n  const getTooltipPlacement = (placement, vert) => {\n    if (placement) {\n      return placement;\n    }\n    if (!vert) {\n      return 'top';\n    }\n    return direction === 'rtl' ? 'left' : 'right';\n  };\n  // ============================== Style ===============================\n  const prefixCls = getPrefixCls('slider', customizePrefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls);\n  const cls = classNames(className, slider === null || slider === void 0 ? void 0 : slider.className, rootClassName, {\n    [`${prefixCls}-rtl`]: direction === 'rtl',\n    [`${prefixCls}-lock`]: dragging\n  }, hashId, cssVarCls);\n  // make reverse default on rtl direction\n  if (direction === 'rtl' && !restProps.vertical) {\n    restProps.reverse = !restProps.reverse;\n  }\n  // ============================= Multiple =============================\n  // Range config\n  const [mergedRange, draggableTrack] = React.useMemo(() => {\n    if (!range) {\n      return [false];\n    }\n    return typeof range === 'object' ? [true, range.draggableTrack] : [true, false];\n  }, [range]);\n  // ============================= Warning ==============================\n  // Warning for deprecated usage\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Slider');\n    [['tooltipPrefixCls', 'prefixCls'], ['getTooltipPopupContainer', 'getPopupContainer'], ['tipFormatter', 'formatter'], ['tooltipPlacement', 'placement'], ['tooltipVisible', 'open']].forEach(_ref => {\n      let [deprecatedName, newName] = _ref;\n      warning.deprecated(!(deprecatedName in props), deprecatedName, `tooltip.${newName}`);\n    });\n  }\n  // ============================== Handle ==============================\n  React.useEffect(() => {\n    const onMouseUp = () => {\n      // Delay for 1 frame to make the click to enable hide tooltip\n      // even when the handle is focused\n      raf(() => {\n        setFocusOpen(false);\n      }, 1);\n    };\n    document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n  const useActiveTooltipHandle = mergedRange && !lockOpen;\n  const handleRender = (node, info) => {\n    const {\n      index\n    } = info;\n    const nodeProps = node.props;\n    const passedProps = Object.assign(Object.assign({}, nodeProps), {\n      onMouseEnter: e => {\n        var _a;\n        setHoverOpen(true);\n        (_a = nodeProps.onMouseEnter) === null || _a === void 0 ? void 0 : _a.call(nodeProps, e);\n      },\n      onMouseLeave: e => {\n        var _a;\n        setHoverOpen(false);\n        (_a = nodeProps.onMouseLeave) === null || _a === void 0 ? void 0 : _a.call(nodeProps, e);\n      },\n      onMouseDown: e => {\n        var _a;\n        setFocusOpen(true);\n        setDragging(true);\n        (_a = nodeProps.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(nodeProps, e);\n      },\n      onFocus: e => {\n        var _a, _b;\n        setFocusOpen(true);\n        (_a = restProps.onFocus) === null || _a === void 0 ? void 0 : _a.call(restProps, e);\n        (_b = nodeProps.onFocus) === null || _b === void 0 ? void 0 : _b.call(nodeProps, e);\n      },\n      onBlur: e => {\n        var _a, _b;\n        setFocusOpen(false);\n        (_a = restProps.onBlur) === null || _a === void 0 ? void 0 : _a.call(restProps, e);\n        (_b = nodeProps.onBlur) === null || _b === void 0 ? void 0 : _b.call(nodeProps, e);\n      }\n    });\n    const cloneNode = /*#__PURE__*/React.cloneElement(node, passedProps);\n    const open = (!!lockOpen || activeOpen) && mergedTipFormatter !== null;\n    // Wrap on handle with Tooltip when is single mode or multiple with all show tooltip\n    if (!useActiveTooltipHandle) {\n      return /*#__PURE__*/React.createElement(SliderTooltip, Object.assign({}, tooltipProps, {\n        prefixCls: getPrefixCls('tooltip', customizeTooltipPrefixCls !== null && customizeTooltipPrefixCls !== void 0 ? customizeTooltipPrefixCls : legacyTooltipPrefixCls),\n        title: mergedTipFormatter ? mergedTipFormatter(info.value) : '',\n        open: open,\n        placement: getTooltipPlacement(tooltipPlacement !== null && tooltipPlacement !== void 0 ? tooltipPlacement : legacyTooltipPlacement, vertical),\n        key: index,\n        overlayClassName: `${prefixCls}-tooltip`,\n        getPopupContainer: getTooltipPopupContainer || legacyGetTooltipPopupContainer || getPopupContainer\n      }), cloneNode);\n    }\n    return cloneNode;\n  };\n  // ========================== Active Handle ===========================\n  const activeHandleRender = useActiveTooltipHandle ? (handle, info) => {\n    const cloneNode = /*#__PURE__*/React.cloneElement(handle, {\n      style: Object.assign(Object.assign({}, handle.props.style), {\n        visibility: 'hidden'\n      })\n    });\n    return /*#__PURE__*/React.createElement(SliderTooltip, Object.assign({}, tooltipProps, {\n      prefixCls: getPrefixCls('tooltip', customizeTooltipPrefixCls !== null && customizeTooltipPrefixCls !== void 0 ? customizeTooltipPrefixCls : legacyTooltipPrefixCls),\n      title: mergedTipFormatter ? mergedTipFormatter(info.value) : '',\n      open: mergedTipFormatter !== null && activeOpen,\n      placement: getTooltipPlacement(tooltipPlacement !== null && tooltipPlacement !== void 0 ? tooltipPlacement : legacyTooltipPlacement, vertical),\n      key: \"tooltip\",\n      overlayClassName: `${prefixCls}-tooltip`,\n      getPopupContainer: getTooltipPopupContainer || legacyGetTooltipPopupContainer || getPopupContainer\n    }), cloneNode);\n  } : undefined;\n  // ============================== Render ==============================\n  const mergedStyle = Object.assign(Object.assign({}, slider === null || slider === void 0 ? void 0 : slider.style), style);\n  return wrapCSSVar(\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(RcSlider, Object.assign({}, restProps, {\n    step: restProps.step,\n    range: mergedRange,\n    draggableTrack: draggableTrack,\n    className: cls,\n    style: mergedStyle,\n    disabled: mergedDisabled,\n    ref: ref,\n    prefixCls: prefixCls,\n    handleRender: handleRender,\n    activeHandleRender: activeHandleRender,\n    onChangeComplete: onInternalChangeComplete\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Slider.displayName = 'Slider';\n}\nexport default Slider;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SliderSingleProps, SliderRangeProps } from 'antd-v5/lib/slider';\nimport { Slider as AntdSlider } from 'antd-v5';\n\nexport type { SliderSingleProps, SliderRangeProps };\n\nexport default function Slider(props: SliderSingleProps | SliderRangeProps) {\n  return <AntdSlider {...props} />;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { Select, Row, Col } from 'src/components';\nimport { t, styled } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport BoundsControl from '../BoundsControl';\nimport CheckboxControl from '../CheckboxControl';\nimport ControlPopover from '../ControlPopover/ControlPopover';\n\nconst propTypes = {\n  label: PropTypes.string,\n  tooltip: PropTypes.string,\n  colType: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  timeLag: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  timeRatio: PropTypes.string,\n  comparisonType: PropTypes.string,\n  showYAxis: PropTypes.bool,\n  yAxisBounds: PropTypes.array,\n  bounds: PropTypes.array,\n  d3format: PropTypes.string,\n  dateFormat: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nconst defaultProps = {\n  label: t('Time series columns'),\n  tooltip: '',\n  colType: '',\n  width: '',\n  height: '',\n  timeLag: '',\n  timeRatio: '',\n  comparisonType: '',\n  showYAxis: false,\n  yAxisBounds: [null, null],\n  bounds: [null, null],\n  d3format: '',\n  dateFormat: '',\n};\n\nconst comparisonTypeOptions = [\n  { value: 'value', label: t('Actual value'), key: 'value' },\n  { value: 'diff', label: t('Difference'), key: 'diff' },\n  { value: 'perc', label: t('Percentage'), key: 'perc' },\n  { value: 'perc_change', label: t('Percentage change'), key: 'perc_change' },\n];\n\nconst colTypeOptions = [\n  { value: 'time', label: t('Time comparison'), key: 'time' },\n  { value: 'contrib', label: t('Contribution'), key: 'contrib' },\n  { value: 'spark', label: t('Sparkline'), key: 'spark' },\n  { value: 'avg', label: t('Period average'), key: 'avg' },\n];\n\nconst StyledRow = styled(Row)`\n  margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledCol = styled(Col)`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledTooltip = styled(InfoTooltipWithTrigger)`\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n  color: ${({ theme }) => theme.colors.grayscale.light1};\n`;\n\nconst ButtonBar = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 5}px;\n  display: flex;\n  justify-content: center;\n`;\n\nexport default class TimeSeriesColumnControl extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSave = this.onSave.bind(this);\n    this.onClose = this.onClose.bind(this);\n    this.resetState = this.resetState.bind(this);\n    this.initialState = this.initialState.bind(this);\n    this.onPopoverVisibleChange = this.onPopoverVisibleChange.bind(this);\n\n    this.state = this.initialState();\n  }\n\n  initialState() {\n    return {\n      label: this.props.label,\n      tooltip: this.props.tooltip,\n      colType: this.props.colType,\n      width: this.props.width,\n      height: this.props.height,\n      timeLag: this.props.timeLag || 0,\n      timeRatio: this.props.timeRatio,\n      comparisonType: this.props.comparisonType,\n      showYAxis: this.props.showYAxis,\n      yAxisBounds: this.props.yAxisBounds,\n      bounds: this.props.bounds,\n      d3format: this.props.d3format,\n      dateFormat: this.props.dateFormat,\n      popoverVisible: false,\n    };\n  }\n\n  resetState() {\n    const initialState = this.initialState();\n    this.setState({ ...initialState });\n  }\n\n  onSave() {\n    this.props.onChange(this.state);\n    this.setState({ popoverVisible: false });\n  }\n\n  onClose() {\n    this.resetState();\n  }\n\n  onSelectChange(attr, opt) {\n    this.setState({ [attr]: opt });\n  }\n\n  onTextInputChange(attr, event) {\n    this.setState({ [attr]: event.target.value });\n  }\n\n  onCheckboxChange(attr, value) {\n    this.setState({ [attr]: value });\n  }\n\n  onBoundsChange(bounds) {\n    this.setState({ bounds });\n  }\n\n  onPopoverVisibleChange(popoverVisible) {\n    if (popoverVisible) {\n      this.setState({ popoverVisible });\n    } else {\n      this.resetState();\n    }\n  }\n\n  onYAxisBoundsChange(yAxisBounds) {\n    this.setState({ yAxisBounds });\n  }\n\n  textSummary() {\n    return `${this.props.label}`;\n  }\n\n  formRow(label, tooltip, ttLabel, control) {\n    return (\n      <StyledRow>\n        <StyledCol xs={24} md={11}>\n          {label}\n          <StyledTooltip placement=\"top\" tooltip={tooltip} label={ttLabel} />\n        </StyledCol>\n        <Col xs={24} md={13}>\n          {control}\n        </Col>\n      </StyledRow>\n    );\n  }\n\n  renderPopover() {\n    return (\n      <div id=\"ts-col-popo\" style={{ width: 320 }}>\n        {this.formRow(\n          t('Label'),\n          t('The column header label'),\n          'time-lag',\n          <Input\n            value={this.state.label}\n            onChange={this.onTextInputChange.bind(this, 'label')}\n            placeholder={t('Label')}\n          />,\n        )}\n        {this.formRow(\n          t('Tooltip'),\n          t('Column header tooltip'),\n          'col-tooltip',\n          <Input\n            value={this.state.tooltip}\n            onChange={this.onTextInputChange.bind(this, 'tooltip')}\n            placeholder={t('Tooltip')}\n          />,\n        )}\n        {this.formRow(\n          t('Type'),\n          t('Type of comparison, value difference or percentage'),\n          'col-type',\n          <Select\n            ariaLabel={t('Type')}\n            value={this.state.colType || undefined}\n            onChange={this.onSelectChange.bind(this, 'colType')}\n            options={colTypeOptions}\n          />,\n        )}\n        <hr />\n        {this.state.colType === 'spark' &&\n          this.formRow(\n            t('Width'),\n            t('Width of the sparkline'),\n            'spark-width',\n            <Input\n              value={this.state.width}\n              onChange={this.onTextInputChange.bind(this, 'width')}\n              placeholder={t('Width')}\n            />,\n          )}\n        {this.state.colType === 'spark' &&\n          this.formRow(\n            t('Height'),\n            t('Height of the sparkline'),\n            'spark-width',\n            <Input\n              value={this.state.height}\n              onChange={this.onTextInputChange.bind(this, 'height')}\n              placeholder={t('Height')}\n            />,\n          )}\n        {['time', 'avg'].indexOf(this.state.colType) >= 0 &&\n          this.formRow(\n            t('Time lag'),\n            t(\n              'Number of periods to compare against. You can use negative numbers to compare from the beginning of the time range.',\n            ),\n            'time-lag',\n            <Input\n              value={this.state.timeLag}\n              onChange={this.onTextInputChange.bind(this, 'timeLag')}\n              placeholder={t('Time Lag')}\n            />,\n          )}\n        {['spark'].indexOf(this.state.colType) >= 0 &&\n          this.formRow(\n            t('Time ratio'),\n            t('Number of periods to ratio against'),\n            'time-ratio',\n            <Input\n              value={this.state.timeRatio}\n              onChange={this.onTextInputChange.bind(this, 'timeRatio')}\n              placeholder={t('Time Ratio')}\n            />,\n          )}\n        {this.state.colType === 'time' &&\n          this.formRow(\n            t('Type'),\n            t('Type of comparison, value difference or percentage'),\n            'comp-type',\n            <Select\n              ariaLabel={t('Type')}\n              value={this.state.comparisonType || undefined}\n              onChange={this.onSelectChange.bind(this, 'comparisonType')}\n              options={comparisonTypeOptions}\n            />,\n          )}\n        {this.state.colType === 'spark' &&\n          this.formRow(\n            t('Show Y-axis'),\n            t(\n              'Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.',\n            ),\n            'show-y-axis-bounds',\n            <CheckboxControl\n              value={this.state.showYAxis}\n              onChange={this.onCheckboxChange.bind(this, 'showYAxis')}\n            />,\n          )}\n        {this.state.colType === 'spark' &&\n          this.formRow(\n            t('Y-axis bounds'),\n            t('Manually set min/max values for the y-axis.'),\n            'y-axis-bounds',\n            <BoundsControl\n              value={this.state.yAxisBounds}\n              onChange={this.onYAxisBoundsChange.bind(this)}\n            />,\n          )}\n        {this.state.colType !== 'spark' &&\n          this.formRow(\n            t('Color bounds'),\n            t(`Number bounds used for color encoding from red to blue.\n               Reverse the numbers for blue to red. To get pure red or blue,\n               you can enter either only min or max.`),\n            'bounds',\n            <BoundsControl\n              value={this.state.bounds}\n              onChange={this.onBoundsChange.bind(this)}\n            />,\n          )}\n        {this.formRow(\n          t('Number format'),\n          t('Optional d3 number format string'),\n          'd3-format',\n          <Input\n            value={this.state.d3format}\n            onChange={this.onTextInputChange.bind(this, 'd3format')}\n            placeholder={t('Number format string')}\n          />,\n        )}\n        {this.state.colType === 'spark' &&\n          this.formRow(\n            t('Date format'),\n            t('Optional d3 date format string'),\n            'date-format',\n            <Input\n              value={this.state.dateFormat}\n              onChange={this.onTextInputChange.bind(this, 'dateFormat')}\n              placeholder={t('Date format string')}\n            />,\n          )}\n        <ButtonBar>\n          <Button buttonSize=\"small\" onClick={this.onClose} cta>\n            {t('Close')}\n          </Button>\n          <Button\n            buttonStyle=\"primary\"\n            buttonSize=\"small\"\n            onClick={this.onSave}\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </ButtonBar>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <span>\n        {this.textSummary()}{' '}\n        <ControlPopover\n          trigger=\"click\"\n          content={this.renderPopover()}\n          title={t('Column Configuration')}\n          visible={this.state.popoverVisible}\n          onVisibleChange={this.onPopoverVisibleChange}\n        >\n          <InfoTooltipWithTrigger\n            icon=\"edit\"\n            className=\"text-primary\"\n            label=\"edit-ts-column\"\n          />\n        </ControlPopover>\n      </span>\n    );\n  }\n}\n\nTimeSeriesColumnControl.propTypes = propTypes;\nTimeSeriesColumnControl.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode, useCallback, useEffect, useState } from 'react';\nimport { isEmpty, isEqual } from 'lodash';\nimport moment, { Moment } from 'moment';\nimport {\n  parseDttmToDate,\n  BinaryAdhocFilter,\n  SimpleAdhocFilter,\n  css,\n  customTimeRangeDecode,\n  computeCustomDateTime,\n} from '@superset-ui/core';\nimport { DatePicker } from 'antd';\nimport { RangePickerProps } from 'antd/lib/date-picker';\nimport { useSelector } from 'react-redux';\n\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport { RootState } from 'src/views/store';\n\nexport interface TimeOffsetControlsProps {\n  label?: ReactNode;\n  startDate?: string;\n  description?: string;\n  hovered?: boolean;\n  value?: Moment;\n  onChange: (datetime: string) => void;\n}\nconst MOMENT_FORMAT = 'YYYY-MM-DD';\n\nconst isTimeRangeEqual = (\n  left: BinaryAdhocFilter[],\n  right: BinaryAdhocFilter[],\n) => isEqual(left, right);\n\nconst isStartDateEqual = (left: string, right: string) => isEqual(left, right);\n\nexport default function TimeOffsetControls({\n  onChange,\n  ...props\n}: TimeOffsetControlsProps) {\n  const [startDate, setStartDate] = useState<string>('');\n  const [formatedDate, setFormatedDate] = useState<moment.Moment | undefined>(\n    undefined,\n  );\n  const [customStartDateInFilter, setCustomStartDateInFilter] = useState<\n    moment.Moment | undefined\n  >(undefined);\n  const [formatedFilterDate, setFormatedFilterDate] = useState<\n    moment.Moment | undefined\n  >(undefined);\n  const [savedStartDate, setSavedStartDate] = useState<string | null>(null);\n\n  const currentTimeRangeFilters = useSelector<RootState, BinaryAdhocFilter[]>(\n    state =>\n      state.explore.form_data.adhoc_filters.filter(\n        (adhoc_filter: SimpleAdhocFilter) =>\n          adhoc_filter.operator === 'TEMPORAL_RANGE',\n      ),\n    isTimeRangeEqual,\n  );\n\n  const currentStartDate = useSelector<RootState, string>(\n    state => state.explore.form_data.start_date_offset,\n    isStartDateEqual,\n  );\n\n  useEffect(() => {\n    if (savedStartDate !== currentStartDate) {\n      setSavedStartDate(currentStartDate);\n      onChange(moment(currentStartDate).format(MOMENT_FORMAT));\n    }\n  }, [currentStartDate]);\n\n  const previousCustomFilter = useSelector<RootState, BinaryAdhocFilter[]>(\n    state =>\n      state.explore.form_data.adhoc_custom?.filter(\n        (adhoc_filter: SimpleAdhocFilter) =>\n          adhoc_filter.operator === 'TEMPORAL_RANGE',\n      ),\n    isTimeRangeEqual,\n  );\n\n  // let's use useCallback to compute the custom start date\n  const customTimeRange = useCallback(\n    (date: string) => {\n      const customRange = customTimeRangeDecode(date);\n      if (customRange.matchedFlag) {\n        const { sinceDatetime, sinceMode, sinceGrain, sinceGrainValue } = {\n          ...customRange.customRange,\n        };\n        let customStartDate: Date | null = null;\n        if (sinceMode !== 'relative') {\n          if (sinceMode === 'specific') {\n            customStartDate = new Date(sinceDatetime);\n          } else {\n            customStartDate = parseDttmToDate(sinceDatetime, false, true);\n          }\n        } else {\n          customStartDate = computeCustomDateTime(\n            sinceDatetime,\n            sinceGrain,\n            sinceGrainValue,\n          );\n        }\n        customStartDate?.setHours(0, 0, 0, 0);\n        setCustomStartDateInFilter(moment(customStartDate));\n      } else {\n        setCustomStartDateInFilter(undefined);\n      }\n    },\n    [setCustomStartDateInFilter],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(currentTimeRangeFilters)) {\n      customTimeRange(currentTimeRangeFilters[0]?.comparator ?? '');\n      const date = currentTimeRangeFilters[0]?.comparator.split(' : ')[0];\n      setFormatedFilterDate(moment(parseDttmToDate(date)));\n    } else {\n      setCustomStartDateInFilter(undefined);\n      setFormatedFilterDate(moment(parseDttmToDate('')));\n    }\n  }, [currentTimeRangeFilters, customTimeRange]);\n\n  useEffect(() => {\n    if (!savedStartDate && (previousCustomFilter || customStartDateInFilter)) {\n      let date = '';\n      if (isEmpty(previousCustomFilter)) {\n        date = currentTimeRangeFilters[0]?.comparator.split(' : ')[0];\n      } else if (\n        previousCustomFilter[0]?.comparator.split(' : ')[0] !== 'No filter'\n      ) {\n        date = previousCustomFilter[0]?.comparator.split(' : ')[0];\n      }\n      if (customStartDateInFilter) {\n        setStartDate(customStartDateInFilter.toString());\n        setFormatedDate(moment(customStartDateInFilter));\n      } else if (date) {\n        setStartDate(date);\n        setFormatedDate(moment(parseDttmToDate(date)));\n      }\n    } else if (savedStartDate) {\n      setStartDate(savedStartDate);\n      setFormatedDate(moment(parseDttmToDate(savedStartDate)));\n    }\n  }, [previousCustomFilter, savedStartDate, customStartDateInFilter]);\n\n  useEffect(() => {\n    // When switching offsets from inherit and the previous custom is no longer valid\n    if (customStartDateInFilter) {\n      if (formatedDate && formatedDate > customStartDateInFilter) {\n        const resetDate = moment\n          .utc(customStartDateInFilter)\n          .subtract(1, 'day');\n        setStartDate(resetDate.toString());\n        setFormatedDate(resetDate);\n        onChange(moment.utc(resetDate).format(MOMENT_FORMAT));\n      }\n    }\n    if (\n      formatedDate &&\n      formatedFilterDate &&\n      formatedDate > formatedFilterDate\n    ) {\n      const resetDate = moment.utc(formatedFilterDate).subtract(1, 'day');\n      setStartDate(resetDate.toString());\n      setFormatedDate(resetDate);\n      onChange(moment.utc(resetDate).format(MOMENT_FORMAT));\n    }\n  }, [formatedFilterDate, formatedDate, customStartDateInFilter]);\n\n  const disabledDate: RangePickerProps['disabledDate'] = current => {\n    if (!customStartDateInFilter) {\n      return formatedFilterDate\n        ? current && current > formatedFilterDate\n        : false;\n    }\n    return current && current > moment(customStartDateInFilter);\n  };\n\n  return startDate || formatedDate ? (\n    <div>\n      <ControlHeader {...props} />\n      <DatePicker\n        css={css`\n          width: 100%;\n        `}\n        onChange={(datetime: Moment) =>\n          onChange(datetime ? datetime.format(MOMENT_FORMAT) : '')\n        }\n        defaultPickerValue={\n          startDate ? moment(formatedDate).subtract(1, 'day') : undefined\n        }\n        disabledDate={disabledDate}\n        defaultValue={moment(formatedDate)}\n        value={moment(formatedDate)}\n      />\n    </div>\n  ) : null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport { t } from '@superset-ui/core';\nimport PropTypes from 'prop-types';\nimport Popover from 'src/components/Popover';\nimport { decimal2sexagesimal } from 'geolib';\n\nimport Label from 'src/components/Label';\nimport { FormLabel } from 'src/components/Form';\nimport TextControl from './TextControl';\nimport ControlHeader from '../ControlHeader';\n\nexport const DEFAULT_VIEWPORT = {\n  longitude: 6.85236157047845,\n  latitude: 31.222656842808707,\n  zoom: 1,\n  bearing: 0,\n  pitch: 0,\n};\n\nconst PARAMS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.shape({\n    longitude: PropTypes.number,\n    latitude: PropTypes.number,\n    zoom: PropTypes.number,\n    bearing: PropTypes.number,\n    pitch: PropTypes.number,\n  }),\n  default: PropTypes.object,\n  name: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: 'fix', value: 5 },\n  value: DEFAULT_VIEWPORT,\n};\n\nexport default class ViewportControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(ctrl, value) {\n    this.props.onChange({\n      ...this.props.value,\n      [ctrl]: value,\n    });\n  }\n\n  renderTextControl(ctrl) {\n    return (\n      <div key={ctrl}>\n        <FormLabel>{ctrl}</FormLabel>\n        <TextControl\n          value={this.props.value[ctrl]}\n          onChange={this.onChange.bind(this, ctrl)}\n          isFloat\n        />\n      </div>\n    );\n  }\n\n  renderPopover() {\n    return (\n      <div id={`filter-popover-${this.props.name}`}>\n        {PARAMS.map(ctrl => this.renderTextControl(ctrl))}\n      </div>\n    );\n  }\n\n  renderLabel() {\n    if (this.props.value.longitude && this.props.value.latitude) {\n      return `${decimal2sexagesimal(\n        this.props.value.longitude,\n      )} | ${decimal2sexagesimal(this.props.value.latitude)}`;\n    }\n    return 'N/A';\n  }\n\n  render() {\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Popover\n          container={document.body}\n          trigger=\"click\"\n          placement=\"right\"\n          content={this.renderPopover()}\n          title={t('Viewport')}\n        >\n          <Label className=\"pointer\">{this.renderLabel()}</Label>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nViewportControl.propTypes = propTypes;\nViewportControl.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  memo,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport { css, SupersetTheme, t, useTheme } from '@superset-ui/core';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { ExplorePageState } from 'src/explore/types';\n\nexport interface VizMeta {\n  icon: ReactElement;\n  name: string;\n}\n\nexport interface FastVizSwitcherProps {\n  onChange: (vizName: string) => void;\n  currentSelection: string | null;\n}\ninterface VizTileProps {\n  vizMeta: VizMeta;\n  isActive: boolean;\n  isRendered: boolean;\n  onTileClick: (vizType: string) => void;\n}\n\nconst FEATURED_CHARTS: VizMeta[] = [\n  {\n    name: 'echarts_timeseries_line',\n    icon: <Icons.LineChartTile />,\n  },\n  {\n    name: 'echarts_timeseries_bar',\n    icon: <Icons.BarChartTile />,\n  },\n  { name: 'echarts_area', icon: <Icons.AreaChartTile /> },\n  { name: 'table', icon: <Icons.TableChartTile /> },\n  {\n    name: 'big_number_total',\n    icon: <Icons.BigNumberChartTile />,\n  },\n  { name: 'pie', icon: <Icons.PieChartTile /> },\n];\n\nconst antdIconProps = {\n  iconSize: 'l' as const,\n  css: (theme: SupersetTheme) => css`\n    padding: ${theme.gridUnit}px;\n    & > * {\n      line-height: 0;\n    }\n  `,\n};\n\nconst VizTile = ({\n  isActive,\n  isRendered,\n  vizMeta,\n  onTileClick,\n}: VizTileProps) => {\n  const { mountedPluginMetadata } = usePluginContext();\n  const chartNameRef = useRef<HTMLSpanElement>(null);\n  const theme = useTheme();\n  const TILE_TRANSITION_TIME = theme.transitionTiming * 2;\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const chartName = vizMeta.name\n    ? mountedPluginMetadata[vizMeta.name]?.name || `${vizMeta.name}`\n    : t('Select Viz Type');\n\n  const handleTileClick = useCallback(() => {\n    onTileClick(vizMeta.name);\n    setIsTransitioning(true);\n    setTooltipVisible(false);\n    setTimeout(() => {\n      setIsTransitioning(false);\n    }, TILE_TRANSITION_TIME * 1000);\n  }, [onTileClick, TILE_TRANSITION_TIME, vizMeta.name]);\n\n  // Antd tooltip seems to be bugged - when elements move, the tooltip sometimes\n  // stays visible even when user doesn't hover over the element.\n  // Here we manually prevent it from displaying after user triggers transition\n  useEffect(() => {\n    setShowTooltip(\n      Boolean(\n        !isTransitioning &&\n          (!isActive ||\n            (chartNameRef.current &&\n              chartNameRef.current.scrollWidth >\n                chartNameRef.current.clientWidth)),\n      ),\n    );\n  }, [isActive, isTransitioning]);\n\n  const containerProps = useMemo(\n    () =>\n      !isActive\n        ? { role: 'button', tabIndex: 0, onClick: handleTileClick }\n        : {},\n    [handleTileClick, isActive],\n  );\n\n  let tooltipTitle: string | null = null;\n  if (showTooltip) {\n    tooltipTitle = isRendered\n      ? t('Currently rendered: %s', chartName)\n      : chartName;\n  }\n  return (\n    <Tooltip\n      title={tooltipTitle}\n      onVisibleChange={visible => setTooltipVisible(visible)}\n      visible={tooltipVisible && !isTransitioning}\n      placement=\"top\"\n      mouseEnterDelay={0.4}\n    >\n      <div\n        {...containerProps}\n        css={css`\n          display: flex;\n          align-items: center;\n          text-transform: uppercase;\n\n          color: ${theme.colors.grayscale.base};\n          font-weight: ${theme.typography.weights.bold};\n          border-radius: 6px;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: fit-content;\n\n          ${!isActive &&\n          css`\n            flex-shrink: 0;\n            width: ${theme.gridUnit * 6}px;\n            background-color: transparent;\n            transition: none;\n            &:hover svg path {\n              fill: ${theme.colors.primary.base};\n              transition: fill ${theme.transitionTiming}s ease-out;\n            }\n          `}\n\n          ${isActive &&\n          css`\n            width: 100%;\n            background-color: ${theme.colors.grayscale.light4};\n            transition:\n              width ${TILE_TRANSITION_TIME}s ease-out,\n              background-color ${TILE_TRANSITION_TIME}s ease-out;\n            cursor: default;\n            svg path {\n              fill: ${theme.colors.primary.base};\n            }\n          `}\n        `}\n      >\n        {vizMeta.icon}{' '}\n        <span\n          css={css`\n            overflow: hidden;\n            text-overflow: ellipsis;\n            min-width: 0;\n            padding-right: ${theme.gridUnit}px;\n          `}\n          ref={chartNameRef}\n        >\n          {chartName}\n        </span>\n      </div>\n    </Tooltip>\n  );\n};\n\nexport const FastVizSwitcher = memo(\n  ({ currentSelection, onChange }: FastVizSwitcherProps) => {\n    const currentViz = useSelector<ExplorePageState, string | undefined>(\n      state =>\n        state.charts?.[getChartKey(state.explore)]?.latestQueryFormData\n          ?.viz_type,\n    );\n    const vizTiles = useMemo(() => {\n      const vizTiles = [...FEATURED_CHARTS];\n      if (\n        currentSelection &&\n        FEATURED_CHARTS.every(\n          featuredVizMeta => featuredVizMeta.name !== currentSelection,\n        ) &&\n        currentSelection !== currentViz\n      ) {\n        vizTiles.unshift({\n          name: currentSelection,\n          icon: (\n            <Icons.MonitorOutlined {...antdIconProps} aria-label=\"monitor\" />\n          ),\n        });\n      }\n      if (\n        currentViz &&\n        FEATURED_CHARTS.every(\n          featuredVizMeta => featuredVizMeta.name !== currentViz,\n        )\n      ) {\n        vizTiles.unshift({\n          name: currentViz,\n          icon: (\n            <Icons.CheckSquareOutlined\n              {...antdIconProps}\n              aria-label=\"check-square\"\n            />\n          ),\n        });\n      }\n      return vizTiles;\n    }, [currentSelection, currentViz]);\n\n    return (\n      <div\n        css={(theme: SupersetTheme) => css`\n          display: flex;\n          justify-content: space-between;\n          column-gap: ${theme.gridUnit}px;\n        `}\n        data-test=\"fast-viz-switcher\"\n      >\n        {vizTiles.map(vizMeta => (\n          <VizTile\n            vizMeta={vizMeta}\n            isActive={currentSelection === vizMeta.name}\n            isRendered={currentViz === vizMeta.name}\n            onTileClick={onChange}\n            key={vizMeta.name}\n          />\n        ))}\n      </div>\n    );\n  },\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useState } from 'react';\nimport {\n  css,\n  t,\n  getChartMetadataRegistry,\n  styled,\n  SupersetTheme,\n} from '@superset-ui/core';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport Modal from 'src/components/Modal';\nimport { noOp } from 'src/utils/common';\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport { FilterPlugins } from 'src/constants';\nimport VizTypeGallery, {\n  MAX_ADVISABLE_VIZ_GALLERY_WIDTH,\n} from './VizTypeGallery';\nimport { FastVizSwitcher } from './FastVizSwitcher';\n\ninterface VizTypeControlProps {\n  description?: string;\n  label?: string;\n  name: string;\n  onChange: (vizType: string | null) => void;\n  value: string | null;\n  isModalOpenInit?: boolean;\n}\n\nconst bootstrapData = getBootstrapData();\nconst denyList: string[] = (\n  bootstrapData.common.conf.VIZ_TYPE_DENYLIST || []\n).concat(Object.values(FilterPlugins));\nconst metadataRegistry = getChartMetadataRegistry();\n\nexport const VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\n\nfunction VizSupportValidation({ vizType }: { vizType: string }) {\n  const state = usePluginContext();\n  if (state.loading || metadataRegistry.has(vizType)) {\n    return null;\n  }\n  return (\n    <div\n      className=\"text-danger\"\n      css={(theme: SupersetTheme) => css`\n        margin-top: ${theme.gridUnit}px;\n      `}\n    >\n      <i className=\"fa fa-exclamation-circle text-danger\" />{' '}\n      <small>{t('This visualization type is not supported.')}</small>\n    </div>\n  );\n}\n\nconst UnpaddedModal = styled(Modal)`\n  .ant-modal-body {\n    padding: 0;\n  }\n`;\n\n/** Manages the viz type and the viz picker modal */\nconst VizTypeControl = ({\n  value: initialValue,\n  onChange = noOp,\n  isModalOpenInit,\n}: VizTypeControlProps) => {\n  const [showModal, setShowModal] = useState(!!isModalOpenInit);\n  // a trick to force re-initialization of the gallery each time the modal opens,\n  // ensuring that the modal always opens to the correct category.\n  const [modalKey, setModalKey] = useState(0);\n  const [selectedViz, setSelectedViz] = useState<string | null>(initialValue);\n\n  const openModal = useCallback(() => {\n    setShowModal(true);\n  }, []);\n\n  const onSubmit = useCallback(() => {\n    onChange(selectedViz);\n    setShowModal(false);\n  }, [selectedViz, onChange]);\n\n  const onCancel = useCallback(() => {\n    setShowModal(false);\n    setModalKey(key => key + 1);\n    // make sure the modal re-opens to the last submitted viz\n    setSelectedViz(initialValue);\n  }, [initialValue]);\n\n  return (\n    <>\n      <div\n        css={(theme: SupersetTheme) => css`\n          min-width: ${theme.gridUnit * 72}px;\n          max-width: fit-content;\n        `}\n      >\n        <FastVizSwitcher onChange={onChange} currentSelection={initialValue} />\n        {initialValue && <VizSupportValidation vizType={initialValue} />}\n      </div>\n      <div\n        css={(theme: SupersetTheme) => css`\n          display: flex;\n          justify-content: flex-end;\n          margin-top: ${theme.gridUnit * 3}px;\n          color: ${theme.colors.grayscale.base};\n          text-decoration: underline;\n        `}\n      >\n        <span role=\"button\" tabIndex={0} onClick={openModal}>\n          {t('View all charts')}\n        </span>\n      </div>\n      <UnpaddedModal\n        show={showModal}\n        onHide={onCancel}\n        title={t('Select a visualization type')}\n        primaryButtonName={t('Select')}\n        disablePrimaryButton={!selectedViz}\n        onHandledPrimaryAction={onSubmit}\n        maxWidth={`${MAX_ADVISABLE_VIZ_GALLERY_WIDTH}px`}\n        responsive\n      >\n        {/* When the key increments, it forces react to re-init the gallery component */}\n        <VizTypeGallery\n          key={modalKey}\n          selectedViz={selectedViz}\n          onChange={setSelectedViz}\n          onDoubleClick={onSubmit}\n          denyList={denyList}\n        />\n      </UnpaddedModal>\n    </>\n  );\n};\n\nexport default VizTypeControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState } from 'react';\nimport { styled, SupersetTheme, t, useTheme } from '@superset-ui/core';\nimport { ColorSchemeEnum } from '@superset-ui/plugin-chart-table';\nimport {\n  Comparator,\n  MultipleValueComparators,\n} from '@superset-ui/chart-controls';\nimport { Form, FormItem, FormProps } from 'src/components/Form';\nimport Select from 'src/components/Select/Select';\nimport { Col, Row } from 'src/components';\nimport { InputNumber } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { ConditionalFormattingConfig } from './types';\n\nconst FullWidthInputNumber = styled(InputNumber)`\n  width: 100%;\n`;\n\nconst JustifyEnd = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst colorSchemeOptions = (theme: SupersetTheme) => [\n  { value: theme.colors.success.light1, label: t('success') },\n  { value: theme.colors.alert.light1, label: t('alert') },\n  { value: theme.colors.error.light1, label: t('error') },\n  { value: theme.colors.success.dark1, label: t('success dark') },\n  { value: theme.colors.alert.dark1, label: t('alert dark') },\n  { value: theme.colors.error.dark1, label: t('error dark') },\n];\n\nconst operatorOptions = [\n  { value: Comparator.None, label: t('None') },\n  { value: Comparator.GreaterThan, label: '>' },\n  { value: Comparator.LessThan, label: '<' },\n  { value: Comparator.GreaterOrEqual, label: '≥' },\n  { value: Comparator.LessOrEqual, label: '≤' },\n  { value: Comparator.Equal, label: '=' },\n  { value: Comparator.NotEqual, label: '≠' },\n  { value: Comparator.Between, label: '< x <' },\n  { value: Comparator.BetweenOrEqual, label: '≤ x ≤' },\n  { value: Comparator.BetweenOrLeftEqual, label: '≤ x <' },\n  { value: Comparator.BetweenOrRightEqual, label: '< x ≤' },\n];\n\nconst targetValueValidator =\n  (\n    compare: (targetValue: number, compareValue: number) => boolean,\n    rejectMessage: string,\n  ) =>\n  (targetValue: number | string) =>\n  (_: any, compareValue: number | string) => {\n    if (\n      !targetValue ||\n      !compareValue ||\n      compare(Number(targetValue), Number(compareValue))\n    ) {\n      return Promise.resolve();\n    }\n    return Promise.reject(new Error(rejectMessage));\n  };\n\nconst targetValueLeftValidator = targetValueValidator(\n  (target: number, val: number) => target > val,\n  t('This value should be smaller than the right target value'),\n);\n\nconst targetValueRightValidator = targetValueValidator(\n  (target: number, val: number) => target < val,\n  t('This value should be greater than the left target value'),\n);\n\nconst isOperatorMultiValue = (operator?: Comparator) =>\n  operator && MultipleValueComparators.includes(operator);\n\nconst isOperatorNone = (operator?: Comparator) =>\n  !operator || operator === Comparator.None;\n\nconst rulesRequired = [{ required: true, message: t('Required') }];\n\ntype GetFieldValue = Pick<Required<FormProps>['form'], 'getFieldValue'>;\nconst rulesTargetValueLeft = [\n  { required: true, message: t('Required') },\n  ({ getFieldValue }: GetFieldValue) => ({\n    validator: targetValueLeftValidator(getFieldValue('targetValueRight')),\n  }),\n];\n\nconst rulesTargetValueRight = [\n  { required: true, message: t('Required') },\n  ({ getFieldValue }: GetFieldValue) => ({\n    validator: targetValueRightValidator(getFieldValue('targetValueLeft')),\n  }),\n];\n\nconst targetValueLeftDeps = ['targetValueRight'];\nconst targetValueRightDeps = ['targetValueLeft'];\n\nconst shouldFormItemUpdate = (\n  prevValues: ConditionalFormattingConfig,\n  currentValues: ConditionalFormattingConfig,\n) =>\n  isOperatorNone(prevValues.operator) !==\n    isOperatorNone(currentValues.operator) ||\n  isOperatorMultiValue(prevValues.operator) !==\n    isOperatorMultiValue(currentValues.operator);\n\nconst renderOperator = ({ showOnlyNone }: { showOnlyNone?: boolean } = {}) => (\n  <FormItem\n    name=\"operator\"\n    label={t('Operator')}\n    rules={rulesRequired}\n    initialValue={operatorOptions[0].value}\n  >\n    <Select\n      ariaLabel={t('Operator')}\n      options={showOnlyNone ? [operatorOptions[0]] : operatorOptions}\n    />\n  </FormItem>\n);\n\nconst renderOperatorFields = ({ getFieldValue }: GetFieldValue) =>\n  isOperatorNone(getFieldValue('operator')) ? (\n    <Row gutter={12}>\n      <Col span={6}>{renderOperator()}</Col>\n    </Row>\n  ) : isOperatorMultiValue(getFieldValue('operator')) ? (\n    <Row gutter={12}>\n      <Col span={9}>\n        <FormItem\n          name=\"targetValueLeft\"\n          label={t('Left value')}\n          rules={rulesTargetValueLeft}\n          dependencies={targetValueLeftDeps}\n          validateTrigger=\"onBlur\"\n          trigger=\"onBlur\"\n        >\n          <FullWidthInputNumber />\n        </FormItem>\n      </Col>\n      <Col span={6}>{renderOperator()}</Col>\n      <Col span={9}>\n        <FormItem\n          name=\"targetValueRight\"\n          label={t('Right value')}\n          rules={rulesTargetValueRight}\n          dependencies={targetValueRightDeps}\n          validateTrigger=\"onBlur\"\n          trigger=\"onBlur\"\n        >\n          <FullWidthInputNumber />\n        </FormItem>\n      </Col>\n    </Row>\n  ) : (\n    <Row gutter={12}>\n      <Col span={6}>{renderOperator()}</Col>\n      <Col span={18}>\n        <FormItem\n          name=\"targetValue\"\n          label={t('Target value')}\n          rules={rulesRequired}\n        >\n          <FullWidthInputNumber />\n        </FormItem>\n      </Col>\n    </Row>\n  );\n\nexport const FormattingPopoverContent = ({\n  config,\n  onChange,\n  columns = [],\n  extraColorChoices = [],\n}: {\n  config?: ConditionalFormattingConfig;\n  onChange: (config: ConditionalFormattingConfig) => void;\n  columns: { label: string; value: string }[];\n  extraColorChoices?: { label: string; value: string }[];\n}) => {\n  const theme = useTheme();\n  const colorScheme = colorSchemeOptions(theme);\n  const [showOperatorFields, setShowOperatorFields] = useState(\n    config === undefined ||\n      (config?.colorScheme !== ColorSchemeEnum.Green &&\n        config?.colorScheme !== ColorSchemeEnum.Red),\n  );\n  const handleChange = (event: any) => {\n    setShowOperatorFields(\n      !(event === ColorSchemeEnum.Green || event === ColorSchemeEnum.Red),\n    );\n  };\n\n  return (\n    <Form\n      onFinish={onChange}\n      initialValues={config}\n      requiredMark=\"optional\"\n      layout=\"vertical\"\n    >\n      <Row gutter={12}>\n        <Col span={12}>\n          <FormItem\n            name=\"column\"\n            label={t('Column')}\n            rules={rulesRequired}\n            initialValue={columns[0]?.value}\n          >\n            <Select ariaLabel={t('Select column')} options={columns} />\n          </FormItem>\n        </Col>\n        <Col span={12}>\n          <FormItem\n            name=\"colorScheme\"\n            label={t('Color scheme')}\n            rules={rulesRequired}\n            initialValue={colorScheme[0].value}\n          >\n            <Select\n              onChange={event => handleChange(event)}\n              ariaLabel={t('Color scheme')}\n              options={[...colorScheme, ...extraColorChoices]}\n            />\n          </FormItem>\n        </Col>\n      </Row>\n      <FormItem noStyle shouldUpdate={shouldFormItemUpdate}>\n        {showOperatorFields ? (\n          renderOperatorFields\n        ) : (\n          <Row gutter={12}>\n            <Col span={6}>{renderOperator({ showOnlyNone: true })}</Col>\n          </Row>\n        )}\n      </FormItem>\n      <FormItem>\n        <JustifyEnd>\n          <Button htmlType=\"submit\" buttonStyle=\"primary\">\n            {t('Apply')}\n          </Button>\n        </JustifyEnd>\n      </FormItem>\n    </Form>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useState } from 'react';\nimport Popover from 'src/components/Popover';\nimport { FormattingPopoverContent } from './FormattingPopoverContent';\nimport { ConditionalFormattingConfig, FormattingPopoverProps } from './types';\n\nexport const FormattingPopover = ({\n  title,\n  columns,\n  onChange,\n  config,\n  children,\n  extraColorChoices,\n  ...props\n}: FormattingPopoverProps) => {\n  const [visible, setVisible] = useState(false);\n\n  const handleSave = useCallback(\n    (newConfig: ConditionalFormattingConfig) => {\n      setVisible(false);\n      onChange(newConfig);\n    },\n    [onChange],\n  );\n\n  return (\n    <Popover\n      title={title}\n      content={\n        <FormattingPopoverContent\n          onChange={handleSave}\n          config={config}\n          columns={columns}\n          extraColorChoices={extraColorChoices}\n        />\n      }\n      visible={visible}\n      onVisibleChange={setVisible}\n      trigger={['click']}\n      overlayStyle={{ width: '450px' }}\n      {...props}\n    >\n      {children}\n    </Popover>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport { styled, css, t, useTheme } from '@superset-ui/core';\nimport { Comparator } from '@superset-ui/chart-controls';\nimport Icons from 'src/components/Icons';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport { FormattingPopover } from './FormattingPopover';\nimport {\n  ConditionalFormattingConfig,\n  ConditionalFormattingControlProps,\n} from './types';\nimport {\n  AddControlLabel,\n  CaretContainer,\n  Label,\n  OptionControlContainer,\n} from '../OptionControls';\n\nconst FormattersContainer = styled.div`\n  ${({ theme }) => css`\n    padding: ${theme.gridUnit}px;\n    border: solid 1px ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n  `}\n`;\n\nexport const FormatterContainer = styled(OptionControlContainer)`\n  &,\n  & > div {\n    margin-bottom: ${({ theme }) => theme.gridUnit}px;\n    :last-child {\n      margin-bottom: 0;\n    }\n  }\n`;\n\nexport const CloseButton = styled.button`\n  ${({ theme }) => css`\n    color: ${theme.colors.grayscale.light1};\n    height: 100%;\n    width: ${theme.gridUnit * 6}px;\n    border: none;\n    border-right: solid 1px ${theme.colors.grayscale.dark2}0C;\n    padding: 0;\n    outline: none;\n    border-bottom-left-radius: 3px;\n    border-top-left-radius: 3px;\n  `}\n`;\n\nconst ConditionalFormattingControl = ({\n  value,\n  onChange,\n  columnOptions,\n  verboseMap,\n  removeIrrelevantConditions,\n  extraColorChoices,\n  ...props\n}: ConditionalFormattingControlProps) => {\n  const theme = useTheme();\n  const [conditionalFormattingConfigs, setConditionalFormattingConfigs] =\n    useState<ConditionalFormattingConfig[]>(value ?? []);\n\n  useEffect(() => {\n    if (onChange) {\n      onChange(conditionalFormattingConfigs);\n    }\n  }, [conditionalFormattingConfigs, onChange]);\n\n  useEffect(() => {\n    if (removeIrrelevantConditions) {\n      // remove formatter when corresponding column is removed from controls\n      const newFormattingConfigs = conditionalFormattingConfigs.filter(config =>\n        columnOptions.some((option: any) => option?.value === config?.column),\n      );\n      if (\n        newFormattingConfigs.length !== conditionalFormattingConfigs.length &&\n        removeIrrelevantConditions\n      ) {\n        setConditionalFormattingConfigs(newFormattingConfigs);\n      }\n    }\n  }, [conditionalFormattingConfigs, columnOptions, removeIrrelevantConditions]);\n\n  const onDelete = (index: number) => {\n    setConditionalFormattingConfigs(prevConfigs =>\n      prevConfigs.filter((_, i) => i !== index),\n    );\n  };\n\n  const onSave = (config: ConditionalFormattingConfig) => {\n    setConditionalFormattingConfigs(prevConfigs => [...prevConfigs, config]);\n  };\n\n  const onEdit = (newConfig: ConditionalFormattingConfig, index: number) => {\n    const newConfigs = [...conditionalFormattingConfigs];\n    newConfigs.splice(index, 1, newConfig);\n    setConditionalFormattingConfigs(newConfigs);\n  };\n\n  const createLabel = ({\n    column,\n    operator,\n    targetValue,\n    targetValueLeft,\n    targetValueRight,\n  }: ConditionalFormattingConfig) => {\n    const columnName = (column && verboseMap?.[column]) ?? column;\n    switch (operator) {\n      case Comparator.None:\n        return `${columnName}`;\n      case Comparator.Between:\n        return `${targetValueLeft} ${Comparator.LessThan} ${columnName} ${Comparator.LessThan} ${targetValueRight}`;\n      case Comparator.BetweenOrEqual:\n        return `${targetValueLeft} ${Comparator.LessOrEqual} ${columnName} ${Comparator.LessOrEqual} ${targetValueRight}`;\n      case Comparator.BetweenOrLeftEqual:\n        return `${targetValueLeft} ${Comparator.LessOrEqual} ${columnName} ${Comparator.LessThan} ${targetValueRight}`;\n      case Comparator.BetweenOrRightEqual:\n        return `${targetValueLeft} ${Comparator.LessThan} ${columnName} ${Comparator.LessOrEqual} ${targetValueRight}`;\n      default:\n        return `${columnName} ${operator} ${targetValue}`;\n    }\n  };\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <FormattersContainer>\n        {conditionalFormattingConfigs.map((config, index) => (\n          <FormatterContainer key={index}>\n            <CloseButton onClick={() => onDelete(index)}>\n              <Icons.XSmall iconColor={theme.colors.grayscale.light1} />\n            </CloseButton>\n            <FormattingPopover\n              title={t('Edit formatter')}\n              config={config}\n              columns={columnOptions}\n              onChange={(newConfig: ConditionalFormattingConfig) =>\n                onEdit(newConfig, index)\n              }\n              destroyTooltipOnHide\n              extraColorChoices={extraColorChoices}\n            >\n              <OptionControlContainer withCaret>\n                <Label>{createLabel(config)}</Label>\n                <CaretContainer>\n                  <Icons.CaretRight iconColor={theme.colors.grayscale.light1} />\n                </CaretContainer>\n              </OptionControlContainer>\n            </FormattingPopover>\n          </FormatterContainer>\n        ))}\n        <FormattingPopover\n          title={t('Add new formatter')}\n          columns={columnOptions}\n          onChange={onSave}\n          destroyTooltipOnHide\n          extraColorChoices={extraColorChoices}\n        >\n          <AddControlLabel>\n            <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\n            {t('Add new color formatter')}\n          </AddControlLabel>\n        </FormattingPopover>\n      </FormattersContainer>\n    </div>\n  );\n};\n\nexport default ConditionalFormattingControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport ConditionalFormattingControl from './ConditionalFormattingControl';\n\nexport * from './types';\nexport default ConditionalFormattingControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  createContext,\n  useEffect,\n  useState,\n  Dispatch,\n  FC,\n  useReducer,\n} from 'react';\n\nimport { styled } from '@superset-ui/core';\nimport { useDragDropManager } from 'react-dnd';\nimport { DatasourcePanelDndItem } from '../DatasourcePanel/types';\n\ntype CanDropValidator = (item: DatasourcePanelDndItem) => boolean;\ntype DropzoneSet = Record<string, CanDropValidator>;\ntype Action = { key: string; canDrop?: CanDropValidator };\n\nexport const DraggingContext = createContext(false);\nexport const DropzoneContext = createContext<[DropzoneSet, Dispatch<Action>]>([\n  {},\n  () => {},\n]);\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 0;\n`;\n\nconst reducer = (state: DropzoneSet = {}, action: Action) => {\n  if (action.canDrop) {\n    return {\n      ...state,\n      [action.key]: action.canDrop,\n    };\n  }\n  if (action.key) {\n    const newState = { ...state };\n    delete newState[action.key];\n    return newState;\n  }\n  return state;\n};\n\nconst ExploreContainer: FC<{}> = ({ children }) => {\n  const dragDropManager = useDragDropManager();\n  const [dragging, setDragging] = useState(\n    dragDropManager.getMonitor().isDragging(),\n  );\n\n  useEffect(() => {\n    const monitor = dragDropManager.getMonitor();\n    const unsub = monitor.subscribeToStateChange(() => {\n      const item = monitor.getItem() || {};\n      // don't show dragging state for the sorting item\n      if ('dragIndex' in item) {\n        return;\n      }\n      const isDragging = monitor.isDragging();\n      setDragging(isDragging);\n    });\n\n    return () => {\n      unsub();\n    };\n  }, [dragDropManager]);\n\n  const dropzoneValue = useReducer(reducer, {});\n\n  return (\n    <DropzoneContext.Provider value={dropzoneValue}>\n      <DraggingContext.Provider value={dragging}>\n        <StyledDiv>{children}</StyledDiv>\n      </DraggingContext.Provider>\n    </DropzoneContext.Provider>\n  );\n};\n\nexport default ExploreContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode, useCallback, useContext, useEffect, useMemo } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { t, useTheme } from '@superset-ui/core';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport {\n  AddControlLabel,\n  DndLabelsContainer,\n  HeaderContainer,\n} from 'src/explore/components/controls/OptionControls';\nimport {\n  DatasourcePanelDndItem,\n  DndItemValue,\n} from 'src/explore/components/DatasourcePanel/types';\nimport Icons from 'src/components/Icons';\nimport { DndItemType } from '../../DndItemType';\nimport { DraggingContext, DropzoneContext } from '../../ExploreContainer';\n\nexport type DndSelectLabelProps = {\n  name: string;\n  accept: DndItemType | DndItemType[];\n  ghostButtonText: string;\n  onDrop: (item: DatasourcePanelDndItem) => void;\n  canDrop: (item: DatasourcePanelDndItem) => boolean;\n  canDropValue?: (value: DndItemValue) => boolean;\n  onDropValue?: (value: DndItemValue) => void;\n  valuesRenderer: () => ReactNode;\n  displayGhostButton?: boolean;\n  onClickGhostButton: () => void;\n  isLoading?: boolean;\n};\n\nexport default function DndSelectLabel({\n  displayGhostButton = true,\n  accept,\n  valuesRenderer,\n  isLoading,\n  ...props\n}: DndSelectLabelProps) {\n  const theme = useTheme();\n  const canDropProp = props.canDrop;\n  const canDropValueProp = props.canDropValue;\n\n  const dropValidator = useCallback(\n    (item: DatasourcePanelDndItem) =>\n      canDropProp(item) && (canDropValueProp?.(item.value) ?? true),\n    [canDropProp, canDropValueProp],\n  );\n\n  const [{ isOver, canDrop }, datasourcePanelDrop] = useDrop({\n    accept: isLoading ? [] : accept,\n\n    drop: (item: DatasourcePanelDndItem) => {\n      props.onDrop(item);\n      props.onDropValue?.(item.value);\n    },\n\n    canDrop: dropValidator,\n\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n      type: monitor.getItemType(),\n    }),\n  });\n\n  const dispatch = useContext(DropzoneContext)[1];\n\n  useEffect(() => {\n    dispatch({ key: props.name, canDrop: dropValidator });\n    return () => {\n      dispatch({ key: props.name });\n    };\n  }, [dispatch, props.name, dropValidator]);\n\n  const isDragging = useContext(DraggingContext);\n\n  const values = useMemo(() => valuesRenderer(), [valuesRenderer]);\n\n  function renderGhostButton() {\n    return (\n      <AddControlLabel\n        cancelHover={!props.onClickGhostButton}\n        onClick={props.onClickGhostButton}\n      >\n        <Icons.PlusSmall iconColor={theme.colors.grayscale.light1} />\n        {t(props.ghostButtonText)}\n      </AddControlLabel>\n    );\n  }\n\n  return (\n    <div ref={datasourcePanelDrop}>\n      <HeaderContainer>\n        <ControlHeader {...props} />\n      </HeaderContainer>\n      <DndLabelsContainer\n        data-test=\"dnd-labels-container\"\n        canDrop={canDrop}\n        isOver={isOver}\n        isDragging={isDragging}\n        isLoading={isLoading}\n      >\n        {values}\n        {displayGhostButton && renderGhostButton()}\n      </DndLabelsContainer>\n    </div>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect } from 'react';\nimport { Row, Col } from 'src/components';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport { legacyValidateInteger, styled, t } from '@superset-ui/core';\nimport ControlHeader from '../../ControlHeader';\nimport TextControl from '../TextControl';\nimport ColorPickerControl from '../ColorPickerControl';\nimport {\n  ContourPopoverControlProps,\n  ColorType,\n  ContourType,\n  ErrorMapType,\n} from './types';\n\nenum ContourTypes {\n  Isoline = 'ISOLINE',\n  Isoband = 'ISOBAND',\n}\n\nconst ContourActionsContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst StyledRow = styled(Row)`\n  width: 100%;\n  gap: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst isIsoband = (contour: ContourType) => {\n  if (Object.keys(contour).length < 4) {\n    return false;\n  }\n  return contour.upperThreshold && contour.lowerThreshold;\n};\n\nconst getTabKey = (contour: ContourType | undefined) =>\n  contour && isIsoband(contour) ? ContourTypes.Isoband : ContourTypes.Isoline;\n\nconst determineErrorMap = (tab: string, contour: ContourType) => {\n  const errorMap: ErrorMapType = {\n    lowerThreshold: [],\n    upperThreshold: [],\n    strokeWidth: [],\n    color: [],\n  };\n  // Isoline and Isoband validation\n  const lowerThresholdError = legacyValidateInteger(contour.lowerThreshold);\n  if (lowerThresholdError) errorMap.lowerThreshold.push(lowerThresholdError);\n\n  // Isoline only validation\n  if (tab === ContourTypes.Isoline) {\n    const strokeWidthError = legacyValidateInteger(contour.strokeWidth);\n    if (strokeWidthError) errorMap.strokeWidth.push(strokeWidthError);\n  }\n\n  // Isoband only validation\n  if (tab === ContourTypes.Isoband) {\n    const upperThresholdError = legacyValidateInteger(contour.upperThreshold);\n    if (upperThresholdError) errorMap.upperThreshold.push(upperThresholdError);\n    if (\n      !upperThresholdError &&\n      !lowerThresholdError &&\n      contour.upperThreshold &&\n      contour.lowerThreshold\n    ) {\n      const lower = parseFloat(contour.lowerThreshold);\n      const upper = parseFloat(contour.upperThreshold);\n      if (lower >= upper) {\n        errorMap.lowerThreshold.push(\n          t('Lower threshold must be lower than upper threshold'),\n        );\n        errorMap.upperThreshold.push(\n          t('Upper threshold must be greater than lower threshold'),\n        );\n      }\n    }\n  }\n  return errorMap;\n};\n\nconst convertContourToNumeric = (contour: ContourType) => {\n  const formattedContour = { ...contour };\n  const numericKeys = ['lowerThreshold', 'upperThreshold', 'strokeWidth'];\n  numericKeys.forEach(key => {\n    formattedContour[key] = Number(formattedContour[key]);\n  });\n  return formattedContour;\n};\n\nconst formatIsoline = (contour: ContourType) => ({\n  color: contour.color,\n  lowerThreshold: contour.lowerThreshold,\n  upperThreshold: undefined,\n  strokeWidth: contour.strokeWidth,\n});\n\nconst formatIsoband = (contour: ContourType) => ({\n  color: contour.color,\n  lowerThreshold: contour.lowerThreshold,\n  upperThreshold: contour.upperThreshold,\n  strokeWidth: undefined,\n});\n\nconst DEFAULT_CONTOUR = {\n  lowerThreshold: undefined,\n  upperThreshold: undefined,\n  color: undefined,\n  strokeWidth: undefined,\n};\n\nconst ContourPopoverControl = ({\n  value: initialValue,\n  onSave,\n  onClose,\n}: ContourPopoverControlProps) => {\n  const [currentTab, setCurrentTab] = useState(getTabKey(initialValue));\n  const [contour, setContour] = useState(initialValue || DEFAULT_CONTOUR);\n  const [validationErrors, setValidationErrors] = useState(\n    determineErrorMap(getTabKey(initialValue), initialValue || DEFAULT_CONTOUR),\n  );\n  const [isComplete, setIsComplete] = useState(false);\n\n  useEffect(() => {\n    const isIsoband = currentTab === ContourTypes.Isoband;\n    const validLower =\n      Boolean(contour.lowerThreshold) || contour.lowerThreshold === 0;\n    const validUpper =\n      Boolean(contour.upperThreshold) || contour.upperThreshold === 0;\n    const validStrokeWidth =\n      Boolean(contour.strokeWidth) || contour.strokeWidth === 0;\n    const validColor =\n      typeof contour.color === 'object' &&\n      'r' in contour.color &&\n      typeof contour.color.r === 'number' &&\n      'g' in contour.color &&\n      typeof contour.color.g === 'number' &&\n      'b' in contour.color &&\n      typeof contour.color.b === 'number' &&\n      'a' in contour.color &&\n      typeof contour.color.a === 'number';\n\n    const errors = determineErrorMap(currentTab, contour);\n    if (errors !== validationErrors) setValidationErrors(errors);\n\n    const sectionIsComplete = isIsoband\n      ? validLower && validUpper && validColor\n      : validLower && validColor && validStrokeWidth;\n\n    if (sectionIsComplete !== isComplete) setIsComplete(sectionIsComplete);\n  }, [contour, currentTab]);\n\n  const onTabChange = (activeKey: any) => {\n    setCurrentTab(activeKey);\n  };\n\n  const updateStrokeWidth = (value: number | string) => {\n    const newContour = { ...contour };\n    newContour.strokeWidth = value;\n    setContour(newContour);\n  };\n\n  const updateColor = (rgb: ColorType) => {\n    const newContour = { ...contour };\n    newContour.color = { ...rgb, a: 100 };\n    setContour(newContour);\n  };\n\n  const updateLowerThreshold = (value: number | string) => {\n    const newContour = { ...contour };\n    newContour.lowerThreshold = value;\n    setContour(newContour);\n  };\n\n  const updateUpperThreshold = (value: number | string) => {\n    const newContour = { ...contour };\n    newContour.upperThreshold = value;\n    setContour(newContour);\n  };\n\n  const containsErrors = () => {\n    const keys = Object.keys(validationErrors);\n    return keys.some(key => validationErrors[key].length > 0);\n  };\n\n  const handleSave = () => {\n    if (isComplete && onSave) {\n      const newContour =\n        currentTab === ContourTypes.Isoline\n          ? formatIsoline(contour)\n          : formatIsoband(contour);\n      onSave(convertContourToNumeric(newContour));\n      if (onClose) onClose();\n    }\n  };\n\n  return (\n    <>\n      <Tabs\n        id=\"contour-edit-tabs\"\n        onChange={onTabChange}\n        defaultActiveKey={getTabKey(initialValue)}\n      >\n        <Tabs.TabPane\n          className=\"adhoc-filter-edit-tab\"\n          key={ContourTypes.Isoline}\n          tab={t('Isoline')}\n        >\n          <div key={ContourTypes.Isoline} className=\"isoline-popover-section\">\n            <StyledRow>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoline-threshold\"\n                  label={t('Threshold')}\n                  description={t(\n                    'Defines the value that determines the boundary between different regions or levels in the data ',\n                  )}\n                  validationErrors={validationErrors.lowerThreshold}\n                  hovered\n                />\n                <TextControl\n                  value={contour.lowerThreshold}\n                  onChange={updateLowerThreshold}\n                />\n              </Col>\n            </StyledRow>\n            <StyledRow>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoline-stroke-width\"\n                  label={t('Stroke Width')}\n                  description={t('The width of the Isoline in pixels')}\n                  validationErrors={validationErrors.strokeWidth}\n                  hovered\n                />\n                <TextControl\n                  value={contour.strokeWidth || ''}\n                  onChange={updateStrokeWidth}\n                />\n              </Col>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoline-color\"\n                  label={t('Color')}\n                  description={t('The color of the isoline')}\n                  validationErrors={validationErrors.color}\n                  hovered\n                />\n                <ColorPickerControl\n                  value={typeof contour === 'object' && contour?.color}\n                  onChange={updateColor}\n                />\n              </Col>\n            </StyledRow>\n          </div>\n        </Tabs.TabPane>\n        <Tabs.TabPane\n          className=\"adhoc-filter-edit-tab\"\n          key={ContourTypes.Isoband}\n          tab={t('Isoband')}\n        >\n          <div key={ContourTypes.Isoband} className=\"isoline-popover-section\">\n            <StyledRow>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoband-threshold-lower\"\n                  label={t('Lower Threshold')}\n                  description={t(\n                    'The lower limit of the threshold range of the Isoband',\n                  )}\n                  validationErrors={validationErrors.lowerThreshold}\n                  hovered\n                />\n                <TextControl\n                  value={contour.lowerThreshold || ''}\n                  onChange={updateLowerThreshold}\n                />\n              </Col>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoband-threshold-upper\"\n                  label={t('Upper Threshold')}\n                  description={t(\n                    'The upper limit of the threshold range of the Isoband',\n                  )}\n                  validationErrors={validationErrors.upperThreshold}\n                  hovered\n                />\n                <TextControl\n                  value={contour.upperThreshold || ''}\n                  onChange={updateUpperThreshold}\n                />\n              </Col>\n            </StyledRow>\n            <StyledRow>\n              <Col flex=\"1\">\n                <ControlHeader\n                  name=\"isoband-color\"\n                  label={t('Color')}\n                  description={t('The color of the isoband')}\n                  validationErrors={validationErrors.color}\n                  hovered\n                />\n                <ColorPickerControl\n                  value={contour?.color}\n                  onChange={updateColor}\n                />\n              </Col>\n            </StyledRow>\n          </div>\n        </Tabs.TabPane>\n      </Tabs>\n      <ContourActionsContainer>\n        <Button buttonSize=\"small\" onClick={onClose} cta>\n          {t('Close')}\n        </Button>\n        <Button\n          data-test=\"adhoc-filter-edit-popover-save-button\"\n          disabled={!isComplete || containsErrors()}\n          buttonStyle=\"primary\"\n          buttonSize=\"small\"\n          className=\"m-r-5\"\n          onClick={handleSave}\n          cta\n        >\n          {t('Save')}\n        </Button>\n      </ContourActionsContainer>\n    </>\n  );\n};\n\nexport default ContourPopoverControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState } from 'react';\nimport ContourPopoverControl from './ContourPopoverControl';\nimport ControlPopover from '../ControlPopover/ControlPopover';\nimport { ContourPopoverTriggerProps } from './types';\n\nconst ContourPopoverTrigger = ({\n  value: initialValue,\n  saveContour,\n  isControlled,\n  visible: controlledVisibility,\n  toggleVisibility,\n  ...props\n}: ContourPopoverTriggerProps) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const visible = isControlled ? controlledVisibility : isVisible;\n  const setVisibility =\n    isControlled && toggleVisibility ? toggleVisibility : setIsVisible;\n\n  const popoverContent = (\n    <ContourPopoverControl\n      value={initialValue}\n      onSave={saveContour}\n      onClose={() => setVisibility(false)}\n    />\n  );\n\n  return (\n    <ControlPopover\n      trigger=\"click\"\n      content={popoverContent}\n      defaultVisible={visible}\n      visible={visible}\n      onVisibleChange={setVisibility}\n      destroyTooltipOnHide\n    >\n      {props.children}\n    </ControlPopover>\n  );\n};\n\nexport default ContourPopoverTrigger;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback } from 'react';\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport {\n  CaretContainer,\n  CloseContainer,\n  OptionControlContainer,\n  Label,\n} from 'src/explore/components/controls/OptionControls';\nimport { OptionProps } from 'src/explore/components/controls/DndColumnSelectControl/types';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\n\nconst StyledInfoTooltipWithTrigger = styled(InfoTooltipWithTrigger)`\n  margin: 0 ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport default function Option({\n  children,\n  index,\n  clickClose,\n  withCaret,\n  isExtra,\n  datasourceWarningMessage,\n  canDelete = true,\n}: OptionProps) {\n  const theme = useTheme();\n  const onClickClose = useCallback(\n    e => {\n      e.stopPropagation();\n      clickClose(index);\n    },\n    [clickClose, index],\n  );\n  return (\n    <OptionControlContainer data-test=\"option-label\" withCaret={withCaret}>\n      {canDelete && (\n        <CloseContainer\n          role=\"button\"\n          data-test=\"remove-control-button\"\n          onClick={onClickClose}\n        >\n          <Icons.XSmall iconColor={theme.colors.grayscale.light1} />\n        </CloseContainer>\n      )}\n      <Label data-test=\"control-label\">{children}</Label>\n      {(!!datasourceWarningMessage || isExtra) && (\n        <StyledInfoTooltipWithTrigger\n          icon=\"exclamation-triangle\"\n          placement=\"top\"\n          bsStyle=\"warning\"\n          tooltip={\n            datasourceWarningMessage ||\n            t(`\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              `)\n          }\n        />\n      )}\n      {withCaret && (\n        <CaretContainer>\n          <Icons.CaretRight iconColor={theme.colors.grayscale.light1} />\n        </CaretContainer>\n      )}\n    </OptionControlContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useRef } from 'react';\nimport {\n  useDrag,\n  useDrop,\n  DropTargetMonitor,\n  DragSourceMonitor,\n} from 'react-dnd';\nimport { DragContainer } from 'src/explore/components/controls/OptionControls';\nimport {\n  OptionProps,\n  OptionItemInterface,\n} from 'src/explore/components/controls/DndColumnSelectControl/types';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { StyledColumnOption } from 'src/explore/components/optionRenderers';\nimport { styled, isAdhocColumn } from '@superset-ui/core';\nimport { ColumnMeta } from '@superset-ui/chart-controls';\nimport Option from './Option';\n\nexport const OptionLabel = styled.div`\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nexport default function OptionWrapper(\n  props: OptionProps & {\n    type: string;\n    onShiftOptions: (dragIndex: number, hoverIndex: number) => void;\n  },\n) {\n  const {\n    index,\n    label,\n    tooltipTitle,\n    column,\n    type,\n    onShiftOptions,\n    clickClose,\n    withCaret,\n    isExtra,\n    datasourceWarningMessage,\n    canDelete = true,\n    tooltipOverlay,\n    ...rest\n  } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  const labelRef = useRef<HTMLDivElement>(null);\n\n  const [{ isDragging }, drag] = useDrag({\n    item: {\n      type,\n      dragIndex: index,\n    },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, drop] = useDrop({\n    accept: type,\n\n    hover: (item: OptionItemInterface, monitor: DropTargetMonitor) => {\n      if (!ref.current) {\n        return;\n      }\n      const { dragIndex } = item;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n      // Get pixels to the top\n      const hoverClientY = clientOffset\n        ? clientOffset.y - hoverBoundingRect.top\n        : 0;\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      onShiftOptions(dragIndex, hoverIndex);\n      // eslint-disable-next-line no-param-reassign\n      item.dragIndex = hoverIndex;\n    },\n  });\n\n  const shouldShowTooltip =\n    (!isDragging && tooltipTitle && label && tooltipTitle !== label) ||\n    (!isDragging &&\n      labelRef &&\n      labelRef.current &&\n      labelRef.current.scrollWidth > labelRef.current.clientWidth) ||\n    (!isDragging && tooltipOverlay);\n\n  const LabelContent = () => {\n    if (!shouldShowTooltip) {\n      return <span>{label}</span>;\n    }\n    if (tooltipOverlay) {\n      return (\n        <Tooltip overlay={tooltipOverlay}>\n          <span>{label}</span>\n        </Tooltip>\n      );\n    }\n    return (\n      <Tooltip title={tooltipTitle || label}>\n        <span>{label}</span>\n      </Tooltip>\n    );\n  };\n\n  const ColumnOption = () => {\n    const transformedCol =\n      column && isAdhocColumn(column)\n        ? { verbose_name: column.label, expression: column.sqlExpression }\n        : column;\n    return (\n      <StyledColumnOption\n        column={transformedCol as ColumnMeta}\n        labelRef={labelRef}\n        showType\n      />\n    );\n  };\n\n  const Label = () => {\n    if (label) {\n      return (\n        <OptionLabel ref={labelRef}>\n          <LabelContent />\n        </OptionLabel>\n      );\n    }\n    if (column) {\n      return (\n        <OptionLabel>\n          <ColumnOption />\n        </OptionLabel>\n      );\n    }\n    return null;\n  };\n\n  drag(drop(ref));\n\n  return (\n    <DragContainer ref={ref} {...rest}>\n      <Option\n        index={index}\n        clickClose={clickClose}\n        withCaret={withCaret}\n        isExtra={isExtra}\n        datasourceWarningMessage={datasourceWarningMessage}\n        canDelete={canDelete}\n      >\n        <Label />\n      </Option>\n    </DragContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { styled, t } from '@superset-ui/core';\nimport { ContourOptionProps } from './types';\nimport ContourPopoverTrigger from './ContourPopoverTrigger';\nimport OptionWrapper from '../DndColumnSelectControl/OptionWrapper';\n\nconst StyledOptionWrapper = styled(OptionWrapper)`\n  max-width: 100%;\n  min-width: 100%;\n`;\n\nconst StyledListItem = styled.li`\n  display: flex;\n  align-items: center;\n`;\n\nconst ColorPatch = styled.div<{ formattedColor: string }>`\n  background-color: ${({ formattedColor }) => formattedColor};\n  height: ${({ theme }) => theme.gridUnit}px;\n  width: ${({ theme }) => theme.gridUnit}px;\n  margin: 0 ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst ContourOption = ({\n  contour,\n  index,\n  saveContour,\n  onClose,\n  onShift,\n}: ContourOptionProps) => {\n  const { lowerThreshold, upperThreshold, color, strokeWidth } = contour;\n\n  const isIsoband = upperThreshold;\n\n  const formattedColor = color\n    ? `rgba(${color.r}, ${color.g}, ${color.b}, 1)`\n    : 'undefined';\n\n  const formatIsoline = (threshold: number, width: number) =>\n    `${t('Threshold')}: ${threshold}, ${t('color')}: ${formattedColor}, ${t(\n      'stroke width',\n    )}: ${width}`;\n\n  const formatIsoband = (threshold: number[]) =>\n    `${t('Threshold')}: [${threshold[0]}, ${\n      threshold[1]\n    }], color: ${formattedColor}`;\n\n  const displayString = isIsoband\n    ? formatIsoband([lowerThreshold || -1, upperThreshold])\n    : formatIsoline(lowerThreshold || -1, strokeWidth);\n\n  const overlay = (\n    <div className=\"contour-tooltip-overlay\">\n      <StyledListItem>\n        {t('Threshold: ')}\n        {isIsoband\n          ? `[${lowerThreshold}, ${upperThreshold}]`\n          : `${lowerThreshold}`}\n      </StyledListItem>\n      <StyledListItem>\n        {t('Color: ')}\n        <ColorPatch formattedColor={formattedColor} /> {formattedColor}\n      </StyledListItem>\n      {!isIsoband && (\n        <StyledListItem>{`${t(\n          'Stroke Width:',\n        )} ${strokeWidth}`}</StyledListItem>\n      )}\n    </div>\n  );\n\n  return (\n    <ContourPopoverTrigger saveContour={saveContour} value={contour}>\n      <StyledOptionWrapper\n        index={index}\n        label={displayString}\n        type=\"ContourOption\"\n        withCaret\n        clickClose={onClose}\n        onShiftOptions={onShift}\n        tooltipOverlay={overlay}\n      />\n    </ContourPopoverTrigger>\n  );\n};\n\nexport default ContourOption;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useState, useEffect } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport ContourPopoverTrigger from './ContourPopoverTrigger';\nimport ContourOption from './ContourOption';\nimport { ContourType, ContourControlProps } from './types';\n\nconst DEFAULT_CONTOURS: ContourType[] = [\n  {\n    lowerThreshold: 4,\n    color: { r: 255, g: 0, b: 255, a: 100 },\n    strokeWidth: 1,\n    zIndex: 0,\n  },\n  {\n    lowerThreshold: 5,\n    color: { r: 0, g: 255, b: 0, a: 100 },\n    strokeWidth: 2,\n    zIndex: 1,\n  },\n  {\n    lowerThreshold: 6,\n    upperThreshold: 10,\n    color: { r: 0, g: 0, b: 255, a: 100 },\n    zIndex: 2,\n  },\n];\n\nconst NewContourFormatPlaceholder = styled('div')`\n  position: relative;\n  width: calc(100% - ${({ theme }) => theme.gridUnit}px);\n  bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  left: 0;\n`;\n\nconst ContourControl = ({ onChange, ...props }: ContourControlProps) => {\n  const [popoverVisible, setPopoverVisible] = useState(false);\n  const [contours, setContours] = useState<ContourType[]>(\n    props?.value ? props?.value : DEFAULT_CONTOURS,\n  );\n\n  useEffect(() => {\n    // add z-index to contours\n    const newContours = contours.map((contour, index) => ({\n      ...contour,\n      zIndex: (index + 1) * 10,\n    }));\n    onChange?.(newContours);\n  }, [onChange, contours]);\n\n  const togglePopover = (visible: boolean) => {\n    setPopoverVisible(visible);\n  };\n\n  const handleClickGhostButton = () => {\n    togglePopover(true);\n  };\n\n  const saveContour = (contour: ContourType) => {\n    setContours([...contours, contour]);\n    togglePopover(false);\n  };\n\n  const removeContour = (index: number) => {\n    const newContours = [...contours];\n    newContours.splice(index, 1);\n    setContours(newContours);\n  };\n\n  const onShiftContour = (hoverIndex: number, dragIndex: number) => {\n    const newContours = [...contours];\n    [newContours[hoverIndex], newContours[dragIndex]] = [\n      newContours[dragIndex],\n      newContours[hoverIndex],\n    ];\n    setContours(newContours);\n  };\n\n  const editContour = (contour: ContourType, index: number) => {\n    const newContours = [...contours];\n    newContours[index] = contour;\n    setContours(newContours);\n  };\n\n  const valuesRenderer = () =>\n    contours.map((contour, index) => (\n      <ContourOption\n        key={index}\n        saveContour={(newContour: ContourType) =>\n          editContour(newContour, index)\n        }\n        contour={contour}\n        index={index}\n        onClose={removeContour}\n        onShift={onShiftContour}\n      />\n    ));\n\n  const ghostButtonText = t('Click to add a contour');\n\n  return (\n    <>\n      <DndSelectLabel\n        onDrop={() => {}}\n        canDrop={() => true}\n        valuesRenderer={valuesRenderer}\n        accept={[]}\n        ghostButtonText={ghostButtonText}\n        onClickGhostButton={handleClickGhostButton}\n        {...props}\n      />\n      <ContourPopoverTrigger\n        saveContour={saveContour}\n        isControlled\n        visible={popoverVisible}\n        toggleVisibility={setPopoverVisible}\n      >\n        <NewContourFormatPlaceholder />\n      </ContourPopoverTrigger>\n    </>\n  );\n};\n\nexport default ContourControl;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ColumnMeta, isColumnMeta } from '@superset-ui/chart-controls';\nimport {\n  AdhocColumn,\n  ensureIsArray,\n  QueryFormColumn,\n  isPhysicalColumn,\n  t,\n} from '@superset-ui/core';\n\nconst getColumnNameOrAdhocColumn = (\n  column: ColumnMeta | AdhocColumn,\n): QueryFormColumn => {\n  if (isColumnMeta(column)) {\n    return column.column_name;\n  }\n  return column as AdhocColumn;\n};\n\nexport class OptionSelector {\n  values: (ColumnMeta | AdhocColumn)[];\n\n  options: Record<string, ColumnMeta>;\n\n  multi: boolean;\n\n  constructor(\n    options: Record<string, ColumnMeta>,\n    multi: boolean,\n    initialValues?: QueryFormColumn[] | QueryFormColumn | null,\n  ) {\n    this.options = options;\n    this.multi = multi;\n    this.values = ensureIsArray(initialValues)\n      .map(value => {\n        if (value && isPhysicalColumn(value) && value in options) {\n          return options[value];\n        }\n        if (!isPhysicalColumn(value)) {\n          return value;\n        }\n        return {\n          type_generic: 'UNKNOWN',\n          column_name: value,\n          error_text: t(\n            'This column might be incompatible with current dataset',\n          ),\n        };\n      })\n      .filter(Boolean) as ColumnMeta[];\n  }\n\n  add(value: QueryFormColumn) {\n    if (isPhysicalColumn(value) && value in this.options) {\n      this.values.push(this.options[value]);\n    } else if (!isPhysicalColumn(value)) {\n      this.values.push(value as AdhocColumn);\n    }\n  }\n\n  del(idx: number) {\n    this.values.splice(idx, 1);\n  }\n\n  replace(idx: number, value: QueryFormColumn) {\n    if (this.values[idx]) {\n      this.values[idx] = isPhysicalColumn(value) ? this.options[value] : value;\n    }\n  }\n\n  swap(a: number, b: number) {\n    [this.values[a], this.values[b]] = [this.values[b], this.values[a]];\n  }\n\n  has(value: QueryFormColumn): boolean {\n    return this.values.some(col => {\n      if (isPhysicalColumn(value)) {\n        return (\n          (col as ColumnMeta).column_name === value ||\n          (col as AdhocColumn).label === value\n        );\n      }\n      return (\n        (col as ColumnMeta).column_name === value.label ||\n        (col as AdhocColumn).label === value.label\n      );\n    });\n  }\n\n  getValues(): QueryFormColumn[] | QueryFormColumn | undefined {\n    if (!this.multi) {\n      return this.values.length > 0\n        ? getColumnNameOrAdhocColumn(this.values[0])\n        : undefined;\n    }\n    return this.values.map(getColumnNameOrAdhocColumn);\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable camelcase */\nimport {\n  Dispatch,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  AdhocColumn,\n  isAdhocColumn,\n  t,\n  styled,\n  css,\n  DatasourceType,\n} from '@superset-ui/core';\nimport { ColumnMeta, isSavedExpression } from '@superset-ui/chart-controls';\nimport Tabs from 'src/components/Tabs';\nimport Button from 'src/components/Button';\nimport { Select } from 'src/components';\n\nimport { Form, FormItem } from 'src/components/Form';\nimport sqlKeywords from 'src/SqlLab/utils/sqlKeywords';\nimport { SQLEditor } from 'src/components/AsyncAceEditor';\nimport { EmptyStateSmall } from 'src/components/EmptyState';\nimport { getColumnKeywords } from 'src/explore/controlUtils/getColumnKeywords';\nimport { StyledColumnOption } from 'src/explore/components/optionRenderers';\nimport {\n  POPOVER_INITIAL_HEIGHT,\n  POPOVER_INITIAL_WIDTH,\n} from 'src/explore/constants';\nimport { ExplorePageState } from 'src/explore/types';\nimport useResizeButton from './useResizeButton';\n\nconst StyledSelect = styled(Select)`\n  .metric-option {\n    & > svg {\n      min-width: ${({ theme }) => `${theme.gridUnit * 4}px`};\n    }\n    & > .option-label {\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n`;\n\nexport interface ColumnSelectPopoverProps {\n  columns: ColumnMeta[];\n  editedColumn?: ColumnMeta | AdhocColumn;\n  onChange: (column: ColumnMeta | AdhocColumn) => void;\n  onClose: () => void;\n  hasCustomLabel: boolean;\n  setLabel: (title: string) => void;\n  getCurrentTab: (tab: string) => void;\n  label: string;\n  isTemporal?: boolean;\n  setDatasetModal?: Dispatch<SetStateAction<boolean>>;\n  disabledTabs?: Set<string>;\n}\n\nconst getInitialColumnValues = (\n  editedColumn?: ColumnMeta | AdhocColumn,\n): [AdhocColumn?, ColumnMeta?, ColumnMeta?] => {\n  if (!editedColumn) {\n    return [undefined, undefined, undefined];\n  }\n  if (isAdhocColumn(editedColumn)) {\n    return [editedColumn, undefined, undefined];\n  }\n  if (isSavedExpression(editedColumn)) {\n    return [undefined, editedColumn, undefined];\n  }\n  return [undefined, undefined, editedColumn];\n};\n\nconst ColumnSelectPopover = ({\n  columns,\n  editedColumn,\n  getCurrentTab,\n  hasCustomLabel,\n  isTemporal,\n  label,\n  onChange,\n  onClose,\n  setDatasetModal,\n  setLabel,\n  disabledTabs = new Set<'saved' | 'simple' | 'sqlExpression'>(),\n}: ColumnSelectPopoverProps) => {\n  const datasourceType = useSelector<ExplorePageState, string | undefined>(\n    state => state.explore.datasource.type,\n  );\n  const [initialLabel] = useState(label);\n  const [initialAdhocColumn, initialCalculatedColumn, initialSimpleColumn] =\n    getInitialColumnValues(editedColumn);\n\n  const [adhocColumn, setAdhocColumn] = useState<AdhocColumn | undefined>(\n    initialAdhocColumn,\n  );\n  const [selectedCalculatedColumn, setSelectedCalculatedColumn] = useState<\n    ColumnMeta | undefined\n  >(initialCalculatedColumn);\n  const [selectedSimpleColumn, setSelectedSimpleColumn] = useState<\n    ColumnMeta | undefined\n  >(initialSimpleColumn);\n  const [selectedTab, setSelectedTab] = useState<string | null>(null);\n\n  const [resizeButton, width, height] = useResizeButton(\n    POPOVER_INITIAL_WIDTH,\n    POPOVER_INITIAL_HEIGHT,\n  );\n\n  const sqlEditorRef = useRef(null);\n\n  const [calculatedColumns, simpleColumns] = useMemo(\n    () =>\n      columns?.reduce(\n        (acc: [ColumnMeta[], ColumnMeta[]], column: ColumnMeta) => {\n          if (column.expression) {\n            acc[0].push(column);\n          } else {\n            acc[1].push(column);\n          }\n          return acc;\n        },\n        [[], []],\n      ),\n    [columns],\n  );\n\n  const onSqlExpressionChange = useCallback(\n    sqlExpression => {\n      setAdhocColumn({ label, sqlExpression, expressionType: 'SQL' });\n      setSelectedSimpleColumn(undefined);\n      setSelectedCalculatedColumn(undefined);\n    },\n    [label],\n  );\n\n  const onCalculatedColumnChange = useCallback(\n    selectedColumnName => {\n      const selectedColumn = calculatedColumns.find(\n        col => col.column_name === selectedColumnName,\n      );\n      setSelectedCalculatedColumn(selectedColumn);\n      setSelectedSimpleColumn(undefined);\n      setAdhocColumn(undefined);\n      setLabel(\n        selectedColumn?.verbose_name || selectedColumn?.column_name || '',\n      );\n    },\n    [calculatedColumns, setLabel],\n  );\n\n  const onSimpleColumnChange = useCallback(\n    selectedColumnName => {\n      const selectedColumn = simpleColumns.find(\n        col => col.column_name === selectedColumnName,\n      );\n      setSelectedCalculatedColumn(undefined);\n      setSelectedSimpleColumn(selectedColumn);\n      setAdhocColumn(undefined);\n      setLabel(\n        selectedColumn?.verbose_name || selectedColumn?.column_name || '',\n      );\n    },\n    [setLabel, simpleColumns],\n  );\n\n  const defaultActiveTabKey = initialAdhocColumn\n    ? 'sqlExpression'\n    : selectedCalculatedColumn\n      ? 'saved'\n      : 'simple';\n\n  useEffect(() => {\n    getCurrentTab(defaultActiveTabKey);\n    setSelectedTab(defaultActiveTabKey);\n  }, [defaultActiveTabKey, getCurrentTab, setSelectedTab]);\n\n  useEffect(() => {\n    /* if the adhoc column is not set (because it was never edited) but the\n     * tab is selected and the label has changed, then we need to set the\n     * adhoc column manually */\n    if (\n      adhocColumn === undefined &&\n      selectedTab === 'sqlExpression' &&\n      hasCustomLabel\n    ) {\n      const sqlExpression =\n        selectedSimpleColumn?.column_name ||\n        selectedCalculatedColumn?.expression ||\n        '';\n      setAdhocColumn({ label, sqlExpression, expressionType: 'SQL' });\n    }\n  }, [\n    adhocColumn,\n    defaultActiveTabKey,\n    hasCustomLabel,\n    getCurrentTab,\n    label,\n    selectedCalculatedColumn,\n    selectedSimpleColumn,\n    selectedTab,\n  ]);\n\n  const onSave = useCallback(() => {\n    if (adhocColumn && adhocColumn.label !== label) {\n      adhocColumn.label = label;\n    }\n    const selectedColumn =\n      adhocColumn || selectedCalculatedColumn || selectedSimpleColumn;\n    if (!selectedColumn) {\n      return;\n    }\n    onChange(selectedColumn);\n    onClose();\n  }, [\n    adhocColumn,\n    label,\n    onChange,\n    onClose,\n    selectedCalculatedColumn,\n    selectedSimpleColumn,\n  ]);\n\n  const onResetStateAndClose = useCallback(() => {\n    setSelectedCalculatedColumn(initialCalculatedColumn);\n    setSelectedSimpleColumn(initialSimpleColumn);\n    setAdhocColumn(initialAdhocColumn);\n    onClose();\n  }, [\n    initialAdhocColumn,\n    initialCalculatedColumn,\n    initialSimpleColumn,\n    onClose,\n  ]);\n\n  const onTabChange = useCallback(\n    tab => {\n      getCurrentTab(tab);\n      setSelectedTab(tab);\n      // @ts-ignore\n      sqlEditorRef.current?.editor.focus();\n    },\n    [getCurrentTab],\n  );\n\n  const onSqlEditorFocus = useCallback(() => {\n    // @ts-ignore\n    sqlEditorRef.current?.editor.resize();\n  }, []);\n\n  const setDatasetAndClose = () => {\n    if (setDatasetModal) {\n      setDatasetModal(true);\n    }\n    onClose();\n  };\n\n  const stateIsValid =\n    adhocColumn || selectedCalculatedColumn || selectedSimpleColumn;\n  const hasUnsavedChanges =\n    initialLabel !== label ||\n    selectedCalculatedColumn?.column_name !==\n      initialCalculatedColumn?.column_name ||\n    selectedSimpleColumn?.column_name !== initialSimpleColumn?.column_name ||\n    adhocColumn?.sqlExpression !== initialAdhocColumn?.sqlExpression;\n\n  const savedExpressionsLabel = t('Saved expressions');\n  const simpleColumnsLabel = t('Column');\n  const keywords = useMemo(\n    () => sqlKeywords.concat(getColumnKeywords(columns)),\n    [columns],\n  );\n\n  return (\n    <Form layout=\"vertical\" id=\"metrics-edit-popover\">\n      <Tabs\n        id=\"adhoc-metric-edit-tabs\"\n        defaultActiveKey={defaultActiveTabKey}\n        onChange={onTabChange}\n        className=\"adhoc-metric-edit-tabs\"\n        allowOverflow\n        css={css`\n          height: ${height}px;\n          width: ${width}px;\n        `}\n      >\n        <Tabs.TabPane\n          key=\"saved\"\n          tab={t('Saved')}\n          disabled={disabledTabs.has('saved')}\n        >\n          {calculatedColumns.length > 0 ? (\n            <FormItem label={savedExpressionsLabel}>\n              <StyledSelect\n                ariaLabel={savedExpressionsLabel}\n                value={selectedCalculatedColumn?.column_name}\n                onChange={onCalculatedColumnChange}\n                allowClear\n                autoFocus={!selectedCalculatedColumn}\n                placeholder={t('%s column(s)', calculatedColumns.length)}\n                options={calculatedColumns.map(calculatedColumn => ({\n                  value: calculatedColumn.column_name,\n                  label:\n                    calculatedColumn.verbose_name ||\n                    calculatedColumn.column_name,\n                  customLabel: (\n                    <StyledColumnOption column={calculatedColumn} showType />\n                  ),\n                  key: calculatedColumn.column_name,\n                }))}\n              />\n            </FormItem>\n          ) : datasourceType === DatasourceType.Table ? (\n            <EmptyStateSmall\n              image=\"empty.svg\"\n              title={\n                isTemporal\n                  ? t('No temporal columns found')\n                  : t('No saved expressions found')\n              }\n              description={\n                isTemporal\n                  ? t(\n                      'Add calculated temporal columns to dataset in \"Edit datasource\" modal',\n                    )\n                  : t(\n                      'Add calculated columns to dataset in \"Edit datasource\" modal',\n                    )\n              }\n            />\n          ) : (\n            <EmptyStateSmall\n              image=\"empty.svg\"\n              title={\n                isTemporal\n                  ? t('No temporal columns found')\n                  : t('No saved expressions found')\n              }\n              description={\n                isTemporal ? (\n                  <>\n                    <span\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={setDatasetAndClose}\n                    >\n                      {t('Create a dataset')}\n                    </span>{' '}\n                    {t(' to mark a column as a time column')}\n                  </>\n                ) : (\n                  <>\n                    <span\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={setDatasetAndClose}\n                    >\n                      {t('Create a dataset')}\n                    </span>{' '}\n                    {t(' to add calculated columns')}\n                  </>\n                )\n              }\n            />\n          )}\n        </Tabs.TabPane>\n        <Tabs.TabPane\n          key=\"simple\"\n          tab={t('Simple')}\n          disabled={disabledTabs.has('simple')}\n        >\n          {isTemporal && simpleColumns.length === 0 ? (\n            <EmptyStateSmall\n              image=\"empty.svg\"\n              title={t('No temporal columns found')}\n              description={\n                datasourceType === DatasourceType.Table ? (\n                  t('Mark a column as temporal in \"Edit datasource\" modal')\n                ) : (\n                  <>\n                    <span\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={setDatasetAndClose}\n                    >\n                      {t('Create a dataset')}\n                    </span>{' '}\n                    {t(' to mark a column as a time column')}\n                  </>\n                )\n              }\n            />\n          ) : (\n            <FormItem label={simpleColumnsLabel}>\n              <Select\n                ariaLabel={simpleColumnsLabel}\n                value={selectedSimpleColumn?.column_name}\n                onChange={onSimpleColumnChange}\n                allowClear\n                autoFocus={!selectedSimpleColumn}\n                placeholder={t('%s column(s)', simpleColumns.length)}\n                options={simpleColumns.map(simpleColumn => ({\n                  value: simpleColumn.column_name,\n                  label: simpleColumn.verbose_name || simpleColumn.column_name,\n                  customLabel: (\n                    <StyledColumnOption column={simpleColumn} showType />\n                  ),\n                  key: simpleColumn.column_name,\n                }))}\n              />\n            </FormItem>\n          )}\n        </Tabs.TabPane>\n\n        <Tabs.TabPane\n          key=\"sqlExpression\"\n          tab={t('Custom SQL')}\n          disabled={disabledTabs.has('sqlExpression')}\n        >\n          <SQLEditor\n            value={\n              adhocColumn?.sqlExpression ||\n              selectedSimpleColumn?.column_name ||\n              selectedCalculatedColumn?.expression\n            }\n            onFocus={onSqlEditorFocus}\n            showLoadingForImport\n            onChange={onSqlExpressionChange}\n            width=\"100%\"\n            height={`${height - 80}px`}\n            showGutter={false}\n            editorProps={{ $blockScrolling: true }}\n            enableLiveAutocompletion\n            className=\"filter-sql-editor\"\n            wrapEnabled\n            ref={sqlEditorRef}\n            keywords={keywords}\n          />\n        </Tabs.TabPane>\n      </Tabs>\n      <div>\n        <Button buttonSize=\"small\" onClick={onResetStateAndClose} cta>\n          {t('Close')}\n        </Button>\n        <Button\n          disabled={!stateIsValid || !hasUnsavedChanges}\n          buttonStyle=\"primary\"\n          buttonSize=\"small\"\n          onClick={onSave}\n          data-test=\"ColumnEdit#save\"\n          cta\n        >\n          {t('Save')}\n        </Button>\n        {resizeButton}\n      </div>\n    </Form>\n  );\n};\n\nexport default ColumnSelectPopover;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  useCallback,\n  useEffect,\n  useState,\n  MouseEvent as ReactMouseEvent,\n} from 'react';\n\nimport { throttle } from 'lodash';\nimport {\n  POPOVER_INITIAL_HEIGHT,\n  POPOVER_INITIAL_WIDTH,\n} from 'src/explore/constants';\n\nconst RESIZE_THROTTLE_MS = 50;\n\nexport default function useResizeButton(\n  minWidth: number,\n  minHeight: number,\n): [JSX.Element, number, number] {\n  const [width, setWidth] = useState(POPOVER_INITIAL_WIDTH);\n  const [height, setHeight] = useState(POPOVER_INITIAL_HEIGHT);\n  const [clientX, setClientX] = useState(0);\n  const [clientY, setClientY] = useState(0);\n  const [dragStartX, setDragStartX] = useState(0);\n  const [dragStartY, setDragStartY] = useState(0);\n  const [dragStartWidth, setDragStartWidth] = useState(width);\n  const [dragStartHeight, setDragStartHeight] = useState(height);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const onMouseMove = useCallback((ev: MouseEvent): void => {\n    ev.preventDefault();\n    setClientX(ev.clientX);\n    setClientY(ev.clientY);\n  }, []);\n\n  const onMouseUp = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n\n  const onDragDown = useCallback((ev: ReactMouseEvent): void => {\n    setDragStartX(ev.clientX);\n    setDragStartY(ev.clientY);\n    setIsDragging(true);\n  }, []);\n\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', onMouseMove);\n    } else {\n      setDragStartWidth(width);\n      setDragStartHeight(height);\n      document.removeEventListener('mousemove', onMouseMove);\n    }\n  }, [onMouseMove, isDragging]);\n\n  const handleResize = useCallback(\n    throttle(\n      ({\n        dragStartX,\n        dragStartY,\n        dragStartWidth,\n        dragStartHeight,\n        clientX,\n        clientY,\n        minWidth,\n        minHeight,\n      }: {\n        dragStartX: number;\n        dragStartY: number;\n        dragStartWidth: number;\n        dragStartHeight: number;\n        clientX: number;\n        clientY: number;\n        minWidth: number;\n        minHeight: number;\n      }): void => {\n        setWidth(Math.max(dragStartWidth + (clientX - dragStartX), minWidth));\n        setHeight(\n          Math.max(dragStartHeight + (clientY - dragStartY), minHeight),\n        );\n      },\n      RESIZE_THROTTLE_MS,\n    ),\n    [setHeight, setWidth],\n  );\n\n  useEffect(() => {\n    if (isDragging) {\n      handleResize({\n        dragStartX,\n        dragStartY,\n        dragStartWidth,\n        dragStartHeight,\n        clientX,\n        clientY,\n        minWidth,\n        minHeight,\n      });\n    }\n  }, [\n    isDragging,\n    clientX,\n    clientY,\n    dragStartWidth,\n    dragStartHeight,\n    dragStartX,\n    dragStartY,\n  ]);\n\n  useEffect(() => {\n    document.addEventListener('mouseup', onMouseUp);\n    return () => document.removeEventListener('mouseup', onMouseUp);\n  }, [onMouseUp]);\n\n  return [\n    <i\n      role=\"button\"\n      aria-label=\"Resize\"\n      tabIndex={0}\n      onMouseDown={onDragDown}\n      className=\"fa fa-expand edit-popover-resize text-muted\"\n    />,\n    width,\n    height,\n  ];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Tooltip } from 'src/components/Tooltip';\n\nconst StyledInput = styled(Input)`\n  border-radius: ${({ theme }) => theme.borderRadius};\n  height: 26px;\n  padding-left: ${({ theme }) => theme.gridUnit * 2.5}px;\n`;\n\nexport const DndColumnSelectPopoverTitle = ({\n  title,\n  onChange,\n  isEditDisabled,\n  hasCustomLabel,\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const onMouseOver = useCallback(() => {\n    setIsHovered(true);\n  }, []);\n\n  const onMouseOut = useCallback(() => {\n    setIsHovered(false);\n  }, []);\n\n  const onClick = useCallback(() => {\n    setIsEditMode(true);\n  }, []);\n\n  const onBlur = useCallback(() => {\n    setIsEditMode(false);\n  }, []);\n\n  const onInputBlur = useCallback(\n    e => {\n      if (e.target.value === '') {\n        onChange(e);\n      }\n      onBlur();\n    },\n    [onBlur, onChange],\n  );\n\n  const defaultLabel = t('My column');\n\n  if (isEditDisabled) {\n    return <span>{title || defaultLabel}</span>;\n  }\n\n  return isEditMode ? (\n    <StyledInput\n      type=\"text\"\n      placeholder={title}\n      value={hasCustomLabel ? title : ''}\n      autoFocus\n      onChange={onChange}\n      onBlur={onInputBlur}\n    />\n  ) : (\n    <Tooltip placement=\"top\" title={t('Click to edit label')}>\n      <span\n        className=\"AdhocMetricEditPopoverTitle inline-editable\"\n        data-test=\"AdhocMetricEditTitle#trigger\"\n        onMouseOver={onMouseOver}\n        onMouseOut={onMouseOut}\n        onClick={onClick}\n        onBlur={onBlur}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {title || defaultLabel}\n        &nbsp;\n        <i\n          className=\"fa fa-pencil\"\n          style={{ color: isHovered ? 'black' : 'grey' }}\n        />\n      </span>\n    </Tooltip>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useState, ReactNode } from 'react';\n\nimport { useSelector } from 'react-redux';\nimport { AdhocColumn, t, isAdhocColumn } from '@superset-ui/core';\nimport { ColumnMeta, isColumnMeta } from '@superset-ui/chart-controls';\nimport { ExplorePopoverContent } from 'src/explore/components/ExploreContentPopover';\nimport { SaveDatasetModal } from 'src/SqlLab/components/SaveDatasetModal';\nimport ColumnSelectPopover from './ColumnSelectPopover';\nimport { DndColumnSelectPopoverTitle } from './DndColumnSelectPopoverTitle';\nimport ControlPopover from '../ControlPopover/ControlPopover';\n\ninterface ColumnSelectPopoverTriggerProps {\n  columns: ColumnMeta[];\n  editedColumn?: ColumnMeta | AdhocColumn;\n  onColumnEdit: (editedColumn: ColumnMeta | AdhocColumn) => void;\n  isControlledComponent?: boolean;\n  visible?: boolean;\n  togglePopover?: (visible: boolean) => void;\n  closePopover?: () => void;\n  children: ReactNode;\n  isTemporal?: boolean;\n  disabledTabs?: Set<string>;\n}\n\nconst defaultPopoverLabel = t('My column');\nconst editableTitleTab = 'sqlExpression';\n\nconst ColumnSelectPopoverTrigger = ({\n  columns,\n  editedColumn,\n  onColumnEdit,\n  isControlledComponent,\n  children,\n  isTemporal,\n  disabledTabs,\n  ...props\n}: ColumnSelectPopoverTriggerProps) => {\n  // @ts-ignore\n  const datasource = useSelector(state => state.explore.datasource);\n  const [popoverLabel, setPopoverLabel] = useState(defaultPopoverLabel);\n  const [popoverVisible, setPopoverVisible] = useState(false);\n  const [isTitleEditDisabled, setIsTitleEditDisabled] = useState(true);\n  const [hasCustomLabel, setHasCustomLabel] = useState(false);\n  const [showDatasetModal, setDatasetModal] = useState(false);\n\n  let initialPopoverLabel = defaultPopoverLabel;\n  if (editedColumn && isColumnMeta(editedColumn)) {\n    initialPopoverLabel = editedColumn.verbose_name || editedColumn.column_name;\n  } else if (editedColumn && isAdhocColumn(editedColumn)) {\n    initialPopoverLabel = editedColumn.label || defaultPopoverLabel;\n  }\n\n  useEffect(() => {\n    setPopoverLabel(initialPopoverLabel);\n  }, [initialPopoverLabel, popoverVisible]);\n\n  const togglePopover = useCallback((visible: boolean) => {\n    setPopoverVisible(visible);\n  }, []);\n\n  const closePopover = useCallback(() => {\n    setPopoverVisible(false);\n  }, []);\n\n  const { visible, handleTogglePopover, handleClosePopover } =\n    isControlledComponent\n      ? {\n          visible: props.visible,\n          handleTogglePopover: props.togglePopover!,\n          handleClosePopover: props.closePopover!,\n        }\n      : {\n          visible: popoverVisible,\n          handleTogglePopover: togglePopover,\n          handleClosePopover: closePopover,\n        };\n\n  const getCurrentTab = useCallback((tab: string) => {\n    setIsTitleEditDisabled(tab !== editableTitleTab);\n  }, []);\n\n  const overlayContent = useMemo(\n    () => (\n      <ExplorePopoverContent>\n        <ColumnSelectPopover\n          editedColumn={editedColumn}\n          columns={columns}\n          setDatasetModal={setDatasetModal}\n          onClose={handleClosePopover}\n          onChange={onColumnEdit}\n          hasCustomLabel={hasCustomLabel}\n          label={popoverLabel}\n          setLabel={setPopoverLabel}\n          getCurrentTab={getCurrentTab}\n          isTemporal={isTemporal}\n          disabledTabs={disabledTabs}\n        />\n      </ExplorePopoverContent>\n    ),\n    [\n      columns,\n      editedColumn,\n      getCurrentTab,\n      hasCustomLabel,\n      handleClosePopover,\n      isTemporal,\n      onColumnEdit,\n      popoverLabel,\n      disabledTabs,\n    ],\n  );\n\n  const onLabelChange = useCallback(\n    (e: any) => {\n      setPopoverLabel(e.target.value);\n      setHasCustomLabel(true);\n    },\n    [setPopoverLabel, setHasCustomLabel],\n  );\n\n  const popoverTitle = useMemo(\n    () => (\n      <DndColumnSelectPopoverTitle\n        title={popoverLabel}\n        onChange={onLabelChange}\n        isEditDisabled={isTitleEditDisabled}\n        hasCustomLabel={hasCustomLabel}\n      />\n    ),\n    [hasCustomLabel, isTitleEditDisabled, onLabelChange, popoverLabel],\n  );\n\n  return (\n    <>\n      {showDatasetModal && (\n        <SaveDatasetModal\n          visible={showDatasetModal}\n          onHide={() => setDatasetModal(false)}\n          buttonTextOnSave={t('Save')}\n          buttonTextOnOverwrite={t('Overwrite')}\n          modalDescription={t(\n            'Save this query as a virtual dataset to continue exploring',\n          )}\n          datasource={datasource}\n        />\n      )}\n      <ControlPopover\n        trigger=\"click\"\n        content={overlayContent}\n        defaultVisible={visible}\n        visible={visible}\n        onVisibleChange={handleTogglePopover}\n        title={popoverTitle}\n        destroyTooltipOnHide\n      >\n        {children}\n      </ControlPopover>\n    </>\n  );\n};\n\nexport default ColumnSelectPopoverTrigger;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport AdhocFilterPopoverTrigger from 'src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger';\nimport AdhocFilter from 'src/explore/components/controls/FilterControl/AdhocFilter';\nimport { OptionSortType } from 'src/explore/types';\nimport { useGetTimeRangeLabel } from 'src/explore/components/controls/FilterControl/utils';\nimport OptionWrapper from './OptionWrapper';\n\nexport interface DndAdhocFilterOptionProps {\n  adhocFilter: AdhocFilter;\n  onFilterEdit: (changedFilter: AdhocFilter) => void;\n  onClickClose: (index: number) => void;\n  onShiftOptions: (dragIndex: number, hoverIndex: number) => void;\n  options: OptionSortType[];\n  datasource: Record<string, any>;\n  partitionColumn?: string;\n  index: number;\n}\n\nexport default function DndAdhocFilterOption({\n  adhocFilter,\n  options,\n  datasource,\n  onFilterEdit,\n  onShiftOptions,\n  onClickClose,\n  partitionColumn,\n  index,\n}: DndAdhocFilterOptionProps) {\n  const { actualTimeRange, title } = useGetTimeRangeLabel(adhocFilter);\n\n  return (\n    <AdhocFilterPopoverTrigger\n      key={index}\n      adhocFilter={adhocFilter}\n      options={options}\n      datasource={datasource}\n      onFilterEdit={onFilterEdit}\n      partitionColumn={partitionColumn}\n    >\n      <OptionWrapper\n        key={index}\n        index={index}\n        label={actualTimeRange ?? adhocFilter.getDefaultLabel()}\n        tooltipTitle={title ?? adhocFilter.getTooltipTitle()}\n        clickClose={onClickClose}\n        onShiftOptions={onShiftOptions}\n        type={DndItemType.FilterOption}\n        withCaret\n        isExtra={adhocFilter.isExtra}\n        datasourceWarningMessage={\n          adhocFilter.datasourceWarning\n            ? t('This filter might be incompatible with current dataset')\n            : undefined\n        }\n      />\n    </AdhocFilterPopoverTrigger>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  logging,\n  Metric,\n  QueryFormData,\n  QueryFormMetric,\n  SupersetClient,\n  t,\n} from '@superset-ui/core';\nimport {\n  ColumnMeta,\n  isColumnMeta,\n  isTemporalColumn,\n} from '@superset-ui/chart-controls';\nimport Modal from 'src/components/Modal';\nimport {\n  OPERATOR_ENUM_TO_OPERATOR_TYPE,\n  Operators,\n} from 'src/explore/constants';\nimport { Datasource, OptionSortType } from 'src/explore/types';\nimport { OptionValueType } from 'src/explore/components/controls/DndColumnSelectControl/types';\nimport AdhocFilterPopoverTrigger from 'src/explore/components/controls/FilterControl/AdhocFilterPopoverTrigger';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport AdhocFilter from 'src/explore/components/controls/FilterControl/AdhocFilter';\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\nimport {\n  DatasourcePanelDndItem,\n  DndItemValue,\n  isSavedMetric,\n} from 'src/explore/components/DatasourcePanel/types';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport { ControlComponentProps } from 'src/explore/components/Control';\nimport { toQueryString } from 'src/utils/urlUtils';\nimport DndAdhocFilterOption from './DndAdhocFilterOption';\nimport { useDefaultTimeFilter } from '../DateFilterControl/utils';\nimport { Clauses, ExpressionTypes } from '../FilterControl/types';\n\nconst { warning } = Modal;\n\nconst EMPTY_OBJECT = {};\nconst DND_ACCEPTED_TYPES = [\n  DndItemType.Column,\n  DndItemType.Metric,\n  DndItemType.MetricOption,\n  DndItemType.AdhocMetricOption,\n];\n\nconst isDictionaryForAdhocFilter = (value: OptionValueType) =>\n  !(value instanceof AdhocFilter) && value?.expressionType;\n\nexport interface DndFilterSelectProps\n  extends ControlComponentProps<OptionValueType[]> {\n  columns: ColumnMeta[];\n  savedMetrics: Metric[];\n  selectedMetrics: QueryFormMetric[];\n  datasource: Datasource;\n  canDelete?: (\n    valueToBeDeleted: OptionValueType,\n    values: OptionValueType[],\n  ) => true | string;\n}\n\nconst DndFilterSelect = (props: DndFilterSelectProps) => {\n  const {\n    datasource,\n    onChange = () => {},\n    name: controlName,\n    canDelete,\n  } = props;\n\n  const extra = useMemo<{ disallow_adhoc_metrics?: boolean }>(() => {\n    let extra = {};\n    if (datasource?.extra) {\n      try {\n        extra = JSON.parse(datasource.extra);\n      } catch {} // eslint-disable-line no-empty\n    }\n    return extra;\n  }, [datasource?.extra]);\n\n  const propsValues = Array.from(props.value ?? []);\n  const [values, setValues] = useState(\n    propsValues.map((filter: OptionValueType) =>\n      isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\n    ),\n  );\n  const [partitionColumn, setPartitionColumn] = useState(undefined);\n  const [newFilterPopoverVisible, setNewFilterPopoverVisible] = useState(false);\n  const [droppedItem, setDroppedItem] = useState<\n    DndItemValue | typeof EMPTY_OBJECT\n  >({});\n\n  const optionsForSelect = (\n    columns: ColumnMeta[],\n    formData: QueryFormData | null | undefined,\n  ) => {\n    const options: OptionSortType[] = [\n      ...columns,\n      ...[...(formData?.metrics || []), formData?.metric].map(\n        metric =>\n          metric &&\n          (typeof metric === 'string'\n            ? { saved_metric_name: metric }\n            : new AdhocMetric(metric)),\n      ),\n    ].filter(option => option);\n\n    return options\n      .reduce(\n        (\n          results: (OptionSortType & { filterOptionName: string })[],\n          option,\n        ) => {\n          if ('saved_metric_name' in option && option.saved_metric_name) {\n            results.push({\n              ...option,\n              filterOptionName: option.saved_metric_name,\n            });\n          } else if ('column_name' in option && option.column_name) {\n            results.push({\n              ...option,\n              filterOptionName: `_col_${option.column_name}`,\n            });\n          } else if (option instanceof AdhocMetric) {\n            results.push({\n              ...option,\n              filterOptionName: `_adhocmetric_${option.label}`,\n            });\n          }\n          return results;\n        },\n        [],\n      )\n      .sort(\n        (a: OptionSortType, b: OptionSortType) =>\n          (a.saved_metric_name || a.column_name || a.label)?.localeCompare(\n            b.saved_metric_name || b.column_name || b.label || '',\n          ) ?? 0,\n      );\n  };\n  const [options, setOptions] = useState(\n    optionsForSelect(props.columns, props.formData),\n  );\n\n  const availableColumnSet = useMemo(\n    () =>\n      new Set(\n        options.map(\n          ({ column_name, filterOptionName }) =>\n            column_name ?? filterOptionName,\n        ),\n      ),\n    [options],\n  );\n\n  useEffect(() => {\n    if (datasource && datasource.type === 'table') {\n      const dbId = datasource.database?.id;\n      const {\n        datasource_name: name,\n        catalog,\n        schema,\n        is_sqllab_view: isSqllabView,\n      } = datasource;\n\n      if (!isSqllabView && dbId && name && schema) {\n        SupersetClient.get({\n          endpoint: `/api/v1/database/${dbId}/table_metadata/extra/${toQueryString(\n            {\n              name,\n              catalog,\n              schema,\n            },\n          )}`,\n        })\n          .then(({ json }: { json: Record<string, any> }) => {\n            if (json?.partitions) {\n              const { partitions } = json;\n              // for now only show latest_partition option\n              // when table datasource has only 1 partition key.\n              if (\n                partitions?.cols &&\n                Object.keys(partitions.cols).length === 1\n              ) {\n                setPartitionColumn(partitions.cols[0]);\n              }\n            }\n          })\n          .catch((error: Record<string, any>) => {\n            logging.error('fetch extra_table_metadata:', error.statusText);\n          });\n      }\n    }\n  }, [datasource]);\n\n  useEffect(() => {\n    setOptions(optionsForSelect(props.columns, props.formData));\n  }, [props.columns, props.formData]);\n\n  useEffect(() => {\n    setValues(\n      (props.value || []).map((filter: OptionValueType) =>\n        isDictionaryForAdhocFilter(filter) ? new AdhocFilter(filter) : filter,\n      ),\n    );\n  }, [props.value]);\n\n  const removeValue = useCallback(\n    (index: number) => {\n      const valuesCopy = [...values];\n      valuesCopy.splice(index, 1);\n      setValues(valuesCopy);\n      onChange(valuesCopy);\n    },\n    [onChange, values],\n  );\n\n  const onClickClose = useCallback(\n    (index: number) => {\n      const result = canDelete?.(values[index], values);\n      if (typeof result === 'string') {\n        warning({ title: t('Warning'), content: result });\n        return;\n      }\n      if (result === true) {\n        removeValue(index);\n      }\n    },\n    [canDelete, removeValue, values],\n  );\n\n  const onShiftOptions = useCallback(\n    (dragIndex: number, hoverIndex: number) => {\n      const newValues = [...values];\n      [newValues[hoverIndex], newValues[dragIndex]] = [\n        newValues[dragIndex],\n        newValues[hoverIndex],\n      ];\n      setValues(newValues);\n    },\n    [values],\n  );\n\n  const getMetricExpression = useCallback(\n    (savedMetricName: string) =>\n      props.savedMetrics.find(\n        (savedMetric: Metric) => savedMetric.metric_name === savedMetricName,\n      )?.expression,\n    [props.savedMetrics],\n  );\n\n  const mapOption = useCallback(\n    (option: OptionValueType) => {\n      // already a AdhocFilter, skip\n      if (option instanceof AdhocFilter) {\n        return option;\n      }\n      const filterOptions = option as Record<string, any>;\n      // via datasource saved metric\n      if (filterOptions.saved_metric_name) {\n        return new AdhocFilter({\n          expressionType: ExpressionTypes.Sql,\n          subject: getMetricExpression(filterOptions.saved_metric_name),\n          operator:\n            OPERATOR_ENUM_TO_OPERATOR_TYPE[Operators.GreaterThan].operation,\n          operatorId: Operators.GreaterThan,\n          comparator: 0,\n          clause: Clauses.Having,\n        });\n      }\n      // has a custom label, meaning it's custom column\n      if (filterOptions.label) {\n        return new AdhocFilter({\n          expressionType: ExpressionTypes.Sql,\n          subject: new AdhocMetric(option).translateToSql(),\n          operator:\n            OPERATOR_ENUM_TO_OPERATOR_TYPE[Operators.GreaterThan].operation,\n          operatorId: Operators.GreaterThan,\n          comparator: 0,\n          clause: Clauses.Having,\n        });\n      }\n      // add a new filter item\n      if (filterOptions.column_name) {\n        return new AdhocFilter({\n          expressionType: ExpressionTypes.Simple,\n          subject: filterOptions.column_name,\n          operator: OPERATOR_ENUM_TO_OPERATOR_TYPE[Operators.Equals].operation,\n          operatorId: Operators.Equals,\n          comparator: '',\n          clause: Clauses.Where,\n          isNew: true,\n        });\n      }\n      return null;\n    },\n    [datasource.type, getMetricExpression],\n  );\n\n  const onFilterEdit = useCallback(\n    (changedFilter: AdhocFilter) => {\n      onChange(\n        values.map((value: AdhocFilter) => {\n          if (value.filterOptionName === changedFilter.filterOptionName) {\n            return changedFilter;\n          }\n          return value;\n        }),\n      );\n    },\n    [onChange, values],\n  );\n\n  const onNewFilter = useCallback(\n    (newFilter: AdhocFilter) => {\n      const mappedOption = mapOption(newFilter);\n      if (mappedOption) {\n        const newValues = [...values, mappedOption];\n        setValues(newValues);\n        onChange(newValues);\n      }\n    },\n    [mapOption, onChange, values],\n  );\n\n  const togglePopover = useCallback((visible: boolean) => {\n    setNewFilterPopoverVisible(visible);\n  }, []);\n\n  const closePopover = useCallback(() => {\n    togglePopover(false);\n  }, [togglePopover]);\n\n  const valuesRenderer = useCallback(\n    () =>\n      values.map((adhocFilter: AdhocFilter, index: number) => (\n        <DndAdhocFilterOption\n          index={index}\n          adhocFilter={adhocFilter}\n          options={options}\n          datasource={datasource}\n          onFilterEdit={onFilterEdit}\n          partitionColumn={partitionColumn}\n          onClickClose={onClickClose}\n          onShiftOptions={onShiftOptions}\n        />\n      )),\n    [\n      onClickClose,\n      onFilterEdit,\n      onShiftOptions,\n      options,\n      partitionColumn,\n      datasource,\n      values,\n    ],\n  );\n\n  const handleClickGhostButton = useCallback(() => {\n    setDroppedItem({});\n    togglePopover(true);\n  }, [togglePopover]);\n\n  const defaultTimeFilter = useDefaultTimeFilter();\n  const adhocFilter = useMemo(() => {\n    if (isSavedMetric(droppedItem)) {\n      return new AdhocFilter({\n        expressionType: ExpressionTypes.Sql,\n        clause: Clauses.Having,\n        sqlExpression: droppedItem?.expression,\n      });\n    }\n    if (droppedItem instanceof AdhocMetric) {\n      return new AdhocFilter({\n        expressionType: ExpressionTypes.Sql,\n        clause: Clauses.Having,\n        sqlExpression: (droppedItem as AdhocMetric)?.translateToSql(),\n      });\n    }\n    const config: Partial<AdhocFilter> = {\n      subject: (droppedItem as ColumnMeta)?.column_name,\n    };\n    if (config.subject) {\n      config.operator = OPERATOR_ENUM_TO_OPERATOR_TYPE[Operators.In].operation;\n      config.operatorId = Operators.In;\n    }\n    if (\n      isColumnMeta(droppedItem) &&\n      isTemporalColumn(droppedItem?.column_name, props.datasource)\n    ) {\n      config.operator = Operators.TemporalRange;\n      config.operatorId = Operators.TemporalRange;\n      config.comparator = defaultTimeFilter;\n    }\n    return new AdhocFilter(config);\n  }, [droppedItem]);\n\n  const canDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      if (\n        extra.disallow_adhoc_metrics &&\n        (item.type !== DndItemType.Column ||\n          !availableColumnSet.has((item.value as ColumnMeta).column_name))\n      ) {\n        return false;\n      }\n\n      if (item.type === DndItemType.Column) {\n        const columnName = (item.value as ColumnMeta).column_name;\n        return availableColumnSet.has(columnName);\n      }\n      return true;\n    },\n    [availableColumnSet, extra],\n  );\n\n  const handleDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      setDroppedItem(item.value);\n      togglePopover(true);\n    },\n    [controlName, togglePopover],\n  );\n\n  return (\n    <>\n      <DndSelectLabel\n        onDrop={handleDrop}\n        canDrop={canDrop}\n        valuesRenderer={valuesRenderer}\n        accept={DND_ACCEPTED_TYPES}\n        ghostButtonText={t('Drop columns/metrics here or click')}\n        onClickGhostButton={handleClickGhostButton}\n        {...props}\n      />\n      <AdhocFilterPopoverTrigger\n        adhocFilter={adhocFilter}\n        options={options}\n        datasource={datasource}\n        onFilterEdit={onNewFilter}\n        partitionColumn={partitionColumn}\n        isControlledComponent\n        visible={newFilterPopoverVisible}\n        togglePopover={togglePopover}\n        closePopover={closePopover}\n        requireSave={!!droppedItem}\n      />\n    </>\n  );\n};\n\nexport { DndFilterSelect };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with work for additional information\n * regarding copyright ownership.  The ASF licenses file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  ensureIsArray,\n  GenericDataType,\n  isAdhocMetricSimple,\n  isSavedMetric,\n  Metric,\n  QueryFormMetric,\n  t,\n  tn,\n} from '@superset-ui/core';\nimport { ColumnMeta } from '@superset-ui/chart-controls';\nimport AdhocMetric from 'src/explore/components/controls/MetricControl/AdhocMetric';\nimport AdhocMetricPopoverTrigger from 'src/explore/components/controls/MetricControl/AdhocMetricPopoverTrigger';\nimport MetricDefinitionValue from 'src/explore/components/controls/MetricControl/MetricDefinitionValue';\nimport {\n  DatasourcePanelDndItem,\n  isDatasourcePanelDndItem,\n} from 'src/explore/components/DatasourcePanel/types';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport { savedMetricType } from 'src/explore/components/controls/MetricControl/types';\nimport { AGGREGATES } from 'src/explore/constants';\n\nconst EMPTY_OBJECT = {};\nconst DND_ACCEPTED_TYPES = [DndItemType.Column, DndItemType.Metric];\n\nconst isDictionaryForAdhocMetric = (value: QueryFormMetric) =>\n  value &&\n  !(value instanceof AdhocMetric) &&\n  typeof value !== 'string' &&\n  value.expressionType;\n\nconst coerceMetrics = (\n  addedMetrics: QueryFormMetric | QueryFormMetric[] | undefined | null,\n  savedMetrics: Metric[],\n  columns: ColumnMeta[],\n) => {\n  if (!addedMetrics) {\n    return [];\n  }\n  const metricsCompatibleWithDataset = ensureIsArray(addedMetrics).filter(\n    metric => {\n      if (isAdhocMetricSimple(metric)) {\n        return columns.some(\n          column => column.column_name === metric.column.column_name,\n        );\n      }\n      return true;\n    },\n  );\n\n  return metricsCompatibleWithDataset.map(metric => {\n    if (\n      isSavedMetric(metric) &&\n      !savedMetrics.some(savedMetric => savedMetric.metric_name === metric)\n    ) {\n      return {\n        metric_name: metric,\n        error_text: t('This metric might be incompatible with current dataset'),\n      };\n    }\n    if (!isDictionaryForAdhocMetric(metric)) {\n      return metric;\n    }\n    if (isAdhocMetricSimple(metric)) {\n      const column = columns.find(\n        col => col.column_name === metric.column.column_name,\n      );\n      if (column) {\n        return new AdhocMetric({ ...metric, column });\n      }\n    }\n    return new AdhocMetric(metric);\n  });\n};\n\nconst getOptionsForSavedMetrics = (\n  savedMetrics: savedMetricType[],\n  currentMetricValues: (string | AdhocMetric)[],\n  currentMetric?: string,\n) =>\n  savedMetrics?.filter(savedMetric =>\n    Array.isArray(currentMetricValues)\n      ? !currentMetricValues.includes(savedMetric.metric_name ?? '') ||\n        savedMetric.metric_name === currentMetric\n      : savedMetric,\n  ) ?? [];\n\ntype ValueType = Metric | AdhocMetric | QueryFormMetric;\n\nconst DndMetricSelect = (props: any) => {\n  const { onChange, multi, datasource, savedMetrics } = props;\n\n  const extra = useMemo<{ disallow_adhoc_metrics?: boolean }>(() => {\n    let extra = {};\n    if (datasource?.extra) {\n      try {\n        extra = JSON.parse(datasource.extra);\n      } catch {} // eslint-disable-line no-empty\n    }\n    return extra;\n  }, [datasource?.extra]);\n\n  const savedMetricSet = useMemo(\n    () =>\n      new Set(\n        (savedMetrics as savedMetricType[]).map(\n          ({ metric_name }) => metric_name,\n        ),\n      ),\n    [savedMetrics],\n  );\n\n  const handleChange = useCallback(\n    opts => {\n      // if clear out options\n      if (opts === null) {\n        onChange(null);\n        return;\n      }\n\n      const transformedOpts = ensureIsArray(opts);\n      const optionValues = transformedOpts\n        .map(option => {\n          // pre-defined metric\n          if (option.metric_name) {\n            return option.metric_name;\n          }\n          return option;\n        })\n        .filter(option => option);\n      onChange(multi ? optionValues : optionValues[0]);\n    },\n    [multi, onChange],\n  );\n\n  const [value, setValue] = useState<ValueType[]>(\n    coerceMetrics(props.value, props.savedMetrics, props.columns),\n  );\n  const [droppedItem, setDroppedItem] = useState<\n    DatasourcePanelDndItem | typeof EMPTY_OBJECT\n  >({});\n  const [newMetricPopoverVisible, setNewMetricPopoverVisible] = useState(false);\n\n  useEffect(() => {\n    setValue(coerceMetrics(props.value, props.savedMetrics, props.columns));\n  }, [\n    JSON.stringify(props.value),\n    JSON.stringify(props.savedMetrics),\n    JSON.stringify(props.columns),\n  ]);\n\n  const canDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      if (\n        extra.disallow_adhoc_metrics &&\n        (item.type !== DndItemType.Metric ||\n          !savedMetricSet.has(item.value.metric_name))\n      ) {\n        return false;\n      }\n\n      const isMetricAlreadyInValues =\n        item.type === 'metric' ? value.includes(item.value.metric_name) : false;\n      return !isMetricAlreadyInValues;\n    },\n    [value, extra, savedMetricSet],\n  );\n\n  const onNewMetric = useCallback(\n    (newMetric: Metric) => {\n      const newValue = props.multi ? [...value, newMetric] : [newMetric];\n      setValue(newValue);\n      handleChange(newValue);\n    },\n    [handleChange, props.multi, value],\n  );\n\n  const onMetricEdit = useCallback(\n    (changedMetric: Metric | AdhocMetric, oldMetric: Metric | AdhocMetric) => {\n      if (oldMetric instanceof AdhocMetric && oldMetric.equals(changedMetric)) {\n        return;\n      }\n      const newValue = value.map(value => {\n        if (\n          // compare saved metrics\n          ('metric_name' in oldMetric && value === oldMetric.metric_name) ||\n          // compare adhoc metrics\n          typeof (value as AdhocMetric).optionName !== 'undefined'\n            ? (value as AdhocMetric).optionName ===\n              (oldMetric as AdhocMetric).optionName\n            : false\n        ) {\n          return changedMetric;\n        }\n        return value;\n      });\n      setValue(newValue);\n      handleChange(newValue);\n    },\n    [handleChange, value],\n  );\n\n  const onRemoveMetric = useCallback(\n    (index: number) => {\n      if (!Array.isArray(value)) {\n        return;\n      }\n      const valuesCopy = [...value];\n      valuesCopy.splice(index, 1);\n      setValue(valuesCopy);\n      handleChange(valuesCopy);\n    },\n    [handleChange, value],\n  );\n\n  const moveLabel = useCallback(\n    (dragIndex: number, hoverIndex: number) => {\n      const newValues = [...value];\n      [newValues[hoverIndex], newValues[dragIndex]] = [\n        newValues[dragIndex],\n        newValues[hoverIndex],\n      ];\n      setValue(newValues);\n    },\n    [value],\n  );\n\n  const newSavedMetricOptions = useMemo(\n    () => getOptionsForSavedMetrics(props.savedMetrics, props.value),\n    [props.savedMetrics, props.value],\n  );\n\n  const getSavedMetricOptionsForMetric = useCallback(\n    index =>\n      getOptionsForSavedMetrics(\n        props.savedMetrics,\n        props.value,\n        props.value?.[index],\n      ),\n    [props.savedMetrics, props.value],\n  );\n\n  const handleDropLabel = useCallback(\n    () => onChange(multi ? value : value[0]),\n    [multi, onChange, value],\n  );\n\n  const valueRenderer = useCallback(\n    (option: ValueType, index: number) => (\n      <MetricDefinitionValue\n        key={index}\n        index={index}\n        option={option}\n        onMetricEdit={onMetricEdit}\n        onRemoveMetric={onRemoveMetric}\n        columns={props.columns}\n        savedMetrics={props.savedMetrics}\n        savedMetricsOptions={getSavedMetricOptionsForMetric(index)}\n        datasource={props.datasource}\n        onMoveLabel={moveLabel}\n        onDropLabel={handleDropLabel}\n        type={`${DndItemType.AdhocMetricOption}_${props.name}_${props.label}`}\n        multi={multi}\n        datasourceWarningMessage={\n          option instanceof AdhocMetric && option.datasourceWarning\n            ? t('This metric might be incompatible with current dataset')\n            : undefined\n        }\n      />\n    ),\n    [\n      getSavedMetricOptionsForMetric,\n      handleDropLabel,\n      moveLabel,\n      multi,\n      onMetricEdit,\n      onRemoveMetric,\n      props.columns,\n      props.datasource,\n      props.label,\n      props.name,\n      props.savedMetrics,\n    ],\n  );\n\n  const valuesRenderer = useCallback(\n    () => value.map((value, index) => valueRenderer(value, index)),\n    [value, valueRenderer],\n  );\n\n  const togglePopover = useCallback((visible: boolean) => {\n    setNewMetricPopoverVisible(visible);\n  }, []);\n\n  const closePopover = useCallback(() => {\n    togglePopover(false);\n  }, [togglePopover]);\n\n  const handleDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      if (item.type === DndItemType.Metric) {\n        onNewMetric(item.value as Metric);\n      }\n      if (item.type === DndItemType.Column) {\n        setDroppedItem(item);\n        togglePopover(true);\n      }\n    },\n    [onNewMetric, togglePopover],\n  );\n\n  const handleClickGhostButton = useCallback(() => {\n    setDroppedItem({});\n    togglePopover(true);\n  }, [togglePopover]);\n\n  const adhocMetric = useMemo(() => {\n    if (\n      isDatasourcePanelDndItem(droppedItem) &&\n      droppedItem.type === DndItemType.Column\n    ) {\n      const itemValue = droppedItem.value as ColumnMeta;\n      const config: Partial<AdhocMetric> = {\n        column: itemValue,\n      };\n      if (itemValue.type_generic === GenericDataType.Numeric) {\n        config.aggregate = AGGREGATES.SUM;\n      } else if (\n        itemValue.type_generic === GenericDataType.String ||\n        itemValue.type_generic === GenericDataType.Boolean ||\n        itemValue.type_generic === GenericDataType.Temporal\n      ) {\n        config.aggregate = AGGREGATES.COUNT_DISTINCT;\n      }\n      return new AdhocMetric(config);\n    }\n    return new AdhocMetric({});\n  }, [droppedItem]);\n\n  const ghostButtonText = tn(\n    'Drop a column/metric here or click',\n    'Drop columns/metrics here or click',\n    multi ? 2 : 1,\n  );\n\n  return (\n    <div className=\"metrics-select\">\n      <DndSelectLabel\n        onDrop={handleDrop}\n        canDrop={canDrop}\n        valuesRenderer={valuesRenderer}\n        accept={DND_ACCEPTED_TYPES}\n        ghostButtonText={ghostButtonText}\n        displayGhostButton={multi || value.length === 0}\n        onClickGhostButton={handleClickGhostButton}\n        {...props}\n      />\n      <AdhocMetricPopoverTrigger\n        adhocMetric={adhocMetric}\n        onMetricEdit={onNewMetric}\n        columns={props.columns}\n        savedMetricsOptions={newSavedMetricOptions}\n        savedMetric={EMPTY_OBJECT as savedMetricType}\n        datasource={props.datasource}\n        isControlledComponent\n        visible={newMetricPopoverVisible}\n        togglePopover={togglePopover}\n        closePopover={closePopover}\n        isNew\n      >\n        <div />\n      </AdhocMetricPopoverTrigger>\n    </div>\n  );\n};\n\nexport { DndMetricSelect };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { GenericDataType, t, validateNumber } from '@superset-ui/core';\nimport {\n  ControlFormItemSpec,\n  D3_FORMAT_DOCS,\n  D3_FORMAT_OPTIONS,\n  D3_TIME_FORMAT_DOCS,\n  D3_TIME_FORMAT_OPTIONS,\n} from '@superset-ui/chart-controls';\nimport Icons from 'src/components/Icons';\nimport { ColumnConfigFormLayout } from './types';\n\nexport type SharedColumnConfigProp =\n  | 'alignPositiveNegative'\n  | 'colorPositiveNegative'\n  | 'columnWidth'\n  | 'fractionDigits'\n  | 'd3NumberFormat'\n  | 'd3SmallNumberFormat'\n  | 'd3TimeFormat'\n  | 'horizontalAlign'\n  | 'truncateLongCells'\n  | 'showCellBars'\n  | 'currencyFormat';\n\nconst d3NumberFormat: ControlFormItemSpec<'Select'> = {\n  allowNewOptions: true,\n  controlType: 'Select',\n  label: t('D3 format'),\n  description: D3_FORMAT_DOCS,\n  options: D3_FORMAT_OPTIONS.map(option => ({\n    value: option[0],\n    label: option[1],\n  })),\n  defaultValue: D3_FORMAT_OPTIONS[0][0],\n  creatable: true,\n  minWidth: '14em',\n  debounceDelay: 500,\n};\n\nconst d3TimeFormat: ControlFormItemSpec<'Select'> = {\n  controlType: 'Select',\n  label: t('D3 format'),\n  description: D3_TIME_FORMAT_DOCS,\n  options: D3_TIME_FORMAT_OPTIONS.map(option => ({\n    value: option[0],\n    label: option[1],\n  })),\n  defaultValue: D3_TIME_FORMAT_OPTIONS[0][0],\n  creatable: true,\n  minWidth: '10em',\n  debounceDelay: 500,\n};\n\nconst fractionDigits: ControlFormItemSpec<'Slider'> = {\n  controlType: 'Slider',\n  label: t('Fraction digits'),\n  description: t('Number of decimal digits to round numbers to'),\n  min: 0,\n  step: 1,\n  max: 100,\n  defaultValue: 100,\n};\n\nconst columnWidth: ControlFormItemSpec<'InputNumber'> = {\n  controlType: 'InputNumber',\n  label: t('Min Width'),\n  description: t(\n    \"Default minimal column width in pixels, actual width may still be larger than this if other columns don't need much space\",\n  ),\n  width: 120,\n  placeholder: t('auto'),\n  debounceDelay: 400,\n  validators: [validateNumber],\n};\n\nconst horizontalAlign: ControlFormItemSpec<'RadioButtonControl'> & {\n  value?: 'left' | 'right' | 'center';\n  defaultValue?: 'left' | 'right' | 'center';\n} = {\n  controlType: 'RadioButtonControl',\n  label: t('Text align'),\n  description: t('Horizontal alignment'),\n  width: 130,\n  debounceDelay: 50,\n  defaultValue: 'left',\n  options: [\n    ['left', <Icons.AlignLeftOutlined iconSize=\"m\" />],\n    ['center', <Icons.AlignCenterOutlined iconSize=\"m\" />],\n    ['right', <Icons.AlignRightOutlined iconSize=\"m\" />],\n  ],\n};\n\nconst showCellBars: ControlFormItemSpec<'Checkbox'> = {\n  controlType: 'Checkbox',\n  label: t('Show cell bars'),\n  description: t('Whether to display a bar chart background in table columns'),\n  defaultValue: true,\n  debounceDelay: 200,\n};\n\nconst alignPositiveNegative: ControlFormItemSpec<'Checkbox'> = {\n  controlType: 'Checkbox',\n  label: t('Align +/-'),\n  description: t(\n    'Whether to align positive and negative values in cell bar chart at 0',\n  ),\n  defaultValue: false,\n  debounceDelay: 200,\n};\n\nconst colorPositiveNegative: ControlFormItemSpec<'Checkbox'> = {\n  controlType: 'Checkbox',\n  label: t('Color +/-'),\n  description: t(\n    'Whether to colorize numeric values by if they are positive or negative',\n  ),\n  defaultValue: false,\n  debounceDelay: 200,\n};\n\nconst truncateLongCells: ControlFormItemSpec<'Checkbox'> = {\n  controlType: 'Checkbox',\n  label: t('Truncate Cells'),\n  description: t('Truncate long cells to the \"min width\" set above'),\n  defaultValue: false,\n  debounceDelay: 400,\n};\n\nconst currencyFormat: ControlFormItemSpec<'CurrencyControl'> = {\n  controlType: 'CurrencyControl',\n  label: t('Currency format'),\n  description: t(\n    'Customize chart metrics or columns with currency symbols as prefixes or suffixes. Choose a symbol from dropdown or type your own.',\n  ),\n  debounceDelay: 200,\n};\n/**\n * All configurable column formatting properties.\n */\nexport const SHARED_COLUMN_CONFIG_PROPS = {\n  d3NumberFormat,\n  d3SmallNumberFormat: {\n    ...d3NumberFormat,\n    label: t('Small number format'),\n    description: t(\n      'D3 number format for numbers between -1.0 and 1.0, ' +\n        'useful when you want to have different significant digits for small and large numbers',\n    ),\n  },\n  d3TimeFormat,\n  fractionDigits,\n  columnWidth,\n  truncateLongCells,\n  horizontalAlign,\n  showCellBars,\n  alignPositiveNegative,\n  colorPositiveNegative,\n  currencyFormat,\n};\n\nexport const DEFAULT_CONFIG_FORM_LAYOUT: ColumnConfigFormLayout = {\n  [GenericDataType.String]: [\n    [\n      'columnWidth',\n      { name: 'horizontalAlign', override: { defaultValue: 'left' } },\n    ],\n    ['truncateLongCells'],\n  ],\n  [GenericDataType.Numeric]: [\n    {\n      tab: t('Display'),\n      children: [\n        [\n          'columnWidth',\n          { name: 'horizontalAlign', override: { defaultValue: 'right' } },\n        ],\n        ['showCellBars'],\n        ['alignPositiveNegative'],\n        ['colorPositiveNegative'],\n      ],\n    },\n    {\n      tab: t('Number formatting'),\n      children: [\n        ['d3NumberFormat'],\n        ['d3SmallNumberFormat'],\n        ['currencyFormat'],\n      ],\n    },\n  ],\n  [GenericDataType.Temporal]: [\n    [\n      'columnWidth',\n      { name: 'horizontalAlign', override: { defaultValue: 'left' } },\n    ],\n    ['d3TimeFormat'],\n  ],\n  [GenericDataType.Boolean]: [\n    [\n      'columnWidth',\n      { name: 'horizontalAlign', override: { defaultValue: 'left' } },\n    ],\n  ],\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  GenericDataType,\n  JsonObject,\n  StrictJsonValue,\n} from '@superset-ui/core';\nimport { ControlFormItemSpec } from '@superset-ui/chart-controls';\nimport {\n  SHARED_COLUMN_CONFIG_PROPS,\n  SharedColumnConfigProp,\n} from './constants';\nimport { ControlFormItemComponents } from './ControlForm';\n\n/**\n * Column formatting configs.\n */\nexport type ColumnConfig = {\n  [key in SharedColumnConfigProp]?: (typeof SHARED_COLUMN_CONFIG_PROPS)[key]['value'];\n} & Record<string, StrictJsonValue>;\n\n/**\n * All required info about a column to render the\n * formatting.\n */\nexport interface ColumnConfigInfo {\n  name: string;\n  type?: GenericDataType;\n  config: JsonObject;\n}\n\nexport type ControlFormItemDefaultSpec = ControlFormItemSpec<\n  keyof typeof ControlFormItemComponents\n>;\n\nexport type ColumnConfigFormItem =\n  | SharedColumnConfigProp\n  | {\n      name: SharedColumnConfigProp;\n      override: Partial<ControlFormItemDefaultSpec>;\n    }\n  | { name: string; config: ControlFormItemDefaultSpec };\n\nexport type TabLayoutItem = { tab: string; children: ColumnConfigFormItem[][] };\n\nexport type ColumnConfigFormLayout = Record<\n  GenericDataType,\n  ColumnConfigFormItem[][] | TabLayoutItem[]\n>;\n\nexport function isTabLayoutItem(\n  layoutItem: ColumnConfigFormItem[] | TabLayoutItem,\n): layoutItem is TabLayoutItem {\n  return !!(layoutItem as TabLayoutItem)?.tab;\n}\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { sharedControlComponents } from '@superset-ui/chart-controls';\nimport { Select } from 'src/components';\nimport { Input, InputNumber } from 'src/components/Input';\nimport Slider from 'src/components/Slider';\nimport CurrencyControl from '../../CurrencyControl';\nimport CheckboxControl from '../../CheckboxControl';\n\nexport const ControlFormItemComponents = {\n  Slider,\n  InputNumber,\n  Input,\n  Select,\n  // Directly export Checkbox will result in \"using name from external module\" error\n  // ref: https://stackoverflow.com/questions/43900035/ts4023-exported-variable-x-has-or-is-using-name-y-from-external-module-but\n  Checkbox: CheckboxControl,\n  RadioButtonControl: sharedControlComponents.RadioButtonControl,\n  CurrencyControl,\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, FunctionComponentElement, ChangeEvent } from 'react';\nimport { JsonValue, useTheme } from '@superset-ui/core';\nimport { ControlFormItemComponents } from './controls';\nimport ControlHeader, { ControlHeaderProps } from '../../../ControlHeader';\nimport { ControlFormItemDefaultSpec } from '../types';\n\nexport * from './controls';\n\nexport type ControlFormItemProps = ControlFormItemDefaultSpec & {\n  name: string;\n  onChange?: (fieldValue: JsonValue) => void;\n};\n\nexport type ControlFormItemNode =\n  FunctionComponentElement<ControlFormItemProps>;\n\n/**\n * Accept `false` or `0`, but not empty string.\n */\nfunction isEmptyValue(value?: JsonValue) {\n  return value == null || value === '';\n}\n\nexport function ControlFormItem({\n  name,\n  label,\n  description,\n  width,\n  validators,\n  onChange,\n  value: initialValue,\n  defaultValue,\n  controlType,\n  ...props\n}: ControlFormItemProps) {\n  const { gridUnit } = useTheme();\n  const [hovered, setHovered] = useState(false);\n  const [value, setValue] = useState(\n    initialValue === undefined ? defaultValue : initialValue,\n  );\n  const [validationErrors, setValidationErrors] =\n    useState<ControlHeaderProps['validationErrors']>();\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement> | JsonValue) => {\n    const fieldValue =\n      e && typeof e === 'object' && 'target' in e\n        ? e.target.type === 'checkbox' || e.target.type === 'radio'\n          ? e.target.checked\n          : e.target.value\n        : e;\n    const errors =\n      (validators\n        ?.map(validator =>\n          isEmptyValue(fieldValue) ? false : validator(fieldValue),\n        )\n        .filter(x => !!x) as string[]) || [];\n    setValidationErrors(errors);\n    setValue(fieldValue);\n    if (errors.length === 0 && onChange) {\n      onChange(fieldValue as JsonValue);\n    }\n  };\n\n  const Control = ControlFormItemComponents[controlType];\n\n  return (\n    <div\n      css={{\n        margin: 2 * gridUnit,\n        width,\n        maxWidth: '100%',\n        flex: 1,\n      }}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n    >\n      {controlType === 'Checkbox' ? (\n        <ControlFormItemComponents.Checkbox\n          value={value as boolean}\n          onChange={handleChange}\n          name={name}\n          label={label}\n          description={description}\n          validationErrors={validationErrors}\n          {...props}\n        />\n      ) : (\n        <>\n          {label && (\n            <ControlHeader\n              name={name}\n              label={label}\n              description={description}\n              validationErrors={validationErrors}\n              hovered={hovered}\n            />\n          )}\n          {/* @ts-ignore */}\n          <Control {...props} value={value} onChange={handleChange} />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default ControlFormItem;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  Children,\n  cloneElement,\n  FunctionComponentElement,\n  useMemo,\n} from 'react';\nimport {\n  FAST_DEBOUNCE,\n  JsonObject,\n  JsonValue,\n  useTheme,\n} from '@superset-ui/core';\nimport { debounce } from 'lodash';\nimport { ControlFormItemNode } from './ControlFormItem';\n\nexport * from './ControlFormItem';\n\nexport type ControlFormRowProps = {\n  children: ControlFormItemNode | ControlFormItemNode[];\n};\n\nexport function ControlFormRow({ children }: ControlFormRowProps) {\n  const { gridUnit } = useTheme();\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexWrap: 'nowrap',\n        marginBottom: gridUnit,\n        maxWidth: '100%',\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\ntype ControlFormRowNode = FunctionComponentElement<ControlFormRowProps>;\n\nexport type ControlFormProps = {\n  /**\n   * Form field values dict.\n   */\n  value?: JsonObject;\n  onChange: (value: JsonObject) => void;\n  children: ControlFormRowNode | ControlFormRowNode[];\n};\n\n/**\n * Light weight form for control panel.\n */\nexport default function ControlForm({\n  onChange,\n  value,\n  children,\n}: ControlFormProps) {\n  const theme = useTheme();\n  const debouncedOnChange = useMemo(\n    () =>\n      ({\n        0: onChange,\n        [FAST_DEBOUNCE]: debounce(onChange, FAST_DEBOUNCE),\n      }) as Record<number, typeof onChange>,\n    [onChange],\n  );\n\n  const updatedChildren = Children.map(children, row => {\n    if ('children' in row.props) {\n      const defaultWidth = Array.isArray(row.props.children)\n        ? `${100 / row.props.children.length}%`\n        : undefined;\n      return cloneElement(row, {\n        children: Children.map(row.props.children, item => {\n          const {\n            name,\n            width,\n            debounceDelay = FAST_DEBOUNCE,\n            onChange: onItemValueChange,\n          } = item.props;\n          return cloneElement(item, {\n            width: width || defaultWidth,\n            value: value?.[name],\n            // remove `debounceDelay` from rendered control item props\n            // so React DevTools don't throw a `invalid prop` warning.\n            debounceDelay: undefined,\n            onChange(fieldValue: JsonValue) {\n              // call `onChange` on each FormItem\n              if (onItemValueChange) {\n                onItemValueChange(fieldValue);\n              }\n              // propagate to the form\n              if (!(debounceDelay in debouncedOnChange)) {\n                debouncedOnChange[debounceDelay] = debounce(\n                  onChange,\n                  debounceDelay,\n                );\n              }\n              debouncedOnChange[debounceDelay]({\n                ...value,\n                [name]: fieldValue,\n              });\n            },\n          });\n        }),\n      });\n    }\n    return row;\n  });\n  return (\n    <div\n      css={{\n        label: {\n          textTransform: 'uppercase',\n          color: theme.colors.text.label,\n          fontSize: theme.typography.sizes.s,\n        },\n      }}\n    >\n      {updatedChildren}\n    </div>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { GenericDataType } from '@superset-ui/core';\nimport Tabs from 'src/components/Tabs';\nimport {\n  SHARED_COLUMN_CONFIG_PROPS,\n  SharedColumnConfigProp,\n} from './constants';\nimport {\n  ColumnConfig,\n  ColumnConfigFormItem,\n  ColumnConfigFormLayout,\n  ColumnConfigInfo,\n  ControlFormItemDefaultSpec,\n  isTabLayoutItem,\n} from './types';\nimport ControlForm, { ControlFormItem, ControlFormRow } from './ControlForm';\n\nexport type ColumnConfigPopoverProps = {\n  column: ColumnConfigInfo;\n  configFormLayout: ColumnConfigFormLayout;\n  onChange: (value: ColumnConfig) => void;\n  width?: number | string;\n  height?: number | string;\n};\n\nexport default function ColumnConfigPopover({\n  column,\n  configFormLayout,\n  onChange,\n}: ColumnConfigPopoverProps) {\n  const renderRow = (row: ColumnConfigFormItem[], i: number) => (\n    <ControlFormRow key={i}>\n      {row.map(meta => {\n        const key = typeof meta === 'string' ? meta : meta.name;\n        const override =\n          typeof meta === 'string'\n            ? {}\n            : 'override' in meta\n              ? meta.override\n              : meta.config;\n        const props = {\n          ...(key in SHARED_COLUMN_CONFIG_PROPS\n            ? SHARED_COLUMN_CONFIG_PROPS[key as SharedColumnConfigProp]\n            : undefined),\n          ...override,\n        } as ControlFormItemDefaultSpec;\n        return <ControlFormItem key={key} name={key} {...props} />;\n      })}\n    </ControlFormRow>\n  );\n\n  const layout =\n    configFormLayout[\n      column.type === undefined ? GenericDataType.String : column.type\n    ];\n\n  if (isTabLayoutItem(layout[0])) {\n    return (\n      <Tabs centered>\n        {layout.map((item, i) =>\n          isTabLayoutItem(item) ? (\n            <Tabs.TabPane tab={item.tab} key={i}>\n              <ControlForm onChange={onChange} value={column.config}>\n                {item.children.map((row, i) => renderRow(row, i))}\n              </ControlForm>\n            </Tabs.TabPane>\n          ) : null,\n        )}\n      </Tabs>\n    );\n  }\n  return (\n    <ControlForm onChange={onChange} value={column.config}>\n      {layout.map((row, i) => renderRow(row as ColumnConfigFormItem[], i))}\n    </ControlForm>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { memo } from 'react';\nimport { useTheme } from '@superset-ui/core';\nimport Popover from 'src/components/Popover';\nimport { ColumnTypeLabel } from '@superset-ui/chart-controls';\nimport ColumnConfigPopover, {\n  ColumnConfigPopoverProps,\n} from './ColumnConfigPopover';\n\nexport type ColumnConfigItemProps = ColumnConfigPopoverProps;\n\nexport default memo(function ColumnConfigItem({\n  column,\n  onChange,\n  configFormLayout,\n  width,\n  height,\n}: ColumnConfigItemProps) {\n  const { colors, gridUnit } = useTheme();\n  const caretWidth = gridUnit * 6;\n  return (\n    <Popover\n      title={column.name}\n      content={() => (\n        <ColumnConfigPopover\n          column={column}\n          onChange={onChange}\n          configFormLayout={configFormLayout}\n        />\n      )}\n      trigger=\"click\"\n      placement=\"right\"\n      overlayInnerStyle={{ width, height }}\n      overlayClassName=\"column-config-popover\"\n    >\n      <div\n        css={{\n          display: 'flex',\n          alignItems: 'center',\n          cursor: 'pointer',\n          padding: `${gridUnit}px ${2 * gridUnit}px`,\n          borderBottom: `1px solid ${colors.grayscale.light2}`,\n          position: 'relative',\n          paddingRight: caretWidth,\n          '&:last-child': {\n            borderBottom: 'none',\n          },\n          '&:hover': {\n            background: colors.grayscale.light4,\n          },\n          '> .fa': {\n            color: colors.grayscale.light2,\n          },\n          '&:hover > .fa': {\n            color: colors.grayscale.light1,\n          },\n        }}\n      >\n        <ColumnTypeLabel type={column.type} />\n        {column.name}\n        <i\n          className=\"fa fa-caret-right\"\n          css={{\n            position: 'absolute',\n            right: 3 * gridUnit,\n            top: 3 * gridUnit,\n          }}\n        />\n      </div>\n    </Popover>\n  );\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { isEmpty, isEqual } from 'lodash';\nimport moment from 'moment';\nimport {\n  BinaryAdhocFilter,\n  css,\n  ensureIsArray,\n  fetchTimeRange,\n  getTimeOffset,\n  parseDttmToDate,\n  SimpleAdhocFilter,\n  t,\n} from '@superset-ui/core';\nimport ControlHeader, {\n  ControlHeaderProps,\n} from 'src/explore/components/ControlHeader';\nimport { RootState } from 'src/views/store';\n\nconst MOMENT_FORMAT = 'YYYY-MM-DD';\n\nconst isTimeRangeEqual = (\n  left: BinaryAdhocFilter[],\n  right: BinaryAdhocFilter[],\n) => isEqual(left, right);\n\nconst isShiftEqual = (left: string[], right: string[]) => isEqual(left, right);\n\ntype ComparisonRangeLabelProps = ControlHeaderProps & {\n  multi?: boolean;\n};\n\nconst oldChoices = {\n  r: 'inherit',\n  y: '1 year ago',\n  m: '1 month ago',\n  w: '1 week ago',\n  c: 'custom',\n};\n\nexport const ComparisonRangeLabel = ({\n  multi = true,\n}: ComparisonRangeLabelProps) => {\n  const [labels, setLabels] = useState<string[]>([]);\n  const currentTimeRangeFilters = useSelector<RootState, BinaryAdhocFilter[]>(\n    state =>\n      state.explore.form_data.adhoc_filters.filter(\n        (adhoc_filter: SimpleAdhocFilter) =>\n          adhoc_filter.operator === 'TEMPORAL_RANGE',\n      ),\n    isTimeRangeEqual,\n  );\n  const previousCustomFilter = useSelector<RootState, BinaryAdhocFilter[]>(\n    state =>\n      state.explore.form_data.adhoc_custom?.filter(\n        (adhoc_filter: SimpleAdhocFilter) =>\n          adhoc_filter.operator === 'TEMPORAL_RANGE',\n      ),\n    isTimeRangeEqual,\n  );\n  const shifts = useSelector<RootState, string[]>(state => {\n    const formData = state.explore.form_data || {};\n    if (!formData?.time_compare) {\n      const previousTimeComparison = formData.time_comparison || '';\n      if (oldChoices.hasOwnProperty(previousTimeComparison)) {\n        const previousChoice = oldChoices[previousTimeComparison];\n        return [previousChoice];\n      }\n    }\n    return formData?.time_compare;\n  }, isShiftEqual);\n  const startDate = useSelector<RootState, string>(\n    state => state.explore.form_data.start_date_offset,\n  );\n\n  useEffect(() => {\n    const shiftsArray = ensureIsArray(shifts);\n    if (\n      isEmpty(currentTimeRangeFilters) ||\n      (isEmpty(shiftsArray) && !startDate)\n    ) {\n      setLabels([]);\n    } else if (!isEmpty(shifts) || startDate) {\n      let useStartDate = startDate;\n      if (!startDate && !isEmpty(previousCustomFilter)) {\n        useStartDate = previousCustomFilter[0]?.comparator.split(' : ')[0];\n        useStartDate = moment(parseDttmToDate(useStartDate)).format(\n          MOMENT_FORMAT,\n        );\n      }\n      const promises = currentTimeRangeFilters.map(filter => {\n        const newShifts = getTimeOffset({\n          timeRangeFilter: filter,\n          shifts: shiftsArray,\n          startDate: useStartDate,\n          includeFutureOffsets: false, // So we don't trigger requests for future dates\n        });\n\n        if (!isEmpty(newShifts)) {\n          return fetchTimeRange(\n            filter.comparator,\n            filter.subject,\n            ensureIsArray(newShifts),\n          );\n        }\n        return Promise.resolve({ value: '' });\n      });\n      Promise.all(promises).then(res => {\n        // access the value property inside the res and set the labels with it in the state\n        setLabels(res.map(r => r.value ?? ''));\n      });\n    }\n  }, [currentTimeRangeFilters, shifts, startDate]);\n\n  return labels.length ? (\n    <>\n      <ControlHeader label={t('Actual range for comparison')} />\n      {labels.flat().map(label => (\n        <>\n          <div\n            css={theme => css`\n              font-size: ${theme.typography.sizes.m}px;\n              color: ${theme.colors.grayscale.dark1};\n            `}\n            key={label}\n          >\n            {label}\n          </div>\n        </>\n      ))}\n    </>\n  ) : null;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { sharedControlComponents } from '@superset-ui/chart-controls';\nimport AnnotationLayerControl from './AnnotationLayerControl';\nimport BoundsControl from './BoundsControl';\nimport CheckboxControl from './CheckboxControl';\nimport CollectionControl from './CollectionControl';\nimport ColorPickerControl from './ColorPickerControl';\nimport ColorSchemeControl from './ColorSchemeControl';\nimport DatasourceControl from './DatasourceControl';\nimport DateFilterControl from './DateFilterControl';\nimport FixedOrMetricControl from './FixedOrMetricControl';\nimport HiddenControl from './HiddenControl';\nimport SelectAsyncControl from './SelectAsyncControl';\nimport SelectControl from './SelectControl';\nimport SliderControl from './SliderControl';\nimport SpatialControl from './SpatialControl';\nimport TextAreaControl from './TextAreaControl';\nimport TextControl from './TextControl';\nimport TimeSeriesColumnControl from './TimeSeriesColumnControl';\nimport TimeOffsetControl from './TimeOffsetControl';\nimport ViewportControl from './ViewportControl';\nimport VizTypeControl from './VizTypeControl';\nimport MetricsControl from './MetricControl/MetricsControl';\nimport AdhocFilterControl from './FilterControl/AdhocFilterControl';\nimport ConditionalFormattingControl from './ConditionalFormattingControl';\nimport ContourControl from './ContourControl';\nimport DndColumnSelectControl, {\n  DndColumnSelect,\n  DndFilterSelect,\n  DndMetricSelect,\n} from './DndColumnSelectControl';\nimport XAxisSortControl from './XAxisSortControl';\nimport CurrencyControl from './CurrencyControl';\nimport ColumnConfigControl from './ColumnConfigControl';\nimport { ComparisonRangeLabel } from './ComparisonRangeLabel';\n\nconst controlMap = {\n  AnnotationLayerControl,\n  BoundsControl,\n  CheckboxControl,\n  CollectionControl,\n  ColorPickerControl,\n  ColorSchemeControl,\n  ColumnConfigControl,\n  CurrencyControl,\n  DatasourceControl,\n  DateFilterControl,\n  DndColumnSelectControl,\n  DndColumnSelect,\n  DndFilterSelect,\n  DndMetricSelect,\n  FixedOrMetricControl,\n  HiddenControl,\n  SelectAsyncControl,\n  SelectControl,\n  SliderControl,\n  SpatialControl,\n  TextAreaControl,\n  TextControl,\n  TimeSeriesColumnControl,\n  ViewportControl,\n  VizTypeControl,\n  MetricsControl,\n  AdhocFilterControl,\n  ConditionalFormattingControl,\n  XAxisSortControl,\n  ContourControl,\n  ComparisonRangeLabel,\n  TimeOffsetControl,\n  ...sharedControlComponents,\n};\nexport default controlMap;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo, useState } from 'react';\nimport {\n  ChartDataResponseResult,\n  useTheme,\n  t,\n  GenericDataType,\n} from '@superset-ui/core';\n\nimport {\n  COLUMN_NAME_ALIASES,\n  ControlComponentProps,\n} from '@superset-ui/chart-controls';\nimport ColumnConfigItem from './ColumnConfigItem';\nimport {\n  ColumnConfigInfo,\n  ColumnConfig,\n  ColumnConfigFormLayout,\n} from './types';\nimport { DEFAULT_CONFIG_FORM_LAYOUT } from './constants';\nimport ControlHeader from '../../ControlHeader';\n\nexport type ColumnConfigControlProps<T extends ColumnConfig> =\n  ControlComponentProps<Record<string, T>> & {\n    queryResponse?: ChartDataResponseResult;\n    configFormLayout?: ColumnConfigFormLayout;\n    appliedColumnNames?: string[];\n    width?: number | string;\n    height?: number | string;\n  };\n\n/**\n * Max number of columns to show by default.\n */\nconst MAX_NUM_COLS = 10;\n\n/**\n * Add per-column config to queried results.\n */\nexport default function ColumnConfigControl<T extends ColumnConfig>({\n  queryResponse,\n  appliedColumnNames = [],\n  value,\n  onChange,\n  configFormLayout = DEFAULT_CONFIG_FORM_LAYOUT,\n  width,\n  height,\n  ...props\n}: ColumnConfigControlProps<T>) {\n  const { colnames: _colnames, coltypes: _coltypes } = queryResponse || {};\n  let colnames: string[] = [];\n  let coltypes: GenericDataType[] = [];\n  if (appliedColumnNames.length === 0) {\n    colnames = _colnames || [];\n    coltypes = _coltypes || [];\n  } else {\n    const appliedCol = new Set(appliedColumnNames);\n    _colnames?.forEach((col, idx) => {\n      if (appliedCol.has(col)) {\n        colnames.push(col);\n        coltypes.push(_coltypes?.[idx] as GenericDataType);\n      }\n    });\n  }\n  const theme = useTheme();\n  const columnConfigs = useMemo(() => {\n    const configs: Record<string, ColumnConfigInfo> = {};\n    colnames?.forEach((col, idx) => {\n      configs[col] = {\n        name: COLUMN_NAME_ALIASES[col] || col,\n        type: coltypes?.[idx],\n        config: value?.[col] || {},\n      };\n    });\n    return configs;\n  }, [value, colnames, coltypes]);\n  const [showAllColumns, setShowAllColumns] = useState(false);\n\n  const getColumnInfo = (col: string) => columnConfigs[col] || {};\n  const setColumnConfig = (col: string, config: T) => {\n    if (onChange) {\n      // Only keep configs for known columns\n      const validConfigs: Record<string, T> =\n        colnames && value\n          ? Object.fromEntries(\n              Object.entries(value).filter(([key]) => colnames.includes(key)),\n            )\n          : { ...value };\n      onChange({\n        ...validConfigs,\n        [col]: config,\n      });\n    }\n  };\n\n  if (!colnames || colnames.length === 0) return null;\n\n  const needShowMoreButton = colnames.length > MAX_NUM_COLS + 2;\n  const cols =\n    needShowMoreButton && !showAllColumns\n      ? colnames.slice(0, MAX_NUM_COLS)\n      : colnames;\n\n  return (\n    <>\n      <ControlHeader {...props} />\n      <div\n        css={{\n          border: `1px solid ${theme.colors.grayscale.light2}`,\n          borderRadius: theme.gridUnit,\n        }}\n      >\n        {cols.map(col => (\n          <ColumnConfigItem\n            key={col}\n            column={getColumnInfo(col)}\n            onChange={config => setColumnConfig(col, config as T)}\n            configFormLayout={configFormLayout}\n            width={width}\n            height={height}\n          />\n        ))}\n        {needShowMoreButton && (\n          <div\n            role=\"button\"\n            tabIndex={-1}\n            css={{\n              padding: theme.gridUnit * 2,\n              textAlign: 'center',\n              cursor: 'pointer',\n              textTransform: 'uppercase',\n              fontSize: theme.typography.sizes.xs,\n              color: theme.colors.text.label,\n              ':hover': {\n                backgroundColor: theme.colors.grayscale.light4,\n              },\n            }}\n            onClick={() => setShowAllColumns(!showAllColumns)}\n          >\n            {showAllColumns ? (\n              <>\n                <i className=\"fa fa-angle-up\" /> &nbsp; {t('Show less columns')}\n              </>\n            ) : (\n              <>\n                <i className=\"fa fa-angle-down\" /> &nbsp;\n                {t('Show all columns')}\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useMemo, useState } from 'react';\nimport {\n  AdhocColumn,\n  tn,\n  QueryFormColumn,\n  t,\n  isAdhocColumn,\n} from '@superset-ui/core';\nimport { ColumnMeta, isColumnMeta } from '@superset-ui/chart-controls';\nimport { isEmpty } from 'lodash';\nimport DndSelectLabel from 'src/explore/components/controls/DndColumnSelectControl/DndSelectLabel';\nimport OptionWrapper from 'src/explore/components/controls/DndColumnSelectControl/OptionWrapper';\nimport { OptionSelector } from 'src/explore/components/controls/DndColumnSelectControl/utils';\nimport { DatasourcePanelDndItem } from 'src/explore/components/DatasourcePanel/types';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport ColumnSelectPopoverTrigger from './ColumnSelectPopoverTrigger';\nimport { DndControlProps } from './types';\n\nexport type DndColumnSelectProps = DndControlProps<QueryFormColumn> & {\n  options: ColumnMeta[];\n  isTemporal?: boolean;\n  disabledTabs?: Set<string>;\n};\n\nfunction DndColumnSelect(props: DndColumnSelectProps) {\n  const {\n    value,\n    options,\n    multi = true,\n    onChange,\n    canDelete = true,\n    ghostButtonText,\n    name,\n    label,\n    isTemporal,\n    disabledTabs,\n  } = props;\n  const [newColumnPopoverVisible, setNewColumnPopoverVisible] = useState(false);\n\n  const optionSelector = useMemo(() => {\n    const optionsMap = Object.fromEntries(\n      options.map(option => [option.column_name, option]),\n    );\n\n    return new OptionSelector(optionsMap, multi, value);\n  }, [multi, options, value]);\n\n  const onDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      const column = item.value as ColumnMeta;\n      if (!optionSelector.multi && !isEmpty(optionSelector.values)) {\n        optionSelector.replace(0, column.column_name);\n      } else {\n        optionSelector.add(column.column_name);\n      }\n      onChange(optionSelector.getValues());\n    },\n    [onChange, optionSelector],\n  );\n\n  const canDrop = useCallback(\n    (item: DatasourcePanelDndItem) => {\n      const columnName = (item.value as ColumnMeta).column_name;\n      return (\n        columnName in optionSelector.options && !optionSelector.has(columnName)\n      );\n    },\n    [optionSelector],\n  );\n\n  const onClickClose = useCallback(\n    (index: number) => {\n      optionSelector.del(index);\n      onChange(optionSelector.getValues());\n    },\n    [onChange, optionSelector],\n  );\n\n  const onShiftOptions = useCallback(\n    (dragIndex: number, hoverIndex: number) => {\n      optionSelector.swap(dragIndex, hoverIndex);\n      onChange(optionSelector.getValues());\n    },\n    [onChange, optionSelector],\n  );\n\n  const valuesRenderer = useCallback(\n    () =>\n      optionSelector.values.map((column, idx) => {\n        const datasourceWarningMessage =\n          isAdhocColumn(column) && column.datasourceWarning\n            ? t('This column might be incompatible with current dataset')\n            : undefined;\n        const withCaret = isAdhocColumn(column) || !column.error_text;\n\n        return (\n          <ColumnSelectPopoverTrigger\n            key={idx}\n            columns={options}\n            onColumnEdit={newColumn => {\n              if (isColumnMeta(newColumn)) {\n                optionSelector.replace(idx, newColumn.column_name);\n              } else {\n                optionSelector.replace(idx, newColumn as AdhocColumn);\n              }\n              onChange(optionSelector.getValues());\n            }}\n            editedColumn={column}\n            isTemporal={isTemporal}\n            disabledTabs={disabledTabs}\n          >\n            <OptionWrapper\n              key={idx}\n              index={idx}\n              clickClose={onClickClose}\n              onShiftOptions={onShiftOptions}\n              type={`${DndItemType.ColumnOption}_${name}_${label}`}\n              canDelete={canDelete}\n              column={column}\n              datasourceWarningMessage={datasourceWarningMessage}\n              withCaret={withCaret}\n            />\n          </ColumnSelectPopoverTrigger>\n        );\n      }),\n    [\n      canDelete,\n      isTemporal,\n      label,\n      name,\n      onChange,\n      onClickClose,\n      onShiftOptions,\n      optionSelector,\n      options,\n    ],\n  );\n\n  const addNewColumnWithPopover = useCallback(\n    (newColumn: ColumnMeta | AdhocColumn) => {\n      if (isColumnMeta(newColumn)) {\n        optionSelector.add(newColumn.column_name);\n      } else {\n        optionSelector.add(newColumn as AdhocColumn);\n      }\n      onChange(optionSelector.getValues());\n    },\n    [onChange, optionSelector],\n  );\n\n  const togglePopover = useCallback((visible: boolean) => {\n    setNewColumnPopoverVisible(visible);\n  }, []);\n\n  const closePopover = useCallback(() => {\n    togglePopover(false);\n  }, [togglePopover]);\n\n  const openPopover = useCallback(() => {\n    togglePopover(true);\n  }, [togglePopover]);\n\n  const labelGhostButtonText = useMemo(\n    () =>\n      ghostButtonText ??\n      tn(\n        'Drop a column here or click',\n        'Drop columns here or click',\n        multi ? 2 : 1,\n      ),\n    [ghostButtonText, multi],\n  );\n\n  return (\n    <div>\n      <DndSelectLabel\n        onDrop={onDrop}\n        canDrop={canDrop}\n        valuesRenderer={valuesRenderer}\n        accept={DndItemType.Column}\n        displayGhostButton={multi || optionSelector.values.length === 0}\n        ghostButtonText={labelGhostButtonText}\n        onClickGhostButton={openPopover}\n        {...props}\n      />\n      <ColumnSelectPopoverTrigger\n        columns={options}\n        onColumnEdit={addNewColumnWithPopover}\n        isControlledComponent\n        togglePopover={togglePopover}\n        closePopover={closePopover}\n        visible={newColumnPopoverVisible}\n        isTemporal={isTemporal}\n        disabledTabs={disabledTabs}\n      >\n        <div />\n      </ColumnSelectPopoverTrigger>\n    </div>\n  );\n}\n\nexport { DndColumnSelect };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ColumnMeta, Metric } from '@superset-ui/chart-controls';\nimport { DndItemType } from '../DndItemType';\n\nexport type DndItemValue = ColumnMeta | Metric;\n\nexport interface DatasourcePanelDndItem {\n  value: DndItemValue;\n  type: DndItemType;\n}\n\nexport function isDatasourcePanelDndItem(\n  item: any,\n): item is DatasourcePanelDndItem {\n  return item?.value && item?.type;\n}\n\nexport function isSavedMetric(item: any): item is Metric {\n  return item?.metric_name;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Input } from 'src/components/Input';\n\ninterface HiddenControlsProps {\n  onChange: () => void;\n  value: string | number | readonly string[] | undefined;\n}\n\nexport default function HiddenControl(props: HiddenControlsProps) {\n  // This wouldn't be necessary but might as well\n  return <Input type=\"hidden\" value={props.value} />;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport Slider from 'src/components/Slider';\nimport ControlHeader, {\n  ControlHeaderProps,\n} from 'src/explore/components/ControlHeader';\n\ntype SliderControlProps = ControlHeaderProps & {\n  onChange: (value: number) => void;\n  value: number;\n  default?: number;\n};\n\nexport default function SliderControl({\n  default: defaultValue,\n  name,\n  label,\n  description,\n  renderTrigger,\n  rightNode,\n  leftNode,\n  validationErrors,\n  hovered,\n  warning,\n  danger,\n  onClick,\n  tooltipOnClick,\n  onChange = () => {},\n  ...rest\n}: SliderControlProps) {\n  const headerProps = {\n    name,\n    label,\n    description,\n    renderTrigger,\n    rightNode,\n    leftNode,\n    validationErrors,\n    onClick,\n    hovered,\n    tooltipOnClick,\n    warning,\n    danger,\n  };\n  return (\n    <>\n      <ControlHeader {...headerProps} />\n      <Slider {...rest} onChange={onChange} defaultValue={defaultValue} />\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport SelectControl from './SelectControl';\n\nexport default function XAxisSortControl(props: {\n  onChange: (val: string | undefined) => void;\n  value: string | null;\n  shouldReset: boolean;\n}) {\n  const [value, setValue] = useState(props.value);\n  useEffect(() => {\n    if (props.shouldReset) {\n      props.onChange(undefined);\n      setValue(null);\n    }\n  }, [props.shouldReset, props.value]);\n\n  return <SelectControl {...props} value={value} />;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode, useCallback, useState, useEffect } from 'react';\nimport { isEqual } from 'lodash';\nimport {\n  ControlType,\n  ControlComponentProps as BaseControlComponentProps,\n} from '@superset-ui/chart-controls';\nimport {\n  styled,\n  JsonValue,\n  QueryFormData,\n  usePrevious,\n} from '@superset-ui/core';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport controlMap from './controls';\n\nexport type ControlProps = {\n  // the actual action dispatcher (via bindActionCreators) has identical\n  // signature to the original action factory.\n  actions: Partial<ExploreActions> & Pick<ExploreActions, 'setControlValue'>;\n  type: ControlType;\n  label?: ReactNode;\n  name: string;\n  description?: ReactNode;\n  tooltipOnClick?: () => ReactNode;\n  places?: number;\n  rightNode?: ReactNode;\n  formData?: QueryFormData | null;\n  value?: JsonValue;\n  validationErrors?: any[];\n  hidden?: boolean;\n  renderTrigger?: boolean;\n  default?: JsonValue;\n  isVisible?: boolean;\n  resetOnHide?: boolean;\n};\n\n/**\n *\n */\nexport type ControlComponentProps<ValueType extends JsonValue = JsonValue> =\n  Omit<ControlProps, 'value'> & BaseControlComponentProps<ValueType>;\n\nconst StyledControl = styled.div`\n  padding-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nexport default function Control(props: ControlProps) {\n  const {\n    actions: { setControlValue },\n    name,\n    type,\n    hidden,\n    isVisible,\n    resetOnHide = true,\n  } = props;\n\n  const [hovered, setHovered] = useState(false);\n  const wasVisible = usePrevious(isVisible);\n  const onChange = useCallback(\n    (value: any, errors: any[]) => setControlValue(name, value, errors),\n    [name, setControlValue],\n  );\n\n  useEffect(() => {\n    if (\n      wasVisible === true &&\n      isVisible === false &&\n      props.default !== undefined &&\n      !isEqual(props.value, props.default) &&\n      resetOnHide\n    ) {\n      // reset control value if setting to invisible\n      setControlValue?.(name, props.default);\n    }\n  }, [\n    name,\n    wasVisible,\n    isVisible,\n    setControlValue,\n    props.value,\n    props.default,\n  ]);\n\n  if (!type || isVisible === false) return null;\n\n  const ControlComponent = typeof type === 'string' ? controlMap[type] : type;\n  if (!ControlComponent) {\n    // eslint-disable-next-line no-console\n    console.warn(`Unknown controlType: ${type}`);\n    return null;\n  }\n\n  return (\n    <StyledControl\n      className=\"Control\"\n      data-test={name}\n      style={hidden ? { display: 'none' } : undefined}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n    >\n      <ErrorBoundary>\n        <ControlComponent onChange={onChange} hovered={hovered} {...props} />\n      </ErrorBoundary>\n    </StyledControl>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { ReactNode } from 'react';\nimport { t } from '@superset-ui/core';\nimport Button from 'src/components/Button';\n\nexport type RunQueryButtonProps = {\n  loading: boolean;\n  onQuery: () => void;\n  onStop: () => void;\n  errorMessage: ReactNode;\n  isNewChart: boolean;\n  canStopQuery: boolean;\n  chartIsStale: boolean;\n};\n\nexport const RunQueryButton = ({\n  loading,\n  onQuery,\n  onStop,\n  errorMessage,\n  isNewChart,\n  canStopQuery,\n  chartIsStale,\n}: RunQueryButtonProps) =>\n  loading ? (\n    <Button onClick={onStop} buttonStyle=\"warning\" disabled={!canStopQuery}>\n      <i className=\"fa fa-stop\" /> {t('Stop')}\n    </Button>\n  ) : (\n    <Button\n      onClick={onQuery}\n      buttonStyle={chartIsStale ? 'primary' : 'secondary'}\n      disabled={!!errorMessage}\n      data-test=\"run-query-button\"\n    >\n      {isNewChart ? t('Create chart') : t('Update chart')}\n    </Button>\n  );\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, FC } from 'react';\n\nimport { useDispatch } from 'react-redux';\nimport { setStashFormData } from 'src/explore/actions/exploreActions';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\n\ntype Props = {\n  shouldStash: boolean;\n  fieldNames: ReadonlyArray<string>;\n};\n\nconst StashFormDataContainer: FC<Props> = ({\n  shouldStash,\n  fieldNames,\n  children,\n}) => {\n  const dispatch = useDispatch();\n  const onVisibleUpdate = useEffectEvent((shouldStash: boolean) =>\n    dispatch(setStashFormData(shouldStash, fieldNames)),\n  );\n  useEffect(() => {\n    onVisibleUpdate(shouldStash);\n  }, [shouldStash, onVisibleUpdate]);\n\n  return <>{children}</>;\n};\n\nexport default StashFormDataContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport {\n  isValidElement,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  ensureIsArray,\n  t,\n  styled,\n  getChartControlPanelRegistry,\n  QueryFormData,\n  DatasourceType,\n  css,\n  SupersetTheme,\n  useTheme,\n  isDefined,\n  JsonValue,\n  NO_TIME_RANGE,\n  usePrevious,\n} from '@superset-ui/core';\nimport {\n  ControlPanelSectionConfig,\n  ControlState,\n  CustomControlItem,\n  Dataset,\n  ExpandedControlItem,\n  isTemporalColumn,\n  sections,\n} from '@superset-ui/chart-controls';\nimport { useSelector } from 'react-redux';\nimport { rgba } from 'emotion-rgba';\nimport { kebabCase, isEqual } from 'lodash';\n\nimport Collapse from 'src/components/Collapse';\nimport Tabs from 'src/components/Tabs';\nimport { PluginContext } from 'src/components/DynamicPlugins';\nimport Loading from 'src/components/Loading';\nimport Modal from 'src/components/Modal';\n\nimport { getSectionsToRender } from 'src/explore/controlUtils';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport { ChartState, ExplorePageState } from 'src/explore/types';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport ControlRow from './ControlRow';\nimport Control from './Control';\nimport { ExploreAlert } from './ExploreAlert';\nimport { RunQueryButton } from './RunQueryButton';\nimport { Operators } from '../constants';\nimport { Clauses } from './controls/FilterControl/types';\nimport StashFormDataContainer from './StashFormDataContainer';\n\nconst { confirm } = Modal;\n\nexport type ControlPanelsContainerProps = {\n  exploreState: ExplorePageState['explore'];\n  actions: ExploreActions;\n  datasource_type: DatasourceType;\n  chart: ChartState;\n  controls: Record<string, ControlState>;\n  form_data: QueryFormData;\n  isDatasourceMetaLoading: boolean;\n  errorMessage: ReactNode;\n  onQuery: () => void;\n  onStop: () => void;\n  canStopQuery: boolean;\n  chartIsStale: boolean;\n};\n\nexport type ExpandedControlPanelSectionConfig = Omit<\n  ControlPanelSectionConfig,\n  'controlSetRows'\n> & {\n  controlSetRows: ExpandedControlItem[][];\n};\n\nconst iconStyles = css`\n  &.anticon {\n    font-size: unset;\n    .anticon {\n      line-height: unset;\n      vertical-align: unset;\n    }\n  }\n`;\n\nconst actionButtonsContainerStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  position: sticky;\n  bottom: 0;\n  flex-direction: column;\n  align-items: center;\n  padding: ${theme.gridUnit * 4}px;\n  z-index: 999;\n  background: linear-gradient(\n    ${rgba(theme.colors.grayscale.light5, 0)},\n    ${theme.colors.grayscale.light5} ${theme.opacity.mediumLight}\n  );\n\n  & > button {\n    min-width: 156px;\n  }\n`;\n\nconst Styles = styled.div`\n  position: relative;\n  height: 100%;\n  width: 100%;\n\n  // Resizable add overflow-y: auto as a style to this div\n  // To override it, we need to use !important\n  overflow: visible !important;\n  #controlSections {\n    height: 100%;\n    overflow: visible;\n  }\n  .nav-tabs {\n    flex: 0 0 1;\n  }\n  .tab-content {\n    overflow: auto;\n    flex: 1 1 100%;\n  }\n  .Select__menu {\n    max-width: 100%;\n  }\n  .type-label {\n    margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    width: ${({ theme }) => theme.gridUnit * 7}px;\n    display: inline-block;\n    text-align: center;\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n`;\n\nconst ControlPanelsTabs = styled(Tabs)`\n  ${({ theme, fullWidth }) => css`\n    height: 100%;\n    overflow: visible;\n    .ant-tabs-nav {\n      margin-bottom: 0;\n    }\n    .ant-tabs-nav-list {\n      width: ${fullWidth ? '100%' : '50%'};\n    }\n    .ant-tabs-tabpane {\n      height: 100%;\n    }\n    .ant-tabs-content-holder {\n      padding-top: ${theme.gridUnit * 4}px;\n    }\n\n    .ant-collapse-ghost > .ant-collapse-item {\n      &:not(:last-child) {\n        border-bottom: 1px solid ${theme.colors.grayscale.light3};\n      }\n\n      & > .ant-collapse-header {\n        font-size: ${theme.typography.sizes.s}px;\n      }\n\n      & > .ant-collapse-content > .ant-collapse-content-box {\n        padding-bottom: 0;\n        font-size: ${theme.typography.sizes.s}px;\n      }\n    }\n  `}\n`;\n\nconst isTimeSection = (section: ControlPanelSectionConfig): boolean =>\n  !!section.label && sections.legacyTimeseriesTime.label === section.label;\n\nconst hasTimeColumn = (datasource: Dataset): boolean =>\n  datasource?.columns?.some(c => c.is_dttm);\nconst sectionsToExpand = (\n  sections: ControlPanelSectionConfig[],\n  datasource: Dataset,\n): string[] =>\n  // avoid expanding time section if datasource doesn't include time column\n  sections.reduce(\n    (acc, section) =>\n      (section.expanded || !section.label) &&\n      (!isTimeSection(section) || hasTimeColumn(datasource))\n        ? [...acc, String(section.label)]\n        : acc,\n    [] as string[],\n  );\n\nfunction getState(\n  vizType: string,\n  datasource: Dataset,\n  datasourceType: DatasourceType,\n) {\n  const querySections: ControlPanelSectionConfig[] = [];\n  const customizeSections: ControlPanelSectionConfig[] = [];\n\n  getSectionsToRender(vizType, datasourceType).forEach(section => {\n    // if at least one control in the section is not `renderTrigger`\n    // or asks to be displayed at the Data tab\n    if (\n      section.tabOverride === 'data' ||\n      section.controlSetRows.some(rows =>\n        rows.some(\n          control =>\n            control &&\n            typeof control === 'object' &&\n            'config' in control &&\n            control.config &&\n            (!control.config.renderTrigger ||\n              control.config.tabOverride === 'data'),\n        ),\n      )\n    ) {\n      querySections.push(section);\n    } else if (section.controlSetRows.length > 0) {\n      customizeSections.push(section);\n    }\n  });\n  const expandedQuerySections: string[] = sectionsToExpand(\n    querySections,\n    datasource,\n  );\n  const expandedCustomizeSections: string[] = sectionsToExpand(\n    customizeSections,\n    datasource,\n  );\n  return {\n    expandedQuerySections,\n    expandedCustomizeSections,\n    querySections,\n    customizeSections,\n  };\n}\n\nfunction useResetOnChangeRef(initialValue: () => any, resetOnChangeValue: any) {\n  const value = useRef(initialValue());\n  const prevResetOnChangeValue = useRef(resetOnChangeValue);\n  if (prevResetOnChangeValue.current !== resetOnChangeValue) {\n    value.current = initialValue();\n    prevResetOnChangeValue.current = resetOnChangeValue;\n  }\n\n  return value;\n}\n\nexport const ControlPanelsContainer = (props: ControlPanelsContainerProps) => {\n  const { colors } = useTheme();\n  const pluginContext = useContext(PluginContext);\n\n  const prevState = usePrevious(props.exploreState);\n  const prevDatasource = usePrevious(props.exploreState.datasource);\n  const prevChartStatus = usePrevious(props.chart.chartStatus);\n\n  const [showDatasourceAlert, setShowDatasourceAlert] = useState(false);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const controlsTransferred = useSelector<\n    ExplorePageState,\n    string[] | undefined\n  >(state => state.explore.controlsTransferred);\n\n  const defaultTimeFilter = useSelector<ExplorePageState>(\n    state => state.common?.conf?.DEFAULT_TIME_FILTER || NO_TIME_RANGE,\n  );\n\n  const { form_data, actions } = props;\n  const { setControlValue } = actions;\n  const { x_axis, adhoc_filters } = form_data;\n\n  const previousXAxis = usePrevious(x_axis);\n\n  useEffect(() => {\n    if (\n      x_axis &&\n      x_axis !== previousXAxis &&\n      isTemporalColumn(x_axis, props.exploreState.datasource)\n    ) {\n      const noFilter = !adhoc_filters?.find(\n        filter =>\n          filter.expressionType === 'SIMPLE' &&\n          filter.operator === Operators.TemporalRange &&\n          filter.subject === x_axis,\n      );\n      if (noFilter) {\n        confirm({\n          title: t('The X-axis is not on the filters list'),\n          content:\n            t(`The X-axis is not on the filters list which will prevent it from being used in\n            time range filters in dashboards. Would you like to add it to the filters list?`),\n          onOk: () => {\n            setControlValue('adhoc_filters', [\n              ...(adhoc_filters || []),\n              {\n                clause: Clauses.Where,\n                subject: x_axis,\n                operator: Operators.TemporalRange,\n                comparator: defaultTimeFilter,\n                expressionType: 'SIMPLE',\n              },\n            ]);\n          },\n        });\n      }\n    }\n  }, [\n    x_axis,\n    adhoc_filters,\n    setControlValue,\n    defaultTimeFilter,\n    previousXAxis,\n    props.exploreState.datasource,\n  ]);\n\n  useEffect(() => {\n    let shouldUpdateControls = false;\n    const removeDatasourceWarningFromControl = (\n      value: JsonValue | undefined,\n    ) => {\n      if (\n        typeof value === 'object' &&\n        isDefined(value) &&\n        'datasourceWarning' in value &&\n        value.datasourceWarning === true\n      ) {\n        shouldUpdateControls = true;\n        return { ...value, datasourceWarning: false };\n      }\n      return value;\n    };\n    if (\n      props.chart.chartStatus === 'success' &&\n      prevChartStatus !== 'success'\n    ) {\n      controlsTransferred?.forEach(controlName => {\n        shouldUpdateControls = false;\n        if (!isDefined(props.controls[controlName])) {\n          return;\n        }\n        const alteredControls = Array.isArray(props.controls[controlName].value)\n          ? ensureIsArray(props.controls[controlName].value)?.map(\n              removeDatasourceWarningFromControl,\n            )\n          : removeDatasourceWarningFromControl(\n              props.controls[controlName].value,\n            );\n        if (shouldUpdateControls) {\n          props.actions.setControlValue(controlName, alteredControls);\n        }\n      });\n    }\n  }, [\n    controlsTransferred,\n    prevChartStatus,\n    props.actions,\n    props.chart.chartStatus,\n    props.controls,\n  ]);\n\n  useEffect(() => {\n    if (\n      prevDatasource &&\n      prevDatasource.type !== DatasourceType.Query &&\n      (props.exploreState.datasource?.id !== prevDatasource.id ||\n        props.exploreState.datasource?.type !== prevDatasource.type)\n    ) {\n      setShowDatasourceAlert(true);\n      containerRef.current?.scrollTo(0, 0);\n    }\n  }, [\n    props.exploreState.datasource?.id,\n    props.exploreState.datasource?.type,\n    prevDatasource,\n  ]);\n\n  const {\n    expandedQuerySections,\n    expandedCustomizeSections,\n    querySections,\n    customizeSections,\n  } = useMemo(\n    () =>\n      getState(\n        form_data.viz_type,\n        props.exploreState.datasource,\n        props.datasource_type,\n      ),\n    [props.exploreState.datasource, form_data.viz_type, props.datasource_type],\n  );\n\n  const resetTransferredControls = useCallback(() => {\n    ensureIsArray(props.exploreState.controlsTransferred).forEach(controlName =>\n      props.actions.setControlValue(\n        controlName,\n        props.controls[controlName].default,\n      ),\n    );\n  }, [props.actions, props.exploreState.controlsTransferred, props.controls]);\n\n  const handleClearFormClick = useCallback(() => {\n    resetTransferredControls();\n    setShowDatasourceAlert(false);\n  }, [resetTransferredControls]);\n\n  const handleContinueClick = useCallback(() => {\n    setShowDatasourceAlert(false);\n  }, []);\n\n  const shouldRecalculateControlState = ({\n    name,\n    config,\n  }: CustomControlItem): boolean => {\n    const { controls, chart, exploreState } = props;\n\n    return Boolean(\n      config.shouldMapStateToProps?.(\n        prevState || exploreState,\n        exploreState,\n        controls[name],\n        chart,\n      ),\n    );\n  };\n\n  const renderControl = ({ name, config }: CustomControlItem) => {\n    const { controls, chart, exploreState } = props;\n    const { visibility, hidden, disableStash, ...restConfig } = config;\n\n    // If the control item is not an object, we have to look up the control data from\n    // the centralized controls file.\n    // When it is an object we read control data straight from `config` instead\n    const controlData = {\n      ...restConfig,\n      ...controls[name],\n      ...(shouldRecalculateControlState({ name, config })\n        ? config?.mapStateToProps?.(exploreState, controls[name], chart)\n        : // for other controls, `mapStateToProps` is already run in\n          // controlUtils/getControlState.ts\n          undefined),\n      name,\n    };\n    const {\n      validationErrors,\n      label: baseLabel,\n      description: baseDescription,\n      ...restProps\n    } = controlData as ControlState & {\n      validationErrors?: any[];\n    };\n\n    const isVisible = visibility\n      ? visibility.call(config, props, controlData)\n      : undefined;\n\n    const isHidden =\n      typeof hidden === 'function'\n        ? hidden.call(config, props, controlData)\n        : hidden;\n\n    const label =\n      typeof baseLabel === 'function'\n        ? baseLabel(exploreState, controls[name], chart)\n        : baseLabel;\n\n    const description =\n      typeof baseDescription === 'function'\n        ? baseDescription(exploreState, controls[name], chart)\n        : baseDescription;\n\n    if (name.includes('adhoc_filters')) {\n      restProps.canDelete = (\n        valueToBeDeleted: Record<string, any>,\n        values: Record<string, any>[],\n      ) => {\n        const isTemporalRange = (filter: Record<string, any>) =>\n          filter.operator === Operators.TemporalRange;\n        if (!controls?.time_range?.value && isTemporalRange(valueToBeDeleted)) {\n          const count = values.filter(isTemporalRange).length;\n          if (count === 1) {\n            // if temporal filter's value is \"No filter\", prevent deletion\n            // otherwise reset the value to \"No filter\"\n            if (valueToBeDeleted.comparator === defaultTimeFilter) {\n              return t(\n                `You cannot delete the last temporal filter as it's used for time range filters in dashboards.`,\n              );\n            }\n            props.actions.setControlValue(\n              name,\n              values.map(val => {\n                if (isEqual(val, valueToBeDeleted)) {\n                  return {\n                    ...val,\n                    comparator: defaultTimeFilter,\n                  };\n                }\n                return val;\n              }),\n            );\n            return false;\n          }\n        }\n        return true;\n      };\n    }\n\n    return (\n      <StashFormDataContainer\n        shouldStash={isVisible === false && disableStash !== true}\n        fieldNames={[name]}\n        key={`control-container-${name}`}\n      >\n        <Control\n          key={`control-${name}`}\n          name={name}\n          label={label}\n          description={description}\n          validationErrors={validationErrors}\n          actions={props.actions}\n          isVisible={isVisible}\n          hidden={isHidden}\n          {...restProps}\n        />\n      </StashFormDataContainer>\n    );\n  };\n\n  const sectionHasHadNoErrors = useResetOnChangeRef(\n    () => ({}),\n    form_data.viz_type,\n  );\n\n  const renderControlPanelSection = (\n    section: ExpandedControlPanelSectionConfig,\n  ) => {\n    const { controls } = props;\n    const { label, description, visibility } = section;\n\n    // Section label can be a ReactNode but in some places we want to\n    // have a string ID. Using forced type conversion for now,\n    // should probably add a `id` field to sections in the future.\n    const sectionId = String(label);\n    const isVisible = visibility?.call(this, props, controls) !== false;\n    const hasErrors = section.controlSetRows.some(rows =>\n      rows.some(item => {\n        const controlName =\n          typeof item === 'string'\n            ? item\n            : item && 'name' in item\n              ? item.name\n              : null;\n        return (\n          controlName &&\n          controlName in controls &&\n          controls[controlName].validationErrors &&\n          controls[controlName].validationErrors.length > 0\n        );\n      }),\n    );\n\n    if (!hasErrors) {\n      sectionHasHadNoErrors.current[sectionId] = true;\n    }\n\n    const errorColor = sectionHasHadNoErrors.current[sectionId]\n      ? colors.error.base\n      : colors.alert.base;\n\n    const PanelHeader = () => (\n      <span data-test=\"collapsible-control-panel-header\">\n        <span\n          css={(theme: SupersetTheme) => css`\n            font-size: ${theme.typography.sizes.m}px;\n            line-height: 1.3;\n          `}\n        >\n          {label}\n        </span>{' '}\n        {description && (\n          <Tooltip id={sectionId} title={description}>\n            <Icons.InfoCircleOutlined css={iconStyles} />\n          </Tooltip>\n        )}\n        {hasErrors && (\n          <Tooltip\n            id={`${kebabCase('validation-errors')}-tooltip`}\n            title={t('This section contains validation errors')}\n          >\n            <Icons.InfoCircleOutlined\n              css={css`\n                ${iconStyles};\n                color: ${errorColor};\n              `}\n            />\n          </Tooltip>\n        )}\n      </span>\n    );\n\n    return (\n      <>\n        <StashFormDataContainer\n          key={`sectionId-${sectionId}`}\n          shouldStash={!isVisible}\n          fieldNames={section.controlSetRows\n            .flat()\n            .map(item =>\n              item && typeof item === 'object'\n                ? 'name' in item\n                  ? item.name\n                  : ''\n                : String(item || ''),\n            )\n            .filter(Boolean)}\n        />\n        {isVisible && (\n          <Collapse.Panel\n            css={theme => css`\n              margin-bottom: 0;\n              box-shadow: none;\n\n              &:last-child {\n                padding-bottom: ${theme.gridUnit * 16}px;\n                border-bottom: 0;\n              }\n\n              .panel-body {\n                margin-left: ${theme.gridUnit * 4}px;\n                padding-bottom: 0;\n              }\n\n              span.label {\n                display: inline-block;\n              }\n              ${!section.label &&\n              `\n          .ant-collapse-header {\n            display: none;\n          }\n        `}\n            `}\n            header={<PanelHeader />}\n            key={sectionId}\n          >\n            {section.controlSetRows.map((controlSets, i) => {\n              const renderedControls = controlSets\n                .map(controlItem => {\n                  if (!controlItem) {\n                    // When the item is invalid\n                    return null;\n                  }\n                  if (isValidElement(controlItem)) {\n                    // When the item is a React element\n                    return controlItem;\n                  }\n                  if (\n                    controlItem.name &&\n                    controlItem.config &&\n                    controlItem.name !== 'datasource'\n                  ) {\n                    return renderControl(controlItem);\n                  }\n                  return null;\n                })\n                .filter(x => x !== null);\n              // don't show the row if it is empty\n              if (renderedControls.length === 0) {\n                return null;\n              }\n              return (\n                <ControlRow\n                  key={`controlsetrow-${i}`}\n                  controls={renderedControls}\n                />\n              );\n            })}\n          </Collapse.Panel>\n        )}\n      </>\n    );\n  };\n\n  const hasControlsTransferred =\n    ensureIsArray(props.exploreState.controlsTransferred).length > 0;\n\n  const DatasourceAlert = useCallback(\n    () =>\n      hasControlsTransferred ? (\n        <ExploreAlert\n          title={t('Keep control settings?')}\n          bodyText={t(\n            \"You've changed datasets. Any controls with data (columns, metrics) that match this new dataset have been retained.\",\n          )}\n          primaryButtonAction={handleContinueClick}\n          secondaryButtonAction={handleClearFormClick}\n          primaryButtonText={t('Continue')}\n          secondaryButtonText={t('Clear form')}\n          type=\"info\"\n        />\n      ) : (\n        <ExploreAlert\n          title={t('No form settings were maintained')}\n          bodyText={t(\n            'We were unable to carry over any controls when switching to this new dataset.',\n          )}\n          primaryButtonAction={handleContinueClick}\n          primaryButtonText={t('Continue')}\n          type=\"warning\"\n        />\n      ),\n    [handleClearFormClick, handleContinueClick, hasControlsTransferred],\n  );\n\n  const dataTabHasHadNoErrors = useResetOnChangeRef(\n    () => false,\n    form_data.viz_type,\n  );\n\n  const dataTabTitle = useMemo(() => {\n    if (!props.errorMessage) {\n      dataTabHasHadNoErrors.current = true;\n    }\n\n    const errorColor = dataTabHasHadNoErrors.current\n      ? colors.error.base\n      : colors.alert.base;\n\n    return (\n      <>\n        <span>{t('Data')}</span>\n        {props.errorMessage && (\n          <span\n            css={(theme: SupersetTheme) => css`\n              margin-left: ${theme.gridUnit * 2}px;\n            `}\n          >\n            {' '}\n            <Tooltip\n              id=\"query-error-tooltip\"\n              placement=\"right\"\n              title={props.errorMessage}\n            >\n              <Icons.ExclamationCircleOutlined\n                css={css`\n                  ${iconStyles};\n                  color: ${errorColor};\n                `}\n              />\n            </Tooltip>\n          </span>\n        )}\n      </>\n    );\n  }, [\n    colors.error.base,\n    colors.alert.base,\n    dataTabHasHadNoErrors,\n    props.errorMessage,\n  ]);\n\n  const controlPanelRegistry = getChartControlPanelRegistry();\n  if (!controlPanelRegistry.has(form_data.viz_type) && pluginContext.loading) {\n    return <Loading />;\n  }\n\n  const showCustomizeTab = customizeSections.length > 0;\n\n  return (\n    <Styles ref={containerRef}>\n      <ControlPanelsTabs\n        id=\"controlSections\"\n        data-test=\"control-tabs\"\n        fullWidth={showCustomizeTab}\n        allowOverflow={false}\n      >\n        <Tabs.TabPane key=\"query\" tab={dataTabTitle}>\n          <Collapse\n            defaultActiveKey={expandedQuerySections}\n            expandIconPosition=\"right\"\n            ghost\n          >\n            {showDatasourceAlert && <DatasourceAlert />}\n            {querySections.map(renderControlPanelSection)}\n          </Collapse>\n        </Tabs.TabPane>\n        {showCustomizeTab && (\n          <Tabs.TabPane key=\"display\" tab={t('Customize')}>\n            <Collapse\n              defaultActiveKey={expandedCustomizeSections}\n              expandIconPosition=\"right\"\n              ghost\n            >\n              {customizeSections.map(renderControlPanelSection)}\n            </Collapse>\n          </Tabs.TabPane>\n        )}\n      </ControlPanelsTabs>\n      <div css={actionButtonsContainerStyles}>\n        <RunQueryButton\n          onQuery={props.onQuery}\n          onStop={props.onStop}\n          errorMessage={props.errorMessage}\n          loading={props.chart.chartStatus === 'loading'}\n          isNewChart={!props.chart.queriesResponse}\n          canStopQuery={props.canStopQuery}\n          chartIsStale={props.chartIsStale}\n        />\n      </div>\n    </Styles>\n  );\n};\n\nexport default ControlPanelsContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { ChangeEvent, FormEvent, Component } from 'react';\nimport { Dispatch } from 'redux';\nimport rison from 'rison';\nimport { connect } from 'react-redux';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport {\n  css,\n  DatasourceType,\n  isDefined,\n  styled,\n  SupersetClient,\n  t,\n} from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Form, FormItem } from 'src/components/Form';\nimport Alert from 'src/components/Alert';\nimport Modal from 'src/components/Modal';\nimport { Radio } from 'src/components/Radio';\nimport Button from 'src/components/Button';\nimport { AsyncSelect } from 'src/components';\nimport Loading from 'src/components/Loading';\nimport { canUserEditDashboard } from 'src/dashboard/util/permissionUtils';\nimport { setSaveChartModalVisibility } from 'src/explore/actions/saveModalActions';\nimport { SaveActionType } from 'src/explore/types';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport { Dashboard } from 'src/types/Dashboard';\n\n// Session storage key for recent dashboard\nconst SK_DASHBOARD_ID = 'save_chart_recent_dashboard';\n\ninterface SaveModalProps extends RouteComponentProps {\n  addDangerToast: (msg: string) => void;\n  actions: Record<string, any>;\n  form_data?: Record<string, any>;\n  user: UserWithPermissionsAndRoles;\n  alert?: string;\n  sliceName?: string;\n  slice?: Record<string, any>;\n  datasource?: Record<string, any>;\n  dashboardId: '' | number | null;\n  isVisible: boolean;\n  dispatch: Dispatch;\n}\n\ntype SaveModalState = {\n  newSliceName?: string;\n  datasetName: string;\n  action: SaveActionType;\n  isLoading: boolean;\n  saveStatus?: string | null;\n  dashboard?: { label: string; value: string | number };\n};\n\nexport const StyledModal = styled(Modal)`\n  .ant-modal-body {\n    overflow: visible;\n  }\n  i {\n    position: absolute;\n    top: -${({ theme }) => theme.gridUnit * 5.25}px;\n    left: ${({ theme }) => theme.gridUnit * 26.75}px;\n  }\n`;\n\nclass SaveModal extends Component<SaveModalProps, SaveModalState> {\n  constructor(props: SaveModalProps) {\n    super(props);\n    this.state = {\n      newSliceName: props.sliceName,\n      datasetName: props.datasource?.name,\n      action: this.canOverwriteSlice() ? 'overwrite' : 'saveas',\n      isLoading: false,\n      dashboard: undefined,\n    };\n    this.onDashboardChange = this.onDashboardChange.bind(this);\n    this.onSliceNameChange = this.onSliceNameChange.bind(this);\n    this.changeAction = this.changeAction.bind(this);\n    this.saveOrOverwrite = this.saveOrOverwrite.bind(this);\n    this.isNewDashboard = this.isNewDashboard.bind(this);\n    this.onHide = this.onHide.bind(this);\n  }\n\n  isNewDashboard(): boolean {\n    const { dashboard } = this.state;\n    return typeof dashboard?.value === 'string';\n  }\n\n  canOverwriteSlice(): boolean {\n    return (\n      this.props.slice?.owners?.includes(this.props.user.userId) &&\n      !this.props.slice?.is_managed_externally\n    );\n  }\n\n  async componentDidMount() {\n    let { dashboardId } = this.props;\n    if (!dashboardId) {\n      let lastDashboard = null;\n      try {\n        lastDashboard = sessionStorage.getItem(SK_DASHBOARD_ID);\n      } catch (error) {\n        // continue regardless of error\n      }\n      dashboardId = lastDashboard && parseInt(lastDashboard, 10);\n    }\n    if (dashboardId) {\n      try {\n        const result = (await this.loadDashboard(dashboardId)) as Dashboard;\n        if (canUserEditDashboard(result, this.props.user)) {\n          this.setState({\n            dashboard: { label: result.dashboard_title, value: result.id },\n          });\n        }\n      } catch (error) {\n        this.props.actions.addDangerToast(\n          t('An error occurred while loading dashboard information.'),\n        );\n      }\n    }\n  }\n\n  handleDatasetNameChange = (e: FormEvent<HTMLInputElement>) => {\n    // @ts-expect-error\n    this.setState({ datasetName: e.target.value });\n  };\n\n  onSliceNameChange(event: ChangeEvent<HTMLInputElement>) {\n    this.setState({ newSliceName: event.target.value });\n  }\n\n  onDashboardChange(dashboard: { label: string; value: string | number }) {\n    this.setState({ dashboard });\n  }\n\n  changeAction(action: SaveActionType) {\n    this.setState({ action });\n  }\n\n  onHide() {\n    this.props.dispatch(setSaveChartModalVisibility(false));\n  }\n\n  handleRedirect = (windowLocationSearch: string, chart: any) => {\n    const searchParams = new URLSearchParams(windowLocationSearch);\n    searchParams.set('save_action', this.state.action);\n    if (this.state.action !== 'overwrite') {\n      searchParams.delete('form_data_key');\n    }\n\n    searchParams.set('slice_id', chart.id.toString());\n    return searchParams;\n  };\n\n  async saveOrOverwrite(gotodash: boolean) {\n    this.setState({ isLoading: true });\n\n    //  Create or retrieve dashboard\n    type DashboardGetResponse = {\n      id: number;\n      url: string;\n      dashboard_title: string;\n    };\n\n    try {\n      if (this.props.datasource?.type === DatasourceType.Query) {\n        const { schema, sql, database } = this.props.datasource;\n        const { templateParams } = this.props.datasource;\n\n        await this.props.actions.saveDataset({\n          schema,\n          sql,\n          database,\n          templateParams,\n          datasourceName: this.state.datasetName,\n        });\n      }\n\n      //  Get chart dashboards\n      let sliceDashboards: number[] = [];\n      if (this.props.slice && this.state.action === 'overwrite') {\n        sliceDashboards = await this.props.actions.getSliceDashboards(\n          this.props.slice,\n        );\n      }\n\n      const formData = this.props.form_data || {};\n      delete formData.url_params;\n\n      let dashboard: DashboardGetResponse | null = null;\n      if (this.state.dashboard) {\n        let validId = this.state.dashboard.value;\n        if (this.isNewDashboard()) {\n          const response = await this.props.actions.createDashboard(\n            this.state.dashboard.label,\n          );\n          validId = response.id;\n        }\n\n        try {\n          dashboard = await this.loadDashboard(validId as number);\n        } catch (error) {\n          this.props.actions.saveSliceFailed();\n          return;\n        }\n\n        if (isDefined(dashboard) && isDefined(dashboard?.id)) {\n          sliceDashboards = sliceDashboards.includes(dashboard.id)\n            ? sliceDashboards\n            : [...sliceDashboards, dashboard.id];\n          formData.dashboards = sliceDashboards;\n        }\n      }\n\n      // Sets the form data\n      this.props.actions.setFormData({ ...formData });\n\n      //  Update or create slice\n      let value: { id: number };\n      if (this.state.action === 'overwrite') {\n        value = await this.props.actions.updateSlice(\n          this.props.slice,\n          this.state.newSliceName,\n          sliceDashboards,\n          dashboard\n            ? {\n                title: dashboard.dashboard_title,\n                new: this.isNewDashboard(),\n              }\n            : null,\n        );\n      } else {\n        value = await this.props.actions.createSlice(\n          this.state.newSliceName,\n          sliceDashboards,\n          dashboard\n            ? {\n                title: dashboard.dashboard_title,\n                new: this.isNewDashboard(),\n              }\n            : null,\n        );\n      }\n\n      try {\n        if (dashboard) {\n          sessionStorage.setItem(SK_DASHBOARD_ID, `${dashboard.id}`);\n        } else {\n          sessionStorage.removeItem(SK_DASHBOARD_ID);\n        }\n      } catch (error) {\n        // continue regardless of error\n      }\n\n      // Go to new dashboard url\n      if (gotodash && dashboard) {\n        this.props.history.push(dashboard.url);\n        return;\n      }\n\n      const searchParams = this.handleRedirect(window.location.search, value);\n      this.props.history.replace(`/explore/?${searchParams.toString()}`);\n\n      this.setState({ isLoading: false });\n      this.onHide();\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  loadDashboard = async (id: number) => {\n    const response = await SupersetClient.get({\n      endpoint: `/api/v1/dashboard/${id}`,\n    });\n    return response.json.result;\n  };\n\n  loadDashboards = async (search: string, page: number, pageSize: number) => {\n    const queryParams = rison.encode({\n      columns: ['id', 'dashboard_title'],\n      filters: [\n        {\n          col: 'dashboard_title',\n          opr: 'ct',\n          value: search,\n        },\n        {\n          col: 'owners',\n          opr: 'rel_m_m',\n          value: this.props.user.userId,\n        },\n      ],\n      page,\n      page_size: pageSize,\n      order_column: 'dashboard_title',\n    });\n\n    const { json } = await SupersetClient.get({\n      endpoint: `/api/v1/dashboard/?q=${queryParams}`,\n    });\n    const { result, count } = json;\n    return {\n      data: result.map(\n        (dashboard: { id: number; dashboard_title: string }) => ({\n          value: dashboard.id,\n          label: dashboard.dashboard_title,\n        }),\n      ),\n      totalCount: count,\n    };\n  };\n\n  renderSaveChartModal = () => {\n    const info = this.info();\n    return (\n      <Form data-test=\"save-modal-body\" layout=\"vertical\">\n        <FormItem data-test=\"radio-group\">\n          <Radio\n            id=\"overwrite-radio\"\n            disabled={!this.canOverwriteSlice()}\n            checked={this.state.action === 'overwrite'}\n            onChange={() => this.changeAction('overwrite')}\n            data-test=\"save-overwrite-radio\"\n          >\n            {t('Save (Overwrite)')}\n          </Radio>\n          <Radio\n            id=\"saveas-radio\"\n            data-test=\"saveas-radio\"\n            checked={this.state.action === 'saveas'}\n            onChange={() => this.changeAction('saveas')}\n          >\n            {t('Save as...')}\n          </Radio>\n        </FormItem>\n        <hr />\n        <FormItem label={t('Chart name')} required>\n          <Input\n            name=\"new_slice_name\"\n            type=\"text\"\n            placeholder=\"Name\"\n            value={this.state.newSliceName}\n            onChange={this.onSliceNameChange}\n            data-test=\"new-chart-name\"\n          />\n        </FormItem>\n        {this.props.datasource?.type === 'query' && (\n          <FormItem label={t('Dataset Name')} required>\n            <InfoTooltipWithTrigger\n              tooltip={t('A reusable dataset will be saved with your chart.')}\n              placement=\"right\"\n            />\n            <Input\n              name=\"dataset_name\"\n              type=\"text\"\n              placeholder=\"Dataset Name\"\n              value={this.state.datasetName}\n              onChange={this.handleDatasetNameChange}\n              data-test=\"new-dataset-name\"\n            />\n          </FormItem>\n        )}\n        <FormItem\n          label={t('Add to dashboard')}\n          data-test=\"save-chart-modal-select-dashboard-form\"\n        >\n          <AsyncSelect\n            allowClear\n            allowNewOptions\n            ariaLabel={t('Select a dashboard')}\n            options={this.loadDashboards}\n            onChange={this.onDashboardChange}\n            value={this.state.dashboard}\n            placeholder={\n              <div>\n                <b>{t('Select')}</b>\n                {t(' a dashboard OR ')}\n                <b>{t('create')}</b>\n                {t(' a new one')}\n              </div>\n            }\n          />\n        </FormItem>\n        {info && <Alert type=\"info\" message={info} closable={false} />}\n        {this.props.alert && (\n          <Alert\n            css={{ marginTop: info ? 16 : undefined }}\n            type=\"warning\"\n            message={this.props.alert}\n            closable={false}\n          />\n        )}\n      </Form>\n    );\n  };\n\n  info = () => {\n    const isNewDashboard = this.isNewDashboard();\n    let chartWillBeCreated = false;\n    if (\n      this.props.slice &&\n      (this.state.action !== 'overwrite' || !this.canOverwriteSlice())\n    ) {\n      chartWillBeCreated = true;\n    }\n    if (chartWillBeCreated && isNewDashboard) {\n      return t('A new chart and dashboard will be created.');\n    }\n    if (chartWillBeCreated) {\n      return t('A new chart will be created.');\n    }\n    if (isNewDashboard) {\n      return t('A new dashboard will be created.');\n    }\n    return null;\n  };\n\n  renderFooter = () => (\n    <div data-test=\"save-modal-footer\">\n      <Button id=\"btn_cancel\" buttonSize=\"small\" onClick={this.onHide}>\n        {t('Cancel')}\n      </Button>\n      <Button\n        id=\"btn_modal_save_goto_dash\"\n        buttonSize=\"small\"\n        disabled={\n          !this.state.newSliceName ||\n          !this.state.dashboard ||\n          (this.props.datasource?.type !== DatasourceType.Table &&\n            !this.state.datasetName)\n        }\n        onClick={() => this.saveOrOverwrite(true)}\n      >\n        {t('Save & go to dashboard')}\n      </Button>\n      <Button\n        id=\"btn_modal_save\"\n        buttonSize=\"small\"\n        buttonStyle=\"primary\"\n        onClick={() => this.saveOrOverwrite(false)}\n        disabled={\n          this.state.isLoading ||\n          !this.state.newSliceName ||\n          (this.props.datasource?.type !== DatasourceType.Table &&\n            !this.state.datasetName)\n        }\n        data-test=\"btn-modal-save\"\n      >\n        {t('Save')}\n      </Button>\n    </div>\n  );\n\n  render() {\n    return (\n      <StyledModal\n        show={this.props.isVisible}\n        onHide={this.onHide}\n        title={t('Save chart')}\n        footer={this.renderFooter()}\n      >\n        {this.state.isLoading ? (\n          <div\n            css={css`\n              display: flex;\n              justify-content: center;\n            `}\n          >\n            <Loading position=\"normal\" />\n          </div>\n        ) : (\n          this.renderSaveChartModal()\n        )}\n      </StyledModal>\n    );\n  }\n}\n\ninterface StateProps {\n  datasource: any;\n  slice: any;\n  user: UserWithPermissionsAndRoles;\n  dashboards: any;\n  alert: any;\n  isVisible: boolean;\n}\n\nfunction mapStateToProps({\n  explore,\n  saveModal,\n  user,\n}: Record<string, any>): StateProps {\n  return {\n    datasource: explore.datasource,\n    slice: explore.slice,\n    user,\n    dashboards: saveModal.dashboards,\n    alert: saveModal.saveModalAlert,\n    isVisible: saveModal.isVisible,\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(SaveModal));\n\n// User for testing purposes need to revisit once we convert this to functional component\nexport { SaveModal as PureSaveModal };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { RefObject } from 'react';\nimport { useDrag } from 'react-dnd';\nimport { css, Metric, styled } from '@superset-ui/core';\nimport { ColumnMeta } from '@superset-ui/chart-controls';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport {\n  StyledColumnOption,\n  StyledMetricOption,\n} from 'src/explore/components/optionRenderers';\nimport Icons from 'src/components/Icons';\n\nimport { DatasourcePanelDndItem } from '../types';\n\nconst DatasourceItemContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: ${theme.gridUnit * 6}px;\n    padding: 0 ${theme.gridUnit}px;\n\n    // hack to make the drag preview image corners rounded\n    transform: translate(0, 0);\n    background-color: inherit;\n    border-radius: 4px;\n\n    > div {\n      min-width: 0;\n      margin-right: ${theme.gridUnit * 2}px;\n    }\n  `}\n`;\n\ninterface DatasourcePanelDragOptionProps extends DatasourcePanelDndItem {\n  labelRef?: RefObject<any>;\n  showTooltip?: boolean;\n}\n\ntype MetricOption = Omit<Metric, 'id'> & {\n  label?: string;\n};\n\nexport default function DatasourcePanelDragOption(\n  props: DatasourcePanelDragOptionProps,\n) {\n  const { labelRef, showTooltip, type, value } = props;\n  const [{ isDragging }, drag] = useDrag({\n    item: {\n      value: props.value,\n      type: props.type,\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const optionProps = {\n    labelRef,\n    showTooltip: !isDragging && showTooltip,\n    showType: true,\n  };\n\n  return (\n    <DatasourceItemContainer data-test=\"DatasourcePanelDragOption\" ref={drag}>\n      {type === DndItemType.Column ? (\n        <StyledColumnOption column={value as ColumnMeta} {...optionProps} />\n      ) : (\n        <StyledMetricOption metric={value as MetricOption} {...optionProps} />\n      )}\n      <Icons.Drag />\n    </DatasourceItemContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CSSProperties, FC } from 'react';\n\nimport { css, Metric, styled, t, useTheme } from '@superset-ui/core';\n\nimport Icons from 'src/components/Icons';\nimport DatasourcePanelDragOption from './DatasourcePanelDragOption';\nimport { DndItemType } from '../DndItemType';\nimport { DndItemValue } from './types';\n\nexport type DataSourcePanelColumn = {\n  is_dttm?: boolean | null;\n  description?: string | null;\n  expression?: string | null;\n  is_certified?: number | null;\n  column_name?: string | null;\n  name?: string | null;\n  type?: string;\n};\n\ntype Props = {\n  index: number;\n  style: CSSProperties;\n  data: {\n    metricSlice: Metric[];\n    columnSlice: DataSourcePanelColumn[];\n    totalMetrics: number;\n    totalColumns: number;\n    width: number;\n    showAllMetrics: boolean;\n    onShowAllMetricsChange: (showAll: boolean) => void;\n    showAllColumns: boolean;\n    onShowAllColumnsChange: (showAll: boolean) => void;\n    collapseMetrics: boolean;\n    onCollapseMetricsChange: (collapse: boolean) => void;\n    collapseColumns: boolean;\n    onCollapseColumnsChange: (collapse: boolean) => void;\n    hiddenMetricCount: number;\n    hiddenColumnCount: number;\n  };\n};\n\nexport const DEFAULT_MAX_COLUMNS_LENGTH = 50;\nexport const DEFAULT_MAX_METRICS_LENGTH = 50;\nexport const ITEM_HEIGHT = 30;\n\nconst Button = styled.button`\n  background: none;\n  border: none;\n  text-decoration: underline;\n  color: ${({ theme }) => theme.colors.primary.dark1};\n`;\n\nconst ButtonContainer = styled.div`\n  text-align: center;\n  padding-top: 2px;\n`;\n\nconst LabelWrapper = styled.div`\n  ${({ theme }) => css`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: ${theme.typography.sizes.s}px;\n    background-color: ${theme.colors.grayscale.light4};\n    margin: ${theme.gridUnit * 2}px 0;\n    border-radius: 4px;\n    padding: 0 ${theme.gridUnit}px;\n\n    &:first-of-type {\n      margin-top: 0;\n    }\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n\n    padding: 0;\n    cursor: pointer;\n    &:hover {\n      background-color: ${theme.colors.grayscale.light3};\n    }\n\n    & > span {\n      white-space: nowrap;\n    }\n\n    .option-label {\n      display: inline;\n    }\n\n    .metric-option {\n      & > svg {\n        min-width: ${theme.gridUnit * 4}px;\n      }\n      & > .option-label {\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  `}\n`;\n\nconst SectionHeaderButton = styled.button`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: none;\n  background: transparent;\n  width: 100%;\n  padding-inline: 0px;\n`;\n\nconst SectionHeader = styled.span`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.m}px;\n    line-height: 1.3;\n  `}\n`;\n\nconst Box = styled.div`\n  ${({ theme }) => `\n    border: 1px ${theme.colors.grayscale.light4} solid;\n    border-radius: ${theme.gridUnit}px;\n    font-size: ${theme.typography.sizes.s}px;\n    padding: ${theme.gridUnit}px;\n    color: ${theme.colors.grayscale.light1};\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  `}\n`;\n\nconst DatasourcePanelItem: FC<Props> = ({ index, style, data }) => {\n  const {\n    metricSlice: _metricSlice,\n    columnSlice,\n    totalMetrics,\n    totalColumns,\n    width,\n    showAllMetrics,\n    onShowAllMetricsChange,\n    showAllColumns,\n    onShowAllColumnsChange,\n    collapseMetrics,\n    onCollapseMetricsChange,\n    collapseColumns,\n    onCollapseColumnsChange,\n    hiddenMetricCount,\n    hiddenColumnCount,\n  } = data;\n  const metricSlice = collapseMetrics ? [] : _metricSlice;\n\n  const EXTRA_LINES = collapseMetrics ? 1 : 2;\n  const isColumnSection = collapseMetrics\n    ? index >= 1\n    : index > metricSlice.length + EXTRA_LINES;\n  const HEADER_LINE = isColumnSection\n    ? metricSlice.length + EXTRA_LINES + 1\n    : 0;\n  const SUBTITLE_LINE = HEADER_LINE + 1;\n  const BOTTOM_LINE =\n    (isColumnSection ? columnSlice.length : metricSlice.length) +\n    (collapseMetrics ? HEADER_LINE : SUBTITLE_LINE) +\n    1;\n  const collapsed = isColumnSection ? collapseColumns : collapseMetrics;\n  const setCollapse = isColumnSection\n    ? onCollapseColumnsChange\n    : onCollapseMetricsChange;\n  const showAll = isColumnSection ? showAllColumns : showAllMetrics;\n  const setShowAll = isColumnSection\n    ? onShowAllColumnsChange\n    : onShowAllMetricsChange;\n  const theme = useTheme();\n  const hiddenCount = isColumnSection ? hiddenColumnCount : hiddenMetricCount;\n\n  return (\n    <div\n      style={style}\n      css={css`\n        padding: 0 ${theme.gridUnit * 4}px;\n      `}\n    >\n      {index === HEADER_LINE && (\n        <SectionHeaderButton onClick={() => setCollapse(!collapsed)}>\n          <SectionHeader>\n            {isColumnSection ? t('Columns') : t('Metrics')}\n          </SectionHeader>\n          {collapsed ? (\n            <Icons.DownOutlined iconSize=\"s\" />\n          ) : (\n            <Icons.UpOutlined iconSize=\"s\" />\n          )}\n        </SectionHeaderButton>\n      )}\n      {index === SUBTITLE_LINE && !collapsed && (\n        <div\n          css={css`\n            display: flex;\n            gap: ${theme.gridUnit * 2}px;\n            justify-content: space-between;\n            align-items: baseline;\n          `}\n        >\n          <div\n            className=\"field-length\"\n            css={css`\n              flex-shrink: 0;\n            `}\n          >\n            {isColumnSection\n              ? t(`Showing %s of %s`, columnSlice?.length, totalColumns)\n              : t(`Showing %s of %s`, metricSlice?.length, totalMetrics)}\n          </div>\n          {hiddenCount > 0 && (\n            <Box>{t(`%s ineligible item(s) are hidden`, hiddenCount)}</Box>\n          )}\n        </div>\n      )}\n      {index > SUBTITLE_LINE && index < BOTTOM_LINE && (\n        <LabelWrapper\n          key={\n            (isColumnSection\n              ? columnSlice[index - SUBTITLE_LINE - 1].column_name\n              : metricSlice[index - SUBTITLE_LINE - 1].metric_name) +\n            String(width)\n          }\n          className=\"column\"\n        >\n          <DatasourcePanelDragOption\n            value={\n              isColumnSection\n                ? (columnSlice[index - SUBTITLE_LINE - 1] as DndItemValue)\n                : metricSlice[index - SUBTITLE_LINE - 1]\n            }\n            type={isColumnSection ? DndItemType.Column : DndItemType.Metric}\n          />\n        </LabelWrapper>\n      )}\n      {index === BOTTOM_LINE &&\n        !collapsed &&\n        (isColumnSection\n          ? totalColumns > DEFAULT_MAX_COLUMNS_LENGTH\n          : totalMetrics > DEFAULT_MAX_METRICS_LENGTH) && (\n          <ButtonContainer>\n            <Button onClick={() => setShowAll(!showAll)}>\n              {showAll ? t('Show less...') : t('Show all...')}\n            </Button>\n          </ButtonContainer>\n        )}\n    </div>\n  );\n};\n\nexport default DatasourcePanelItem;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useContext, useMemo, useState } from 'react';\nimport {\n  css,\n  DatasourceType,\n  Metric,\n  QueryFormData,\n  styled,\n  t,\n} from '@superset-ui/core';\n\nimport { ControlConfig } from '@superset-ui/chart-controls';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FixedSizeList as List } from 'react-window';\n\nimport { isArray } from 'lodash';\nimport { matchSorter, rankings } from 'match-sorter';\nimport Alert from 'src/components/Alert';\nimport { SaveDatasetModal } from 'src/SqlLab/components/SaveDatasetModal';\nimport { getDatasourceAsSaveableDataset } from 'src/utils/datasourceUtils';\nimport { Input } from 'src/components/Input';\nimport { FAST_DEBOUNCE } from 'src/constants';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport Control from 'src/explore/components/Control';\nimport { useDebounceValue } from 'src/hooks/useDebounceValue';\nimport DatasourcePanelItem, {\n  ITEM_HEIGHT,\n  DataSourcePanelColumn,\n  DEFAULT_MAX_COLUMNS_LENGTH,\n  DEFAULT_MAX_METRICS_LENGTH,\n} from './DatasourcePanelItem';\nimport { DndItemType } from '../DndItemType';\nimport { DndItemValue } from './types';\nimport { DropzoneContext } from '../ExploreContainer';\n\ninterface DatasourceControl extends Omit<ControlConfig, 'hidden'> {\n  datasource?: IDatasource;\n}\nexport interface IDatasource {\n  metrics: Metric[];\n  columns: DataSourcePanelColumn[];\n  id: number;\n  type: DatasourceType;\n  database: {\n    id: number;\n  };\n  sql?: string | null;\n  datasource_name?: string | null;\n  name?: string | null;\n  schema?: string | null;\n}\n\nexport interface Props {\n  datasource: IDatasource;\n  controls: {\n    datasource: DatasourceControl;\n  };\n  actions: Partial<ExploreActions> & Pick<ExploreActions, 'setControlValue'>;\n  // we use this props control force update when this panel resize\n  width: number;\n  formData?: QueryFormData;\n}\n\nconst DatasourceContainer = styled.div`\n  ${({ theme }) => css`\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    max-height: 100%;\n    .ant-collapse {\n      height: auto;\n    }\n    .field-selections {\n      padding: 0 0 ${theme.gridUnit}px;\n      overflow: auto;\n      height: 100%;\n    }\n    .field-length {\n      margin-bottom: ${theme.gridUnit * 2}px;\n      font-size: ${theme.typography.sizes.s}px;\n      color: ${theme.colors.grayscale.light1};\n    }\n    .form-control.input-md {\n      width: calc(100% - ${theme.gridUnit * 8}px);\n      height: ${theme.gridUnit * 8}px;\n      margin: ${theme.gridUnit * 2}px auto;\n    }\n    .type-label {\n      font-size: ${theme.typography.sizes.s}px;\n      color: ${theme.colors.grayscale.base};\n    }\n    .Control {\n      padding-bottom: 0;\n    }\n  `};\n`;\n\nconst StyledInfoboxWrapper = styled.div`\n  ${({ theme }) => css`\n    margin: 0 ${theme.gridUnit * 2.5}px;\n\n    span {\n      text-decoration: underline;\n    }\n  `}\n`;\n\nconst BORDER_WIDTH = 2;\n\nconst sortCertifiedFirst = (slice: DataSourcePanelColumn[]) =>\n  slice.sort((a, b) => (b?.is_certified ?? 0) - (a?.is_certified ?? 0));\n\nexport default function DataSourcePanel({\n  datasource,\n  formData,\n  controls: { datasource: datasourceControl },\n  actions,\n  width,\n}: Props) {\n  const [dropzones] = useContext(DropzoneContext);\n  const { columns: _columns, metrics } = datasource;\n\n  const allowedColumns = useMemo(() => {\n    const validators = Object.values(dropzones);\n    if (!isArray(_columns)) return [];\n    return _columns.filter(column =>\n      validators.some(validator =>\n        validator({\n          value: column as DndItemValue,\n          type: DndItemType.Column,\n        }),\n      ),\n    );\n  }, [dropzones, _columns]);\n\n  // display temporal column first\n  const columns = useMemo(\n    () =>\n      [...allowedColumns].sort((col1, col2) => {\n        if (col1?.is_dttm && !col2?.is_dttm) {\n          return -1;\n        }\n        if (col2?.is_dttm && !col1?.is_dttm) {\n          return 1;\n        }\n        return 0;\n      }),\n    [allowedColumns],\n  );\n\n  const allowedMetrics = useMemo(() => {\n    const validators = Object.values(dropzones);\n    return metrics.filter(metric =>\n      validators.some(validator =>\n        validator({ value: metric, type: DndItemType.Metric }),\n      ),\n    );\n  }, [dropzones, metrics]);\n\n  const hiddenColumnCount = _columns.length - allowedColumns.length;\n  const hiddenMetricCount = metrics.length - allowedMetrics.length;\n  const [showSaveDatasetModal, setShowSaveDatasetModal] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const [showAllMetrics, setShowAllMetrics] = useState(false);\n  const [showAllColumns, setShowAllColumns] = useState(false);\n  const [collapseMetrics, setCollapseMetrics] = useState(false);\n  const [collapseColumns, setCollapseColumns] = useState(false);\n  const searchKeyword = useDebounceValue(inputValue, FAST_DEBOUNCE);\n\n  const filteredColumns = useMemo(() => {\n    if (!searchKeyword) {\n      return columns ?? [];\n    }\n    return matchSorter(columns, searchKeyword, {\n      keys: [\n        {\n          key: 'verbose_name',\n          threshold: rankings.CONTAINS,\n        },\n        {\n          key: 'column_name',\n          threshold: rankings.CONTAINS,\n        },\n        {\n          key: item =>\n            [item?.description ?? '', item?.expression ?? ''].map(\n              x => x?.replace(/[_\\n\\s]+/g, ' ') || '',\n            ),\n          threshold: rankings.CONTAINS,\n          maxRanking: rankings.CONTAINS,\n        },\n      ],\n      keepDiacritics: true,\n    });\n  }, [columns, searchKeyword]);\n\n  const filteredMetrics = useMemo(() => {\n    if (!searchKeyword) {\n      return allowedMetrics ?? [];\n    }\n    return matchSorter(allowedMetrics, searchKeyword, {\n      keys: [\n        {\n          key: 'verbose_name',\n          threshold: rankings.CONTAINS,\n        },\n        {\n          key: 'metric_name',\n          threshold: rankings.CONTAINS,\n        },\n        {\n          key: item =>\n            [item?.description ?? '', item?.expression ?? ''].map(\n              x => x?.replace(/[_\\n\\s]+/g, ' ') || '',\n            ),\n          threshold: rankings.CONTAINS,\n          maxRanking: rankings.CONTAINS,\n        },\n      ],\n      keepDiacritics: true,\n      baseSort: (a, b) =>\n        Number(b?.item?.is_certified ?? 0) -\n          Number(a?.item?.is_certified ?? 0) ||\n        String(a?.rankedValue ?? '').localeCompare(b?.rankedValue ?? ''),\n    });\n  }, [allowedMetrics, searchKeyword]);\n\n  const metricSlice = useMemo(\n    () =>\n      showAllMetrics\n        ? filteredMetrics\n        : filteredMetrics?.slice?.(0, DEFAULT_MAX_METRICS_LENGTH),\n    [filteredMetrics, showAllMetrics],\n  );\n\n  const columnSlice = useMemo(\n    () =>\n      showAllColumns\n        ? sortCertifiedFirst(filteredColumns)\n        : sortCertifiedFirst(\n            filteredColumns?.slice?.(0, DEFAULT_MAX_COLUMNS_LENGTH),\n          ),\n    [filteredColumns, showAllColumns],\n  );\n\n  const showInfoboxCheck = () => {\n    try {\n      if (sessionStorage.getItem('showInfobox') === 'false') return false;\n    } catch (error) {\n      // continue regardless of error\n    }\n    return true;\n  };\n\n  const saveableDatasets = {\n    query: DatasourceType.Query,\n    saved_query: DatasourceType.SavedQuery,\n  };\n\n  const datasourceIsSaveable =\n    datasource.type && saveableDatasets[datasource.type];\n\n  const mainBody = useMemo(\n    () => (\n      <>\n        <Input\n          allowClear\n          onChange={evt => {\n            setInputValue(evt.target.value);\n          }}\n          value={inputValue}\n          className=\"form-control input-md\"\n          placeholder={t('Search Metrics & Columns')}\n        />\n        <div className=\"field-selections\" data-test=\"fieldSelections\">\n          {datasourceIsSaveable && showInfoboxCheck() && (\n            <StyledInfoboxWrapper>\n              <Alert\n                closable\n                onClose={() => {\n                  try {\n                    sessionStorage.setItem('showInfobox', 'false');\n                  } catch (error) {\n                    // continue regardless of error\n                  }\n                }}\n                type=\"info\"\n                message=\"\"\n                description={\n                  <>\n                    <span\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={() => setShowSaveDatasetModal(true)}\n                      className=\"add-dataset-alert-description\"\n                    >\n                      {t('Create a dataset')}\n                    </span>\n                    {t(' to edit or add columns and metrics.')}\n                  </>\n                }\n              />\n            </StyledInfoboxWrapper>\n          )}\n          <AutoSizer>\n            {({ height }: { height: number }) => (\n              <List\n                width={width - BORDER_WIDTH}\n                height={height}\n                itemSize={ITEM_HEIGHT}\n                itemCount={\n                  (collapseMetrics ? 0 : metricSlice?.length) +\n                  (collapseColumns ? 0 : columnSlice.length) +\n                  2 + // Each section header row\n                  (collapseMetrics ? 0 : 2) +\n                  (collapseColumns ? 0 : 2)\n                }\n                itemData={{\n                  metricSlice,\n                  columnSlice,\n                  width,\n                  totalMetrics: filteredMetrics.length,\n                  totalColumns: filteredColumns.length,\n                  showAllMetrics,\n                  onShowAllMetricsChange: setShowAllMetrics,\n                  showAllColumns,\n                  onShowAllColumnsChange: setShowAllColumns,\n                  collapseMetrics,\n                  onCollapseMetricsChange: setCollapseMetrics,\n                  collapseColumns,\n                  onCollapseColumnsChange: setCollapseColumns,\n                  hiddenMetricCount,\n                  hiddenColumnCount,\n                }}\n                overscanCount={5}\n              >\n                {DatasourcePanelItem}\n              </List>\n            )}\n          </AutoSizer>\n        </div>\n      </>\n    ),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      columnSlice,\n      inputValue,\n      filteredColumns.length,\n      filteredMetrics.length,\n      metricSlice,\n      showAllColumns,\n      showAllMetrics,\n      collapseMetrics,\n      collapseColumns,\n      datasourceIsSaveable,\n      width,\n    ],\n  );\n\n  return (\n    <DatasourceContainer>\n      {datasourceIsSaveable && showSaveDatasetModal && (\n        <SaveDatasetModal\n          visible={showSaveDatasetModal}\n          onHide={() => setShowSaveDatasetModal(false)}\n          buttonTextOnSave={t('Save')}\n          buttonTextOnOverwrite={t('Overwrite')}\n          datasource={getDatasourceAsSaveableDataset(datasource)}\n          openWindow={false}\n          formData={formData}\n        />\n      )}\n      {/* @ts-ignore */}\n      <Control {...datasourceControl} name=\"datasource\" actions={actions} />\n      {datasource.id != null && mainBody}\n    </DatasourceContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport memoizeOne from 'memoize-one';\nimport { isControlPanelSectionConfig } from '@superset-ui/chart-controls';\nimport { getChartControlPanelRegistry } from '@superset-ui/core';\nimport { controls } from '../explore/controls';\n\nconst memoizedControls = memoizeOne((vizType, controlPanel) => {\n  const controlsMap = {};\n  (controlPanel?.controlPanelSections || [])\n    .filter(isControlPanelSectionConfig)\n    .forEach(section => {\n      section.controlSetRows.forEach(row => {\n        row.forEach(control => {\n          if (!control) return;\n          if (typeof control === 'string') {\n            // For now, we have to look in controls.jsx to get the config for some controls.\n            // Once everything is migrated out, delete this if statement.\n            controlsMap[control] = controls[control];\n          } else if (control.name && control.config) {\n            // condition needed because there are elements, e.g. <hr /> in some control configs (I'm looking at you, FilterBox!)\n            controlsMap[control.name] = control.config;\n          }\n        });\n      });\n    });\n  return controlsMap;\n});\n\nconst getControlsForVizType = vizType => {\n  const controlPanel = getChartControlPanelRegistry().get(vizType);\n  return memoizedControls(vizType, controlPanel);\n};\n\nexport default getControlsForVizType;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useState, FC } from 'react';\n\nimport { isEqual, isEmpty } from 'lodash';\nimport { QueryFormData, styled, t } from '@superset-ui/core';\nimport { sanitizeFormData } from 'src/explore/exploreUtils/formData';\nimport getControlsForVizType from 'src/utils/getControlsForVizType';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ModalTrigger from '../ModalTrigger';\nimport TableView from '../TableView';\n\ninterface AlteredSliceTagProps {\n  origFormData: QueryFormData;\n  currentFormData: QueryFormData;\n}\n\nexport interface ControlMap {\n  [key: string]: {\n    label?: string;\n    type?: string;\n  };\n}\n\ntype FilterItemType = {\n  comparator?: string | string[];\n  subject: string;\n  operator: string;\n  label?: string;\n};\n\nexport type DiffItemType<\n  T = FilterItemType | number | string | Record<string | number, any>,\n> =\n  | T[]\n  | boolean\n  | number\n  | string\n  | Record<string | number, any>\n  | null\n  | undefined;\n\nexport type DiffType = {\n  before: DiffItemType;\n  after: DiffItemType;\n};\n\nexport type RowType = {\n  before: string | number;\n  after: string | number;\n  control: string;\n};\n\nconst StyledLabel = styled.span`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.alert.base};\n\n    &:hover {\n      background-color: ${theme.colors.alert.dark1};\n    }\n  `}\n`;\n\nexport const alterForComparison = (\n  value?: string | null | [],\n): string | null => {\n  // Treat `null`, `undefined`, and empty strings as equivalent\n  if (value === undefined || value === null || value === '') {\n    return null;\n  }\n  // Treat empty arrays and objects as equivalent to null\n  if (Array.isArray(value) && value.length === 0) {\n    return null;\n  }\n  if (typeof value === 'object' && Object.keys(value).length === 0) {\n    return null;\n  }\n  return value;\n};\n\nexport const formatValueHandler = (\n  value: DiffItemType,\n  key: string,\n  controlsMap: ControlMap,\n): string | number => {\n  if (value === undefined) {\n    return 'N/A';\n  }\n  if (value === null) {\n    return 'null';\n  }\n  if (typeof value === 'boolean') {\n    return value ? 'true' : 'false';\n  }\n  if (controlsMap[key]?.type === 'AdhocFilterControl' && Array.isArray(value)) {\n    if (!value.length) {\n      return '[]';\n    }\n    return value\n      .map((v: FilterItemType) => {\n        const filterVal =\n          v.comparator && v.comparator.constructor === Array\n            ? `[${v.comparator.join(', ')}]`\n            : v.comparator;\n        return `${v.subject} ${v.operator} ${filterVal}`;\n      })\n      .join(', ');\n  }\n  if (controlsMap[key]?.type === 'BoundsControl') {\n    return `Min: ${value[0]}, Max: ${value[1]}`;\n  }\n  if (controlsMap[key]?.type === 'CollectionControl' && Array.isArray(value)) {\n    return value.map((v: FilterItemType) => safeStringify(v)).join(', ');\n  }\n  if (\n    controlsMap[key]?.type === 'MetricsControl' &&\n    value.constructor === Array\n  ) {\n    const formattedValue = value.map((v: FilterItemType) => v?.label ?? v);\n    return formattedValue.length ? formattedValue.join(', ') : '[]';\n  }\n  if (Array.isArray(value)) {\n    const formattedValue = value.map((v: FilterItemType) => v?.label ?? v);\n    return formattedValue.length ? formattedValue.join(', ') : '[]';\n  }\n  if (typeof value === 'string' || typeof value === 'number') {\n    return value;\n  }\n  return safeStringify(value);\n};\n\nexport const getRowsFromDiffs = (\n  diffs: { [key: string]: DiffType },\n  controlsMap: ControlMap,\n): RowType[] =>\n  Object.entries(diffs).map(([key, diff]) => ({\n    control: controlsMap[key]?.label || key,\n    before: formatValueHandler(diff.before, key, controlsMap),\n    after: formatValueHandler(diff.after, key, controlsMap),\n  }));\n\nexport const isEqualish = (val1: string, val2: string): boolean =>\n  isEqual(alterForComparison(val1), alterForComparison(val2));\n\nconst AlteredSliceTag: FC<AlteredSliceTagProps> = props => {\n  const [rows, setRows] = useState<RowType[]>([]);\n  const [hasDiffs, setHasDiffs] = useState<boolean>(false);\n\n  const getDiffs = useCallback(() => {\n    // Returns all properties that differ in the\n    // current form data and the saved form data\n    const ofd = sanitizeFormData(props.origFormData);\n    const cfd = sanitizeFormData(props.currentFormData);\n\n    const fdKeys = Object.keys(cfd);\n    const diffs: { [key: string]: DiffType } = {};\n    fdKeys.forEach(fdKey => {\n      if (!ofd[fdKey] && !cfd[fdKey]) {\n        return;\n      }\n      if (['filters', 'having', 'where'].includes(fdKey)) {\n        return;\n      }\n      if (!isEqualish(ofd[fdKey], cfd[fdKey])) {\n        diffs[fdKey] = { before: ofd[fdKey], after: cfd[fdKey] };\n      }\n    });\n    return diffs;\n  }, [props.currentFormData, props.origFormData]);\n\n  useEffect(() => {\n    const diffs = getDiffs();\n    const controlsMap = getControlsForVizType(\n      props.origFormData?.viz_type,\n    ) as ControlMap;\n    setRows(getRowsFromDiffs(diffs, controlsMap));\n    setHasDiffs(!isEmpty(diffs));\n  }, [getDiffs, props.origFormData?.viz_type]);\n\n  const modalBody = useMemo(() => {\n    const columns = [\n      {\n        accessor: 'control',\n        Header: t('Control'),\n      },\n      {\n        accessor: 'before',\n        Header: t('Before'),\n      },\n      {\n        accessor: 'after',\n        Header: t('After'),\n      },\n    ];\n    // set the wrap text in the specific columns.\n    const columnsForWrapText = ['Control', 'Before', 'After'];\n\n    return (\n      <TableView\n        columns={columns}\n        data={rows}\n        pageSize={50}\n        className=\"table-condensed\"\n        columnsForWrapText={columnsForWrapText}\n      />\n    );\n  }, [rows]);\n\n  const triggerNode = useMemo(\n    () => (\n      <Tooltip id=\"difference-tooltip\" title={t('Click to see difference')}>\n        <StyledLabel className=\"label\">{t('Altered')}</StyledLabel>\n      </Tooltip>\n    ),\n    [],\n  );\n\n  if (!hasDiffs) {\n    return null;\n  }\n\n  return (\n    <ModalTrigger\n      triggerNode={triggerNode}\n      modalTitle={t('Chart changes')}\n      modalBody={modalBody}\n      responsive\n    />\n  );\n};\n\nexport default AlteredSliceTag;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { css, logging, SupersetClient, t, tn } from '@superset-ui/core';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport AlteredSliceTag from 'src/components/AlteredSliceTag';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport PropertiesModal from 'src/explore/components/PropertiesModal';\nimport { sliceUpdated } from 'src/explore/actions/exploreActions';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport MetadataBar, { MetadataType } from 'src/components/MetadataBar';\nimport { setSaveChartModalVisibility } from 'src/explore/actions/saveModalActions';\nimport { applyColors, resetColors } from 'src/utils/colorScheme';\nimport { useExploreAdditionalActionsMenu } from '../useExploreAdditionalActionsMenu';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  canOverwrite: PropTypes.bool.isRequired,\n  canDownload: PropTypes.bool.isRequired,\n  dashboardId: PropTypes.number,\n  colorScheme: PropTypes.string,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  formData: PropTypes.object,\n  ownState: PropTypes.object,\n  timeout: PropTypes.number,\n  chart: chartPropShape,\n  saveDisabled: PropTypes.bool,\n};\n\nconst saveButtonStyles = theme => css`\n  color: ${theme.colors.primary.dark2};\n  & > span[role='img'] {\n    margin-right: 0;\n  }\n`;\n\nconst additionalItemsStyles = theme => css`\n  display: flex;\n  align-items: center;\n  margin-left: ${theme.gridUnit}px;\n  & > span {\n    margin-right: ${theme.gridUnit * 3}px;\n  }\n`;\n\nexport const ExploreChartHeader = ({\n  dashboardId,\n  colorScheme: dashboardColorScheme,\n  slice,\n  actions,\n  formData,\n  ownState,\n  chart,\n  user,\n  canOverwrite,\n  canDownload,\n  isStarred,\n  sliceName,\n  saveDisabled,\n  metadata,\n}) => {\n  const dispatch = useDispatch();\n  const { latestQueryFormData, sliceFormData } = chart;\n  const [isPropertiesModalOpen, setIsPropertiesModalOpen] = useState(false);\n  const updateCategoricalNamespace = async () => {\n    const { dashboards } = metadata || {};\n    const dashboard =\n      dashboardId && dashboards && dashboards.find(d => d.id === dashboardId);\n\n    if (!dashboard || !dashboardColorScheme) {\n      // clean up color namespace and shared color maps\n      // to avoid colors spill outside of dashboard context\n      resetColors(metadata?.color_namespace);\n    }\n\n    if (dashboard) {\n      try {\n        // Dashboards from metadata don't contain the json_metadata field\n        // to avoid unnecessary payload. Here we query for the dashboard json_metadata.\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/dashboard/${dashboard.id}`,\n        });\n        const result = response?.json?.result;\n\n        // setting the chart to use the dashboard custom label colors if any\n        const dashboardMetadata = JSON.parse(result.json_metadata);\n        // ensure consistency with the dashboard\n        applyColors(dashboardMetadata);\n      } catch (error) {\n        logging.info(t('Unable to retrieve dashboard colors'));\n      }\n    }\n  };\n\n  useEffect(() => {\n    updateCategoricalNamespace();\n  }, []);\n\n  const openPropertiesModal = () => {\n    setIsPropertiesModalOpen(true);\n  };\n\n  const closePropertiesModal = () => {\n    setIsPropertiesModalOpen(false);\n  };\n\n  const showModal = useCallback(() => {\n    dispatch(setSaveChartModalVisibility(true));\n  }, [dispatch]);\n\n  const updateSlice = useCallback(\n    slice => {\n      dispatch(sliceUpdated(slice));\n    },\n    [dispatch],\n  );\n\n  const history = useHistory();\n  const { redirectSQLLab } = actions;\n\n  const redirectToSQLLab = useCallback(\n    (formData, openNewWindow = false) => {\n      redirectSQLLab(formData, !openNewWindow && history);\n    },\n    [redirectSQLLab, history],\n  );\n\n  const [menu, isDropdownVisible, setIsDropdownVisible] =\n    useExploreAdditionalActionsMenu(\n      latestQueryFormData,\n      canDownload,\n      slice,\n      redirectToSQLLab,\n      openPropertiesModal,\n      ownState,\n      metadata?.dashboards,\n    );\n\n  const metadataBar = useMemo(() => {\n    if (!metadata) {\n      return null;\n    }\n    const items = [];\n    items.push({\n      type: MetadataType.Dashboards,\n      title:\n        metadata.dashboards.length > 0\n          ? tn(\n              'Added to 1 dashboard',\n              'Added to %s dashboards',\n              metadata.dashboards.length,\n              metadata.dashboards.length,\n            )\n          : t('Not added to any dashboard'),\n      description:\n        metadata.dashboards.length > 0\n          ? t(\n              'You can preview the list of dashboards in the chart settings dropdown.',\n            )\n          : undefined,\n    });\n    items.push({\n      type: MetadataType.LastModified,\n      value: metadata.changed_on_humanized,\n      modifiedBy: metadata.changed_by || t('Not available'),\n    });\n    items.push({\n      type: MetadataType.Owner,\n      createdBy: metadata.created_by || t('Not available'),\n      owners: metadata.owners.length > 0 ? metadata.owners : t('None'),\n      createdOn: metadata.created_on_humanized,\n    });\n    if (slice?.description) {\n      items.push({\n        type: MetadataType.Description,\n        value: slice?.description,\n      });\n    }\n    return <MetadataBar items={items} tooltipPlacement=\"bottom\" />;\n  }, [metadata, slice?.description]);\n\n  const oldSliceName = slice?.slice_name;\n  return (\n    <>\n      <PageHeaderWithActions\n        editableTitleProps={{\n          title: sliceName,\n          canEdit:\n            !slice ||\n            canOverwrite ||\n            (slice?.owners || []).includes(user?.userId),\n          onSave: actions.updateChartTitle,\n          placeholder: t('Add the name of the chart'),\n          label: t('Chart title'),\n        }}\n        showTitlePanelItems={!!slice}\n        certificatiedBadgeProps={{\n          certifiedBy: slice?.certified_by,\n          details: slice?.certification_details,\n        }}\n        showFaveStar={!!user?.userId}\n        faveStarProps={{\n          itemId: slice?.slice_id,\n          fetchFaveStar: actions.fetchFaveStar,\n          saveFaveStar: actions.saveFaveStar,\n          isStarred,\n          showTooltip: true,\n        }}\n        titlePanelAdditionalItems={\n          <div css={additionalItemsStyles}>\n            {sliceFormData ? (\n              <AlteredSliceTag\n                className=\"altered\"\n                origFormData={{\n                  ...sliceFormData,\n                  chartTitle: oldSliceName,\n                }}\n                currentFormData={{ ...formData, chartTitle: sliceName }}\n              />\n            ) : null}\n            {metadataBar}\n          </div>\n        }\n        rightPanelAdditionalItems={\n          <Tooltip\n            title={\n              saveDisabled\n                ? t('Add required control values to save chart')\n                : null\n            }\n          >\n            {/* needed to wrap button in a div - antd tooltip doesn't work with disabled button */}\n            <div>\n              <Button\n                buttonStyle=\"secondary\"\n                onClick={showModal}\n                disabled={saveDisabled}\n                data-test=\"query-save-button\"\n                css={saveButtonStyles}\n              >\n                <Icons.SaveOutlined iconSize=\"l\" />\n                {t('Save')}\n              </Button>\n            </div>\n          </Tooltip>\n        }\n        additionalActionsMenu={menu}\n        menuDropdownProps={{\n          visible: isDropdownVisible,\n          onVisibleChange: setIsDropdownVisible,\n        }}\n      />\n      {isPropertiesModalOpen && (\n        <PropertiesModal\n          show={isPropertiesModalOpen}\n          onHide={closePropertiesModal}\n          onSave={updateSlice}\n          slice={slice}\n        />\n      )}\n    </>\n  );\n};\n\nExploreChartHeader.propTypes = propTypes;\n\nexport default ExploreChartHeader;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { memo, useCallback, useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n  styled,\n  t,\n  css,\n  useTheme,\n  logging,\n  useChangeEffect,\n  useComponentDidMount,\n  usePrevious,\n} from '@superset-ui/core';\nimport { debounce, isEqual, isObjectLike, omit, pick } from 'lodash';\nimport { Resizable } from 're-resizable';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport { Global } from '@emotion/react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport {\n  getItem,\n  setItem,\n  LocalStorageKeys,\n} from 'src/utils/localStorageHelpers';\nimport { RESERVED_CHART_URL_PARAMS, URL_PARAMS } from 'src/constants';\nimport { QUERY_MODE_REQUISITES } from 'src/explore/constants';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport * as logActions from 'src/logger/actions';\nimport {\n  LOG_ACTIONS_MOUNT_EXPLORER,\n  LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS,\n} from 'src/logger/LogUtils';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport cx from 'classnames';\nimport * as chartActions from 'src/components/Chart/chartAction';\nimport { fetchDatasourceMetadata } from 'src/dashboard/actions/datasources';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport { mergeExtraFormData } from 'src/dashboard/components/nativeFilters/utils';\nimport { postFormData, putFormData } from 'src/explore/exploreUtils/formData';\nimport { datasourcesActions } from 'src/explore/actions/datasourcesActions';\nimport { mountExploreUrl } from 'src/explore/exploreUtils';\nimport { getFormDataFromControls } from 'src/explore/controlUtils';\nimport * as exploreActions from 'src/explore/actions/exploreActions';\nimport * as saveModalActions from 'src/explore/actions/saveModalActions';\nimport { useTabId } from 'src/hooks/useTabId';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport ExploreChartPanel from '../ExploreChartPanel';\nimport ConnectedControlPanelsContainer from '../ControlPanelsContainer';\nimport SaveModal from '../SaveModal';\nimport DataSourcePanel from '../DatasourcePanel';\nimport ConnectedExploreChartHeader from '../ExploreChartHeader';\nimport ExploreContainer from '../ExploreContainer';\n\nconst propTypes = {\n  ...ExploreChartPanel.propTypes,\n  actions: PropTypes.object.isRequired,\n  datasource_type: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number,\n  colorScheme: PropTypes.string,\n  ownColorScheme: PropTypes.string,\n  dashboardColorScheme: PropTypes.string,\n  isDatasourceMetaLoading: PropTypes.bool.isRequired,\n  chart: chartPropShape.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  controls: PropTypes.object.isRequired,\n  forcedHeight: PropTypes.string,\n  form_data: PropTypes.object.isRequired,\n  standalone: PropTypes.bool.isRequired,\n  force: PropTypes.bool,\n  timeout: PropTypes.number,\n  impressionId: PropTypes.string,\n  vizType: PropTypes.string,\n  saveAction: PropTypes.string,\n  isSaveModalVisible: PropTypes.bool,\n};\n\nconst ExplorePanelContainer = styled.div`\n  ${({ theme }) => css`\n    background: ${theme.colors.grayscale.light5};\n    text-align: left;\n    position: relative;\n    width: 100%;\n    max-height: 100%;\n    min-height: 0;\n    display: flex;\n    flex: 1;\n    flex-wrap: nowrap;\n    border-top: 1px solid ${theme.colors.grayscale.light2};\n    .explore-column {\n      display: flex;\n      flex-direction: column;\n      padding: ${theme.gridUnit * 2}px 0;\n      max-height: 100%;\n    }\n    .data-source-selection {\n      background-color: ${theme.colors.grayscale.light5};\n      padding: ${theme.gridUnit * 2}px 0;\n      border-right: 1px solid ${theme.colors.grayscale.light2};\n    }\n    .main-explore-content {\n      flex: 1;\n      min-width: ${theme.gridUnit * 128}px;\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      padding: 0 ${theme.gridUnit * 4}px;\n      .panel {\n        margin-bottom: 0;\n      }\n    }\n    .controls-column {\n      align-self: flex-start;\n      padding: 0;\n    }\n    .title-container {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n      padding: 0 ${theme.gridUnit * 2}px 0 ${theme.gridUnit * 4}px;\n      justify-content: space-between;\n      .horizontal-text {\n        font-size: ${theme.typography.sizes.m}px;\n      }\n    }\n    .no-show {\n      display: none;\n    }\n    .vertical-text {\n      writing-mode: vertical-rl;\n      text-orientation: mixed;\n    }\n    .sidebar {\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light4};\n      padding: ${theme.gridUnit * 2}px;\n      width: ${theme.gridUnit * 8}px;\n    }\n    .collapse-icon > svg {\n      color: ${theme.colors.primary.base};\n    }\n  `};\n`;\n\nconst updateHistory = debounce(\n  async (\n    formData,\n    datasourceId,\n    datasourceType,\n    isReplace,\n    standalone,\n    force,\n    title,\n    tabId,\n  ) => {\n    const payload = { ...formData };\n    const chartId = formData.slice_id;\n    const params = new URLSearchParams(window.location.search);\n    const additionalParam = Object.fromEntries(params);\n\n    if (chartId) {\n      additionalParam[URL_PARAMS.sliceId.name] = chartId;\n    } else {\n      additionalParam[URL_PARAMS.datasourceId.name] = datasourceId;\n      additionalParam[URL_PARAMS.datasourceType.name] = datasourceType;\n    }\n\n    const urlParams = payload?.url_params || {};\n    Object.entries(urlParams).forEach(([key, value]) => {\n      if (!RESERVED_CHART_URL_PARAMS.includes(key)) {\n        additionalParam[key] = value;\n      }\n    });\n\n    try {\n      let key;\n      let stateModifier;\n      if (isReplace) {\n        key = await postFormData(\n          datasourceId,\n          datasourceType,\n          formData,\n          chartId,\n          tabId,\n        );\n        stateModifier = 'replaceState';\n      } else {\n        key = getUrlParam(URL_PARAMS.formDataKey);\n        await putFormData(\n          datasourceId,\n          datasourceType,\n          key,\n          formData,\n          chartId,\n          tabId,\n        );\n        stateModifier = 'pushState';\n      }\n      // avoid race condition in case user changes route before explore updates the url\n      if (window.location.pathname.startsWith('/explore')) {\n        const url = mountExploreUrl(\n          standalone ? URL_PARAMS.standalone.name : null,\n          {\n            [URL_PARAMS.formDataKey.name]: key,\n            ...additionalParam,\n          },\n          force,\n        );\n        window.history[stateModifier](payload, title, url);\n      }\n    } catch (e) {\n      logging.warn('Failed at altering browser history', e);\n    }\n  },\n  1000,\n);\n\nconst defaultSidebarsWidth = {\n  controls_width: 320,\n  datasource_width: 300,\n};\n\nfunction getSidebarWidths(key) {\n  return getItem(key, defaultSidebarsWidth[key]);\n}\n\nfunction setSidebarWidths(key, dimension) {\n  const newDimension = Number(getSidebarWidths(key)) + dimension.width;\n  setItem(key, newDimension);\n}\n\nfunction ExploreViewContainer(props) {\n  const dynamicPluginContext = usePluginContext();\n  const dynamicPlugin = dynamicPluginContext.dynamicPlugins[props.vizType];\n  const isDynamicPluginLoading = dynamicPlugin && dynamicPlugin.mounting;\n  const wasDynamicPluginLoading = usePrevious(isDynamicPluginLoading);\n\n  /** the state of controls in the previous render */\n  const previousControls = usePrevious(props.controls);\n  /** the state of controls last time a query was triggered */\n  const [lastQueriedControls, setLastQueriedControls] = useState(\n    props.controls,\n  );\n\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [width, setWidth] = useState(\n    getSidebarWidths(LocalStorageKeys.DatasourceWidth),\n  );\n  const tabId = useTabId();\n\n  const theme = useTheme();\n\n  const addHistory = useCallback(\n    async ({ isReplace = false, title } = {}) => {\n      const formData = props.dashboardId\n        ? {\n            ...props.form_data,\n            dashboardId: props.dashboardId,\n          }\n        : props.form_data;\n      const { id: datasourceId, type: datasourceType } = props.datasource;\n\n      updateHistory(\n        formData,\n        datasourceId,\n        datasourceType,\n        isReplace,\n        props.standalone,\n        props.force,\n        title,\n        tabId,\n      );\n    },\n    [\n      props.dashboardId,\n      props.form_data,\n      props.datasource.id,\n      props.datasource.type,\n      props.standalone,\n      props.force,\n      tabId,\n    ],\n  );\n\n  const handlePopstate = useCallback(() => {\n    const formData = window.history.state;\n    if (formData && Object.keys(formData).length) {\n      props.actions.setExploreControls(formData);\n      props.actions.postChartFormData(\n        formData,\n        props.force,\n        props.timeout,\n        props.chart.id,\n      );\n    }\n  }, [props.actions, props.chart.id, props.timeout]);\n\n  const onQuery = useCallback(() => {\n    props.actions.setForceQuery(false);\n    props.actions.triggerQuery(true, props.chart.id);\n    addHistory();\n    setLastQueriedControls(props.controls);\n  }, [props.controls, addHistory, props.actions, props.chart.id]);\n\n  const handleKeydown = useCallback(\n    event => {\n      const controlOrCommand = event.ctrlKey || event.metaKey;\n      if (controlOrCommand) {\n        const isEnter = event.key === 'Enter' || event.keyCode === 13;\n        const isS = event.key === 's' || event.keyCode === 83;\n        if (isEnter) {\n          onQuery();\n        } else if (isS) {\n          if (props.slice) {\n            props.actions\n              .saveSlice(props.form_data, {\n                action: 'overwrite',\n                slice_id: props.slice.slice_id,\n                slice_name: props.slice.slice_name,\n                add_to_dash: 'noSave',\n                goto_dash: false,\n              })\n              .then(({ data }) => {\n                window.location = data.slice.slice_url;\n              });\n          }\n        }\n      }\n    },\n    [onQuery, props.actions, props.form_data, props.slice],\n  );\n\n  function onStop() {\n    if (props.chart && props.chart.queryController) {\n      props.chart.queryController.abort();\n    }\n  }\n\n  function toggleCollapse() {\n    setIsCollapsed(!isCollapsed);\n  }\n\n  useComponentDidMount(() => {\n    props.actions.logEvent(LOG_ACTIONS_MOUNT_EXPLORER);\n  });\n\n  useChangeEffect(tabId, (previous, current) => {\n    if (current) {\n      addHistory({ isReplace: true });\n    }\n  });\n\n  const previousHandlePopstate = usePrevious(handlePopstate);\n  useEffect(() => {\n    if (previousHandlePopstate) {\n      window.removeEventListener('popstate', previousHandlePopstate);\n    }\n    window.addEventListener('popstate', handlePopstate);\n    return () => {\n      window.removeEventListener('popstate', handlePopstate);\n    };\n  }, [handlePopstate, previousHandlePopstate]);\n\n  const previousHandleKeyDown = usePrevious(handleKeydown);\n  useEffect(() => {\n    if (previousHandleKeyDown) {\n      window.removeEventListener('keydown', previousHandleKeyDown);\n    }\n    document.addEventListener('keydown', handleKeydown);\n    return () => {\n      document.removeEventListener('keydown', handleKeydown);\n    };\n  }, [handleKeydown, previousHandleKeyDown]);\n\n  useEffect(() => {\n    if (wasDynamicPluginLoading && !isDynamicPluginLoading) {\n      // reload the controls now that we actually have the control config\n      props.actions.dynamicPluginControlsReady();\n    }\n  }, [isDynamicPluginLoading]);\n\n  useEffect(() => {\n    const hasError = Object.values(props.controls).some(\n      control =>\n        control.validationErrors && control.validationErrors.length > 0,\n    );\n    if (!hasError) {\n      props.actions.triggerQuery(true, props.chart.id);\n    }\n  }, []);\n\n  const reRenderChart = useCallback(\n    controlsChanged => {\n      const newQueryFormData = controlsChanged\n        ? {\n            ...props.chart.latestQueryFormData,\n            ...getFormDataFromControls(pick(props.controls, controlsChanged)),\n          }\n        : getFormDataFromControls(props.controls);\n      props.actions.updateQueryFormData(newQueryFormData, props.chart.id);\n      props.actions.renderTriggered(new Date().getTime(), props.chart.id);\n      addHistory();\n    },\n    [\n      addHistory,\n      props.actions,\n      props.chart.id,\n      props.chart.latestQueryFormData,\n      props.controls,\n    ],\n  );\n\n  // effect to run when controls change\n  useEffect(() => {\n    if (\n      previousControls &&\n      props.chart.latestQueryFormData.viz_type === props.controls.viz_type.value\n    ) {\n      if (\n        props.controls.datasource &&\n        (previousControls.datasource == null ||\n          props.controls.datasource.value !== previousControls.datasource.value)\n      ) {\n        // this should really be handled by actions\n        fetchDatasourceMetadata(props.form_data.datasource, true);\n      }\n\n      const changedControlKeys = Object.keys(props.controls).filter(\n        key =>\n          typeof previousControls[key] !== 'undefined' &&\n          !areObjectsEqual(\n            props.controls[key].value,\n            previousControls[key].value,\n          ),\n      );\n\n      // this should also be handled by the actions that are actually changing the controls\n      const displayControlsChanged = changedControlKeys.filter(\n        key => props.controls[key].renderTrigger,\n      );\n      if (displayControlsChanged.length > 0) {\n        reRenderChart(displayControlsChanged);\n      }\n    }\n  }, [props.controls, props.ownState]);\n\n  const chartIsStale = useMemo(() => {\n    if (lastQueriedControls) {\n      const { controls } = props;\n      const changedControlKeys = Object.keys(controls).filter(key => {\n        const lastControl = lastQueriedControls[key];\n        if (typeof lastControl === 'undefined') {\n          return false;\n        }\n        const { value: value1 } = controls[key];\n        const { value: value2 } = lastControl;\n        if (isObjectLike(value1) && isObjectLike(value2)) {\n          return !areObjectsEqual(value1, value2, {\n            ignoreFields: ['datasourceWarning'],\n          });\n        }\n        return !isEqual(value1, value2);\n      });\n\n      return changedControlKeys.some(\n        key =>\n          !props.controls[key].renderTrigger &&\n          !props.controls[key].dontRefreshOnChange,\n      );\n    }\n    return false;\n  }, [lastQueriedControls, props.controls]);\n\n  useChangeEffect(props.saveAction, () => {\n    if (['saveas', 'overwrite'].includes(props.saveAction)) {\n      onQuery();\n      addHistory({ isReplace: true });\n      props.actions.setSaveAction(null);\n    }\n  });\n\n  useEffect(() => {\n    if (props.ownState !== undefined) {\n      onQuery();\n      reRenderChart();\n    }\n  }, [props.ownState]);\n\n  if (chartIsStale) {\n    props.actions.logEvent(LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS);\n  }\n\n  const errorMessage = useMemo(() => {\n    const controlsWithErrors = Object.values(props.controls).filter(\n      control =>\n        control.validationErrors && control.validationErrors.length > 0,\n    );\n    if (controlsWithErrors.length === 0) {\n      return null;\n    }\n\n    const errorMessages = controlsWithErrors.map(\n      control => control.validationErrors,\n    );\n    const uniqueErrorMessages = [...new Set(errorMessages.flat())];\n\n    const errors = uniqueErrorMessages\n      .map(message => {\n        const matchingLabels = controlsWithErrors\n          .filter(control => control.validationErrors?.includes(message))\n          .map(control => control.label);\n        return [matchingLabels, message];\n      })\n      .map(([labels, message]) => (\n        <div key={message}>\n          {labels.length > 1 ? t('Controls labeled ') : t('Control labeled ')}\n          <strong>{` ${labels.join(', ')}`}</strong>\n          <span>: {message}</span>\n        </div>\n      ));\n\n    let errorMessage;\n    if (errors.length > 0) {\n      errorMessage = <div style={{ textAlign: 'left' }}>{errors}</div>;\n    }\n    return errorMessage;\n  }, [props.controls]);\n\n  function renderChartContainer() {\n    return (\n      <ExploreChartPanel\n        {...props}\n        errorMessage={errorMessage}\n        chartIsStale={chartIsStale}\n        onQuery={onQuery}\n      />\n    );\n  }\n\n  if (props.standalone) {\n    return renderChartContainer();\n  }\n\n  return (\n    <ExploreContainer>\n      <ConnectedExploreChartHeader\n        actions={props.actions}\n        canOverwrite={props.can_overwrite}\n        canDownload={props.can_download}\n        dashboardId={props.dashboardId}\n        colorScheme={props.dashboardColorScheme}\n        isStarred={props.isStarred}\n        slice={props.slice}\n        sliceName={props.sliceName}\n        table_name={props.table_name}\n        formData={props.form_data}\n        chart={props.chart}\n        ownState={props.ownState}\n        user={props.user}\n        reports={props.reports}\n        saveDisabled={errorMessage || props.chart.chartStatus === 'loading'}\n        metadata={props.metadata}\n      />\n      <ExplorePanelContainer id=\"explore-container\">\n        <Global\n          styles={css`\n            .navbar {\n              margin-bottom: 0;\n            }\n            body {\n              height: 100vh;\n              max-height: 100vh;\n              overflow: hidden;\n            }\n            #app-menu,\n            #app {\n              flex: 1 1 auto;\n            }\n            #app {\n              flex-basis: 100%;\n              overflow: hidden;\n              height: 100%;\n            }\n            #app-menu {\n              flex-shrink: 0;\n            }\n          `}\n        />\n        <Resizable\n          onResizeStop={(evt, direction, ref, d) => {\n            setWidth(ref.getBoundingClientRect().width);\n            setSidebarWidths(LocalStorageKeys.DatasourceWidth, d);\n          }}\n          defaultSize={{\n            width: getSidebarWidths(LocalStorageKeys.DatasourceWidth),\n            height: '100%',\n          }}\n          minWidth={defaultSidebarsWidth[LocalStorageKeys.DatasourceWidth]}\n          maxWidth=\"33%\"\n          enable={{ right: true }}\n          className={\n            isCollapsed ? 'no-show' : 'explore-column data-source-selection'\n          }\n        >\n          <div className=\"title-container\">\n            <span className=\"horizontal-text\">{t('Chart Source')}</span>\n            <span\n              role=\"button\"\n              tabIndex={0}\n              className=\"action-button\"\n              onClick={toggleCollapse}\n            >\n              <Icons.Expand\n                className=\"collapse-icon\"\n                iconColor={theme.colors.primary.base}\n                iconSize=\"l\"\n              />\n            </span>\n          </div>\n          <DataSourcePanel\n            formData={props.form_data}\n            datasource={props.datasource}\n            controls={props.controls}\n            actions={props.actions}\n            width={width}\n            user={props.user}\n          />\n        </Resizable>\n        {isCollapsed ? (\n          <div\n            className=\"sidebar\"\n            onClick={toggleCollapse}\n            data-test=\"open-datasource-tab\"\n            role=\"button\"\n            tabIndex={0}\n          >\n            <span role=\"button\" tabIndex={0} className=\"action-button\">\n              <Tooltip title={t('Open Datasource tab')}>\n                <Icons.Collapse\n                  className=\"collapse-icon\"\n                  iconColor={theme.colors.primary.base}\n                  iconSize=\"l\"\n                />\n              </Tooltip>\n            </span>\n          </div>\n        ) : null}\n        <Resizable\n          onResizeStop={(evt, direction, ref, d) =>\n            setSidebarWidths(LocalStorageKeys.ControlsWidth, d)\n          }\n          defaultSize={{\n            width: getSidebarWidths(LocalStorageKeys.ControlsWidth),\n            height: '100%',\n          }}\n          minWidth={defaultSidebarsWidth[LocalStorageKeys.ControlsWidth]}\n          maxWidth=\"33%\"\n          enable={{ right: true }}\n          className=\"col-sm-3 explore-column controls-column\"\n        >\n          <ConnectedControlPanelsContainer\n            exploreState={props.exploreState}\n            actions={props.actions}\n            form_data={props.form_data}\n            controls={props.controls}\n            chart={props.chart}\n            datasource_type={props.datasource_type}\n            isDatasourceMetaLoading={props.isDatasourceMetaLoading}\n            onQuery={onQuery}\n            onStop={onStop}\n            canStopQuery={props.can_add || props.can_overwrite}\n            errorMessage={errorMessage}\n            chartIsStale={chartIsStale}\n          />\n        </Resizable>\n        <div\n          className={cx(\n            'main-explore-content',\n            isCollapsed ? 'col-sm-9' : 'col-sm-7',\n          )}\n        >\n          {renderChartContainer()}\n        </div>\n      </ExplorePanelContainer>\n      {props.isSaveModalVisible && (\n        <SaveModal\n          addDangerToast={props.addDangerToast}\n          actions={props.actions}\n          form_data={props.form_data}\n          sliceName={props.sliceName}\n          dashboardId={props.dashboardId}\n        />\n      )}\n    </ExploreContainer>\n  );\n}\n\nExploreViewContainer.propTypes = propTypes;\n\nconst retainQueryModeRequirements = hiddenFormData =>\n  Object.keys(hiddenFormData ?? {}).filter(\n    key => !QUERY_MODE_REQUISITES.has(key),\n  );\n\nfunction mapStateToProps(state) {\n  const {\n    explore,\n    charts,\n    common,\n    impressionId,\n    dataMask,\n    reports,\n    user,\n    saveModal,\n  } = state;\n  const { controls, slice, datasource, metadata, hiddenFormData } = explore;\n  const hasQueryMode = !!controls.query_mode?.value;\n  const fieldsToOmit = hasQueryMode\n    ? retainQueryModeRequirements(hiddenFormData)\n    : Object.keys(hiddenFormData ?? {});\n  const form_data = omit(getFormDataFromControls(controls), fieldsToOmit);\n  const slice_id = form_data.slice_id ?? slice?.slice_id ?? 0; // 0 - unsaved chart\n  form_data.extra_form_data = mergeExtraFormData(\n    { ...form_data.extra_form_data },\n    {\n      ...dataMask[slice_id]?.ownState,\n    },\n  );\n  const chart = charts[slice_id];\n  const colorScheme = explore.form_data?.color_scheme;\n  const ownColorScheme = explore.form_data?.own_color_scheme;\n  const dashboardColorScheme = explore.form_data?.dashboard_color_scheme;\n\n  let dashboardId = Number(explore.form_data?.dashboardId);\n  if (Number.isNaN(dashboardId)) {\n    dashboardId = undefined;\n  }\n\n  return {\n    isDatasourceMetaLoading: explore.isDatasourceMetaLoading,\n    datasource,\n    datasource_type: datasource.type,\n    datasourceId: datasource.datasource_id,\n    dashboardId,\n    colorScheme,\n    ownColorScheme,\n    dashboardColorScheme,\n    controls: explore.controls,\n    can_add: !!explore.can_add,\n    can_download: !!explore.can_download,\n    can_overwrite: !!explore.can_overwrite,\n    column_formats: datasource?.column_formats ?? null,\n    containerId: slice\n      ? `slice-container-${slice.slice_id}`\n      : 'slice-container',\n    isStarred: explore.isStarred,\n    slice,\n    sliceName: explore.sliceName ?? slice?.slice_name ?? null,\n    triggerRender: explore.triggerRender,\n    form_data,\n    table_name: datasource.table_name,\n    vizType: form_data.viz_type,\n    standalone: !!explore.standalone,\n    force: !!explore.force,\n    chart,\n    timeout: common.conf.SUPERSET_WEBSERVER_TIMEOUT,\n    ownState: dataMask[slice_id]?.ownState,\n    impressionId,\n    user,\n    exploreState: explore,\n    reports,\n    metadata,\n    saveAction: explore.saveAction,\n    isSaveModalVisible: saveModal.isVisible,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const actions = {\n    ...exploreActions,\n    ...datasourcesActions,\n    ...saveModalActions,\n    ...chartActions,\n    ...logActions,\n  };\n  return {\n    actions: bindActionCreators(actions, dispatch),\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withToasts(memo(ExploreViewContainer)));\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { DatasourceType, t } from '@superset-ui/core';\nimport {\n  ColumnMeta,\n  ColumnOption,\n  ControlConfig,\n  ControlPanelSectionConfig,\n} from '@superset-ui/chart-controls';\nimport { ExplorePageInitialData } from './types';\n\nexport const controlPanelSectionsChartOptions: (ControlPanelSectionConfig | null)[] =\n  [\n    null,\n    {\n      label: t('Chart Options'),\n      expanded: true,\n      controlSetRows: [\n        [\n          'color_scheme',\n          {\n            name: 'rose_area_proportion',\n            config: {\n              type: 'CheckboxControl',\n              label: t('Use Area Proportions'),\n              description: t(\n                'Check if the Rose Chart should use segment area instead of ' +\n                  'segment radius for proportioning',\n              ),\n              default: false,\n              renderTrigger: true,\n            },\n          },\n        ],\n        [\n          {\n            name: 'stacked_style',\n            config: {\n              type: 'SelectControl',\n              label: t('Stacked Style'),\n              renderTrigger: true,\n              choices: [\n                ['stack', t('stack')],\n                ['stream', t('stream')],\n                ['expand', t('expand')],\n              ],\n              default: 'stack',\n              description: '',\n            },\n          },\n        ],\n      ],\n    },\n  ];\n\nexport const controlPanelSectionsChartOptionsOnlyColorScheme: ControlPanelSectionConfig[] =\n  [\n    {\n      label: t('Chart Options'),\n      expanded: true,\n      controlSetRows: [['color_scheme']],\n    },\n  ];\n\nexport const controlPanelSectionsChartOptionsTable: ControlPanelSectionConfig[] =\n  [\n    {\n      label: t('Chart Options'),\n      expanded: true,\n      controlSetRows: [\n        [\n          'metric',\n          'metrics',\n          {\n            name: 'all_columns',\n            config: {\n              type: 'SelectControl',\n              multi: true,\n              label: t('Columns'),\n              default: [],\n              description: t('Columns to display'),\n              optionRenderer: c => <ColumnOption column={c} showType />,\n              valueKey: 'column_name',\n              mapStateToProps: stateRef => ({\n                options: stateRef.datasource?.columns || [],\n              }),\n              freeForm: true,\n            } as ControlConfig<'SelectControl', ColumnMeta>,\n          },\n        ],\n      ],\n    },\n  ];\n\nexport const exploreInitialData: ExplorePageInitialData = {\n  form_data: {\n    datasource: '8__table',\n    metric: 'count',\n    slice_id: 371,\n    viz_type: 'table',\n  },\n  slice: {\n    cache_timeout: null,\n    description: null,\n    slice_id: 371,\n    slice_name: 'Age distribution of respondents',\n    is_managed_externally: false,\n    form_data: {\n      datasource: '8__table',\n      metric: 'count',\n      slice_id: 371,\n      viz_type: 'table',\n    },\n  },\n  dataset: {\n    id: 8,\n    type: DatasourceType.Table,\n    columns: [{ column_name: 'a' }],\n    metrics: [{ metric_name: 'first' }, { metric_name: 'second' }],\n    column_formats: {},\n    currency_formats: {},\n    verbose_map: {},\n    main_dttm_col: '',\n    datasource_name: '8__table',\n    description: null,\n  },\n};\n\nexport const fallbackExploreInitialData: ExplorePageInitialData = {\n  form_data: {\n    datasource: '0__table',\n    viz_type: 'table',\n  },\n  dataset: {\n    id: 0,\n    type: DatasourceType.Table,\n    columns: [],\n    metrics: [],\n    column_formats: {},\n    currency_formats: {},\n    verbose_map: {},\n    main_dttm_col: '',\n    owners: [],\n    datasource_name: 'missing_datasource',\n    name: 'missing_datasource',\n    description: null,\n  },\n  slice: null,\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { isEqual } from 'lodash';\nimport {\n  AdhocFilter,\n  ensureIsArray,\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS,\n  EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS,\n  isDefined,\n  isFreeFormAdhocFilter,\n  isSimpleAdhocFilter,\n  JsonObject,\n  NO_TIME_RANGE,\n  QueryFormData,\n  QueryObjectFilterClause,\n  SimpleAdhocFilter,\n} from '@superset-ui/core';\nimport { simpleFilterToAdhoc } from 'src/utils/simpleFilterToAdhoc';\n\nconst removeExtraFieldForNewCharts = (\n  filters: AdhocFilter[],\n  isNewChart: boolean,\n) =>\n  filters.map(filter => {\n    if (filter.isExtra) {\n      return { ...filter, isExtra: !isNewChart };\n    }\n    return filter;\n  });\n\nconst removeAdhocFilterDuplicates = (filters: AdhocFilter[]) => {\n  const isDuplicate = (\n    adhocFilter: AdhocFilter,\n    existingFilters: AdhocFilter[],\n  ) =>\n    existingFilters.some(\n      (existingFilter: AdhocFilter) =>\n        (isFreeFormAdhocFilter(existingFilter) &&\n          isFreeFormAdhocFilter(adhocFilter) &&\n          existingFilter.clause === adhocFilter.clause &&\n          existingFilter.sqlExpression === adhocFilter.sqlExpression) ||\n        (isSimpleAdhocFilter(existingFilter) &&\n          isSimpleAdhocFilter(adhocFilter) &&\n          existingFilter.operator === adhocFilter.operator &&\n          existingFilter.subject === adhocFilter.subject &&\n          ((!('comparator' in existingFilter) &&\n            !('comparator' in adhocFilter)) ||\n            ('comparator' in existingFilter &&\n              'comparator' in adhocFilter &&\n              isEqual(existingFilter.comparator, adhocFilter.comparator)))),\n    );\n\n  return filters.reduce((acc, filter) => {\n    if (!isDuplicate(filter, acc)) {\n      acc.push(filter);\n    }\n    return acc;\n  }, [] as AdhocFilter[]);\n};\n\nconst mergeFilterBoxToFormData = (\n  exploreFormData: QueryFormData,\n  dashboardFormData: JsonObject,\n) => {\n  const dateColumns = {\n    __time_range: 'time_range',\n    __time_col: 'granularity_sqla',\n    __time_grain: 'time_grain_sqla',\n    __granularity: 'granularity',\n  };\n  const appliedTimeExtras = {};\n\n  const filterBoxData: JsonObject = {};\n  ensureIsArray(dashboardFormData.extra_filters).forEach(filter => {\n    if (dateColumns[filter.col]) {\n      if (filter.val !== NO_TIME_RANGE) {\n        filterBoxData[dateColumns[filter.col]] = filter.val;\n        appliedTimeExtras[filter.col] = filter.val;\n      }\n    } else {\n      const adhocFilter = simpleFilterToAdhoc({\n        ...(filter as QueryObjectFilterClause),\n        isExtra: true,\n      });\n      filterBoxData.adhoc_filters = [\n        ...ensureIsArray(filterBoxData.adhoc_filters),\n        adhocFilter,\n      ];\n    }\n  });\n  filterBoxData.applied_time_extras = appliedTimeExtras;\n  return filterBoxData;\n};\n\nconst mergeNativeFiltersToFormData = (\n  exploreFormData: QueryFormData,\n  dashboardFormData: JsonObject,\n) => {\n  const nativeFiltersData: JsonObject = {};\n  const extraFormData = dashboardFormData.extra_form_data || {};\n  Object.entries(EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS).forEach(\n    ([srcKey, targetKey]) => {\n      const val = extraFormData[srcKey];\n      if (isDefined(val)) {\n        nativeFiltersData[targetKey] = val;\n      }\n    },\n  );\n\n  if ('time_grain_sqla' in extraFormData) {\n    nativeFiltersData.time_grain_sqla = extraFormData.time_grain_sqla;\n  }\n  if ('granularity_sqla' in extraFormData) {\n    nativeFiltersData.granularity_sqla = extraFormData.granularity_sqla;\n  }\n\n  const extras = dashboardFormData.extras || {};\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS.forEach(key => {\n    const val = extraFormData[key];\n    if (isDefined(val)) {\n      extras[key] = val;\n    }\n  });\n  if (Object.keys(extras).length) {\n    nativeFiltersData.extras = extras;\n  }\n\n  nativeFiltersData.adhoc_filters = ensureIsArray(\n    extraFormData.adhoc_filters,\n  ).map(filter => ({\n    ...filter,\n    isExtra: true,\n  }));\n\n  const appendFilters = ensureIsArray(extraFormData.filters).map(extraFilter =>\n    simpleFilterToAdhoc({ ...extraFilter, isExtra: true }),\n  );\n  Object.keys(exploreFormData).forEach(key => {\n    if (key.match(/adhoc_filter.*/)) {\n      nativeFiltersData[key] = [\n        ...ensureIsArray(nativeFiltersData[key]),\n        ...appendFilters,\n      ];\n    }\n  });\n  return nativeFiltersData;\n};\n\nconst applyTimeRangeFilters = (\n  dashboardFormData: JsonObject,\n  adhocFilters: AdhocFilter[],\n) => {\n  const extraFormData = dashboardFormData.extra_form_data || {};\n  if ('time_range' in extraFormData) {\n    return adhocFilters.map((filter: SimpleAdhocFilter) => {\n      if (filter.operator === 'TEMPORAL_RANGE') {\n        return {\n          ...filter,\n          comparator: extraFormData.time_range,\n          isExtra: true,\n        };\n      }\n      return filter;\n    });\n  }\n  return adhocFilters;\n};\n\nexport const getFormDataWithDashboardContext = (\n  exploreFormData: QueryFormData,\n  dashboardContextFormData: JsonObject,\n) => {\n  const filterBoxData = mergeFilterBoxToFormData(\n    exploreFormData,\n    dashboardContextFormData,\n  );\n  const nativeFiltersData = mergeNativeFiltersToFormData(\n    exploreFormData,\n    dashboardContextFormData,\n  );\n  const adhocFilters = [\n    ...Object.keys(exploreFormData),\n    ...Object.keys(filterBoxData),\n    ...Object.keys(nativeFiltersData),\n  ]\n    .filter(key => key.match(/adhoc_filter.*/))\n    .reduce(\n      (acc, key) => ({\n        ...acc,\n        [key]: removeExtraFieldForNewCharts(\n          applyTimeRangeFilters(\n            dashboardContextFormData,\n            removeAdhocFilterDuplicates([\n              ...ensureIsArray(exploreFormData[key]),\n              ...ensureIsArray(filterBoxData[key]),\n              ...ensureIsArray(nativeFiltersData[key]),\n            ]),\n          ),\n          exploreFormData.slice_id === 0,\n        ),\n      }),\n      {},\n    );\n\n  const ownColorScheme = exploreFormData.color_scheme;\n  const dashboardColorScheme = dashboardContextFormData.color_scheme;\n  const appliedColorScheme = dashboardColorScheme || ownColorScheme;\n\n  return {\n    ...exploreFormData,\n    ...dashboardContextFormData,\n    ...filterBoxData,\n    ...nativeFiltersData,\n    ...adhocFilters,\n    own_color_scheme: ownColorScheme,\n    color_scheme: appliedColorScheme,\n    dashboard_color_scheme: dashboardColorScheme,\n  };\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n  getLabelsColorMap,\n  isDefined,\n  JsonObject,\n  makeApi,\n  LabelsColorMapSource,\n  t,\n  getClientErrorObject,\n} from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { URL_PARAMS } from 'src/constants';\nimport getFormDataWithExtraFilters from 'src/dashboard/util/charts/getFormDataWithExtraFilters';\nimport { getAppliedFilterValues } from 'src/dashboard/util/activeDashboardFilters';\nimport { getParsedExploreURLParams } from 'src/explore/exploreUtils/getParsedExploreURLParams';\nimport { hydrateExplore } from 'src/explore/actions/hydrateExplore';\nimport ExploreViewContainer from 'src/explore/components/ExploreViewContainer';\nimport { ExploreResponsePayload, SaveActionType } from 'src/explore/types';\nimport { fallbackExploreInitialData } from 'src/explore/fixtures';\nimport { getItem, LocalStorageKeys } from 'src/utils/localStorageHelpers';\nimport { getFormDataWithDashboardContext } from 'src/explore/controlUtils/getFormDataWithDashboardContext';\n\nconst isValidResult = (rv: JsonObject): boolean =>\n  rv?.result?.form_data && isDefined(rv?.result?.dataset?.id);\n\nconst fetchExploreData = async (exploreUrlParams: URLSearchParams) => {\n  try {\n    const rv = await makeApi<{}, ExploreResponsePayload>({\n      method: 'GET',\n      endpoint: 'api/v1/explore/',\n    })(exploreUrlParams);\n    if (isValidResult(rv)) {\n      return rv;\n    }\n    let message = t('Failed to load chart data');\n    const responseError = rv?.result?.message;\n    if (responseError) {\n      message = `${message}:\\n${responseError}`;\n    }\n    throw new Error(message);\n  } catch (err) {\n    // todo: encapsulate the error handler\n    const clientError = await getClientErrorObject(err);\n    throw new Error(\n      clientError.message ||\n        clientError.error ||\n        t('Failed to load chart data.'),\n    );\n  }\n};\n\nconst getDashboardPageContext = (pageId?: string | null) => {\n  if (!pageId) {\n    return null;\n  }\n  return getItem(LocalStorageKeys.DashboardExploreContext, {})[pageId] || null;\n};\n\nconst getDashboardContextFormData = () => {\n  const dashboardPageId = getUrlParam(URL_PARAMS.dashboardPageId);\n  const dashboardContext = getDashboardPageContext(dashboardPageId);\n  if (dashboardContext) {\n    const sliceId = getUrlParam(URL_PARAMS.sliceId) || 0;\n    const {\n      colorScheme,\n      labelsColor,\n      labelsColorMap,\n      sharedLabelsColors,\n      chartConfiguration,\n      nativeFilters,\n      filterBoxFilters,\n      dataMask,\n      dashboardId,\n    } = dashboardContext;\n    const dashboardContextWithFilters = getFormDataWithExtraFilters({\n      chart: { id: sliceId },\n      filters: getAppliedFilterValues(sliceId, filterBoxFilters),\n      nativeFilters,\n      chartConfiguration,\n      dataMask,\n      colorScheme,\n      labelsColor,\n      labelsColorMap,\n      sharedLabelsColors,\n      sliceId,\n      allSliceIds: [sliceId],\n      extraControls: {},\n    });\n    Object.assign(dashboardContextWithFilters, {\n      dashboardId,\n    });\n    return dashboardContextWithFilters;\n  }\n  return null;\n};\n\nexport default function ExplorePage() {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const isExploreInitialized = useRef(false);\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    const exploreUrlParams = getParsedExploreURLParams(location);\n    const saveAction = getUrlParam(\n      URL_PARAMS.saveAction,\n    ) as SaveActionType | null;\n    const dashboardContextFormData = getDashboardContextFormData();\n    if (!isExploreInitialized.current || !!saveAction) {\n      fetchExploreData(exploreUrlParams)\n        .then(({ result }) => {\n          const formData =\n            !isExploreInitialized.current && dashboardContextFormData\n              ? getFormDataWithDashboardContext(\n                  result.form_data,\n                  dashboardContextFormData,\n                )\n              : result.form_data;\n          dispatch(\n            hydrateExplore({\n              ...result,\n              form_data: formData,\n              saveAction,\n            }),\n          );\n        })\n        .catch(err => {\n          dispatch(hydrateExplore(fallbackExploreInitialData));\n          dispatch(addDangerToast(err.message));\n        })\n        .finally(() => {\n          setIsLoaded(true);\n          isExploreInitialized.current = true;\n        });\n    }\n    getLabelsColorMap().source = LabelsColorMapSource.Explore;\n  }, [dispatch, location]);\n\n  if (!isLoaded) {\n    return <Loading />;\n  }\n  return <ExploreViewContainer />;\n}\n"],"names":["getDatasourceAsSaveableDataset","source","_source$database","columns","name","datasource_name","dbId","database","id","sql","catalog","schema","global","undefined","Geolib","TO_RAD","Math","PI","TO_DEG","PI_X2","PI_DIV4","geolib","Object","create","prototype","version","value","radius","minLat","maxLat","minLon","maxLon","sexagesimalPattern","measures","extend","methods","overwrite","prop","bind","Number","toRad","this","toDeg","decimal","sexagesimal","distance","getKeys","point","toString","call","longitude","length","latitude","elevation","getKey","possibleValues","key","every","val","hasOwnProperty","getLat","raw","useDecimal","getLon","getElev","coords","retval","elev","ll","validate","keys","lat","lng","isDecimal","isSexagesimal","getDistance","start","end","accuracy","precision","floor","cosSigma","sigma","sinAlpha","cosSqAlpha","cos2SigmaM","sinSigma","lambdaP","s","e","a","b","f","L","U1","atan","tan","parseFloat","U2","sinU1","sin","cosU1","cos","sinU2","cosU2","lambda","iterLimit","sinLambda","cosLambda","sqrt","atan2","isNaN","C","abs","NaN","uSq","B","toFixed","climb","round","pow","getDistanceSimple","acos","getCenter","coordsArray","Array","push","lon","hyp","X","Y","Z","forEach","coord","nb_coords","getBounds","useElevation","stats","Infinity","maxLng","minLng","maxElev","minElev","i","l","max","min","getCenterOfBounds","getBoundsOfDistance","radLat","radLon","radDist","MAX_LAT_RAD","MIN_LAT_RAD","MAX_LON_RAD","MIN_LON_RAD","deltaLon","asin","isPointInside","latlng","c","j","preparePolygonForIsPointInsideOptimized","constant","multiple","isPointInsideWithPreparedPolygon","flgPointInside","y","x","isInside","apply","arguments","isPointInCircle","center","withinRadius","getRhumbLineBearing","originLL","destLL","diffLon","diffPhi","log","getBearing","getCompassDirection","bearingMode","direction","bearing","exact","rough","getDirection","orderByDistance","map","idx","augmentedCoord","sort","isPointInLine","isPointNearLine","getDistanceFromLine","d1","d2","d3","alpha","beta","findNearest","offset","limit","ordered","splice","getPathLength","last","dist","getSpeed","options","unit","mPerHr","time","computeDestinationPoint","convertUnit","Error","sexagesimal2decimal","decimal2sexagesimal","dec","tmp","split","deg","sec","data","RegExp","exec","replace","test","n","decPlace","module","exports","condition","format","d","error","args","argIndex","framesToPop","identity","arrayEach","baseEach","castFunction","isArray","collection","iteratee","baseForOwn","object","root","reTrimStart","nativeParseInt","parseInt","string","radix","guard","rankings","CASE_SENSITIVE_EQUAL","EQUAL","STARTS_WITH","WORD_STARTS_WITH","CONTAINS","ACRONYM","MATCHES","NO_MATCH","defaultBaseSortFn","String","rankedValue","localeCompare","matchSorter","items","threshold","baseSort","sorter","matchedItems","sortRankedValues","reduce","matches","item","index","rankingInfo","rank","getMatchRanking","keyIndex","keyThreshold","valuesToRank","allValues","J","attributes","getKeyAttributes","itemValues","getItemValues","I","itemValue","getAllValuesToRank","_ref2","_ref3","newRank","newRankedValue","minRanking","maxRanking","getHighestRanking","_ref","testString","stringToRank","prepareValueForComparison","toLowerCase","startsWith","includes","acronym","wordInString","splitByHyphenWord","substr","getAcronym","matchingInOrderCharCount","charNumber","findMatchingCharacter","matchChar","firstIndex","spread","spreadPercentage","inOrderPercentage","getRanking","getClosenessRanking","aRank","aKeyIndex","bRank","bKeyIndex","_ref4","keepDiacritics","path","values","nestedKey","nestedValues","nestedItem","nestedValue","concat","getNestedValues","defaultKeyAttributes","red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","grey","blueGrey","darkText","lightText","darkIcons","lightIcons","white","black","defineProperty","AlphaPicker","_extends","assign","target","_react2","_interopRequireDefault","_reactcss2","_common","_AlphaPointer2","obj","__esModule","default","rgb","hsl","width","height","onChange","style","renderers","pointer","_ref$className","className","styles","picker","position","createElement","Alpha","defaultProps","ColorWrap","AlphaPointer","borderRadius","transform","backgroundColor","boxShadow","vertical","Block","_propTypes2","_color2","_BlockSwatches2","onSwatchHover","hex","colors","triangle","transparent","handleChange","hexCode","isValidHex","card","background","head","display","alignItems","justifyContent","body","padding","label","fontSize","color","getContrastingColor","borderStyle","borderWidth","borderColor","top","left","marginLeft","input","border","outline","boxSizing","Checkboard","onClick","EditableInput","propTypes","oneOfType","number","arrayOf","oneOf","BlockSwatches","_map2","swatches","marginRight","swatch","float","marginBottom","clear","Swatch","onHover","focusStyle","Chrome","_ChromeFields2","_ChromePointer2","_ChromePointerCircle2","disableAlpha","hsv","fontFamily","saturation","paddingBottom","overflow","Saturation","controls","marginTop","active","absolute","r","g","zIndex","toggles","flex","hue","Hue","bool","ChromeFields","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_possibleConstructorReturn","self","ReferenceError","_React$Component","_temp","_this","instance","TypeError","_classCallCheck","_len","_key","__proto__","getPrototypeOf","state","view","toggleViews","setState","h","showHighlight","hideHighlight","subClass","superClass","constructor","setPrototypeOf","_inherits","nextProps","_this2","wrap","paddingTop","fields","field","paddingLeft","toggle","textAlign","icon","cursor","iconHighlight","textTransform","lineHeight","svg","arrowOffset","ref","viewBox","onMouseOver","onMouseEnter","onMouseOut","iconUp","fill","iconDown","Component","ChromePointer","ChromePointerCircle","Circle","material","newObj","_interopRequireWildcard","_CircleSwatch2","circleSize","circleSpacing","flexWrap","CircleSwatch","_reactcss","hover","transition","handleHover","_react","_Checkboard2","skip","change","calculateChange","container","handleMouseDown","window","addEventListener","handleMouseUp","unbindEventListeners","removeEventListener","checkboard","gradient","shadow","margin","slider","onMouseDown","onTouchMove","onTouchStart","PureComponent","size","grid","get","canvas","_debounce2","Picker","ColorPicker","event","simpleCheckForValidColor","toState","oldHue","onChangeComplete","debounce","handleSwatchHover","fn","optionalEvents","_defineProperty","handleBlur","blurValue","handleKeyDown","stringValue","isPercentage","indexOf","amount","keyCode","handleDrag","dragLabel","newValue","movementX","dragMax","preventDefault","toUpperCase","document","activeElement","onKeyDown","onBlur","placeholder","spellCheck","hideLabel","_props$direction","Raised","zDepth","children","content","bg","_throttle2","throttle","circle","v","_interaction","_","_ref$onClick","_ref$title","title","focus","_ref$focusStyle","tabIndex","handleFocus","_Alpha","_Checkboard","_EditableInput","_Hue","_Raised","_Saturation","_ColorWrap","_Swatch","Compact","_CompactColor2","_CompactFields2","compact","CompactColor","dot","opacity","CompactFields","paddingRight","HEXwrap","HEXinput","HEXlabel","RGBwrap","RGBinput","RGBlabel","Github","_GithubSwatch2","borderBottomColor","triangleShadow","right","GithubSwatch","hoverSwatch","HuePicker","_HuePointer2","SliderPointer","Material","borderBottom","Hex","third","Photoshop","_PhotoshopFields2","_PhotoshopPointerCircle2","_PhotoshopPointer2","_PhotoshopButton2","_PhotoshopPreviews2","currentColor","_props$className","backgroundImage","previews","actions","header","onAccept","onCancel","PhotoshopBotton","button","PhotoshopPicker","divider","fieldSymbols","symbol","PhotoshopPointerCircle","triangleBorder","Extend","leftInside","rightInside","PhotoshopPreviews","new","current","Sketch","_SketchFields2","_SketchPresetColors2","presetColors","sliders","activeColor","SketchFields","single","double","SketchPresetColors","borderTop","swatchWrap","handleClick","colorObjOrString","shape","isRequired","Slider","_SliderSwatches2","_SliderPointer2","SliderSwatch","first","SliderSwatches","_SliderSwatch2","Swatches","_SwatchesGroup2","overflowY","group","SwatchesColor","check","SwatchesGroup","_SwatchesColor2","Twitter","hash","hexcode","containerWidth","clientWidth","containerHeight","clientHeight","pageX","touches","pageY","getBoundingClientRect","pageXOffset","pageYOffset","_a","checkboardCache","render","c1","c2","serverCanvas","ctx","getContext","fillStyle","fillRect","translate","toDataURL","_each2","_tinycolor2","checked","passed","letter","toHsl","toHsv","toRgb","toHex","lh","charAt","isValid","col","_h","Span","Focus","onFocus","_container$getBoundin","bright","_Chrome","_Compact","_Sketch","autoprefix","_forOwn3","transforms","msBorderRadius","MozBorderRadius","OBorderRadius","WebkitBorderRadius","msBoxShadow","MozBoxShadow","OBoxShadow","WebkitBoxShadow","userSelect","WebkitTouchCallout","KhtmlUserSelect","MozUserSelect","msUserSelect","WebkitUserSelect","WebkitBoxFlex","MozBoxFlex","WebkitFlex","msFlex","flexBasis","WebkitFlexBasis","WebkitJustifyContent","msTransition","MozTransition","OTransition","WebkitTransition","msTransform","MozTransform","OTransform","WebkitTransform","bottom","otherElementStyles","elements","prefixed","element","expanded","Active","onMouseUp","Hover","handleMouseOver","handleMouseOut","flattenNames","_isString3","_isPlainObject3","_map3","things","names","thing","ReactCSS","loop","handleActive","_flattenNames2","_mergeClasses2","_autoprefix2","_hover3","_active2","_loop3","classes","activations","activeNames","merged","setProp","mergeClasses","_cloneDeep3","toMerge","characterMap","chars","join","allAccents","firstAccent","matcher","match","removeAccents","has","remove","Styles","styled","div","updateDataset","async","datasetId","owners","overrideColumns","endpoint","JSON","stringify","database_id","SupersetClient","put","headers","json","result","UNTITLED","t","SaveDatasetModal","visible","onHide","buttonTextOnSave","buttonTextOnOverwrite","modalDescription","datasource","openWindow","formData","defaultVizType","useSelector","_state$common","_state$common$conf","common","conf","DEFAULT_VIZ_TYPE","getDefaultDatasetName","moment","datasetName","setDatasetName","useState","newOrOverwrite","setNewOrOverwrite","DatasetRadioState","SaveNew","shouldOverwriteDataset","setShouldOverwriteDataset","datasetToOverwrite","setDatasetToOverwrite","selectedDatasetToOverwrite","setSelectedDatasetToOverwrite","loading","setLoading","user","dispatch","useDispatch","createWindow","url","open","location","href","formDataWithDefaults","EXPLORE_CHART_DEFAULT","loadDatasetOverwriteOptions","useCallback","userId","queryParams","rison","filters","opr","order_column","order_direction","then","response","table_name","datasetid","totalCount","count","disableSaveAndExploreBtn","OverwriteDataset","_isEmpty","_jsx","StyledModal","show","footer","_jsxs","_Fragment","Button","disabled","buttonStyle","handleSaveInDataset","_datasource$columns3","_datasource$database","selectedColumns","templateParams","_isString","p","parse","_filters","createDatasource","datasourceName","postFormData","all_columns","column","column_name","mountExploreUrl","URL_PARAMS","formDataKey","catch","addDangerToast","handleOverwriteCancel","_datasource$columns","_datasetToOverwrite$o","_datasource$columns2","Promise","all","type","is_dttm","o","Radio","Group","Input","AsyncSelect","allowClear","showSearch","ariaLabel","handleOverwriteDatasetOption","option","filterOption","filterAutocompleteOption","inputValue","getPopupContainer","TimerLabel","Label","theme","typography","families","monospace","Timer","endTime","isRunning","startTime","status","clockStr","setClockStr","timer","useRef","useEffect","stopTimer","clearInterval","setInterval","endDttm","now","fDuration","role","EXPLORE_URL_SEARCH_PARAMS","form_data","parser","formDataObject","datasource_id","datasource_type","slice_id","form_data_key","permalink_key","viz_type","dashboard_id","EXPLORE_URL_PATH_PARAMS","table","getParsedExploreURLSearchParams","search","urlSearchParams","URLSearchParams","from","acc","currentParam","_EXPLORE_URL_SEARCH_P4","paramValue","parsedParamValue","_EXPLORE_URL_SEARCH_P","_EXPLORE_URL_SEARCH_P2","_EXPLORE_URL_SEARCH_P3","getParsedExploreURLParams","entries","pathname","re","pathGroups","entry","getParsedExploreURLPathParams","TooltipContent","cachedTimestamp","cachedText","fromNow","CacheLabel","hovered","setHovered","labelType","Tooltip","CHART_STATUS_MAP","failed","success","ChartPills","forwardRef","queriesResponse","chartStatus","chartUpdateStartTime","chartUpdateEndTime","refreshCachedQuery","rowLimit","isLoading","firstQueryResponse","css","gridUnit","RowCountLabel","rowcount","sql_rowcount","is_cached","CachedLabel","cached_dttm","AlertContainer","info","base","light2","dark2","sizes","m","dark1","alert","ButtonContainer","Title","weights","bold","typeChart","warning","danger","ExploreAlert","bodyText","primaryButtonAction","secondaryButtonAction","primaryButtonText","secondaryButtonText","buttonSize","PropTypes","onQuery","can_overwrite","can_download","dashboardId","column_formats","containerId","isStarred","slice","sliceName","vizType","ownState","standalone","force","timeout","chartIsStale","chart","chartPropShape","errorMessage","triggerRender","GUTTER_SIZE_FACTOR","INITIAL_SIZES","MIN_SIZES","grayscale","showSplite","ExploreChartPanel","chartAlert","canDownload","_metaDataRegistry$get","useTheme","gutterMargin","gutterHeight","chartPanelRef","observerRef","resizeObserverRef","chartPanelWidth","chartPanelHeight","setChartPanelSize","onResize","useResizeDetector","refreshMode","refreshRate","useResizeDetectorByObserver","splitSizes","setSplitSizes","isFeatureEnabled","FeatureFlag","DatapanelClosedByDefault","getItem","LocalStorageKeys","ChartSplitSizes","setShowSplit","IsDatapanelOpen","showDatasetModal","setShowDatasetModal","metaDataRegistry","getChartMetadataRegistry","useLegacyApi","vizTypeNeedsDataset","DatasourceType","Table","showAlertBanner","ensureIsArray","updateQueryContext","query_context","queryContext","buildV1ChartDataPayload","resultFormat","resultType","setDataMask","query_context_generation","setItem","onDragEnd","setForceQuery","postChartFormData","updateQueryFormData","onCollapseChange","isOpen","renderChart","ChartContainer","annotationData","chartStackTrace","chartId","latestQueryFormData","setControlValue","triggerQuery","panelBody","useMemo","Alert","message","description","getChartRequiredFieldsMissingMessage","row_limit","standaloneChartBody","queryFormData","setQueryFormData","elementStyle","dimension","elementSize","gutterSize","standaloneClass","Split","minSize","expandToMin","DataTablesPane","queryForce","ControlRow","isHiddenControl","control","isVisible","countableControls","filter","colSize","CustomListItem","selectable","rest","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","light4","List","Item","AnnotationLayer","AsyncEsmComponent","colorScheme","annotationError","annotationQuery","validationErrors","refreshAnnotationData","AnnotationLayerControl","super","popoverVisible","addedAnnotationIndex","addAnnotationLayer","removeAnnotationLayer","handleVisibleChange","componentDidMount","preload","UNSAFE_componentWillReceiveProps","originalAnnotation","newAnnotation","annotations","anno","annotation","popoverKey","prevState","getSectionContainerElement","setProperty","renderPopover","close","renderInfo","primary","InfoTooltipWithTrigger","bsStyle","tooltip","addedAnnotation","ControlPopover","trigger","onVisibleChange","addLayerPopoverKey","bordered","destroyTooltipOnHide","themedAnnotationLayerControl","withTheme","connect","charts","explore","_explore$controls","_explore$controls$col","getChartKey","color_scheme","annotationObj","runAnnotationQuery","StyledDiv","MinInput","InputNumber","MaxInput","parseNumber","_parseInt","BoundsControl","minMax","setMinMax","debouncedOnChange","_debounce","update","mm","ControlHeader","Manager","refs","getIndex","find","node","sortableInfo","sortByIndex","keysToOmit","events","move","vendorPrefix","getComputedStyle","documentElement","pre","OLink","setInlineStyles","setTranslate3d","setTransitionDuration","duration","closest","el","parentNode","getPixelValue","provideDisplayName","prefix","Component$$1","componentName","displayName","getScrollAdjustedBoundingClientRect","scrollDelta","boundingClientRect","getPosition","changedTouches","getEdgeOffset","parent","nodeOffset","offsetLeft","offsetTop","getLockPixelOffset","lockOffset","offsetX","offsetY","isFinite","getScrollingParent","HTMLElement","computedStyle","overflowRegex","property","isScrollable","NodeType","Anchor","Canvas","Option","Textarea","Select","isSortableHandle","sortableHandle","AutoScroller","onScrollCallback","interval","minTranslate","maxTranslate","speed","_this$container","scrollTop","scrollLeft","scrollHeight","scrollWidth","isTop","isBottom","isLeft","isRight","isAutoScrolling","axis","contentWindow","disableAutoscroll","getContainer","getHelperDimensions","helperClass","helperContainer","hideSortableGhost","keyboardSortingTransitionDuration","lockAxis","lockToContainerEdges","onSortEnd","onSortMove","onSortOver","onSortStart","pressDelay","pressThreshold","keyCodes","lift","drop","cancel","up","down","shouldCancelStart","transitionDuration","updateBeforeSortStart","useDragHandle","useWindowAsScrollContainer","defaultKeyCodes","offsetHeight","offsetWidth","tagName","contentEditable","omittedProps","SortableContext","createContext","manager","propTypes$1","omittedProps$1","addTooltip","itemGenerator","keyAccessor","isFloat","isInt","controlName","nanoid","SortableListItem","WrappedComponent","_class","config","withRef","WithSortableElement","_getPrototypeOf2","createRef","register","prevProps","unregister","_this$props","findDOMNode","context","add","wrappedInstance","SortableElement","SortableList","WithSortableContainer","touched","nodeIsChild","sorting","_node$sortableInfo","isTouchEvent","handlePress","pressTimer","setTimeout","_this$props2","_awaitingUpdateBeforeSortStart","delta","combinedDelta","isActive","clearTimeout","cancelTimer","getActive","_temp6","_temp7","selector","clonedNode","_node","getElementMargin","gridGap","gridColumnGap","gridRowGap","getContainerGridGap","containerBoundingRect","scrollContainer","dimensions","_getHelperDimensions","_collection","marginOffset","newIndex","_axis","offsetEdge","initialOffset","_isKeySorting","initialScroll","initialWindowScroll","helper","appendChild","querySelectorAll","cloneNode","drawImage","pointerEvents","_hideSortableGhost","sortableGhost","visibility","_useWindowAsScrollContainer","innerWidth","innerHeight","containerTop","containerLeft","containerBottom","containerRight","_helperClass","classList","listenerNode","handleKeyEnd","eventName","handleSortMove","handleSortEnd","sortingIndex","_onSortStart","isKeySorting","nodes","getOrderedRefs","keyMove","_this$props3","_temp8","_temp9","finalizer","resolve","_finallyRethrows","_wasThrown","_result","reject","cancelable","updateHelperPosition","animateNodes","autoscroll","_this$props4","_this$manager","removeChild","len","_node2","edgeOffset","autoScroller","oldIndex","scrollX","scrollY","_this$props5","_this$props5$keyCodes","customKeyCodes","isValidSortingTarget","stopPropagation","keyLift","keyDrop","_node$sortableInfo2","initialFocusedNode","shift","lastIndex","prevIndex","targetIndex","getTargetIndex","targetNode","containerScrollDelta","targetBoundingClientRect","targetTranslate","targetPosition","shouldAdjustForSize","sizeAdjustment","ignoreTransition","validateProps","sortableContextValue","handleEnd","handleMove","handleStart","containerNode","ownerDocument","defaultView","scrollingElement","onAutoScroll","_this3","_this$props6","_this$props6$keyboard","_getLockPixelOffsets","offsets","_offsets","minLockOffset","maxLockOffset","getLockPixelOffsets","_getLockPixelOffsets2","minOffset","maxOffset","_this$props7","windowScrollDelta","sortingOffset","_node3","mustShiftBackward","mustShiftForward","nextNode","prevNode","getWrappedInstance","Provider","SortableContainer","SortableDragger","WithSortableHandle","SortableHandle","CollectionControl","onAdd","array","to","removeItem","ix","renderList","Control","controlMap","commonProps","HeaderContainer","AddIconButton","Icons","PlusLarge","iconSize","iconColor","light5","swatchCommon","StyledSwatch","checkerboard","ColorPickerControl","getCategoricalSchemeRegistry","SketchPicker","colStyle","Popover","placement","CLOSE","SAVE_AS_DATASET","OPEN_IN_SQL_LAB","history","useHistory","closeModal","changeDatasource","metaKey","openSQL","openInNewWindow","_isObject","viewInSQLLab","payload","datasourceKey","postForm","requestedQuery","Boolean","isEditable","onDatasourceSave","light3","CHANGE_DATASET","VIEW_IN_SQL_LAB","EDIT_DATASET","datasourceIconLookup","Query","ConsoleSqlOutlined","DatasetPhysical","renderDatasourceTitle","displayString","preventRouterLinkWhileMetaClicked","evt","DatasourceControl","_this$props$form_data","_columns$find","_columns$find2","temporalColumns","defaultTemporalColumn","getTemporalColumns","timeCol","granularity_sqla","isGranularitySqalTemporal","isDefaultTemporal","temporalColumn","toggleShowDatasource","showDatasource","toggleChangeDatasourceModal","showChangeDatasourceModal","toggleEditDatasourceModal","showEditDatasourceModal","toggleSaveDatasetModal","showSaveDatasetModal","handleMenuItemClick","safeStringify","_datasource$owners","_extra","isMissingDatasource","isMissingParams","datasourceId","getUrlParam","sliceId","allowEdit","isUserAdmin","canAccessSqlLab","userHasPermission","editText","defaultDatasourceMenu","Menu","Link","queryDatasourceMenu","ModalTrigger","triggerNode","modalTitle","modalBody","ViewQuery","select_star","modalFooter","ViewQueryModalFooter","draggable","resizable","responsive","health_check_message","healthCheckMessage","extra","titleText","getDatasourceTitle","AlertSolid","warning_markdown","WarningIconWithTooltip","warningMarkdown","AntdDropdown","overlay","MoreVert","ErrorAlert","level","subtitle","DatasourceModal","ChangeDatasourceModal","TitleLabel","span","StyledInput","AdhocMetricEditPopoverTitle","isEditDisabled","isHovered","setIsHovered","isEditMode","setIsEditMode","defaultLabel","handleKeyPress","ev","handleInputBlur","hasCustomLabel","autoFocus","onKeyPress","onClose","getCurrentTab","getCurrentLabel","adhocMetric","AdhocMetric","columnType","savedMetricsOptions","savedMetricType","savedMetric","isNewMetric","isLabelModified","noOp","StyledSelect","SAVED_TAB_KEY","AdhocMetricEditPopover","defaultActiveTabKey","getDefaultTab","onSave","onResetStateAndClose","onColumnChange","onAggregateChange","onSavedMetricChange","onSqlExpressionChange","onDragDown","onMouseMove","onTabChange","handleAceEditorRef","refreshAceEditor","POPOVER_INITIAL_WIDTH","POPOVER_INITIAL_HEIGHT","componentDidUpdate","_prevState$adhocMetri","_this$state$adhocMetr","_prevState$adhocMetri2","_this$state$adhocMetr2","_prevState$adhocMetri3","_prevState$adhocMetri4","_this$state$adhocMetr3","_this$state$adhocMetr4","_prevState$savedMetri","_this$state$savedMetr","_this$state$savedMetr2","_this$state$savedMetr3","_this$state$adhocMetr5","sqlExpression","aggregate","metric_name","savedMetricLabel","verbose_name","adhocMetricLabel","getDefaultLabel","componentWillUnmount","isDefined","expressionType","_this$props$savedMetr","metric","oldMetric","columnName","duplicateWith","EXPRESSION_TYPES","SIMPLE","savedMetricName","SQL","dragStartX","clientX","dragStartY","clientY","dragStartWidth","dragStartHeight","tab","aceEditorRef","_this$aceEditorRef$ed","editor","resize","renderColumnOption","StyledColumnOption","showType","renderMetricOption","StyledMetricOption","_savedMetricsOptions$","propsAdhocMetric","propsSavedMetric","popoverProps","keywords","sqlKeywords","getColumnKeywords","columnValue","inferSqlExpressionColumn","columnSelectProps","aggregateSelectProps","AGGREGATES_OPTIONS","inferSqlExpressionAggregate","savedSelectProps","stateIsValid","hasUnsavedChanges","equals","Form","layout","Tabs","defaultActiveKey","allowOverflow","TabPane","FormItem","customLabel","EmptyStateSmall","image","handleDatasetModal","disallow_adhoc_metrics","SQLEditor","showLoadingForImport","showGutter","translateToSql","transformCountDistinct","editorProps","$blockScrolling","enableLiveAutocompletion","wrapEnabled","cta","AdhocMetricPopoverTrigger","onPopoverResize","onLabelChange","closePopover","togglePopover","currentLabel","labelModified","isTitleEditDisabled","getDerivedStateFromProps","optionName","_this$props$adhocMetr","defaultMetricLabel","forceUpdate","showModal","newMetric","onMetricEdit","isControlledComponent","overlayContent","ExplorePopoverContent","isNew","popoverTitle","defaultVisible","onRemoveMetric","onMoveLabel","onDropLabel","multi","datasourceWarningMessage","AdhocMetricOption","withCaret","error_text","OptionControlLabel","onRemove","DndItemType","isFunction","savedMetrics","MetricDefinitionValue","getSavedMetricByName","metricName","_savedMetric","metricOptionProps","adhocMetricType","clearable","getOptionsForSavedMetrics","currentMetricValues","currentMetric","_savedMetrics$filter","isDictionaryForAdhocMetric","coerceAdhocMetrics","emptySavedMetric","expression","MetricsControl","propsValue","setValue","prevColumns","usePrevious","prevSavedMetrics","opts","optionValues","onNewMetric","changedMetric","valuesCopy","moveLabel","dragIndex","hoverIndex","newValues","isAddNewMetricDisabled","savedMetricOptions","newAdhocMetric","addNewMetricPopoverTrigger","_isEqual","matchingMetrics","getMetricsMatchingCurrentDataset","some","valueRenderer","LabelsContainer","AddControlLabel","PlusSmall","light1","controlTypes","FixedOrMetricControl","setType","setFixedValue","setMetric","fixedValue","metricValue","metrics","Collapse","ghost","Panel","showArrow","PopoverSection","isSelected","onSelect","TextControl","isLabeledValue","arg","withToasts","SelectAsyncControl","dataEndpoint","mutator","setOptions","getClientErrorObject","getValue","currentValue","mode","onChangeVal","getOffset","getDirectionStyle","positionStyle","step","includedStart","includedEnd","keyboard","classNames","_excluded","Handle","_getIndex","prefixCls","valueIndex","onStartMove","dragging","onOffsetChange","restProps","_React$useContext","range","ariaLabelForHandle","ariaLabelledByForHandle","ariaValueTextFormatterForHandle","handlePrefixCls","onInternalStartMove","divProps","which","KeyCode","LEFT","RIGHT","UP","DOWN","HOME","END","PAGE_UP","PAGE_DOWN","onKeyUp","handleNode","handle","Handles","handleRender","activeHandleRender","draggingIndex","handlesRef","_handlesRef$current$i","_React$useState","_React$useState2","activeIndex","setActiveIndex","handleProps","_onClick","included","textCls","marks","markPrefixCls","activeStyle","dotClassName","mergedStyle","dots","stepDots","dotSet","Set","mark","dotValue","replaceCls","trackPrefixCls","offsetStart","offsetEnd","track","startPoint","trackList","startValue","endValue","list","tracksNode","tracks","_props$prefixCls","_props$disabled","_props$keyboard","_props$min","_props$max","_props$step","defaultValue","onBeforeChange","onAfterChange","_props$allowCross","allowCross","_props$pushable","pushable","draggableTrack","reverse","_props$included","trackStyle","handleStyle","railStyle","dotStyle","activeDotStyle","_props$tabIndex","containerRef","mergedMin","mergedMax","mergedStep","mergedPush","markList","markObj","_useOffset","formatRangeValue","formatStepValue","stepValue","getDecimal","num","maxDecimal","formatValue","formatNextValue","alignValues","closeValue","closeDist","alignValue","offsetValue","nextValue","originValue","targetDistValue","potentialValues","sign","compareValue","valueDist","potentialValue","cloneValues","offsetChangedValue","changed","needPush","nextValues","pushNum","_offsetChangedValue","_i","_changed","_offsetChangedValue2","_i2","_changed2","_offsetChangedValue3","_i3","_changed3","_offsetChangedValue4","useOffset","_useOffset2","offsetValues","_useMergedState","useMergedState","_useMergedState2","mergedValue","rawValues","valueList","_valueList$","returnValues","pointCount","_returnValues","rawValuesRef","getTriggerValue","triggerValues","triggerChange","cloneNextValues","finishChange","finishValue","_useDrag","draggingValue","setDraggingValue","_React$useState3","_React$useState4","setDraggingIndex","_React$useState5","_React$useState6","cacheValues","setCacheValues","_React$useState7","_React$useState8","originValues","setOriginValues","mouseMoveEventRef","mouseUpEventRef","flushValues","updateCacheValue","offsetPercent","maxStartOffset","maxEndOffset","formatStartValue","cloneCacheValues","offsetDist","next","sourceValues","targetValues","startValues","initialValues","_getPosition","startX","startY","offSetPercent","_getPosition2","moveX","moveY","_containerRef$current","_useDrag2","onStartDrag","changeToCloseValue","_document$activeEleme","_document$activeEleme2","blur","keyboardValue","setKeyboardValue","mergedDraggableTrack","lastIndexOf","sortedCacheValues","_React$useMemo","_React$useMemo2","_containerRef$current2","contains","percent","rail","innerRef","rafRef","cancelKeepAlign","raf","forceAlign","genBaseStyle","token","componentCls","antCls","controlSize","dotSize","marginFull","marginPart","colorFillContentHover","handleColorDisabled","calc","touchAction","railBg","borderRadiusXS","motionDurationMid","trackBg","backgroundClip","railHoverBg","trackHoverBg","handleLineWidth","colorPrimaryBorderHover","dotActiveBorderColor","handleSize","insetInlineStart","mul","equal","insetBlockStart","colorBgElevated","handleColor","handleSizeHover","sub","handleLineWidthHover","handleActiveColor","colorTextDescription","wordBreak","colorText","dotBorderColor","motionDurationSlow","trackBgDisabled","minWidth","genDirectionStyle","horizontal","railSize","railPadding","full","part","handlePos","markInset","handlePosSize","draggableBorderSize","draggableBorder","genHorizontalStyle","marginPartWithMark","genVerticalStyle","sliderToken","controlHeight","controlHeightLG","controlHeightSM","lineWidth","increaseHandleWidth","colorFillTertiary","colorFillSecondary","colorPrimaryBorder","colorPrimary","colorTextDisabled","onBackground","colorBgContainer","toHexShortString","colorBorderSecondary","colorBgContainerDisabled","useRafLock","cleanup","nextState","customizePrefixCls","rootClassName","tooltipPrefixCls","legacyTooltipPrefixCls","tipFormatter","legacyTipFormatter","tooltipVisible","legacyTooltipVisible","getTooltipPopupContainer","legacyGetTooltipPopupContainer","tooltipPlacement","legacyTooltipPlacement","getOwnPropertySymbols","propertyIsEnumerable","__rest","getPrefixCls","contextDisabled","DisabledContext","mergedDisabled","hoverOpen","setHoverOpen","focusOpen","setFocusOpen","tooltipProps","tooltipOpen","customizeTooltipPrefixCls","formatter","lockOpen","activeOpen","mergedTipFormatter","getTipFormatter","setDragging","getTooltipPlacement","vert","wrapCSSVar","hashId","cssVarCls","cls","mergedRange","useActiveTooltipHandle","overlayClassName","nodeProps","passedProps","onMouseLeave","_b","AntdSlider","colType","timeLag","timeRatio","comparisonType","showYAxis","yAxisBounds","bounds","d3format","dateFormat","comparisonTypeOptions","colTypeOptions","StyledRow","Row","StyledCol","Col","StyledTooltip","ButtonBar","TimeSeriesColumnControl","resetState","initialState","onPopoverVisibleChange","onSelectChange","attr","opt","onTextInputChange","onCheckboxChange","onBoundsChange","onYAxisBoundsChange","textSummary","formRow","ttLabel","xs","md","CheckboxControl","MOMENT_FORMAT","isTimeRangeEqual","isStartDateEqual","PARAMS","zoom","pitch","ViewportControl","ctrl","renderTextControl","FormLabel","renderLabel","FEATURED_CHARTS","LineChartTile","BarChartTile","AreaChartTile","TableChartTile","BigNumberChartTile","PieChartTile","antdIconProps","VizTile","isRendered","vizMeta","onTileClick","_mountedPluginMetadat","mountedPluginMetadata","usePluginContext","chartNameRef","TILE_TRANSITION_TIME","transitionTiming","setTooltipVisible","isTransitioning","setIsTransitioning","showTooltip","setShowTooltip","chartName","handleTileClick","containerProps","tooltipTitle","mouseEnterDelay","FastVizSwitcher","memo","currentSelection","currentViz","_state$charts","_state$charts$getChar","_state$charts$getChar2","vizTiles","featuredVizMeta","unshift","MonitorOutlined","CheckSquareOutlined","denyList","getBootstrapData","VIZ_TYPE_DENYLIST","FilterPlugins","metadataRegistry","VizSupportValidation","UnpaddedModal","Modal","FullWidthInputNumber","JustifyEnd","operatorOptions","Comparator","None","GreaterThan","LessThan","GreaterOrEqual","LessOrEqual","Equal","NotEqual","Between","BetweenOrEqual","BetweenOrLeftEqual","BetweenOrRightEqual","targetValueValidator","compare","rejectMessage","targetValue","targetValueLeftValidator","targetValueRightValidator","isOperatorMultiValue","operator","MultipleValueComparators","isOperatorNone","rulesRequired","required","rulesTargetValueLeft","getFieldValue","validator","rulesTargetValueRight","targetValueLeftDeps","targetValueRightDeps","shouldFormItemUpdate","prevValues","currentValues","renderOperator","showOnlyNone","rules","initialValue","renderOperatorFields","gutter","dependencies","validateTrigger","FormattingPopoverContent","extraColorChoices","_columns$","showOperatorFields","setShowOperatorFields","ColorSchemeEnum","Green","Red","colorSchemeOptions","onFinish","requiredMark","noStyle","shouldUpdate","htmlType","FormattingPopover","setVisible","handleSave","newConfig","overlayStyle","FormattersContainer","FormatterContainer","OptionControlContainer","CloseButton","ConditionalFormattingControl","columnOptions","verboseMap","removeIrrelevantConditions","conditionalFormattingConfigs","setConditionalFormattingConfigs","newFormattingConfigs","createLabel","targetValueLeft","targetValueRight","onDelete","prevConfigs","XSmall","onEdit","newConfigs","CaretContainer","CaretRight","DraggingContext","DropzoneContext","reducer","action","canDrop","newState","ExploreContainer","dragDropManager","useDragDropManager","getMonitor","isDragging","monitor","unsub","subscribeToStateChange","dropzoneValue","useReducer","DndSelectLabel","displayGhostButton","accept","valuesRenderer","canDropProp","canDropValueProp","canDropValue","dropValidator","_canDropValueProp","isOver","datasourcePanelDrop","useDrop","onDrop","onDropValue","collect","getItemType","useContext","DndLabelsContainer","cancelHover","onClickGhostButton","ghostButtonText","ContourTypes","ContourActionsContainer","getTabKey","contour","isIsoband","upperThreshold","lowerThreshold","Isoband","Isoline","determineErrorMap","errorMap","strokeWidth","lowerThresholdError","legacyValidateInteger","strokeWidthError","upperThresholdError","DEFAULT_CONTOUR","ContourPopoverControl","currentTab","setCurrentTab","setContour","setValidationErrors","isComplete","setIsComplete","validLower","validUpper","validStrokeWidth","validColor","errors","sectionIsComplete","updateColor","newContour","updateLowerThreshold","activeKey","formatIsoline","formatIsoband","convertContourToNumeric","formattedContour","ContourPopoverTrigger","saveContour","isControlled","controlledVisibility","toggleVisibility","setIsVisible","setVisibility","popoverContent","StyledInfoTooltipWithTrigger","clickClose","isExtra","canDelete","onClickClose","CloseContainer","OptionLabel","OptionWrapper","onShiftOptions","tooltipOverlay","labelRef","drag","useDrag","_ref$current","hoverBoundingRect","hoverMiddleY","clientOffset","getClientOffset","hoverClientY","shouldShowTooltip","LabelContent","ColumnOption","transformedCol","isAdhocColumn","DragContainer","StyledOptionWrapper","StyledListItem","li","ColorPatch","formattedColor","ContourOption","onShift","DEFAULT_CONTOURS","NewContourFormatPlaceholder","getColumnNameOrAdhocColumn","isColumnMeta","OptionSelector","isPhysicalColumn","type_generic","del","swap","getValues","ColumnSelectPopover","editedColumn","isTemporal","setDatasetModal","setLabel","disabledTabs","datasourceType","initialLabel","initialAdhocColumn","initialCalculatedColumn","initialSimpleColumn","getInitialColumnValues","isSavedExpression","adhocColumn","setAdhocColumn","selectedCalculatedColumn","setSelectedCalculatedColumn","selectedSimpleColumn","setSelectedSimpleColumn","selectedTab","setSelectedTab","resizeButton","minHeight","setWidth","setHeight","setClientX","setClientY","setDragStartX","setDragStartY","setDragStartWidth","setDragStartHeight","setIsDragging","handleResize","_throttle","useResizeButton","sqlEditorRef","calculatedColumns","simpleColumns","onCalculatedColumnChange","selectedColumnName","selectedColumn","onSimpleColumnChange","_sqlEditorRef$current","onSqlEditorFocus","_sqlEditorRef$current2","setDatasetAndClose","savedExpressionsLabel","simpleColumnsLabel","calculatedColumn","simpleColumn","DndColumnSelectPopoverTitle","onInputBlur","defaultPopoverLabel","ColumnSelectPopoverTrigger","onColumnEdit","popoverLabel","setPopoverLabel","setPopoverVisible","setIsTitleEditDisabled","setHasCustomLabel","initialPopoverLabel","handleTogglePopover","handleClosePopover","DndAdhocFilterOption","adhocFilter","onFilterEdit","partitionColumn","actualTimeRange","useGetTimeRangeLabel","AdhocFilterPopoverTrigger","getTooltipTitle","FilterOption","datasourceWarning","DND_ACCEPTED_TYPES","Column","Metric","MetricOption","isDictionaryForAdhocFilter","AdhocFilter","EMPTY_OBJECT","coerceMetrics","addedMetrics","isAdhocMetricSimple","isSavedMetric","_savedMetric$metric_n","d3NumberFormat","allowNewOptions","controlType","D3_FORMAT_DOCS","D3_FORMAT_OPTIONS","creatable","debounceDelay","d3TimeFormat","D3_TIME_FORMAT_DOCS","D3_TIME_FORMAT_OPTIONS","fractionDigits","columnWidth","validators","validateNumber","horizontalAlign","AlignLeftOutlined","AlignCenterOutlined","AlignRightOutlined","showCellBars","alignPositiveNegative","colorPositiveNegative","truncateLongCells","currencyFormat","SHARED_COLUMN_CONFIG_PROPS","d3SmallNumberFormat","DEFAULT_CONFIG_FORM_LAYOUT","GenericDataType","override","Numeric","Temporal","isTabLayoutItem","layoutItem","ControlFormItemComponents","Checkbox","RadioButtonControl","sharedControlComponents","CurrencyControl","ControlFormItem","fieldValue","isEmptyValue","_css","maxWidth","ControlFormRow","ControlForm","FAST_DEBOUNCE","updatedChildren","Children","row","defaultWidth","cloneElement","onItemValueChange","text","ColumnConfigPopover","configFormLayout","renderRow","meta","centered","caretWidth","overlayInnerStyle","ColumnTypeLabel","isShiftEqual","oldChoices","w","ColorSchemeControl","ColumnConfigControl","queryResponse","appliedColumnNames","colnames","_colnames","coltypes","_coltypes","appliedCol","columnConfigs","_colnames2","configs","_coltypes2","COLUMN_NAME_ALIASES","showAllColumns","setShowAllColumns","getColumnInfo","needShowMoreButton","MAX_NUM_COLS","cols","ColumnConfigItem","setColumnConfig","validConfigs","fromEntries","DateFilterControl","DndColumnSelectControl","DndColumnSelect","newColumnPopoverVisible","setNewColumnPopoverVisible","optionSelector","optionsMap","newColumn","addNewColumnWithPopover","openPopover","labelGhostButtonText","tn","DndFilterSelect","_props$value","propsValues","setValues","setPartitionColumn","newFilterPopoverVisible","setNewFilterPopoverVisible","droppedItem","setDroppedItem","optionsForSelect","saved_metric_name","results","filterOptionName","_localeCompare","availableColumnSet","is_sqllab_view","isSqllabView","toQueryString","partitions","logging","statusText","removeValue","getMetricExpression","_props$savedMetrics$f","mapOption","filterOptions","ExpressionTypes","Sql","subject","OPERATOR_ENUM_TO_OPERATOR_TYPE","Operators","operation","operatorId","comparator","clause","Clauses","Having","Simple","Equals","Where","changedFilter","onNewFilter","newFilter","mappedOption","handleClickGhostButton","defaultTimeFilter","useDefaultTimeFilter","In","isTemporalColumn","TemporalRange","handleDrop","requireSave","DndMetricSelect","savedMetricSet","newMetricPopoverVisible","setNewMetricPopoverVisible","newSavedMetricOptions","getSavedMetricOptionsForMetric","handleDropLabel","AGGREGATES","SUM","COUNT_DISTINCT","HiddenControl","SelectControl","SliderControl","renderTrigger","rightNode","leftNode","tooltipOnClick","headerProps","SpatialControl","TextAreaControl","VizTypeControl","isModalOpenInit","setShowModal","modalKey","setModalKey","selectedViz","setSelectedViz","openModal","onSubmit","primaryButtonName","disablePrimaryButton","onHandledPrimaryAction","MAX_ADVISABLE_VIZ_GALLERY_WIDTH","VizTypeGallery","onDoubleClick","AdhocFilterControl","XAxisSortControl","shouldReset","ContourControl","contours","setContours","newContours","removeContour","onShiftContour","editContour","ComparisonRangeLabel","labels","setLabels","currentTimeRangeFilters","adhoc_filters","adhoc_filter","previousCustomFilter","_state$explore$form_d","adhoc_custom","shifts","time_compare","previousTimeComparison","time_comparison","startDate","start_date_offset","shiftsArray","useStartDate","_previousCustomFilter","parseDttmToDate","promises","newShifts","getTimeOffset","timeRangeFilter","includeFutureOffsets","fetchTimeRange","res","_r$value","flat","TimeOffsetControl","setStartDate","formatedDate","setFormatedDate","customStartDateInFilter","setCustomStartDateInFilter","formatedFilterDate","setFormatedFilterDate","savedStartDate","setSavedStartDate","currentStartDate","customTimeRange","date","customRange","customTimeRangeDecode","matchedFlag","_customStartDate","sinceDatetime","sinceMode","sinceGrain","sinceGrainValue","customStartDate","Date","computeCustomDateTime","setHours","_currentTimeRangeFilt","_currentTimeRangeFilt2","_currentTimeRangeFilt3","_currentTimeRangeFilt4","_previousCustomFilter2","resetDate","subtract","DatePicker","datetime","defaultPickerValue","disabledDate","StyledControl","hidden","resetOnHide","wasVisible","ControlComponent","ErrorBoundary","console","warn","RunQueryButton","onStop","isNewChart","canStopQuery","StashFormDataContainer","shouldStash","fieldNames","onVisibleUpdate","useEffectEvent","setStashFormData","confirm","iconStyles","actionButtonsContainerStyles","rgba","mediumLight","ControlPanelsTabs","fullWidth","sectionsToExpand","sections","section","isTimeSection","legacyTimeseriesTime","hasTimeColumn","useResetOnChangeRef","resetOnChangeValue","prevResetOnChangeValue","_props$exploreState$d3","_props$exploreState$d4","pluginContext","PluginContext","exploreState","prevDatasource","prevChartStatus","showDatasourceAlert","setShowDatasourceAlert","controlsTransferred","DEFAULT_TIME_FILTER","NO_TIME_RANGE","x_axis","previousXAxis","onOk","shouldUpdateControls","removeDatasourceWarningFromControl","_ensureIsArray","alteredControls","_props$exploreState$d","_props$exploreState$d2","scrollTo","expandedQuerySections","expandedCustomizeSections","querySections","customizeSections","getSectionsToRender","tabOverride","controlSetRows","rows","getState","resetTransferredControls","handleClearFormClick","handleContinueClick","shouldRecalculateControlState","shouldMapStateToProps","sectionHasHadNoErrors","renderControlPanelSection","sectionId","hasErrors","errorColor","PanelHeader","InfoCircleOutlined","_kebabCase","controlSets","renderedControls","controlItem","isValidElement","renderControl","disableStash","restConfig","controlData","mapStateToProps","baseLabel","baseDescription","isHidden","valueToBeDeleted","_controls$time_range","isTemporalRange","time_range","hasControlsTransferred","DatasourceAlert","dataTabHasHadNoErrors","dataTabTitle","ExclamationCircleOutlined","getChartControlPanelRegistry","Loading","showCustomizeTab","expandIconPosition","SK_DASHBOARD_ID","SaveModal","_props$datasource","handleDatasetNameChange","handleRedirect","windowLocationSearch","searchParams","set","delete","loadDashboard","loadDashboards","page","pageSize","page_size","dashboard","dashboard_title","renderSaveChartModal","_this$props$datasourc","canOverwriteSlice","changeAction","newSliceName","onSliceNameChange","onDashboardChange","closable","isNewDashboard","chartWillBeCreated","renderFooter","_this$props$datasourc2","_this$props$datasourc3","saveOrOverwrite","_this$props$slice","_this$props$slice$own","_this$props$slice2","is_managed_externally","lastDashboard","sessionStorage","canUserEditDashboard","setSaveChartModalVisibility","gotodash","_this$props$datasourc4","saveDataset","sliceDashboards","getSliceDashboards","url_params","_dashboard","validId","createDashboard","saveSliceFailed","dashboards","setFormData","updateSlice","createSlice","withRouter","saveModal","saveModalAlert","DatasourceItemContainer","DatasourcePanelDragOption","optionProps","Drag","DEFAULT_MAX_COLUMNS_LENGTH","DEFAULT_MAX_METRICS_LENGTH","ITEM_HEIGHT","LabelWrapper","SectionHeaderButton","SectionHeader","Box","DatasourcePanelItem","metricSlice","_metricSlice","columnSlice","totalMetrics","totalColumns","showAllMetrics","onShowAllMetricsChange","onShowAllColumnsChange","collapseMetrics","onCollapseMetricsChange","collapseColumns","onCollapseColumnsChange","hiddenMetricCount","hiddenColumnCount","EXTRA_LINES","isColumnSection","HEADER_LINE","SUBTITLE_LINE","BOTTOM_LINE","collapsed","setCollapse","showAll","setShowAll","hiddenCount","DownOutlined","UpOutlined","DatasourceContainer","StyledInfoboxWrapper","BORDER_WIDTH","sortCertifiedFirst","_b$is_certified","_a$is_certified","is_certified","DataSourcePanel","datasourceControl","dropzones","_columns","allowedColumns","_isArray","col1","col2","allowedMetrics","setShowSaveDatasetModal","setInputValue","setShowAllMetrics","setCollapseMetrics","setCollapseColumns","searchKeyword","useDebounceValue","filteredColumns","_item$description","_item$expression","filteredMetrics","_item$description2","_item$expression2","_b$item$is_certified","_b$item","_a$item$is_certified","_a$item","_a$rankedValue","_b$rankedValue","showInfoboxCheck","saveableDatasets","query","saved_query","SavedQuery","datasourceIsSaveable","mainBody","AutoSizer","itemSize","itemCount","itemData","overscanCount","memoizedControls","memoizeOne","controlPanel","controlsMap","controlPanelSections","isControlPanelSectionConfig","StyledLabel","alterForComparison","formatValueHandler","_controlsMap$key","_controlsMap$key2","_controlsMap$key3","_controlsMap$key4","filterVal","formattedValue","_v$label","_v$label2","_props$origFormData2","setRows","hasDiffs","setHasDiffs","getDiffs","ofd","sanitizeFormData","origFormData","cfd","currentFormData","fdKeys","diffs","fdKey","isEqualish","val1","val2","before","after","_props$origFormData","getControlsForVizType","getRowsFromDiffs","diff","_controlsMap$key5","accessor","Header","TableView","columnsForWrapText","canOverwrite","saveDisabled","saveButtonStyles","additionalItemsStyles","ExploreChartHeader","dashboardColorScheme","metadata","sliceFormData","isPropertiesModalOpen","setIsPropertiesModalOpen","resetColors","color_namespace","_response$json","dashboardMetadata","json_metadata","applyColors","updateCategoricalNamespace","sliceUpdated","redirectSQLLab","redirectToSQLLab","openNewWindow","menu","isDropdownVisible","setIsDropdownVisible","useExploreAdditionalActionsMenu","openPropertiesModal","metadataBar","MetadataType","Dashboards","LastModified","changed_on_humanized","modifiedBy","changed_by","Owner","createdBy","created_by","createdOn","created_on_humanized","Description","MetadataBar","oldSliceName","slice_name","PageHeaderWithActions","editableTitleProps","canEdit","updateChartTitle","showTitlePanelItems","certificatiedBadgeProps","certifiedBy","certified_by","details","certification_details","showFaveStar","faveStarProps","itemId","fetchFaveStar","saveFaveStar","titlePanelAdditionalItems","AlteredSliceTag","chartTitle","rightPanelAdditionalItems","SaveOutlined","additionalActionsMenu","menuDropdownProps","PropertiesModal","closePropertiesModal","ownColorScheme","isDatasourceMetaLoading","forcedHeight","impressionId","saveAction","isSaveModalVisible","ExplorePanelContainer","updateHistory","isReplace","tabId","params","additionalParam","urlParams","RESERVED_CHART_URL_PARAMS","stateModifier","putFormData","defaultSidebarsWidth","controls_width","datasource_width","getSidebarWidths","setSidebarWidths","newDimension","ExploreViewContainer","dynamicPlugin","dynamicPlugins","isDynamicPluginLoading","mounting","wasDynamicPluginLoading","previousControls","lastQueriedControls","setLastQueriedControls","isCollapsed","setIsCollapsed","DatasourceWidth","useTabId","addHistory","handlePopstate","setExploreControls","handleKeydown","ctrlKey","isEnter","isS","saveSlice","add_to_dash","goto_dash","slice_url","toggleCollapse","useComponentDidMount","logEvent","LOG_ACTIONS_MOUNT_EXPLORER","useChangeEffect","previous","previousHandlePopstate","previousHandleKeyDown","dynamicPluginControlsReady","reRenderChart","controlsChanged","newQueryFormData","getFormDataFromControls","_pick","renderTriggered","getTime","fetchDatasourceMetadata","displayControlsChanged","areObjectsEqual","lastControl","value1","value2","_isObjectLike","ignoreFields","dontRefreshOnChange","setSaveAction","LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS","controlsWithErrors","errorMessages","_control$validationEr","renderChartContainer","ConnectedExploreChartHeader","reports","Global","Resizable","onResizeStop","defaultSize","enable","Expand","ControlsWidth","ConnectedControlPanelsContainer","queryController","abort","can_add","cx","_controls$query_mode","_form_data$slice_id","_dataMask$slice_id","_explore$form_data","_explore$form_data2","_explore$form_data3","_explore$form_data4","_datasource$column_fo","_explore$sliceName","_dataMask$slice_id2","dataMask","hiddenFormData","fieldsToOmit","query_mode","retainQueryModeRequirements","QUERY_MODE_REQUISITES","_omit","extra_form_data","mergeExtraFormData","own_color_scheme","dashboard_color_scheme","SUPERSET_WEBSERVER_TIMEOUT","exploreActions","datasourcesActions","saveModalActions","chartActions","logActions","bindActionCreators","fallbackExploreInitialData","dataset","currency_formats","verbose_map","main_dttm_col","removeAdhocFilterDuplicates","isDuplicate","existingFilter","isFreeFormAdhocFilter","isSimpleAdhocFilter","applyTimeRangeFilters","dashboardFormData","adhocFilters","extraFormData","getFormDataWithDashboardContext","exploreFormData","dashboardContextFormData","filterBoxData","mergeFilterBoxToFormData","dateColumns","__time_range","__time_col","__time_grain","__granularity","appliedTimeExtras","extra_filters","simpleFilterToAdhoc","applied_time_extras","nativeFiltersData","mergeNativeFiltersToFormData","EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS","srcKey","targetKey","time_grain_sqla","extras","EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS","appendFilters","extraFilter","removeExtraFieldForNewCharts","appliedColorScheme","fetchExploreData","exploreUrlParams","_rv$result3","rv","makeApi","method","isValidResult","_rv$result","_rv$result2","_rv$result2$dataset","responseError","err","clientError","getDashboardContextFormData","dashboardContext","pageId","dashboardPageId","DashboardExploreContext","getDashboardPageContext","labelsColor","labelsColorMap","sharedLabelsColors","chartConfiguration","nativeFilters","filterBoxFilters","dashboardContextWithFilters","getFormDataWithExtraFilters","getAppliedFilterValues","allSliceIds","extraControls","ExplorePage","isLoaded","setIsLoaded","isExploreInitialized","useLocation","hydrateExplore","finally","getLabelsColorMap","LabelsColorMapSource","Explore"],"sourceRoot":""}