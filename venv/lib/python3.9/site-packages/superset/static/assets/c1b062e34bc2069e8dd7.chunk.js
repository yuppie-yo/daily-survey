"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7317],{542878:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(667294),l=n(45697),i=n.n(l),r=n(9875),o=n(61988),s=n(468135),c=n(835932),d=n(749140),u=n(601304),h=n(482342),p=n(135944);const m={name:i().string,onChange:i().func,initialValue:i().string,height:i().number,minLines:i().number,maxLines:i().number,offerEditInModal:i().bool,language:i().oneOf([null,"json","html","sql","markdown","javascript"]),aboveEditorSection:i().node,readOnly:i().bool,resize:i().oneOf([null,"block","both","horizontal","inline","none","vertical"]),textAreaStyles:i().object};class v extends a.Component{onControlChange(e){const{value:t}=e.target;this.props.onChange(t)}onAreaEditorChange(e){this.props.onChange(e)}renderEditor(e=!1){const t=e?40:this.props.minLines||12;if(this.props.language){const n={border:`1px solid ${this.props.theme.colors.grayscale.light1}`,minHeight:`${t}em`,width:"auto",...this.props.textAreaStyles};return this.props.resize&&(n.resize=this.props.resize),this.props.readOnly&&(n.backgroundColor="#f2f2f2"),(0,p.tZ)(d.YH,{mode:this.props.language,style:n,minLines:t,maxLines:e?1e3:this.props.maxLines,editorProps:{$blockScrolling:!0},defaultValue:this.props.initialValue,readOnly:this.props.readOnly,...this.props,onChange:this.onAreaEditorChange.bind(this)},this.props.name)}return(0,p.tZ)(r.Kx,{placeholder:(0,o.t)("textarea"),onChange:this.onControlChange.bind(this),defaultValue:this.props.initialValue,disabled:this.props.readOnly,style:{height:this.props.height}})}renderModalBody(){return(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{children:this.props.aboveEditorSection}),this.renderEditor(!0)]})}render(){const e=(0,p.tZ)(h.Z,{...this.props});return(0,p.BX)("div",{children:[e,this.renderEditor(),this.props.offerEditInModal&&(0,p.tZ)(u.Z,{modalTitle:e,triggerNode:(0,p.BX)(c.Z,{buttonSize:"small",className:"m-t-5",children:[(0,o.t)("Edit")," ",(0,p.tZ)("strong",{children:this.props.language})," ",(0,o.t)("in modal")]}),modalBody:this.renderModalBody(!0),responsive:!0})]})}}v.propTypes=m,v.defaultProps={onChange:()=>{},initialValue:"",height:250,minLines:3,maxLines:10,offerEditInModal:!0,readOnly:!1,resize:null,textAreaStyles:{}};const g=(0,s.b)(v)},109433:(e,t,n)=>{n.d(t,{Bj:()=>c});var a=n(738179),l=n(61988),i=n(751995),r=n(361247),o=n(135944);const s={everyText:(0,l.t)("every"),emptyMonths:(0,l.t)("every month"),emptyMonthDays:(0,l.t)("every day of the month"),emptyMonthDaysShort:(0,l.t)("day of the month"),emptyWeekDays:(0,l.t)("every day of the week"),emptyWeekDaysShort:(0,l.t)("day of the week"),emptyHours:(0,l.t)("every hour"),emptyMinutes:(0,l.t)("every minute"),emptyMinutesForHourPeriod:(0,l.t)("every"),yearOption:(0,l.t)("year"),monthOption:(0,l.t)("month"),weekOption:(0,l.t)("week"),dayOption:(0,l.t)("day"),hourOption:(0,l.t)("hour"),minuteOption:(0,l.t)("minute"),rebootOption:(0,l.t)("reboot"),prefixPeriod:(0,l.t)("Every"),prefixMonths:(0,l.t)("in"),prefixMonthDays:(0,l.t)("on"),prefixWeekDays:(0,l.t)("on"),prefixWeekDaysForMonthAndYearPeriod:(0,l.t)("or"),prefixHours:(0,l.t)("at"),prefixMinutes:(0,l.t)(":"),prefixMinutesForHourPeriod:(0,l.t)("at"),suffixMinutesForHourPeriod:(0,l.t)("minute(s)"),errorInvalidCron:(0,l.t)("Invalid cron expression"),clearButtonText:(0,l.t)("Clear"),weekDays:[(0,l.t)("Sunday"),(0,l.t)("Monday"),(0,l.t)("Tuesday"),(0,l.t)("Wednesday"),(0,l.t)("Thursday"),(0,l.t)("Friday"),(0,l.t)("Saturday")],months:[(0,l.t)("January"),(0,l.t)("February"),(0,l.t)("March"),(0,l.t)("April"),(0,l.t)("May"),(0,l.t)("June"),(0,l.t)("July"),(0,l.t)("August"),(0,l.t)("September"),(0,l.t)("October"),(0,l.t)("November"),(0,l.t)("December")],altWeekDays:[(0,l.t)("SUN"),(0,l.t)("MON"),(0,l.t)("TUE"),(0,l.t)("WED"),(0,l.t)("THU"),(0,l.t)("FRI"),(0,l.t)("SAT")],altMonths:[(0,l.t)("JAN"),(0,l.t)("FEB"),(0,l.t)("MAR"),(0,l.t)("APR"),(0,l.t)("MAY"),(0,l.t)("JUN"),(0,l.t)("JUL"),(0,l.t)("AUG"),(0,l.t)("SEP"),(0,l.t)("OCT"),(0,l.t)("NOV"),(0,l.t)("DEC")]},c=(0,i.iK)((e=>(0,o.tZ)(a.ZP,{getPopupContainer:e=>e.parentElement,children:(0,o.tZ)(r.Z,{locale:s,...e})})))`
  ${({theme:e})=>`\n\n    /* Boilerplate styling for ReactCronPicker imported explicitly in GlobalStyles.tsx */\n\n    /* When year period is selected */\n\n    :has(.react-js-cron-months) {\n      display: grid !important;\n      grid-template-columns: repeat(2, 50%);\n      column-gap: ${e.gridUnit}px;\n      row-gap: ${2*e.gridUnit}px;\n      div:has(.react-js-cron-hours) {\n        grid-column: span 2;\n        display: flex;\n        justify-content: space-between;\n        .react-js-cron-field {\n          width: 50%;\n        }\n      }\n    }\n\n    /* When month period is selected */\n\n    :not(:has(.react-js-cron-months)) {\n      display: grid;\n      grid-template-columns: repeat(2, 50%);\n      column-gap: ${e.gridUnit}px;\n      row-gap: ${2*e.gridUnit}px;\n      .react-js-cron-period {\n        grid-column: span 2;\n      }\n      div:has(.react-js-cron-hours) {\n        grid-column: span 2;\n        display: flex;\n        justify-content: space-between;\n        .react-js-cron-field {\n          width: 50%;\n        }\n      }\n    }\n\n    /* When week period is selected */\n\n    :not(:has(.react-js-cron-month-days)) {\n      .react-js-cron-week-days {\n        grid-column: span 2;\n      }\n    }\n\n    /* For proper alignment of inputs and span elements */\n\n    :not(div:has(.react-js-cron-hours)) {\n      display: flex;\n      flex-wrap: nowrap;\n    }\n\n    div:has(.react-js-cron-hours) {\n      width: 100%;\n    }\n\n    .react-js-cron-minutes > span {\n      padding-left: ${e.gridUnit}px;\n    }\n\n    /* Sizing of select container */\n\n    .react-js-cron-select.ant-select {\n      width: 100%;\n      .ant-select-selector {\n        flex-wrap: nowrap;\n      }\n    }\n\n    .react-js-cron-field {\n      width: 100%;\n      margin-bottom: 0px;\n      > span {\n        margin-left: 0px;\n      }\n    }\n\n    .react-js-cron-custom-select .ant-select-selection-placeholder {\n      flex: auto;\n      border-radius: ${e.gridUnit}px;\n    }\n\n    .react-js-cron-custom-select .ant-select-selection-overflow-item {\n      align-self: center;\n    }\n\n    .react-js-cron-select > div:first-of-type,\n    .react-js-cron-custom-select {\n      border-radius: ${e.gridUnit}px;\n    }\n  `}
`},898978:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(211965),l=n(667294),i=n(480008),r=n.n(i),o=n(61988),s=n(104715),c=n(135944);const d="GMT Standard Time",u="400px",h={"-300-240":["Eastern Standard Time","Eastern Daylight Time"],"-360-300":["Central Standard Time","Central Daylight Time"],"-420-360":["Mountain Standard Time","Mountain Daylight Time"],"-420-420":["Mountain Standard Time - Phoenix","Mountain Standard Time - Phoenix"],"-480-420":["Pacific Standard Time","Pacific Daylight Time"],"-540-480":["Alaska Standard Time","Alaska Daylight Time"],"-600-600":["Hawaii Standard Time","Hawaii Daylight Time"],60120:["Central European Time","Central European Daylight Time"],"00":[d,d],"060":["GMT Standard Time - London","British Summer Time"]},p=r()(),m=r()([2021,1]),v=r()([2021,7]),g=e=>m.tz(e).utcOffset().toString()+v.tz(e).utcOffset().toString(),b=e=>{var t,n;const a=g(e);return(p.tz(e).isDST()?null==(t=h[a])?void 0:t[1]:null==(n=h[a])?void 0:n[0])||e},E=r().tz.countries().map((e=>r().tz.zonesForCountry(e,!0))).flat(),T=[];E.forEach((e=>{T.find((t=>g(t.name)===g(e.name)))||T.push(e)}));const f=T.map((e=>({label:`GMT ${r().tz(p,e.name).format("Z")} (${b(e.name)})`,value:e.name,offsets:g(e.name),timezoneName:e.name}))),_=(e,t)=>r().tz(p,e.timezoneName).utcOffset()-r().tz(p,t.timezoneName).utcOffset();f.sort(_);const y=e=>{var t;return(null==(t=f.find((t=>t.offsets===g(e))))?void 0:t.value)||"Africa/Abidjan"};function N({onTimezoneChange:e,timezone:t,minWidth:n=u}){const i=(0,l.useMemo)((()=>y(t||r().tz.guess())),[t]);return(0,l.useEffect)((()=>{t!==i&&e(i)}),[i,e,t]),(0,c.tZ)(s.Ph,{ariaLabel:(0,o.t)("Timezone selector"),css:(0,a.iv)({minWidth:n},"",""),onChange:t=>e(t),value:i,options:f,sortComparator:_})}},567317:(e,t,n)=>{n.d(t,{j5:()=>Y,KL:()=>ae,ZP:()=>ie});var a=n(667294),l=n(61988),i=n(211965),r=n(751995),o=n(593185),s=n(431069),c=n(115926),d=n.n(c),u=n(34858),h=n(9875),p=n(112441),m=n(774069),v=n(843700),g=n(898978),b=n(985633),E=n(414114),T=n(104715),f=n(542878),_=n(418451),y=n(409882),N=n(690335),S=n(828216),R=n(135944);function C({timeUnit:e,min:t,name:n,value:l,placeholder:i,onChange:r}){const[o,s]=(0,a.useState)(!1);return(0,R.tZ)("input",{type:"text",min:t,name:n,value:l?`${l}${o?"":` ${e}`}`:"",placeholder:i,onFocus:()=>s(!0),onBlur:()=>s(!1),onChange:r})}var x,Z=n(109433);!function(e){e.Picker="picker",e.Input="input"}(x||(x={}));const O=[{label:(0,l.t)("Recurring (every)"),value:x.Picker},{label:(0,l.t)("CRON Schedule"),value:x.Input}],A=({value:e,onChange:t})=>{const n=(0,r.Fg)(),i=(0,a.useRef)(null),[o,s]=(0,a.useState)(x.Picker),c=(0,a.useCallback)((e=>{var n;t(e),null==(n=i.current)||n.setValue(e)}),[i,t]),d=(0,a.useCallback)((e=>{t(e.target.value)}),[t]),u=(0,a.useCallback)((()=>{var e;t((null==(e=i.current)?void 0:e.input.value)||"")}),[t]),[p,m]=(0,a.useState)();return(0,R.BX)(R.HY,{children:[(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Schedule type"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Schedule type"),placeholder:(0,l.t)("Schedule type"),onChange:e=>{s(e)},value:o,options:O})})]}),(0,R.BX)(Y,{className:"styled-input",children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Schedule"),(0,R.tZ)("span",{className:"required",children:"*"})]}),o===x.Input&&(0,R.tZ)(h.II,{type:"text",name:"crontab",ref:i,style:p?{borderColor:n.colors.error.base}:{},placeholder:(0,l.t)("CRON expression"),value:e,onBlur:d,onChange:e=>c(e.target.value),onPressEnter:u}),o===x.Picker&&(0,R.tZ)(Z.Bj,{clearButton:!1,value:e,setValue:c,displayError:o===x.Picker,onError:m})]})]})};var k=n(313322);const I=r.iK.div`
  ${({theme:e})=>`\n    margin-bottom: ${3*e.gridUnit}px;\n\n    .input-container {\n      textarea {\n        height: auto;\n      }\n\n      &.error {\n        input {\n          border-color: ${e.colors.error.base};\n        }\n      }\n\n      .helper {\n        margin-top: ${2*e.gridUnit}px;\n        font-size: ${e.typography.sizes.s}px;\n        color: ${e.colors.grayscale.base};\n      }\n    }\n\n    .inline-container {\n      margin-bottom: ${2*e.gridUnit}px;\n\n      > div {\n        margin: 0px;\n      }\n\n      .delete-button {\n        margin-left: ${2*e.gridUnit}px;\n        padding-top: ${e.gridUnit}px;\n      }\n    }\n\n    .ghost-button {\n      color: ${e.colors.primary.dark1};\n      display: inline-flex;\n      align-items: center;\n      font-size: ${e.typography.sizes.s}px;\n      cursor: pointer;\n      margin-top: ${e.gridUnit}px;\n\n      .icon {\n        width: ${3*e.gridUnit}px;\n        height: ${3*e.gridUnit}px;\n        font-size: ${e.typography.sizes.s}px;\n        margin-right: ${e.gridUnit}px;\n      }\n    }\n\n    .ghost-button + .ghost-button {\n      margin-left: ${4*e.gridUnit}px;\n    }\n\n    .ghost-button:first-child[style*='none'] + .ghost-button {\n      margin-left: 0px; /* Remove margin when the first button is hidden */\n    }\n  `}
`,L={EMAIL_CC_NAME:(0,l.t)("CC recipients"),EMAIL_BCC_NAME:(0,l.t)("BCC recipients"),EMAIL_SUBJECT_NAME:(0,l.t)("Email subject name (optional)"),EMAIL_SUBJECT_ERROR_TEXT:(0,l.t)("Please enter valid text. Spaces alone are not permitted.")},B=({setting:e=null,index:t,onUpdate:n,onRemove:i,onInputChange:c,email_subject:u,defaultSubject:h,setErrorSubject:p})=>{const{method:m,recipients:v,cc:g,bcc:b,options:E}=e||{},[f,_]=(0,a.useState)(v||""),[y,S]=(0,a.useState)([]),[C,x]=(0,a.useState)(!1),[Z,O]=(0,a.useState)(!!g),[A,B]=(0,a.useState)(!!b),[w,$]=(0,a.useState)(g||""),[X,j]=(0,a.useState)(b||""),U=(0,r.Fg)(),[M,P]=(0,a.useState)(!0),[D,z]=(0,a.useState)([{label:"",options:[]}]),[q,V]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;!(null==E?void 0:E.some((e=>e===N.cv.Slack||e===N.cv.SlackV2)))||null!=(e=D[0])&&e.options.length||(async({searchString:e="",types:t=[],exactMatch:n=!1}={})=>{const a=`/api/v1/report/slack_channels/?q=${d().encode({searchString:e,types:t,exactMatch:n})}`;return s.Z.get({endpoint:a})})({types:["public_channel","private_channel"]}).then((({json:e})=>{const{result:t}=e,n=(e=>{const t=[],n=[];return e.forEach((e=>{e.is_private?n.push(e):t.push(e)})),[{label:"Public Channels",options:t.map((e=>({label:`${e.name} ${e.is_member?"":(0,l.t)("(Bot not in channel)")}`,value:e.id,key:e.id}))),key:"public"},{label:(0,l.t)("Private Channels (Bot in channel)"),options:n.map((e=>({label:e.name,value:e.id,key:e.id}))),key:"private"}]})(t);if(z(n),(0,o.cr)(o.TT.AlertReportSlackV2)){const[e,t]=n;m&&[N.cv.SlackV2,N.cv.Slack].includes(m)&&S((({method:e,recipientValue:t,slackOptions:n})=>{const a=e===N.cv.SlackV2?"value":"label";return t.split(",").map((e=>n.find((t=>t[a].trim().toLowerCase()===e.trim().toLowerCase())))).filter((e=>!!e))})({method:m,recipientValue:f,slackOptions:[...e.options,...t.options]}))}})).catch((e=>{V(!0)})).finally((()=>{P(!1)}))}),[]);const F=(0,a.useMemo)((()=>(E||[]).filter((e=>(0,o.cr)(o.TT.AlertReportSlackV2)&&!q&&e===N.cv.SlackV2||(!(0,o.cr)(o.TT.AlertReportSlackV2)||q)&&e===N.cv.Slack||e===N.cv.Email)).map((e=>({label:e===N.cv.SlackV2?N.cv.Slack:e,value:e})))),[E,q]);return e?(v&&f!==v&&_(v),g&&w!==g&&$(g),b&&X!==b&&j(b),(0,R.BX)(I,{children:[(0,R.tZ)("div",{className:"inline-container",children:(0,R.BX)(Y,{children:[(0,R.tZ)("div",{className:"control-label",children:(0,l.t)("Notification Method")}),(0,R.BX)("div",{className:"input-container",children:[(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Delivery method"),labelInValue:!0,onChange:a=>{if(_(""),$(""),j(""),n&&e){const l={...e,method:a.value,recipients:"",cc:"",bcc:""};n(t,l)}},placeholder:(0,l.t)("Select Delivery Method"),options:F,showSearch:!0,value:F.find((e=>e.value===m)),loading:M}),0!==t&&i?(0,R.tZ)("span",{role:"button",tabIndex:0,className:"delete-button",onClick:()=>i(t),children:(0,R.tZ)(k.Z.Trash,{iconColor:U.colors.grayscale.base})}):null]})]})}),void 0!==m?(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"inline-container",children:(0,R.tZ)(Y,{children:m===N.cv.Email?(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"control-label",children:L.EMAIL_SUBJECT_NAME}),(0,R.tZ)("div",{className:"input-container "+(C?"error":""),children:(0,R.tZ)("input",{type:"text",name:"email_subject",value:u,placeholder:h,onChange:e=>{const{value:t}=e.target;c&&c(e);const n=t.length>0&&0===t.trim().length;x(n),p&&p(n)}})}),C&&(0,R.tZ)("div",{style:{color:U.colors.error.base,fontSize:3*U.gridUnit},children:L.EMAIL_SUBJECT_ERROR_TEXT})]}):null})}),(0,R.tZ)("div",{className:"inline-container",children:(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("%s recipients",m===N.cv.SlackV2?N.cv.Slack:m),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{children:[N.cv.Email,N.cv.Slack].includes(m)?(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("textarea",{name:"To",value:f,onChange:a=>{const{target:l}=a;if(_(l.value),n){const a={...e,recipients:l.value};n(t,a)}}})}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("div",{className:"helper",children:(0,l.t)('Recipients are separated by "," or ";"')})})]}):(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Select channels"),mode:"multiple",name:"recipients",value:y,options:D,onChange:a=>{if(S(a),n){const l={...e,recipients:null==a?void 0:a.map((e=>e.value)).join(",")};n(t,l)}},allowClear:!0,allowSelectAll:!1,labelInValue:!0})})]})}),m===N.cv.Email&&(0,R.BX)(Y,{children:[Z&&(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"control-label",children:L.EMAIL_CC_NAME}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("textarea",{name:"CC",value:w,onChange:a=>{const{target:l}=a;if($(l.value),n){const a={...e,cc:l.value};n(t,a)}}})}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("div",{className:"helper",children:(0,l.t)('Recipients are separated by "," or ";"')})})]}),A&&(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"control-label",children:L.EMAIL_BCC_NAME}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("textarea",{name:"BCC",value:X,onChange:a=>{const{target:l}=a;if(j(l.value),n){const a={...e,bcc:l.value};n(t,a)}}})}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("div",{className:"helper",children:(0,l.t)('Recipients are separated by "," or ";"')})})]}),(0,R.BX)("div",{className:"ghost-button",children:[(0,R.BX)("span",{className:"ghost-button",role:"button",tabIndex:0,onClick:()=>O(!0),style:{display:Z?"none":"inline-flex"},children:[(0,R.tZ)(k.Z.Email,{className:"icon"}),(0,l.t)("Add CC Recipients")]}),(0,R.BX)("span",{className:"ghost-button",role:"button",tabIndex:0,onClick:()=>B(!0),style:{display:A?"none":"inline-flex"},children:[(0,R.tZ)(k.Z.Email,{className:"icon"}),(0,l.t)("Add BCC Recipients")]})]})]})]}):null]})):null};var w=n(840695);const $=({title:e,subtitle:t,validateCheckStatus:n,testId:a})=>{const i=(0,R.tZ)(w.Z,{});return(0,R.BX)("div",{className:"collapse-panel-header",children:[(0,R.BX)("div",{className:"collapse-panel-title",children:[(0,R.tZ)("span",{children:(0,l.t)(e)}),n?(0,R.tZ)("span",{className:"validation-checkmark",children:i}):(0,R.tZ)("span",{className:"collapse-panel-asterisk",children:" *"})]}),(0,R.tZ)("p",{className:"collapse-panel-subtitle",children:t?(0,l.t)(t):void 0})]})};var X=n(46445);const j=e=>(0,R.tZ)(X.Z.Panel,{css:e=>(e=>i.iv`
  .ant-collapse-header {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    padding: 0px ${4*e.gridUnit}px;

    .anticon.anticon-right.ant-collapse-arrow {
      padding: 0;
      top: calc(50% - ${6}px);
    }

    .collapse-panel-title {
      font-size: ${4*e.gridUnit}px;
      font-weight: ${e.typography.weights.bold};
      line-height: 130%;
    }

    .collapse-panel-subtitle {
      color: ${e.colors.grayscale.base};
      font-size: ${e.typography.sizes.s}px;
      font-weight: ${e.typography.weights.normal};
      line-height: 150%;
      margin-bottom: 0;
      padding-top: ${e.gridUnit}px;
    }

    .collapse-panel-asterisk {
      color: var(--semantic-error-base, ${e.colors.warning.dark1});
    }
    .validation-checkmark {
      width: ${4*e.gridUnit}px;
      height: ${4*e.gridUnit}px;
      margin-left: ${e.gridUnit}px;
      color: ${e.colors.success.base};
    }
  }
`)(e),...e}),U=r.iK.ul`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
  padding-inline-start: ${({theme:e})=>3*e.gridUnit}px;
`,M=["pivot_table_v2","table","paired_ttest"],P=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,D=[N.cv.Email],z="PNG",q=[{label:(0,l.t)("< (Smaller than)"),value:"<"},{label:(0,l.t)("> (Larger than)"),value:">"},{label:(0,l.t)("<= (Smaller or equal)"),value:"<="},{label:(0,l.t)(">= (Larger or equal)"),value:">="},{label:(0,l.t)("== (Is equal)"),value:"=="},{label:(0,l.t)("!= (Is not equal)"),value:"!="},{label:(0,l.t)("Not null"),value:"not null"}],V=[{label:(0,l.t)("None"),value:0},{label:(0,l.t)("30 days"),value:30},{label:(0,l.t)("60 days"),value:60},{label:(0,l.t)("90 days"),value:90}],F=[{label:(0,l.t)("Dashboard"),value:"dashboard"},{label:(0,l.t)("Chart"),value:"chart"}],H={pdf:{label:(0,l.t)("Send as PDF"),value:"PDF"},png:{label:(0,l.t)("Send as PNG"),value:"PNG"},csv:{label:(0,l.t)("Send as CSV"),value:"CSV"},txt:{label:(0,l.t)("Send as text"),value:"TEXT"}},G=i.iv`
  margin-bottom: 0;
`,W=(0,r.iK)(m.default)`
  .ant-modal-body {
    height: 720px;
  }

  .control-label {
    margin-top: ${({theme:e})=>e.gridUnit}px;
  }

  .ant-collapse > .ant-collapse-item {
    border-bottom: none;
  }

  .inline-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    &.wrap {
      flex-wrap: wrap;
    }

    > div {
      flex: 1 1 auto;
    }
  }
`,K=r.iK.div`
  display: flex;
  align-items: center;
  margin-top: 10px;

  .switch-label {
    margin-left: 10px;
  }
`,Y=r.iK.div`
  ${({theme:e})=>i.iv`
    flex: 1;
    margin-top: 0px;
    margin-bottom: ${4*e.gridUnit}px;

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .helper {
      display: block;
      color: ${e.colors.grayscale.base};
      font-size: ${e.typography.sizes.s}px;
      padding: ${e.gridUnit}px 0;
      text-align: left;
    }

    .required {
      margin-left: ${e.gridUnit/2}px;
      color: ${e.colors.error.base};
    }

    .input-container {
      display: flex;
      align-items: center;

      > div {
        width: 100%;
      }

      label {
        display: flex;
        margin-right: ${2*e.gridUnit}px;
      }

      i {
        margin: 0 ${e.gridUnit}px;
      }
    }

    input,
    textarea {
      flex: 1 1 auto;
    }

    input[disabled] {
      color: ${e.colors.grayscale.base};
    }

    textarea {
      height: 300px;
      resize: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: ${e.colors.grayscale.light1};
    }

    textarea,
    input[type='text'],
    input[type='number'] {
      padding: ${e.gridUnit}px ${2*e.gridUnit}px;
      border-style: none;
      border: 1px solid ${e.colors.grayscale.light2};
      border-radius: ${e.gridUnit}px;

      &[name='description'] {
        flex: 1 1 auto;
      }
    }

    .input-label {
      margin-left: 10px;
    }
  `}
`,J=(0,r.iK)(T.r4)`
  margin-top: ${({theme:e})=>0*e.gridUnit}px;
`,Q=(0,r.iK)(y.V)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
`,ee=r.iK.div`
  ${({theme:e})=>i.iv`
    color: ${e.colors.primary.dark1};
    cursor: pointer;

    i {
      margin-right: ${2*e.gridUnit}px;
    }

    &.disabled {
      color: ${e.colors.grayscale.light1};
      cursor: default;
    }
  `}
`,te=r.iK.div`
  .inline-container .input-container {
    margin-left: 0;
  }
`,ne=e=>i.iv`
  margin-right: ${3*e.gridUnit}px;
`,ae={GENERAL_TITLE:(0,l.t)("General information"),ALERT_CONDITION_TITLE:(0,l.t)("Alert condition"),ALERT_CONTENTS_TITLE:(0,l.t)("Alert contents"),REPORT_CONTENTS_TITLE:(0,l.t)("Report contents"),SCHEDULE_TITLE:(0,l.t)("Schedule"),NOTIFICATION_TITLE:(0,l.t)("Notification method"),NAME_ERROR_TEXT:(0,l.t)("name"),OWNERS_ERROR_TEXT:(0,l.t)("owners"),CONTENT_ERROR_TEXT:(0,l.t)("content type"),DATABASE_ERROR_TEXT:(0,l.t)("database"),SQL_ERROR_TEXT:(0,l.t)("sql"),ALERT_CONDITION_ERROR_TEXT:(0,l.t)("alert condition"),CRONTAB_ERROR_TEXT:(0,l.t)("crontab"),WORKING_TIMEOUT_ERROR_TEXT:(0,l.t)("working timeout"),RECIPIENTS_ERROR_TEXT:(0,l.t)("recipients"),EMAIL_SUBJECT_ERROR_TEXT:(0,l.t)("email subject"),EMAIL_VALIDATION_ERROR_TEXT:(0,l.t)("invalid email"),ERROR_TOOLTIP_MESSAGE:(0,l.t)("Not all required fields are complete. Please provide the following:")},le=({status:e="active",onClick:t})=>"hidden"===e?null:(0,R.BX)(ee,{className:e,onClick:()=>{"disabled"!==e&&t()},children:[(0,R.tZ)("i",{className:"fa fa-plus"})," ","active"===e?(0,l.t)("Add another notification method"):(0,l.t)("Add delivery method")]}),ie=(0,E.ZP)((({addDangerToast:e,onAdd:t,onHide:n,show:r,alert:c=null,isReport:m=!1,addSuccessToast:E})=>{var y,x,Z,O,k,I,L,w;const X=(0,S.v9)((e=>e.user)),ee=(0,_.c)(),ie=(null==ee?void 0:ee.ALERT_REPORTS_NOTIFICATION_METHODS)||D,[re,oe]=(0,a.useState)(!0),[se,ce]=(0,a.useState)(),[de,ue]=(0,a.useState)(!0),[he,pe]=(0,a.useState)("dashboard"),[me,ve]=(0,a.useState)(z),[ge,be]=(0,a.useState)(!1),[Ee,Te]=(0,a.useState)(!1);(0,a.useEffect)((()=>{Te("PNG"===me)}),[me]);const[fe,_e]=(0,a.useState)(!1),[ye,Ne]=(0,a.useState)([]),[Se,Re]=(0,a.useState)([]),[Ce,xe]=(0,a.useState)([]),[Ze,Oe]=(0,a.useState)({[N.bx.General]:{hasErrors:!1,name:ae.GENERAL_TITLE,errors:[]},[N.bx.Content]:{hasErrors:!1,name:m?ae.REPORT_CONTENTS_TITLE:ae.ALERT_CONTENTS_TITLE,errors:[]},[N.bx.Alert]:{hasErrors:!1,name:ae.ALERT_CONDITION_TITLE,errors:[]},[N.bx.Schedule]:{hasErrors:!1,name:ae.SCHEDULE_TITLE,errors:[]},[N.bx.Notification]:{hasErrors:!1,name:ae.NOTIFICATION_TITLE,errors:[]}}),[Ae,ke]=(0,a.useState)(""),Ie=(e,t)=>{Oe((n=>({...n,[e]:{hasErrors:t.length>0,name:n[e].name,errors:t}})))},[Le,Be]=(0,a.useState)(""),we=m?"report":"alert",$e=null!==c,Xe=(0,o.cr)(o.TT.AlertsAttachReports)||m,[je,Ue]=(0,a.useState)("active"),[Me,Pe]=(0,a.useState)([]),[De,ze]=(0,a.useState)(""),[qe,Ve]=(0,a.useState)(!1),{ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT:Fe,ALERT_REPORTS_DEFAULT_CRON_VALUE:He,ALERT_REPORTS_DEFAULT_RETENTION:Ge}=(0,S.v9)((e=>{var t,n,a,l;const i=null==(t=e.common)?void 0:t.conf;return{ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT:null!=(n=null==i?void 0:i.ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT)?n:3600,ALERT_REPORTS_DEFAULT_CRON_VALUE:null!=(a=null==i?void 0:i.ALERT_REPORTS_DEFAULT_CRON_VALUE)?a:"0 0 * * *",ALERT_REPORTS_DEFAULT_RETENTION:null!=(l=null==i?void 0:i.ALERT_REPORTS_DEFAULT_RETENTION)?l:90}})),We={active:!0,creation_method:"alerts_reports",crontab:He,log_retention:Ge,working_timeout:Fe,name:"",owners:[],recipients:[],sql:"",email_subject:"",validator_config_json:{},validator_type:"",force_screenshot:!1,grace_period:void 0},Ke=(e,t)=>{const n=[...Me];n[e]=t,Me[e].method!==t.method?(Me[e]=t,Pe(Me.filter(((t,n)=>n<=e))),Me.length-1>e&&Ue("active"),void 0!==t.method&&"hidden"!==je&&Ue("active")):Pe(n)},Ye=e=>{const t=Me.slice();t.splice(e,1),Pe(t),Ue("active")},{state:{loading:Je,resource:Qe,error:et},fetchResource:tt,createResource:nt,updateResource:at,clearError:lt}=(0,u.LE)("report",(0,l.t)("report"),e),it=()=>{lt(),ue(!0),n(),Pe([]),ce({...We}),Ue("active")},rt=(0,a.useMemo)((()=>(e="",t,n)=>{const a=d().encode({filter:e,page:t,page_size:n});return s.Z.get({endpoint:`/api/v1/report/related/created_by?q=${a}`}).then((e=>({data:e.json.result.map((e=>({value:e.value,label:e.text}))),totalCount:e.json.count})))}),[]),ot=(0,a.useCallback)((e=>{const t=e||(null==se?void 0:se.database);if(!t||t.label)return null;let n;return ye.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n}),[null==se?void 0:se.database,ye]),st=(e,t)=>{ce((n=>({...n,[e]:t})))},ct=(0,a.useMemo)((()=>(e="",t,n)=>{const a=d().encode({filter:e,page:t,page_size:n});return s.Z.get({endpoint:`/api/v1/report/related/database?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return Ne(t),{data:t,totalCount:e.json.count}}))}),[]),dt=(null==se?void 0:se.database)&&!se.database.label;(0,a.useEffect)((()=>{dt&&st("database",ot())}),[dt,ot]);const ut=(0,a.useMemo)((()=>(e="",t,n)=>{const a=d().encode_uri({filter:e,page:t,page_size:n});return s.Z.get({endpoint:`/api/v1/report/related/dashboard?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return Re(t),{data:t,totalCount:e.json.count}}))}),[]),ht=e=>{const t=e||(null==se?void 0:se.dashboard);if(!t||t.label)return null;let n;return Se.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n},pt=(0,a.useCallback)((e=>{const t=e||(null==se?void 0:se.chart);if(!t||t.label)return null;let n;return Ce.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n}),[Ce,null==se?void 0:se.chart]),mt=(null==se?void 0:se.chart)&&!(null!=se&&se.chart.label);(0,a.useEffect)((()=>{mt&&st("chart",pt())}),[pt,mt]);const vt=(0,a.useMemo)((()=>(e="",t,n)=>{const a=d().encode_uri({filter:e,page:t,page_size:n});return s.Z.get({endpoint:`/api/v1/report/related/chart?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return xe(t),{data:t,totalCount:e.json.count}}))}),[]),gt=e=>{const{target:{type:t,value:n,name:a}}=e,l="number"===t?parseInt(n,10)||null:n;st(a,l),"name"===a&&_t()},bt=e=>{const{target:t}=e,n=+t.value;st(t.name,0===n?void 0:n?Math.max(n,1):n)},Et=()=>{(()=>{var e,t;const n=[];null!=se&&null!=(e=se.name)&&e.length||n.push(ae.NAME_ERROR_TEXT),null!=se&&null!=(t=se.owners)&&t.length||n.push(ae.OWNERS_ERROR_TEXT),Ie(N.bx.General,n)})(),(()=>{const e=[];"dashboard"===he&&null!=se&&se.dashboard||"chart"===he&&null!=se&&se.chart||e.push(ae.CONTENT_ERROR_TEXT),Ie(N.bx.Content,e)})(),m||(()=>{var e,t,n;const a=[];null!=se&&se.database||a.push(ae.DATABASE_ERROR_TEXT),null!=se&&null!=(e=se.sql)&&e.length||a.push(ae.SQL_ERROR_TEXT),(fe||null!=se&&null!=(t=se.validator_config_json)&&t.op)&&(fe||void 0!==(null==se||null==(n=se.validator_config_json)?void 0:n.threshold))||a.push(ae.ALERT_CONDITION_ERROR_TEXT),Ie(N.bx.Alert,a)})(),(()=>{var e;const t=[];null!=se&&null!=(e=se.crontab)&&e.length||t.push(ae.CRONTAB_ERROR_TEXT),null!=se&&se.working_timeout||t.push(ae.WORKING_TIMEOUT_ERROR_TEXT),Ie(N.bx.Schedule,t)})(),(()=>{const e=[];(()=>{if(!Me.length)return!1;let e=!1;return Me.forEach((t=>{var n;t.method&&null!=(n=t.recipients)&&n.length&&(e=!0)})),e})()?!(()=>{if(!Me.length)return!0;const e=e=>!e||e.split(/[,;]/).every((e=>P.test(e.trim())));return Me.every((t=>{var n;return!t.method||"Email"!==t.method||(!(null!=(n=t.recipients)&&n.length)||e(t.recipients))&&(!t.cc||e(t.cc))&&(!t.bcc||e(t.bcc))}))})()&&e.push(ae.EMAIL_VALIDATION_ERROR_TEXT):e.push(ae.RECIPIENTS_ERROR_TEXT),qe&&e.push(ae.EMAIL_SUBJECT_ERROR_TEXT),Ie(N.bx.Notification,e)})()};(0,a.useEffect)((()=>{if($e&&(null==se||!se.id||(null==c?void 0:c.id)!==se.id||de&&r)){if(null!==(null==c?void 0:c.id)&&!Je&&!et){const e=c.id||0;tt(e)}}else!$e&&(!se||se.id||de&&r)&&(ce({...We,owners:X?[{value:X.userId,label:`${X.firstName} ${X.lastName}`}]:[]}),Pe([{recipients:"",cc:"",bcc:"",options:ie,method:N.cv.Email}]),Ue("active"))}),[c]),(0,a.useEffect)((()=>{if(Qe){const e=(Qe.recipients||[]).map((e=>{const t="string"==typeof e.recipient_config_json?JSON.parse(e.recipient_config_json):{};return{method:e.type,recipients:t.target||e.recipient_config_json,options:ie,cc:t.ccTarget||"",bcc:t.bccTarget||""}}));Pe(e),Ue(e.length===ie.length?"hidden":"active"),pe(Qe.chart?"chart":"dashboard"),ve(Qe.report_format||z);const t="string"==typeof Qe.validator_config_json?JSON.parse(Qe.validator_config_json):Qe.validator_config_json;_e("not null"===Qe.validator_type),Qe.chart&&Be(Qe.chart.viz_type),be(Qe.force_screenshot),ce({...Qe,chart:Qe.chart?pt(Qe.chart)||{value:Qe.chart.id,label:Qe.chart.slice_name}:void 0,dashboard:Qe.dashboard?ht(Qe.dashboard)||{value:Qe.dashboard.id,label:Qe.dashboard.dashboard_title}:void 0,database:Qe.database?ot(Qe.database)||{value:Qe.database.id,label:Qe.database.database_name}:void 0,owners:((null==c?void 0:c.owners)||[]).map((e=>({value:e.value||e.id,label:e.label||`${e.first_name} ${e.last_name}`}))),validator_config_json:"not null"===Qe.validator_type?{op:"not null"}:t})}}),[Qe]);const Tt=se||{};(0,a.useEffect)((()=>{Et(),_t()}),[Tt.name,Tt.owners,Tt.database,Tt.sql,Tt.validator_config_json,Tt.crontab,Tt.working_timeout,Tt.dashboard,Tt.chart,he,Me,fe,qe]),(0,a.useEffect)((()=>{(()=>{const e=[N.bx.General,N.bx.Content,m?void 0:N.bx.Alert,N.bx.Schedule,N.bx.Notification].some((e=>e&&Ze[e].hasErrors)),t=e?(e=>{const t=[];return Object.values(e).forEach((e=>{if(e.hasErrors){const n=`${e.name}: `;t.push(n+e.errors.join(", "))}})),(0,R.BX)("div",{children:[ae.ERROR_TOOLTIP_MESSAGE,(0,R.tZ)(U,{children:t.map((e=>(0,R.tZ)("li",{children:e},e)))})]})})(Ze):"";ke(t),oe(e)})()}),[Ze]);const ft=(0,a.useMemo)((()=>ie.reduce(((e,t)=>e.some((e=>e.includes("slack")))&&t.toLowerCase().includes("slack")?e:[...e,t.toLowerCase()]),[]).length),[ie]);de&&r&&ue(!1);const _t=()=>{var e,t;if("chart"===he)null!=se&&se.name||null!=se&&null!=(e=se.chart)&&e.label?ze(`${null==se?void 0:se.name}: ${(null==se||null==(t=se.chart)?void 0:t.label)||""}`):ze("");else if("dashboard"===he){var n,a;null!=se&&se.name||null!=se&&null!=(n=se.dashboard)&&n.label?ze(`${null==se?void 0:se.name}: ${(null==se||null==(a=se.dashboard)?void 0:a.label)||""}`):ze("")}else ze("")},yt=e=>{Ve(e)};return(0,R.tZ)(W,{className:"no-content-padding",responsive:!0,disablePrimaryButton:re,primaryTooltipMessage:Ae,onHandledPrimaryAction:()=>{var e,n,a;const i=[];Me.forEach((e=>{e.method&&e.recipients.length&&i.push({recipient_config_json:{target:e.recipients,ccTarget:e.cc,bccTarget:e.bcc},type:e.method})}));const r="chart"===he&&!m,o={...se,type:m?"Report":"Alert",force_screenshot:r||ge,validator_type:fe?"not null":"operator",validator_config_json:fe?{}:null==se?void 0:se.validator_config_json,chart:"chart"===he?null==se||null==(e=se.chart)?void 0:e.value:null,dashboard:"dashboard"===he?null==se||null==(n=se.dashboard)?void 0:n.value:null,custom_width:Ee?null==se?void 0:se.custom_width:void 0,database:null==se||null==(a=se.database)?void 0:a.value,owners:((null==se?void 0:se.owners)||[]).map((e=>e.value||e.id)),recipients:i,report_format:me||z};if(o.recipients&&!o.recipients.length&&delete o.recipients,o.context_markdown="string",$e){if(null!=se&&se.id){const e=se.id;delete o.id,delete o.created_by,delete o.last_eval_dttm,delete o.last_state,delete o.last_value,delete o.last_value_row_json,at(e,o).then((e=>{e&&(E((0,l.t)("%s updated",o.type)),t&&t(),it())}))}}else se&&nt(o).then((e=>{e&&(E((0,l.t)("%s updated",o.type)),t&&t(e),it())}))},onHide:it,primaryButtonName:$e?(0,l.t)("Save"):(0,l.t)("Add"),show:r,width:"500px",centered:!0,title:(0,R.tZ)("h4",{children:(()=>{let e;switch(!0){case $e&&m:e=(0,l.t)("Edit Report");break;case $e:e=(0,l.t)("Edit Alert");break;case m:e=(0,l.t)("Add Report");break;default:e=(0,l.t)("Add Alert")}return e})()}),children:(0,R.BX)(v.Z,{expandIconPosition:"right",defaultActiveKey:"general",accordion:!0,css:i.iv`
          border: 'none';
        `,children:[(0,R.tZ)(j,{header:(0,R.tZ)($,{title:ae.GENERAL_TITLE,subtitle:(0,l.t)("Set up basic details, such as name and description."),validateCheckStatus:!Ze[N.bx.General].hasErrors,testId:"general-information-panel"}),children:(0,R.BX)("div",{className:"header-section",children:[(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[m?(0,l.t)("Report name"):(0,l.t)("Alert name"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("input",{type:"text",name:"name",value:se?se.name:"",placeholder:m?(0,l.t)("Enter report name"):(0,l.t)("Enter alert name"),onChange:gt})})]}),(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Owners"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(T.qb,{ariaLabel:(0,l.t)("Owners"),allowClear:!0,name:"owners",mode:"multiple",placeholder:(0,l.t)("Select owners"),value:(null==se?void 0:se.owners)||[],options:rt,onChange:e=>{st("owners",e||[])}})})]}),(0,R.BX)(Y,{children:[(0,R.tZ)("div",{className:"control-label",children:(0,l.t)("Description")}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("input",{type:"text",name:"description",value:se&&se.description||"",placeholder:(0,l.t)("Include description to be sent with %s",we),onChange:gt})})]}),(0,R.BX)(K,{children:[(0,R.tZ)(p.r,{checked:!!se&&se.active,defaultChecked:!0,onChange:e=>{st("active",e)}}),(0,R.tZ)("div",{className:"switch-label",children:m?(0,l.t)("Report is active"):(0,l.t)("Alert is active")})]})]})},"general"),!m&&(0,R.BX)(j,{header:(0,R.tZ)($,{title:ae.ALERT_CONDITION_TITLE,subtitle:(0,l.t)("Define the database, SQL query, and triggering conditions for alert."),validateCheckStatus:!Ze[N.bx.Alert].hasErrors,testId:"alert-condition-panel"}),children:[(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Database"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(T.qb,{ariaLabel:(0,l.t)("Database"),name:"source",placeholder:(0,l.t)("Select database"),value:null!=se&&null!=(y=se.database)&&y.label&&null!=se&&null!=(x=se.database)&&x.value?{value:se.database.value,label:se.database.label}:void 0,options:ct,onChange:e=>{st("database",e||[])}})})]}),(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("SQL Query"),(0,R.tZ)(Q,{tooltip:(0,l.t)('The result of this query must be a value capable of numeric interpretation e.g. 1, 1.0, or "1" (compatible with Python\'s float() function).')}),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(f.Z,{name:"sql",language:"sql",offerEditInModal:!1,minLines:15,maxLines:15,onChange:e=>{st("sql",e||"")},readOnly:!1,initialValue:null==Qe?void 0:Qe.sql},null==se?void 0:se.id)]}),(0,R.BX)("div",{className:"inline-container wrap",children:[(0,R.BX)(Y,{css:G,children:[(0,R.BX)("div",{className:"control-label",css:ne,children:[(0,l.t)("Trigger Alert If..."),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Condition"),onChange:e=>{var t;_e("not null"===e);const n={op:e,threshold:se?null==(t=se.validator_config_json)?void 0:t.threshold:void 0};st("validator_config_json",n)},placeholder:(0,l.t)("Condition"),value:(null==se||null==(Z=se.validator_config_json)?void 0:Z.op)||void 0,options:q,css:ne})})]}),(0,R.BX)(Y,{css:G,children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Value")," ",!fe&&(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)("input",{type:"number",name:"threshold",disabled:fe,value:void 0===(null==se||null==(O=se.validator_config_json)?void 0:O.threshold)||fe?"":se.validator_config_json.threshold,placeholder:(0,l.t)("Value"),onChange:e=>{var t;const{target:n}=e,a={op:se?null==(t=se.validator_config_json)?void 0:t.op:void 0,threshold:n.value};st("validator_config_json",a)}})})]})]})]},"condition"),(0,R.BX)(j,{header:(0,R.tZ)($,{title:m?ae.REPORT_CONTENTS_TITLE:ae.ALERT_CONTENTS_TITLE,subtitle:(0,l.t)("Customize data source, filters, and layout."),validateCheckStatus:!Ze[N.bx.Content].hasErrors,testId:"contents-panel"}),children:[(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Content type"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Select content type"),onChange:e=>{be(!1),pe(e)},value:he,options:F,placeholder:(0,l.t)("Select content type")})]}),(0,R.tZ)(Y,{children:"chart"===he?(0,R.BX)(R.HY,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Select chart"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(T.qb,{ariaLabel:(0,l.t)("Chart"),name:"chart",value:null!=se&&null!=(k=se.chart)&&k.label&&null!=se&&null!=(I=se.chart)&&I.value?{value:se.chart.value,label:se.chart.label}:void 0,options:vt,onChange:e=>{(e=>{s.Z.get({endpoint:`/api/v1/chart/${e.value}`}).then((e=>Be(e.json.result.viz_type)))})(e),st("chart",e||void 0),st("dashboard",null)},placeholder:(0,l.t)("Select chart to use")})]}):(0,R.BX)(R.HY,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Select dashboard"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(T.qb,{ariaLabel:(0,l.t)("Dashboard"),name:"dashboard",value:null!=se&&null!=(L=se.dashboard)&&L.label&&null!=se&&null!=(w=se.dashboard)&&w.value?{value:se.dashboard.value,label:se.dashboard.label}:void 0,options:ut,onChange:e=>{st("dashboard",e||void 0),st("chart",null)},placeholder:(0,l.t)("Select dashboard to use")})]})}),(0,R.tZ)(Y,{css:["PDF","TEXT","CSV"].includes(me)&&G,children:Xe&&(0,R.BX)(R.HY,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Content format"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Select format"),onChange:e=>{ve(e)},value:me,options:"dashboard"===he?["pdf","png"].map((e=>H[e])):M.includes(Le)?Object.values(H):["pdf","png","csv"].map((e=>H[e])),placeholder:(0,l.t)("Select format")})]})}),Ee&&(0,R.BX)(Y,{css:!m&&"chart"===he&&G,children:[(0,R.tZ)("div",{className:"control-label",children:(0,l.t)("Screenshot width")}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(h.Rn,{type:"number",name:"custom_width",value:(null==se?void 0:se.custom_width)||void 0,min:600,max:2400,placeholder:(0,l.t)("Input custom width in pixels"),onChange:e=>{st("custom_width",e)}})})]}),(m||"dashboard"===he)&&(0,R.tZ)("div",{className:"inline-container",children:(0,R.tZ)(J,{className:"checkbox",checked:ge,onChange:e=>{be(e.target.checked)},children:(0,l.t)("Ignore cache when generating report")})})]},"contents"),(0,R.BX)(j,{header:(0,R.tZ)($,{title:ae.SCHEDULE_TITLE,subtitle:(0,l.t)("Define delivery schedule, timezone, and frequency settings."),validateCheckStatus:!Ze[N.bx.Schedule].hasErrors,testId:"schedule-panel"}),children:[(0,R.tZ)(A,{value:(null==se?void 0:se.crontab)||"",onChange:e=>st("crontab",e)}),(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Timezone")," ",(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)(g.Z,{onTimezoneChange:e=>{st("timezone",e)},timezone:null==se?void 0:se.timezone,minWidth:"100%"})]}),(0,R.BX)(Y,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Log retention"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(T.Ph,{ariaLabel:(0,l.t)("Log retention"),placeholder:(0,l.t)("Log retention"),onChange:e=>{st("log_retention",e)},value:null==se?void 0:se.log_retention,options:V,sortComparator:(0,b.mj)("value")})})]}),(0,R.tZ)(Y,{css:G,children:m?(0,R.BX)(R.HY,{children:[(0,R.BX)("div",{className:"control-label",children:[(0,l.t)("Working timeout"),(0,R.tZ)("span",{className:"required",children:"*"})]}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(C,{min:1,name:"working_timeout",value:(null==se?void 0:se.working_timeout)||"",placeholder:(0,l.t)("Time in seconds"),onChange:bt,timeUnit:(0,l.t)("seconds")})})]}):(0,R.BX)(R.HY,{children:[(0,R.tZ)("div",{className:"control-label",children:(0,l.t)("Grace period")}),(0,R.tZ)("div",{className:"input-container",children:(0,R.tZ)(C,{min:1,name:"grace_period",value:(null==se?void 0:se.grace_period)||"",placeholder:(0,l.t)("Time in seconds"),onChange:bt,timeUnit:(0,l.t)("seconds")})})]})})]},"schedule"),(0,R.BX)(j,{header:(0,R.tZ)($,{title:ae.NOTIFICATION_TITLE,subtitle:(0,l.t)("Choose notification method and recipients."),validateCheckStatus:!Ze[N.bx.Notification].hasErrors,testId:"notification-method-panel"}),children:[Me.map(((e,t)=>(0,R.tZ)(te,{children:(0,R.tZ)(B,{setting:e,index:t,onUpdate:Ke,onRemove:Ye,onInputChange:gt,email_subject:(null==se?void 0:se.email_subject)||"",defaultSubject:De||"",setErrorSubject:yt},`NotificationMethod-${t}`)}))),ft>Me.length&&(0,R.tZ)(le,{status:je,onClick:()=>{Pe([...Me,{recipients:"",options:ie.filter((e=>!Me.reduce(((t,n)=>t||e===n.method),!1)))}]),Ue(Me.length===ft?"hidden":"disabled")}})]},"notification")]})})}))},690335:(e,t,n)=>{var a,l,i,r;n.d(t,{Z9:()=>l,bx:()=>r,cv:()=>a}),function(e){e.Email="Email",e.Slack="Slack",e.SlackV2="SlackV2"}(a||(a={})),function(e){e.Success="Success",e.Working="Working",e.Error="Error",e.Noop="Not triggered",e.Grace="On Grace"}(l||(l={})),function(e){e.Email="Email",e.Slack="Slack",e.SlackV2="SlackV2"}(i||(i={})),function(e){e.General="generalSection",e.Content="contentSection",e.Alert="alertConditionSection",e.Schedule="scheduleSection",e.Notification="notificationSection"}(r||(r={}))}}]);
//# sourceMappingURL=c1b062e34bc2069e8dd7.chunk.js.map