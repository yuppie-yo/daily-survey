(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7130],{611409:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_QUERY_EDITOR:()=>C,CHANGE_DATA_PREVIEW_ID:()=>fe,CLEAR_DESTROYED_QUERY_EDITOR:()=>Ae,CLEAR_INACTIVE_QUERIES:()=>me,CLEAR_QUERY_RESULTS:()=>he,CLONE_QUERY_TO_NEW_TAB:()=>D,COLLAPSE_TABLE:()=>P,COST_ESTIMATE_FAILED:()=>ge,COST_ESTIMATE_RETURNED:()=>Ee,COST_ESTIMATE_STARTED:()=>ye,CREATE_DATASOURCE_FAILED:()=>be,CREATE_DATASOURCE_STARTED:()=>ve,CREATE_DATASOURCE_SUCCESS:()=>Te,CtasEnum:()=>we,END_QUERY:()=>q,EXPAND_TABLE:()=>U,LOAD_QUERY_EDITOR:()=>re,MERGE_TABLE:()=>N,MIGRATE_QUERY:()=>J,MIGRATE_QUERY_EDITOR:()=>W,MIGRATE_TABLE:()=>X,MIGRATE_TAB_HISTORY:()=>K,QUERY_EDITOR_PERSIST_HEIGHT:()=>G,QUERY_EDITOR_SAVED:()=>O,QUERY_EDITOR_SETDB:()=>Z,QUERY_EDITOR_SET_AUTORUN:()=>Q,QUERY_EDITOR_SET_CATALOG:()=>M,QUERY_EDITOR_SET_CURSOR_POSITION:()=>B,QUERY_EDITOR_SET_FUNCTION_NAMES:()=>V,QUERY_EDITOR_SET_QUERY_LIMIT:()=>H,QUERY_EDITOR_SET_SCHEMA:()=>F,QUERY_EDITOR_SET_SELECTED_TEXT:()=>j,QUERY_EDITOR_SET_SQL:()=>$,QUERY_EDITOR_SET_TEMPLATE_PARAMS:()=>Y,QUERY_EDITOR_SET_TITLE:()=>k,QUERY_EDITOR_TOGGLE_LEFT_BAR:()=>z,QUERY_FAILED:()=>pe,QUERY_SUCCESS:()=>ue,REFRESH_QUERIES:()=>oe,REMOVE_DATA_PREVIEW:()=>_e,REMOVE_QUERY:()=>x,REMOVE_QUERY_EDITOR:()=>w,REMOVE_TABLES:()=>L,REQUEST_QUERY_RESULTS:()=>de,RESET_STATE:()=>A,RUN_QUERY:()=>ie,SET_ACTIVE_QUERY_EDITOR:()=>te,SET_ACTIVE_SOUTHPANE_TAB:()=>ae,SET_DATABASES:()=>ee,SET_EDITOR_TAB_LAST_UPDATE:()=>Se,SET_LAST_UPDATED_ACTIVE_TAB:()=>Re,SET_TABLES:()=>ne,SET_USER_OFFLINE:()=>se,START_QUERY:()=>le,STOP_QUERY:()=>ce,UPDATE_QUERY_EDITOR:()=>I,addDangerToast:()=>Oe,addInfoToast:()=>Ce,addNewQueryEditor:()=>at,addQueryEditor:()=>nt,addSavedQueryToTabState:()=>Rt,addSuccessToast:()=>Ie,addTable:()=>xt,addWarningToast:()=>De,changeDataPreviewId:()=>Zt,clearDestoryedQueryEditor:()=>ht,clearInactiveQueries:()=>$e,clearQueryResults:()=>Ve,cloneQueryToNewTab:()=>ot,collapseTable:()=>kt,convertQueryToClient:()=>Ue,convertQueryToServer:()=>xe,createCtasDatasource:()=>Jt,createDatasource:()=>Xt,createDatasourceFailed:()=>Kt,createDatasourceStarted:()=>zt,createDatasourceSuccess:()=>Wt,estimateQueryCost:()=>Qe,expandTable:()=>Ft,fetchQueryEditor:()=>ut,fetchQueryResults:()=>We,formatQuery:()=>Dt,getUpToDateQuery:()=>Pe,loadQueryEditor:()=>ct,mergeTable:()=>qt,persistEditorHeight:()=>Ht,popDatasourceQuery:()=>Gt,popQuery:()=>Vt,popSavedQuery:()=>jt,popStoredQuery:()=>Yt,postStopQuery:()=>et,queryEditorSetAndSaveSql:()=>Ot,queryEditorSetAutorun:()=>Tt,queryEditorSetCatalog:()=>gt,queryEditorSetCursorPosition:()=>It,queryEditorSetDb:()=>Et,queryEditorSetQueryLimit:()=>wt,queryEditorSetSchema:()=>vt,queryEditorSetSelectedText:()=>Lt,queryEditorSetSql:()=>Ct,queryEditorSetTemplateParams:()=>Nt,queryEditorSetTitle:()=>bt,queryFailed:()=>Ye,querySuccess:()=>He,reFetchQueryResults:()=>Mt,reRunQuery:()=>Je,refreshQueries:()=>$t,removeAllOtherQueryEditors:()=>ft,removeDataPreview:()=>Ge,removeQuery:()=>yt,removeQueryEditor:()=>_t,removeTables:()=>Qt,requestQueryResults:()=>ze,resetState:()=>Ze,runQuery:()=>Ke,runQueryFromSqlEditor:()=>Xe,runTablePreviewQuery:()=>Ut,saveQuery:()=>St,scheduleQuery:()=>ke,setActiveQueryEditor:()=>it,setActiveSouthPaneTab:()=>pt,setDatabases:()=>tt,setEditorTabLastUpdate:()=>Fe,setLastUpdatedActiveTab:()=>st,setTables:()=>dt,setUserOffline:()=>Bt,startQuery:()=>Be,stopQuery:()=>je,switchQueryEditor:()=>lt,syncQueryEditor:()=>rt,syncTable:()=>Pt,toggleLeftBar:()=>mt,updateQueryEditor:()=>Me,updateSavedQuery:()=>At});var n=r(567523),a=r.n(n),o=r(163137),s=r.n(o),i=r(964296),l=r(115926),c=r.n(l),d=r(61988),u=r(431069),p=r(844818),m=r(516416),h=r(593185),_=r(444814),f=r(672570),y=r(203741),E=r(920292),g=r(797381);const v=/^Untitled Query (\d+)$/,T="Untitled Query ",b=(e,t=`${T}1`)=>{const r=(0,d.t)(t);if(e.length>0){const t=e.filter((e=>{var t;return null==(t=e.name)?void 0:t.match(v)})).map((e=>+e.name.replace(T,"")));if(t.length>0){const e=Math.max(...t);return(0,d.t)("%s%s",T,e+1)}return r}return r};var S=r(536627),R=r(182591);const A="RESET_STATE",C="ADD_QUERY_EDITOR",I="UPDATE_QUERY_EDITOR",O="QUERY_EDITOR_SAVED",D="CLONE_QUERY_TO_NEW_TAB",w="REMOVE_QUERY_EDITOR",N="MERGE_TABLE",L="REMOVE_TABLES",q="END_QUERY",x="REMOVE_QUERY",U="EXPAND_TABLE",P="COLLAPSE_TABLE",Z="QUERY_EDITOR_SETDB",M="QUERY_EDITOR_SET_CATALOG",F="QUERY_EDITOR_SET_SCHEMA",k="QUERY_EDITOR_SET_TITLE",Q="QUERY_EDITOR_SET_AUTORUN",$="QUERY_EDITOR_SET_SQL",B="QUERY_EDITOR_SET_CURSOR_POSITION",H="QUERY_EDITOR_SET_QUERY_LIMIT",Y="QUERY_EDITOR_SET_TEMPLATE_PARAMS",j="QUERY_EDITOR_SET_SELECTED_TEXT",V="QUERY_EDITOR_SET_FUNCTION_NAMES",G="QUERY_EDITOR_PERSIST_HEIGHT",z="QUERY_EDITOR_TOGGLE_LEFT_BAR",W="MIGRATE_QUERY_EDITOR",K="MIGRATE_TAB_HISTORY",X="MIGRATE_TABLE",J="MIGRATE_QUERY",ee="SET_DATABASES",te="SET_ACTIVE_QUERY_EDITOR",re="LOAD_QUERY_EDITOR",ne="SET_TABLES",ae="SET_ACTIVE_SOUTHPANE_TAB",oe="REFRESH_QUERIES",se="SET_USER_OFFLINE",ie="RUN_QUERY",le="START_QUERY",ce="STOP_QUERY",de="REQUEST_QUERY_RESULTS",ue="QUERY_SUCCESS",pe="QUERY_FAILED",me="CLEAR_INACTIVE_QUERIES",he="CLEAR_QUERY_RESULTS",_e="REMOVE_DATA_PREVIEW",fe="CHANGE_DATA_PREVIEW_ID",ye="COST_ESTIMATE_STARTED",Ee="COST_ESTIMATE_RETURNED",ge="COST_ESTIMATE_FAILED",ve="CREATE_DATASOURCE_STARTED",Te="CREATE_DATASOURCE_SUCCESS",be="CREATE_DATASOURCE_FAILED",Se="SET_EDITOR_TAB_LAST_UPDATE",Re="SET_LAST_UPDATED_ACTIVE_TAB",Ae="CLEAR_DESTROYED_QUERY_EDITOR",Ce=f.bM,Ie=f.ws,Oe=f.Gb,De=f.Dz,we={Table:"TABLE",View:"VIEW"},Ne=(0,d.t)("The query couldn't be loaded"),Le={id:"remoteId",db_id:"dbId",label:"name",template_parameters:"templateParams"},qe=e=>t=>a()(t,((t,r)=>r in e?e[r]:r)),xe=qe(s()(Le)),Ue=qe(Le);function Pe(e,t,r){const{sqlLab:{unsavedQueryEditor:n,queryEditors:a}}=e,o=null!=r?r:t.id;return{id:o,...a.find((e=>e.id===o)),...o===n.id&&n}}function Ze(e){return(t,r)=>{const{common:n}=r(),a=(0,S.Z)({...(0,E.Z)(),common:n,...e});t({type:A,sqlLabInitialState:a.sqlLab}),(0,R.$e)(t,a)}}function Me(e){return{type:I,alterations:e}}function Fe(e){return{type:Se,timestamp:e}}function ke(e){return t=>u.Z.post({endpoint:"/api/v1/saved_query/",jsonPayload:e,stringify:!1}).then((()=>t(Ie((0,d.t)("Your query has been scheduled. To see details of your query, navigate to Saved queries"))))).catch((()=>t(Oe((0,d.t)("Your query could not be scheduled")))))}function Qe(e){return(t,r)=>{const{dbId:n,catalog:a,schema:o,sql:s,selectedText:i,templateParams:l}=Pe(r(),e),c={database_id:n,catalog:a,schema:o,sql:i||s,template_params:JSON.parse(l||"{}")};return Promise.all([t({type:ye,query:e}),u.Z.post({endpoint:"/api/v1/sqllab/estimate/",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((({json:r})=>t({type:Ee,query:e,json:r}))).catch((r=>(0,p.O$)(r).then((r=>{const n=r.error||r.statusText||(0,d.t)("Failed at retrieving results");return t({type:ge,query:e,error:n})}))))])}}function $e(e){return{type:me,interval:e}}function Be(e){return Object.assign(e,{id:e.id?e.id:(0,i.x0)(11),progress:0,startDttm:(0,_.zO)(),state:e.runAsync?"pending":"running",cached:!1}),{type:le,query:e}}function He(e,t){return{type:ue,query:e,results:t}}function Ye(e,t,r,n){return function(a){const o={has_err:!0,start_offset:e.startDttm,ts:(new Date).getTime()};null==n||n.forEach((({error_type:e,extra:t})=>{var r;((null==t||null==(r=t.issue_codes)?void 0:r.map((({message:e})=>e)))||[e]).forEach((t=>{a((0,g.logEvent)(y.Im,{...o,error_type:e,error_details:t}))}))})),a({type:pe,query:e,msg:t,link:r,errors:n})}}function je(e){return{type:ce,query:e}}function Ve(e){return{type:he,query:e}}function Ge(e){return{type:_e,table:e}}function ze(e){return{type:de,query:e}}function We(e,t,r){return function(n,a){var o,s;const{SQLLAB_QUERY_RESULT_TIMEOUT:i}=null!=(o=null==(s=a().common)?void 0:s.conf)?o:{};n(ze(e));const l=c().encode({key:e.resultsKey,rows:t||null}),m=null!=r?r:i,h=new AbortController;return u.Z.get({endpoint:`/api/v1/sqllab/results/?q=${l}`,parseMethod:"json-bigint",...m&&{timeout:m,signal:h.signal}}).then((({json:t})=>n(He(e,t)))).catch((t=>{h.abort(),(0,p.O$)(t).then((t=>{const r=t.error||t.statusText||(0,d.t)("Failed at retrieving results");return n(Ye(e,r,t.link,t.errors))}))}))}}function Ke(e){return function(t){t(Be(e));const r={client_id:e.id,database_id:e.dbId,json:!0,runAsync:e.runAsync,catalog:e.catalog,schema:e.schema,sql:e.sql,sql_editor_id:e.sqlEditorId,tab:e.tab,tmp_table_name:e.tempTable,select_as_cta:e.ctas,ctas_method:e.ctas_method,templateParams:e.templateParams,queryLimit:e.queryLimit,expand_data:!0},n=window.location.search||"";return u.Z.post({endpoint:`/api/v1/sqllab/execute/${n}`,body:JSON.stringify(r),headers:{"Content-Type":"application/json"},parseMethod:"json-bigint"}).then((({json:r})=>{e.runAsync||t(He(e,r))})).catch((r=>(0,p.O$)(r).then((r=>{let n=r.error||r.message||r.statusText||(0,d.t)("Unknown error");n.includes("CSRF token")&&(n=(0,d.t)(m.tU.SESSION_TIMED_OUT)),t(Ye(e,n,r.link,r.errors))}))))}}function Xe(e,t,r,n,a,o){return function(s,i){const l=Pe(i(),t,t.id);s(Ke({dbId:l.dbId,sql:l.selectedText||l.sql,sqlEditorId:l.id,tab:l.name,catalog:l.catalog,schema:l.schema,tempTable:n,templateParams:l.templateParams,queryLimit:l.queryLimit||r,runAsync:!!e&&e.allow_run_async,ctas:a,ctas_method:o,updateTabState:!l.selectedText}))}}function Je(e){return function(t){t(Ke({...e,id:(0,i.x0)(11)}))}}function et(e){return function(t){return u.Z.post({endpoint:"/api/v1/query/stop",body:JSON.stringify({client_id:e.id}),headers:{"Content-Type":"application/json"}}).then((()=>t(je(e)))).then((()=>t(Ie((0,d.t)("Query was stopped."))))).catch((()=>t(Oe((0,d.t)("Failed at stopping query. %s",e.id)))))}}function tt(e){return{type:ee,databases:e}}function rt(e){return function(t,r){const{tables:n,queries:a}=r().sqlLab,o=n.filter((t=>t.inLocalStorage&&t.queryEditorId===e.id)),s=Object.values(a).filter((t=>t.inLocalStorage&&t.sqlEditorId===e.id));return u.Z.post({endpoint:"/tabstateview/",postPayload:{queryEditor:e}}).then((({json:r})=>{const n={...e,id:r.id.toString(),inLocalStorage:!1,loaded:!0};return t({type:W,oldQueryEditor:e,newQueryEditor:n}),t({type:K,oldId:e.id,newId:n.id}),Promise.all([...o.map((e=>function(e,t,r){return u.Z.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...e,queryEditorId:t}}}).then((({json:n})=>{const a={...e,id:n.id,queryEditorId:t};return r({type:X,oldTable:e,newTable:a})})).catch((()=>r(De((0,d.t)("Unable to migrate table schema state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e,n.id,t))),...s.map((e=>function(e,t,r){return u.Z.post({endpoint:encodeURI(`/tabstateview/${t}/migrate_query`),postPayload:{queryId:e}}).then((()=>r({type:J,queryId:e,queryEditorId:t}))).catch((()=>r(De((0,d.t)("Unable to migrate query state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e.id,n.id,t)))])})).catch((()=>t(De((0,d.t)("Unable to migrate query editor state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}}function nt(e){const t={...e,id:(0,i.x0)(11),loaded:!0,inLocalStorage:!0};return{type:C,queryEditor:t}}function at(){return function(e,t){const{sqlLab:{queryEditors:r,tabHistory:n,unsavedQueryEditor:a,databases:o},common:s}=t(),i=s.conf.SQLLAB_DEFAULT_DBID,l=r.find((e=>e.id===n[n.length-1])),c=Object.values(o).map((e=>e.id)),u=c.length>0?Math.min(...c):void 0,{dbId:p,catalog:m,schema:_,queryLimit:f,autorun:y}={...r[0],...l,...a.id===(null==l?void 0:l.id)&&a},E=(0,h.cr)(h.TT.SqllabBackendPersistence)?"":(0,d.t)("-- Note: Unless you save your query, these tabs will NOT persist if you clear your cookies or change browsers.\n\n"),g=b((null==r?void 0:r.map((e=>({...e,...e.id===a.id&&a}))))||[]);return e(nt({dbId:p||i||u,catalog:null!=m?m:null,schema:null!=_?_:null,autorun:null!=y&&y,sql:`${E}SELECT ...`,queryLimit:f||s.conf.DEFAULT_SQLLAB_LIMIT,name:g}))}}function ot(e,t){return function(r,n){const a=n(),{queryEditors:o,unsavedQueryEditor:s,tabHistory:i}=a.sqlLab,l={...o.find((e=>e.id===i[i.length-1])),...i[i.length-1]===s.id&&s};return r(nt({name:(0,d.t)("Copy of %s",l.name),dbId:e.dbId?e.dbId:null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:t,sql:e.sql,queryLimit:l.queryLimit,maxRow:l.maxRow,templateParams:l.templateParams}))}}function st(e){return{type:Re,queryEditorId:e}}function it(e){return{type:te,queryEditor:e}}function lt(e=!1){return function(t,r){const{sqlLab:n}=r(),{queryEditors:a,tabHistory:o}=n,s=o[o.length-1],i=a.findIndex((e=>e.id===s));t(it(a[(e?i-1+a.length:i+1)%a.length]))}}function ct(e){return{type:re,queryEditor:e}}function dt(e){const t=e.filter((e=>null!==e.description)).map((e=>{const{columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,dataPreviewQueryId:s}=e.description;return{dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:s,columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,isMetadataLoading:!1,isExtraMetadataLoading:!1}}));return{type:ne,tables:t}}function ut(e,t){return function(r){u.Z.get({endpoint:encodeURI(`/tabstateview/${e.id}`)}).then((({json:e})=>{var n,a;const o={id:e.id.toString(),loaded:!0,name:e.label,sql:e.sql,selectedText:null,latestQueryId:null==(n=e.latest_query)?void 0:n.id,autorun:e.autorun,dbId:e.database_id,templateParams:e.template_params,catalog:e.catalog,schema:e.schema,queryLimit:e.query_limit,remoteId:null==(a=e.saved_query)?void 0:a.id,hideLeftBar:e.hide_left_bar};r(ct(o)),r(dt(e.table_schemas||[])),e.latest_query&&e.latest_query.resultsKey&&r(We(e.latest_query,t))})).catch((t=>404!==t.status?r(Oe((0,d.t)("An error occurred while fetching tab state"))):r({type:w,queryEditor:e})))}}function pt(e){return{type:ae,tabId:e}}function mt(e){const t=!e.hideLeftBar;return{type:z,queryEditor:e,hideLeftBar:t}}function ht(e){return{type:Ae,queryEditorId:e}}function _t(e){return{type:w,queryEditor:e}}function ft(e){return function(t,r){var n;const{sqlLab:a}=r();null==(n=a.queryEditors)||n.forEach((r=>{r.id!==e.id&&t(_t(r))}))}}function yt(e){return function(t){return((0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.delete({endpoint:encodeURI(`/tabstateview/${e.sqlEditorId}/query/${e.id}`)}):Promise.resolve()).then((()=>t({type:x,query:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while removing query. Please contact your administrator.")))))}}function Et(e,t){return{type:Z,queryEditor:e,dbId:t}}function gt(e,t){return{type:M,queryEditor:e||{},catalog:t}}function vt(e,t){return{type:F,queryEditor:e||{},schema:t}}function Tt(e,t){return{type:Q,queryEditor:e,autorun:t}}function bt(e,t,r){return{type:k,queryEditor:{...e,id:r},name:t}}function St(e,t){const{id:r,...n}=xe(e);return r=>u.Z.post({endpoint:"/api/v1/saved_query/",jsonPayload:xe(n)}).then((n=>{const a=Ue({id:n.json.id,...n.json.result});return r({type:O,query:e,clientId:t,result:a}),r(bt(e,e.name,t)),a})).catch((()=>r(Oe((0,d.t)("Your query could not be saved")))))}const Rt=(e,t)=>r=>((0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.put({endpoint:`/tabstateview/${e.id}`,postPayload:{saved_query_id:t.remoteId}}):Promise.resolve()).catch((()=>{r(Oe((0,d.t)("Your query was not properly saved")))})).then((()=>{r(Ie((0,d.t)("Your query was saved")))}));function At(e,t){const{id:r,...n}=xe(e);return r=>u.Z.put({endpoint:`/api/v1/saved_query/${e.remoteId}`,jsonPayload:xe(n)}).then((()=>{r(Ie((0,d.t)("Your query was updated"))),r(bt(e,e.name,t))})).catch((e=>{const t=(0,d.t)("Your query could not be updated");console.error(t,e),r(Oe(t))})).then((()=>r(Me(e))))}function Ct(e,t,r){return{type:$,queryEditor:e,sql:t,queryId:r}}function It(e,t){return{type:B,queryEditor:e,position:t}}function Ot(e,t,r){return function(n,a){const o=Pe(a(),e);return n(Ct(o,t,r)),(0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.put({endpoint:encodeURI(`/tabstateview/${o.id}`),postPayload:{sql:t,latest_query_id:r}}).catch((()=>n(Oe((0,d.t)('An error occurred while storing your query in the backend. To avoid losing your changes, please save your query using the "Save Query" button.'))))):Promise.resolve()}}function Dt(e){return function(t,r){const{sql:n}=Pe(r(),e);return u.Z.post({endpoint:"/api/v1/sqllab/format_sql/",body:JSON.stringify({sql:n}),headers:{"Content-Type":"application/json"}}).then((({json:r})=>{t(Ct(e,r.result))}))}}function wt(e,t){return{type:H,queryEditor:e,queryLimit:t}}function Nt(e,t){return{type:Y,queryEditor:e,templateParams:t}}function Lt(e,t){return{type:j,queryEditor:e,sql:t}}function qt(e,t,r){return{type:N,table:e,query:t,prepend:r}}function xt(e,t,r,n){return function(a,o){const s=Pe(o(),e,e.id);a(qt({dbId:s.dbId,queryEditorId:s.id,catalog:r,schema:n,name:t,id:(0,i.x0)(11),expanded:!0},null,!0))}}function Ut(e){return function(t,r){const{sqlLab:{databases:n}}=r(),a=n[e.dbId],{dbId:o,catalog:s,schema:l}=e;if(a&&!a.disable_data_preview){const r={id:(0,i.x0)(11),dbId:o,catalog:s,schema:l,sql:e.selectStar,tableName:e.name,sqlEditorId:null,tab:"",runAsync:a.allow_run_async,ctas:!1,isDataPreview:!0};return Promise.all([t(qt({id:e.id,dbId:e.dbId,catalog:e.catalog,schema:e.schema,name:e.name,queryEditorId:e.queryEditorId,dataPreviewQueryId:r.id},r)),t(Ke(r))])}return Promise.resolve()}}function Pt(e,t){return function(r){return((0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...t,...e}}}):Promise.resolve({json:{id:e.id}})).then((({json:n})=>{const a={...e,id:n.id};r(qt({...a,expanded:!0,initialized:!0})),e.dataPreviewQueryId||r(Ut({...t,...a}))})).catch((()=>r(Oe((0,d.t)("An error occurred while fetching table metadata. Please contact your administrator.")))))}}function Zt(e,t){return{type:fe,oldQueryId:e,newQuery:t}}function Mt(e){return function(t){const r={id:(0,i.x0)(),dbId:e.dbId,sql:e.sql,tableName:e.tableName,sqlEditorId:null,tab:"",runAsync:!1,ctas:!1,queryLimit:e.queryLimit,isDataPreview:e.isDataPreview};t(Ke(r)),t(Zt(e.id,r))}}function Ft(e){return function(t){return((0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!0}}):Promise.resolve()).then((()=>t({type:U,table:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while expanding the table schema. Please contact your administrator.")))))}}function kt(e){return function(t){return((0,h.cr)(h.TT.SqllabBackendPersistence)?u.Z.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!1}}):Promise.resolve()).then((()=>t({type:P,table:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while collapsing the table schema. Please contact your administrator.")))))}}function Qt(e){return function(t){var r;const n=null!=(r=null==e?void 0:e.filter(Boolean))?r:[];return((0,h.cr)(h.TT.SqllabBackendPersistence)?Promise.all(n.map((e=>e.initialized?u.Z.delete({endpoint:encodeURI(`/tableschemaview/${e.id}`)}):Promise.resolve()))):Promise.resolve()).then((()=>t({type:L,tables:n}))).catch((()=>t(Oe((0,d.t)("An error occurred while removing the table schema. Please contact your administrator.")))))}}function $t(e){return{type:oe,alteredQueries:e}}function Bt(e){return{type:se,offline:e}}function Ht(e,t,r){return{type:G,queryEditor:e,northPercent:t,southPercent:r}}function Yt(e){return function(t){return u.Z.get({endpoint:`/kv/${e}`}).then((({json:e})=>t(nt({name:e.name?e.name:(0,d.t)("Shared query"),dbId:e.dbId?parseInt(e.dbId,10):null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:!!e.autorun&&e.autorun,sql:e.sql?e.sql:"SELECT ...",templateParams:e.templateParams})))).catch((()=>t(Oe(Ne))))}}function jt(e){return function(t){return u.Z.get({endpoint:`/api/v1/saved_query/${e}`}).then((({json:e})=>{const r={...Ue(e.result),loaded:!0,autorun:!1},n={name:r.name,dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,templateParams:r.templateParams,remoteId:r.remoteId};return t(nt(n))})).catch((()=>t(Oe(Ne))))}}function Vt(e){return function(t){return u.Z.get({endpoint:`/api/v1/query/${e}`}).then((({json:e})=>{const r=e.result,n={dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,name:(0,d.t)("Copy of %s",r.tab_name),autorun:!1};return t(nt(n))})).catch((()=>t(Oe(Ne))))}}function Gt(e,t){return function(r){const n=(0,d.t)("Query"),a=e.split("__")[0],o=c().encode({keys:["none"],columns:["name","schema","database.id","select_star"]});return u.Z.get({endpoint:`/api/v1/dataset/${a}?q=${o}`}).then((({json:e})=>r(nt({name:`${n} ${e.result.name}`,dbId:e.result.database.id,schema:e.result.schema,autorun:void 0!==t,sql:t||e.result.select_star})))).catch((()=>r(Oe((0,d.t)("The datasource couldn't be loaded")))))}}function zt(){return{type:ve}}function Wt(e){const t=`${e.id}__table`;return{type:Te,datasource:t}}function Kt(e){return{type:be,err:e}}function Xt(e){return t=>{t(zt());const{dbId:r,catalog:n,schema:a,datasourceName:o,sql:s}=e;return u.Z.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:r,catalog:n,schema:a,sql:s,table_name:o,is_managed_externally:!1,external_url:null})}).then((({json:e})=>(t(Wt(e)),Promise.resolve(e)))).catch((e=>((0,p.O$)(e).then((e=>{t(Oe(e.error))})),t(Kt((0,d.t)("An error occurred while creating the data source"))),Promise.reject())))}}function Jt(e){return t=>(t(zt()),u.Z.post({endpoint:"/api/v1/dataset/get_or_create/",jsonPayload:e}).then((({json:e})=>(t(Wt(e.result)),e.result))).catch((()=>{const e=(0,d.t)("An error occurred while creating the data source");return t(Kt(e)),Promise.reject(new Error(e))})))}},452256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_CHART:()=>J,ANNOTATION_QUERY_FAILED:()=>Z,ANNOTATION_QUERY_STARTED:()=>U,ANNOTATION_QUERY_SUCCESS:()=>q,CHART_RENDERING_FAILED:()=>I,CHART_RENDERING_SUCCEEDED:()=>D,CHART_UPDATE_FAILED:()=>A,CHART_UPDATE_STARTED:()=>g,CHART_UPDATE_STOPPED:()=>S,CHART_UPDATE_SUCCEEDED:()=>T,DYNAMIC_PLUGIN_CONTROLS_READY:()=>F,POST_CHART_FORM_DATA:()=>ne,REMOVE_CHART:()=>N,RENDER_TRIGGERED:()=>V,TRIGGER_QUERY:()=>Y,UPDATE_CHART_ID:()=>K,UPDATE_QUERY_FORM_DATA:()=>z,addChart:()=>ee,annotationQueryFailed:()=>M,annotationQueryStarted:()=>P,annotationQuerySuccess:()=>x,chartRenderingFailed:()=>O,chartRenderingSucceeded:()=>w,chartUpdateFailed:()=>C,chartUpdateStarted:()=>v,chartUpdateStopped:()=>R,chartUpdateSucceeded:()=>b,dynamicPluginControlsReady:()=>k,exploreJSON:()=>re,getChartDataRequest:()=>B,getDatasourceSamples:()=>ie,handleChartDataResponse:()=>te,postChartFormData:()=>ae,redirectSQLLab:()=>oe,refreshChart:()=>se,removeChart:()=>L,renderTriggered:()=>G,runAnnotationQuery:()=>H,triggerQuery:()=>j,updateChartId:()=>X,updateQueryFormData:()=>W});var n=r(730381),a=r.n(n),o=r(431069),s=r(844818),i=r(593185),l=r(61988),c=r(237731),d=r(635854),u=r(112515),p=r(672570),m=r(797381),h=r(203741),_=r(986374),f=r(174599),y=r(677997),E=r(309679);const g="CHART_UPDATE_STARTED";function v(e,t,r){return{type:g,queryController:e,latestQueryFormData:t,key:r}}const T="CHART_UPDATE_SUCCEEDED";function b(e,t){return{type:T,queriesResponse:e,key:t}}const S="CHART_UPDATE_STOPPED";function R(e){return{type:S,key:e}}const A="CHART_UPDATE_FAILED";function C(e,t){return{type:A,queriesResponse:e,key:t}}const I="CHART_RENDERING_FAILED";function O(e,t,r){return{type:I,error:e,key:t,stackTrace:r}}const D="CHART_RENDERING_SUCCEEDED";function w(e){return{type:D,key:e}}const N="REMOVE_CHART";function L(e){return{type:N,key:e}}const q="ANNOTATION_QUERY_SUCCESS";function x(e,t,r){return{type:q,annotation:e,queryResponse:t,key:r}}const U="ANNOTATION_QUERY_STARTED";function P(e,t,r){return{type:U,annotation:e,queryController:t,key:r}}const Z="ANNOTATION_QUERY_FAILED";function M(e,t,r){return{type:Z,annotation:e,queryResponse:t,key:r}}const F="DYNAMIC_PLUGIN_CONTROLS_READY",k=()=>(e,t)=>{const r=t(),n=(0,d.R3)(r.explore,r.explore.form_data);e({type:F,key:n.slice_id.value,controlsState:n})},Q=async(e,t,r,n,a="POST",s={},i)=>{const l=(0,u.pd)({resultFormat:t,resultType:r}),c=_._&&(null==s?void 0:s.dashboard_id),d=(0,u.H6)({formData:e,endpointType:l,force:n,allowDomainSharding:c,method:a,requestParams:s.dashboard_id?{dashboard_id:s.dashboard_id}:{}}),p={...s,url:d,postPayload:{form_data:e},parseMethod:i};return o.Z.post(p).then((({json:e,response:t})=>({response:t,json:{result:[e]}})))},$=async(e,t,r,n,a,s,i,l)=>{const c=(0,u.u)({formData:e,resultType:r,resultFormat:t,force:n,setDataMask:s,ownState:i}),{slice_id:d}=e,{dashboard_id:p}=a,m={};void 0!==d&&(m.form_data=`{"slice_id":${d}}`),void 0!==p&&(m.dashboard_id=p),n&&(m.force=n);const h=_._&&(null==a?void 0:a.dashboard_id),f=(0,u.kN)({path:"/api/v1/chart/data",qs:m,allowDomainSharding:h}).toString(),y={...a,url:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(c),parseMethod:l};return o.Z.post(y)};async function B({formData:e,setDataMask:t=(()=>{}),resultFormat:r="json",resultType:n="full",force:a=!1,method:o="POST",requestParams:s={},ownState:i={}}){let l={...s};_._&&(l={...l,mode:"cors",credentials:"include"});const[c,d]=(0,u.hz)(e);return c?Q(e,r,n,a,o,l,d):$(e,r,n,a,l,t,i,d)}function H({annotation:e,timeout:t,formData:r=null,key:n,isDashboardRequest:a=!1,force:i=!1}){return function(l,c){var d;const{charts:p,common:m}=c(),h=n||Object.keys(p)[0],_=t||m.conf.SUPERSET_WEBSERVER_TIMEOUT,f={...r||p[h].latestQueryFormData};if(!e.sourceType)return Promise.resolve();f.time_grain_sqla=f.time_grain_sqla||f.granularity,f.granularity=f.granularity_sqla;const y=Object.keys(e.overrides);(y.includes("since")||y.includes("until"))&&(e.overrides={...e.overrides,time_range:null});const E=Object.keys(e.overrides).reduce(((t,r)=>({...t,[r]:e.overrides[r]||f[r]})),{});if(!a&&f){const e=f.extra_filters&&f.extra_filters.length>0;E.extra_filters=e?f.extra_filters:void 0}const g=(0,u.xW)(e.value,i),v=new AbortController,{signal:T}=v;l(P(e,v,h));const b=null==f||null==(d=f.annotation_layers)?void 0:d.findIndex((t=>t.name===e.name));return b>=0&&(f.annotation_layers[b].overrides=E),o.Z.post({url:g,signal:T,timeout:1e3*_,headers:{"Content-Type":"application/json"},jsonPayload:(0,u.u)({formData:f,force:i,resultFormat:"json",resultType:"full"})}).then((({json:t})=>{var r,n,a;const o=null==t||null==(r=t.result)||null==(n=r[0])||null==(a=n.annotation_data)?void 0:a[e.name];return l(x(e,{data:o},h))})).catch((t=>(0,s.O$)(t).then((t=>{"timeout"===t.statusText?l(M(e,{error:"Query timeout"},h)):(t.error||"").toLowerCase().includes("no data")?l(x(e,t,h)):"abort"!==t.statusText&&l(M(e,t,h))}))))}}const Y="TRIGGER_QUERY";function j(e=!0,t){return{type:Y,value:e,key:t}}const V="RENDER_TRIGGERED";function G(e,t){return{type:V,value:e,key:t}}const z="UPDATE_QUERY_FORM_DATA";function W(e,t){return{type:z,value:e,key:t}}const K="UPDATE_CHART_ID";function X(e,t=0){return{type:K,newId:e,key:t}}const J="ADD_CHART";function ee(e,t){return{type:J,chart:e,key:t}}function te(e,t,r){if((0,i.cr)(i.TT.GlobalAsyncQueries)){const n="result"in t?t.result:t;switch(e.status){case 200:return Promise.resolve(n);case 202:return r?(0,y.YJ)(n[0]):(0,y.YJ)(n);default:throw new Error(`Received unexpected response status (${e.status}) while fetching chart data`)}}return t.result}function re(e,t=!1,r,n,o,l){return async(c,d)=>{const p=h.Yd.getTimestamp(),_=new AbortController,y=r||d().common.conf.SUPERSET_WEBSERVER_TIMEOUT,E={signal:_.signal,timeout:1e3*y};o&&(E.dashboard_id=o);const g=B({setDataMask:t=>{c((0,f.eG)(e.slice_id,t))},formData:e,resultFormat:"json",resultType:"full",force:t,method:"POST",requestParams:E,ownState:l});c(v(_,e,n));const[T]=(0,u.hz)(e),S=g.then((({response:e,json:t})=>te(e,t,T))).then((r=>(r.forEach((r=>c((0,m.logEvent)(h.W9,{slice_id:n,applied_filters:r.applied_filters,is_cached:r.is_cached,force_refresh:t,row_count:r.rowcount,datasource:e.datasource,start_offset:p,ts:(new Date).getTime(),duration:h.Yd.getTimestamp()-p,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:r.is_cached?a()(new Date).diff(a().utc(r.cached_dttm)):null})))),c(b(r,n))))).catch((t=>{if((0,i.cr)(i.TT.GlobalAsyncQueries))return c(C([t],n));const r=(t,r)=>{c((0,m.logEvent)(h.W9,{slice_id:n,has_err:!0,is_cached:r,error_details:t,datasource:e.datasource,start_offset:p,ts:(new Date).getTime(),duration:h.Yd.getTimestamp()-p}))};return"AbortError"===t.name?(r("abort"),c(R(n))):(0,s.O$)(t).then((e=>("timeout"===t.statusText?r("timeout"):r(e.error,e.is_cached),c(C([e],n)))))})),A=T&&e.annotation_layers||[],I=o>0;return Promise.all([S,c(j(!1,n)),c(W(e,n)),...A.map((a=>c(H({annotation:a,timeout:r,formData:e,key:n,isDashboardRequest:I,force:t}))))])}}const ne="POST_CHART_FORM_DATA";function ae(e,t=!1,r,n,a,o){return re(e,t,r,n,a,o)}function oe(e,t){return r=>{B({formData:e,resultFormat:"json",resultType:"query"}).then((({json:r})=>{const n="/sqllab/",a={datasourceKey:e.datasource,sql:r.result[0].query};t?t.push({pathname:n,state:{requestedQuery:a}}):o.Z.postForm(n,{form_data:(0,E.o)(a)})})).catch((()=>r((0,p.Gb)((0,l.t)("An error occurred while loading the SQL")))))}}function se(e,t,r){return(n,a)=>{var o;const s=(a().charts||{})[e],i=a().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;s.latestQueryFormData&&0!==Object.keys(s.latestQueryFormData).length&&n(ae(s.latestQueryFormData,t,i,s.id,r,null==(o=a().dataMask[s.id])?void 0:o.ownState))}}const ie=async(e,t,r,n,a,i)=>{try{const s={force:r,datasource_type:e,datasource_id:t};return(0,c.Z)(a)&&(0,c.Z)(i)&&(s.per_page=a,s.page=i),(await o.Z.post({endpoint:"/datasource/samples",jsonPayload:n,searchParams:s,parseMethod:"json-bigint"})).json.result}catch(e){const t=await(0,s.O$)(e);throw new Error(t.message||t.error||(0,l.t)("Sorry, an error occurred"),{cause:e})}}},781395:(e,t,r)=>{"use strict";function n(e,t){return e().dashboardState.sliceIds.includes(t)}r.d(t,{M6:()=>o,P_:()=>c,cK:()=>d,ib:()=>l,l6:()=>u,oT:()=>s,oW:()=>a,yz:()=>i});const a="CHANGE_FILTER";function o(e,t,r){return(o,s)=>{if(n(s,e)){const n=s().dashboardLayout.present;return o({type:a,chartId:e,newSelectedValues:t,merge:r,components:n})}return s().dashboardFilters}}const s="UPDATE_DIRECT_PATH_TO_FILTER";function i(e,t){return(r,a)=>n(a,e)?r({type:s,chartId:e,path:t}):a().dashboardFilters}const l="UPDATE_LAYOUT_COMPONENTS";function c(e){return t=>{t({type:l,components:e})}}const d="UPDATE_DASHBOARD_FILTERS_SCOPE";function u(e){return t=>{t({type:d,scopes:e})}}},312885:(e,t,r)=>{"use strict";r.d(t,{J0:()=>v,YA:()=>b,bK:()=>f,CB:()=>E,Mu:()=>R,L1:()=>w,aZ:()=>O,qL:()=>C,nj:()=>p,x_:()=>x,LM:()=>T,Ww:()=>y,v7:()=>g,g3:()=>A,_p:()=>N,az:()=>q,iO:()=>I,Ou:()=>L,WZ:()=>h,A7:()=>_});var n=r(21090),a=r(61988),o=r(672570),s=r(81255),i=r(680621),l=r(347456),c=r(995173),d=r(781395),u=r(909467);const p="UPDATE_COMPONENTS";function m(e){return(...t)=>(r,n)=>{const a=e(...t);r("function"==typeof a?a(r,n):a);const{dashboardLayout:o,dashboardState:s}=n();if(a.type!==p||!a.payload||!a.payload.nextComponents){const e=o.present;r((0,d.P_)(e))}s.hasUnsavedChanges||r((0,u.if)(!0))}}const h=m((e=>({type:p,payload:{nextComponents:e}})));function _(e){return(t,r)=>{const{dashboardLayout:n}=r();t(h({[i.M2]:{...n.present[i.M2],meta:{text:e}}}))}}const f="DASHBOARD_TITLE_CHANGED";function y(e){return{type:f,text:e}}const E="DELETE_COMPONENT",g=m(((e,t)=>({type:E,payload:{id:e,parentId:t}}))),v="CREATE_COMPONENT",T=m((e=>({type:v,payload:{dropResult:e}}))),b="CREATE_TOP_LEVEL_TABS",S=m((e=>({type:b,payload:{dropResult:e}}))),R="DELETE_TOP_LEVEL_TABS",A=m((()=>({type:R,payload:{}}))),C="RESIZE_COMPONENT";function I({id:e,width:t,height:r}){return(n,a)=>{const{dashboardLayout:o}=a(),{present:s}=o,i=s[e],l=t&&i.meta.width!==t,c=r&&i.meta.height!==r;if(i&&(l||c)){const a={[e]:{...i,meta:{...i.meta,width:t||i.meta.width,height:r||i.meta.height}}};n(h(a))}}}const O="MOVE_COMPONENT",D=m((e=>({type:O,payload:{dropResult:e}}))),w="HANDLE_COMPONENT_DROP";function N(e){return(t,r)=>{const n=function(e,t){const r=(0,l.Z)({dropResult:e,layout:t});return"number"==typeof r&&r<0}(e,r().dashboardLayout.present);if(n)return t((0,o.Dz)((0,a.t)("There is not enough space for this component. Try decreasing its width, or increasing the destination width.")));const{source:d,destination:u}=e,p=u&&u.id===i._4,m=d.id===i.D0,h=r().dashboardLayout.present[i._4],_=h&&h.children?h.children[0]:"";if(p)t(S(e));else if(u&&m)t(T(e));else{if(d.type===s.yR&&u.type===s.yR&&d.id===_&&u.id!==_)return t((0,o.Dz)((0,a.t)("Can not move top level tab into nested tabs")));u&&d&&(u.id!==d.id||u.index!==d.index)&&t(D(e))}const{dashboardFilters:f,dashboardLayout:y}=r();if(!m){const{present:e}=y,r=e[d.id]||{},n=e[u.id]||{};if((r.type===s.yR||r.type===s.Os)&&r.children&&0===r.children.length){const r=(0,c.Z)({childId:d.id,layout:e});t(g(d.id,r))}(function({dashboardFilters:e={},source:t=[],destination:r=[]}){const n=new Set(t),a=new Set(r);return[].concat(...Object.values(e).map((({scopes:e})=>[].concat(...Object.values(e).map((({scope:e})=>e)))))).some((e=>a.has(e)!==n.has(e)))})({dashboardFilters:f,source:(r.parents||[]).concat(d.id),destination:(n.parents||[]).concat(u.id)})&&t((0,o.Dz)((0,a.t)("This chart has been moved to a different filter scope.")))}return null}}function L(){return(e,t)=>{e(n.zF.undo());const{dashboardLayout:r,dashboardState:a}=t();0!==r.past.length||a.maxUndoHistoryExceeded||a.updatedColorScheme||e((0,u.if)(!1))}}const q=m(n.zF.redo),x="UPDATE_COMPONENTS_PARENTS_LIST"},909467:(e,t,r)=>{"use strict";r.d(t,{BD:()=>M,P0:()=>X,bs:()=>ge,sm:()=>ve,ec:()=>Se,k5:()=>be,Ii:()=>ee,Vd:()=>F,qJ:()=>le,hD:()=>ie,om:()=>qe,nV:()=>Ue,J$:()=>De,zW:()=>de,UB:()=>ue,h$:()=>pe,jX:()=>me,FF:()=>Ye,RU:()=>Ne,$f:()=>W,mq:()=>Pe,r$:()=>ke,n1:()=>$e,w9:()=>oe,yV:()=>re,ee:()=>P,oJ:()=>Ae,ek:()=>j,Z9:()=>k,H9:()=>H,Iw:()=>Me,Be:()=>G,Pi:()=>Ie,My:()=>Ge,A6:()=>ze,aT:()=>We,Mn:()=>ye,Lb:()=>$,Qt:()=>He,z2:()=>J,YC:()=>Te,Yy:()=>Re,Vv:()=>te,g6:()=>Ve,rL:()=>Oe,M8:()=>fe,TN:()=>B,dr:()=>Y,r7:()=>xe,uW:()=>we,D9:()=>_e,sL:()=>je,E2:()=>Le,Mb:()=>K,GH:()=>Ze,zL:()=>Qe,uN:()=>Be,Qo:()=>se,fE:()=>ne,if:()=>Z,O8:()=>Ce,WL:()=>V,oY:()=>Fe,Sn:()=>z,hZ:()=>Ke});var n=r(618446),a=r.n(n),o=r(21090),s=r(115926),i=r.n(s),l=r(431069),c=r(61988),d=r(355786),u=r(593185),p=r(844818),m=r(677205),h=r(281545),_=r(585684),f=r(452256),y=r(937863),E=r(635854),g=r(680621),v=r(852838),T=r(672570),b=r(411370),S=r(643399),R=r(309679),A=r(797381),C=r(203741),I=r(312885),O=r(641295),D=r(550810),w=r(781395),N=r(152794),L=r(409531);const q=new Set(["json_metadata","position_json"]);function x(e,t){return t.split(".").reduce(((e,t)=>{const r=null==e?void 0:e[t];return q.has(t)&&r?JSON.parse(r):r}),e)}var U=r(999547);const P="SET_UNSAVED_CHANGES";function Z(e){return{type:P,payload:{hasUnsavedChanges:e}}}const M="ADD_SLICE",F="REMOVE_SLICE",k="TOGGLE_FAVE_STAR";function Q(e){return{type:k,isStarred:e}}function $(e){return function(t){return l.Z.get({endpoint:`/api/v1/dashboard/favorite_status/?q=${i().encode([e])}`}).then((({json:e})=>{var r,n;t(Q(!(null==e||null==(r=e.result)||null==(n=r[0])||!n.value)))})).catch((()=>t((0,T.Gb)((0,c.t)("There was an issue fetching the favorite status of this dashboard.")))))}}function B(e,t){return function(r){const n=`/api/v1/dashboard/${e}/favorites/`;return(t?l.Z.delete({endpoint:n}):l.Z.post({endpoint:n})).then((()=>{r(Q(!t))})).catch((()=>r((0,T.Gb)((0,c.t)("There was an issue favoriting this dashboard.")))))}}const H="TOGGLE_PUBLISHED";function Y(e,t){return function(r){return l.Z.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({published:t})}).then((()=>{r((0,T.ws)(t?(0,c.t)("This dashboard is now published"):(0,c.t)("This dashboard is now hidden"))),r(function(e){return{type:H,isPublished:e}}(t))})).catch((()=>{r((0,T.Gb)((0,c.t)("You do not have permissions to edit this dashboard.")))}))}}const j="TOGGLE_EXPAND_SLICE";function V(e){return{type:j,sliceId:e}}const G="UPDATE_CSS";function z(e){return{type:G,css:e}}const W="SET_EDIT_MODE";function K(e){return{type:W,editMode:e}}const X="ON_CHANGE";function J(){return{type:X}}const ee="ON_SAVE";function te(e){return{type:ee,lastModifiedTime:e}}const re="SET_REFRESH_FREQUENCY";function ne(e,t=!1){return{type:re,refreshFrequency:e,isPersistent:t}}function ae(e){return t=>{t(te(e)),t(o.zF.clearHistory())}}const oe="SET_OVERRIDE_CONFIRM";function se(e){return{type:oe,overwriteConfirmMetadata:e}}const ie="SAVE_DASHBOARD_STARTED",le="SAVE_DASHBOARD_FINISHED";function ce(){return{type:le}}const de="SET_DASHBOARD_LABELS_COLORMAP_SYNCABLE",ue="SET_DASHBOARD_LABELS_COLORMAP_SYNCED",pe="SET_DASHBOARD_SHARED_LABELS_COLORS_SYNCABLE",me="SET_DASHBOARD_SHARED_LABELS_COLORS_SYNCED";function he(){return{type:de}}const _e=e=>async t=>{t((0,O.a8)({metadata:{...e}}))};function fe(e,t,r){return(n,a)=>{var o,s,i,m,h,_,f,y;n({type:I.x_}),n({type:ie});const{dashboardFilters:E,dashboardLayout:P}=a(),Z=P.present;Object.values(E).forEach((e=>{var t;const{chartId:r}=e,a=e.directPathToFilter.slice().pop(),o=((null==(t=Z[a])?void 0:t.parents)||[]).slice();o.push(a),n((0,w.yz)(r,o))}));const M=(0,b.Z)((0,S.De)()),F=function(e){return Object.values(e).reduce(((e,{chartId:t,scopes:r})=>({...e,[t]:Object.keys(r).reduce(((e,t)=>({...e,[t]:r[t]})),{})})),{})}(E),{certified_by:k,certification_details:Q,css:$,dashboard_title:B,owners:H,roles:Y,slug:j}=e,V=e=>void 0!==e.id,G=null==(o=e.metadata)?void 0:o.cross_filters_enabled,z=null==(s=e.metadata)?void 0:s.color_scheme,W=(null==(i=e.metadata)?void 0:i.label_colors)||{},K=(0,U.fy)(null==(m=e.metadata)?void 0:m.shared_label_colors),X={...e,certified_by:k||"",certification_details:k&&Q?Q:"",css:$||"",dashboard_title:B||(0,c.t)("[ untitled dashboard ]"),owners:(0,d.Z)(H).map((e=>V(e)?e.id:e)),roles:(0,u.cr)(u.TT.DashboardRbac)?(0,d.Z)(Y).map((e=>V(e)?e.id:e)):void 0,slug:j||null,metadata:{...e.metadata,color_namespace:(0,U.UY)(null==(h=e.metadata)?void 0:h.color_namespace),color_scheme:z||"",color_scheme_domain:z?(0,U.$k)(z):[],expanded_slices:(null==(_=e.metadata)?void 0:_.expanded_slices)||{},label_colors:W,shared_label_colors:(0,U.nl)(K),map_label_colors:(0,U.RB)(W),refresh_frequency:(null==(f=e.metadata)?void 0:f.refresh_frequency)||0,timed_refresh_immune_slices:(null==(y=e.metadata)?void 0:y.timed_refresh_immune_slices)||[],cross_filters_enabled:(0,v.U)(G)}},J=()=>{const{dashboardLayout:e,charts:t,dashboardInfo:{metadata:r}}=a();return(0,v.g)(e.present,r,t)},ee=async e=>{const{error:t,message:r}=await(0,p.O$)(e);let a=(0,c.t)("Sorry, an unknown error occurred");t&&(a=(0,c.t)("Sorry, there was an error saving this dashboard: %s",t)),"string"==typeof r&&"Forbidden"===r&&(a=(0,c.t)("You do not have permission to edit this dashboard")),n(ce()),n((0,T.Gb)(a))};if([g.TN,g.NT].includes(r)){let a={},o={};(0,u.cr)(u.TT.DashboardCrossFilters)&&({chartConfiguration:a,globalChartConfiguration:o}=J());const s=r===g.NT?e:{certified_by:X.certified_by,certification_details:X.certification_details,css:X.css,dashboard_title:X.dashboard_title,slug:X.slug,owners:X.owners,roles:X.roles,json_metadata:(0,R.o)({...(null==X?void 0:X.metadata)||{},default_filters:(0,R.o)(M),filter_scopes:F,chart_configuration:a,global_chart_configuration:o})},i=()=>l.Z.put({endpoint:`/api/v1/dashboard/${t}`,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>(e=>{const r=e.json.result,a=e.json.last_modified_time;if(r.json_metadata){const e=JSON.parse(r.json_metadata);n(_e(e)),e.chart_configuration&&n({type:O.Jy,chartConfiguration:e.chart_configuration}),e.native_filter_configuration&&n({type:N.qe,filterConfig:e.native_filter_configuration}),l.Z.get({endpoint:`/api/v1/dashboard/${t}/datasets`,headers:{"Content-Type":"application/json"}}).then((({json:e})=>{var t;const r=null!=(t=null==e?void 0:e.result)?t:[];r.length&&n((0,D.Fy)(r))}))}return a&&n(ae(a)),n(ce()),window.history.pushState({event:"dashboard_properties_changed"},"",`/superset/dashboard/${j||t}/`),n((0,T.ws)((0,c.t)("This dashboard was saved successfully."))),n(se(void 0)),e})(e))).catch((e=>ee(e)));return new Promise(((e,a)=>{(0,u.cr)(u.TT.ConfirmDashboardDiff)&&r!==g.NT?l.Z.get({endpoint:`/api/v1/dashboard/${t}`}).then((r=>{const o=r.json.result,i=(l=o,c=s,L.yT.map((e=>({keyPath:e,...e.split(".").find((e=>q.has(e)))?{oldValue:JSON.stringify(x(l,e),null,2)||"{}",newValue:JSON.stringify(x(c,e),null,2)||"{}"}:{oldValue:x(l,e)||"",newValue:x(c,e)||""}}))).filter((({oldValue:e,newValue:t})=>e!==t)));var l,c;return i.length>0?(n(se({updatedAt:o.changed_on,updatedBy:o.changed_by_name,overwriteConfirmItems:i,dashboardId:t,data:s})),a(i)):e()})):e()})).then(i).catch((e=>{const r=(0,c.t)("Please confirm the overwrite values.");n((0,A.logEvent)(C.yw,{dashboard_id:t,items:e})),n((0,T.Gb)(r))}))}"positions"in X&&!("positions"in X.metadata)&&(X.metadata.positions=X.positions),X.metadata.default_filters=(0,R.o)(M),X.metadata.filter_scopes=F;const te={dashboard_title:X.dashboard_title,css:X.css,duplicate_slices:X.duplicate_slices,json_metadata:JSON.stringify(X.metadata)};return l.Z.post({endpoint:`/api/v1/dashboard/${t}/copy/`,jsonPayload:te}).then((e=>(e=>{const t=e.json.result.last_modified_time;if(t&&n(ae(t)),(0,u.cr)(u.TT.DashboardCrossFilters)){const{chartConfiguration:e,globalChartConfiguration:t}=J();n((0,O.Mi)({chartConfiguration:e,globalChartConfiguration:t}))}return n(ce()),n((0,T.ws)((0,c.t)("This dashboard was saved successfully."))),e})(e))).catch((e=>ee(e)))}}function ye(e=[],t=!1,r=0,n){return(a,o)=>{if(!r)return void e.forEach((e=>a((0,f.refreshChart)(e,t,n))));const{metadata:s}=o().dashboardInfo,i=Math.max(r,s.stagger_time||5e3);"boolean"!=typeof s.stagger_refresh&&(s.stagger_refresh=void 0===s.stagger_refresh||"true"===s.stagger_refresh);const l=s.stagger_refresh?i/(e.length-1):0;e.forEach(((e,r)=>{setTimeout((()=>a((0,f.refreshChart)(e,t,n))),l*r)}))}}const Ee=(e,t,r,n,a)=>new Promise((o=>{a(ye(e,t,r,n)),o()})),ge="ON_FILTERS_REFRESH",ve="ON_FILTERS_REFRESH_SUCCESS";function Te(){return{type:ve}}const be="ON_REFRESH_SUCCESS",Se="ON_REFRESH";function Re(e=[],t=!1,r=0,n){return a=>{a({type:Se}),Ee(e,t,r,n,a).then((()=>{a({type:be}),a({type:ge})}))}}const Ae="SHOW_BUILDER_PANE";function Ce(){return{type:Ae}}function Ie(e){return(t,r)=>{const{sliceEntities:n}=r(),a=n.slices[e];if(!a)return t((0,T.Dz)("Sorry, there is no chart definition associated with the chart trying to be added."));const o={...a.form_data,slice_id:a.slice_id},s={...y.u,id:e,form_data:(0,E.oN)(o)};return Promise.all([t((0,f.addChart)(s,e)),t((0,D.QR)(o.datasource))]).then((()=>{t({type:M,slice:a})}))}}function Oe(e){return t=>{t({type:F,sliceId:e}),t((0,f.removeChart)(e)),(0,m.ZP)().removeSlice(e)}}const De="SET_COLOR_SCHEME";function we(e){return{type:De,colorScheme:e}}const Ne="SET_DIRECT_PATH";function Le(e){return{type:Ne,path:e}}const qe="SET_ACTIVE_TAB";function xe(e,t){return{type:qe,tabId:e,prevTabId:t}}const Ue="SET_ACTIVE_TABS",Pe="SET_FOCUSED_FILTER_FIELD";function Ze(e,t){return{type:Pe,chartId:e,column:t}}const Me="UNSET_FOCUSED_FILTER_FIELD";function Fe(e,t){return{type:Me,chartId:e,column:t}}const ke="SET_FULL_SIZE_CHART_ID";function Qe(e){return{type:ke,chartId:e}}const $e="SET_MAX_UNDO_HISTORY_EXCEEDED";function Be(e=!0){return{type:$e,payload:{maxUndoHistoryExceeded:e}}}function He(){return(e,t)=>{const{dashboardLayout:r}=t(),n=r.past.length;return e((0,T.Dz)((0,c.t)("You have used all %(historyLength)s undo slots and will not be able to fully undo subsequent actions. You may save your current state to reset the history.",{historyLength:n})))}}const Ye="SET_DATASETS_STATUS";function je(e){return{type:Ye,status:e}}const Ve=()=>async(e,t)=>{const{dashboardInfo:{id:r,metadata:n},dashboardState:{labelsColorMapMustSync:a,sharedLabelsColorsMustSync:o}}=t();(a||o)&&(e({type:ue}),e({type:me}),(async(e,t)=>{l.Z.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({json_metadata:JSON.stringify(t)})})})(r,n))},Ge=e=>async t=>{try{const r={...e},n=e.label_colors||{};let o=!1;const s=e.shared_label_colors||[];!Array.isArray(s)&&Object.keys(s).length>0&&(o=!0,r.shared_label_colors=[]);const i=Object.keys(e.map_label_colors||{}).length>0;let l=e.color_scheme;const c=(0,h.Z)(),d=c.get(l,!0),u=!!l&&!d;if(u){const e=c.defaultKey,n=(null==e?void 0:e.toString())||"supersetColors";o=!0,l=n,r.color_scheme=l,t(we(l))}const p=l?(0,U.$k)(l):[],m=e.color_scheme_domain||[];a()(p,m)||(o=!0,r.color_scheme_domain=p);const _=!i||u;(0,U.$C)(r,_),_&&(o=!0,r.map_label_colors=(0,U.RB)(n)),o&&(t(_e(r)),t(he()))}catch(e){console.error("Failed to update dashboard color on load:",e)}},ze=e=>(t,r)=>{(0,_.Z)((()=>{const{dashboardState:{labelsColorMapMustSync:n}}=r(),a={...e},o=e.label_colors||{},s=!(0,U.J8)(e);if(s){const e=(0,U.RB)(o);a.map_label_colors=e,t(_e(a))}s&&!n&&t(he())}),500)},We=(e,t=!1)=>(r,n)=>{(0,_.Z)((()=>{const{dashboardState:{sharedLabelsColorsMustSync:o}}=n(),s={...e},i=(0,U.fy)(e.shared_label_colors),l=(0,U.nl)(t?[]:i),c=!a()(i,l);c&&(s.shared_label_colors=l,r(_e(s))),c&&!o&&r({type:pe})}),500)},Ke=e=>(t,r)=>{try{const{dashboardInfo:{metadata:t},charts:n}=r(),a=t.color_scheme,o=(0,m.ZP)(),s=t.map_label_colors||{},i=(0,U.fy)(t.shared_label_colors),l=t.label_colors||{},c=[];if(e.length>0){const t=new Set(i);e.forEach((e=>{const r=n[e],i=r.form_data||r.latestQueryFormData;if(o.setOwnColorScheme(i.slice_id,i.color_scheme),a)return;const d=i.color_scheme,u=o.chartsLabelsMap.get(i.slice_id),p=((null==u?void 0:u.labels)||[]).filter((e=>!t.has(e)&&!l.hasOwnProperty(e))),m=new Set(p.map((e=>s[e])).filter(Boolean)),h=new Set((0,U.$k)(d));[...m].some((e=>!h.has(e)))&&c.push(...p)}))}const d=c.length>0&&c,u=!d;(0,U.$C)(t,d,u)}catch(e){console.error("Failed to update colors for new charts and labels:",e)}}},904305:(e,t,r)=>{"use strict";r.d(t,{$:()=>b,Y:()=>S});var n=r(593185),a=r(937863),o=r(437927),s=r(239759),i=r(635854),l=r(643399),c=r(212617),d=r(922318),u=r(852838),p=r(680621),m=r(81255),h=r(156967),_=r(128428),f=r(427600),y=r(23525),E=r(242190),g=r(870400),v=r(437418),T=r(52004);const b="HYDRATE_DASHBOARD",S=({history:e,dashboard:t,charts:r,dataMask:S,activeTabs:R})=>(A,C)=>{const{user:I,common:O,dashboardState:D}=C(),{metadata:w,position_data:N}=t,L=(0,g.Z)("regular"),q="true"===(0,g.Z)("reserved").edit;r.forEach((e=>{e.slice_id=e.form_data.slice_id}));const x=N&&Object.keys(N).length>0?N:{[p.Zn]:"v2",[p._4]:{type:m.U0,id:p._4,children:[p.PV]},[p.PV]:{type:m.BG,id:p.PV,children:[],parents:[p._4]}},U={};Object.values(x).forEach((e=>{e.type===m.dW&&(U[e.meta.chartId]=e.id)}));const P=function(e={}){let t=e[p._4];return t=t&&t.children.length&&e[t.children[0]].type===m.yR?e[e[t.children[0]].children[0]]:e[t.children[0]],t.id}(x),Z=x[P];let M,F=0;const k={},Q={},$={},B=new Set,H=new Map;r.forEach((e=>{const t=e.slice_id,r={...e.form_data,url_params:{...e.form_data.url_params,...L}};if(k[t]={...a.u,id:t,form_data:(0,i.oN)(r)},$[t]={slice_id:t,slice_url:e.slice_url,slice_name:e.slice_name,form_data:e.form_data,viz_type:e.form_data.viz_type,datasource:e.form_data.datasource,description:e.description,description_markeddown:e.description_markeddown,owners:e.owners,modified:e.modified,changed_on:new Date(e.changed_on).getTime()},B.add(t),!U[t]&&x[P]){var n;(0===F||F+p.fw>p.cz)&&(M=(0,_.Z)(m.Os,(Z.parents||[]).slice()),x[M.id]=M,Z.children.push(M.id),F=0);const t=(0,_.Z)(m.dW,{chartId:e.slice_id},(M.parents||[]).slice()),r=(null!=(n=H.get(e.slice_id))?n:0)+1;t.id=`${m.dW}-explore-${e.slice_id}-${r}`,H.set(e.slice_id,r),x[t.id]=t,M.children.push(t.id),U[t.meta.chartId]=t.id,F+=p.fw}const o=U[t];o&&x[o]&&(x[o].meta.sliceName=e.slice_name)})),Object.values(x).some((e=>e.id!==p._4&&!e.parents))&&(0,v.Z)({currentComponent:x[p._4],layout:x}),(0,l.DU)({dashboardFilters:Q,components:x}),x[p.M2]={id:p.M2,type:m.Vl,meta:{text:t.dashboard_title}};const Y={past:[],present:x,future:[]},j=(0,y.eY)(f.KD.dashboardFocusedChart);let V;if(j){const t=Object.values(Y.present).find((e=>{var t;return(null==(t=e.meta)?void 0:t.chartId)===j}));V=null==t?void 0:t.id;const r=new URLSearchParams(window.location.search);r.delete(f.KD.dashboardFocusedChart.name),e.replace({search:r.toString()})}const G=V||(0,h.Z)();let z=D.directPathToChild||[];x[G]&&(z=(x[G].parents||[]).slice(),z.push(G));const W=(0,s.a)({filterConfig:(null==w?void 0:w.native_filter_configuration)||[]});if((0,n.cr)(n.TT.DashboardCrossFilters)){const{chartConfiguration:e,globalChartConfiguration:t}=(0,u.g)(Y.present,w,k);w.chart_configuration=e,w.global_chart_configuration=t}const{roles:K}=I,X=(0,d.Ms)(t,I),J=(0,u.U)(w.cross_filters_enabled);return A({type:b,data:{sliceEntities:{...o.b,slices:$,isLoading:!1},charts:k,dashboardInfo:{...t,metadata:w,userId:I.userId?String(I.userId):null,dash_edit_perm:X,dash_save_perm:(0,d.Xg)(t,I),dash_share_perm:(0,c.R)("can_share_dashboard","Superset",K),superset_can_explore:(0,c.R)("can_explore","Superset",K),superset_can_share:(0,c.R)("can_share_chart","Superset",K),superset_can_csv:(0,c.R)("can_csv","Superset",K),common:{flash_messages:null==O?void 0:O.flash_messages,conf:null==O?void 0:O.conf},filterBarOrientation:(0,n.cr)(n.TT.HorizontalFilterBar)&&w.filter_bar_orientation||T.Bp.Vertical,crossFiltersEnabled:J},dataMask:S,dashboardFilters:Q,nativeFilters:W,dashboardState:{preselectNativeFilters:(0,y.eY)(f.KD.nativeFilters),sliceIds:Array.from(B),directPathToChild:z,directPathLastUpdated:Date.now(),focusedFilterField:null,expandedSlices:(null==w?void 0:w.expanded_slices)||{},refreshFrequency:(null==w?void 0:w.refresh_frequency)||0,shouldPersistRefreshFrequency:!1,css:t.css||"",colorNamespace:(null==w?void 0:w.color_namespace)||null,colorScheme:(null==w?void 0:w.color_scheme)||null,editMode:X&&q,isPublished:t.published,hasUnsavedChanges:!1,dashboardIsSaving:!1,maxUndoHistoryExceeded:!1,lastModifiedTime:t.changed_on,isRefreshing:!1,isFiltersRefreshing:!1,activeTabs:R||(null==D?void 0:D.activeTabs)||[],datasetsStatus:E.ni.Loading},dashboardLayout:Y}})}},839023:(e,t,r)=>{"use strict";r.d(t,{GI:()=>l,ZP:()=>d});var n=r(781395),a=r(904305),o=r(680621),s=r(643399),i=r(820194);const l={scope:[o._4],immune:[]},c=[n.oW];function d(e={},t){const r={[n.oW](e){const{newSelectedValues:r,merge:n}=t,a=Object.keys(r).reduce(((e,t)=>n&&t in e?{...e,[t]:[...e[t],...r[t]]}:{...e,[t]:r[t]}),{...e.columns});return{...e,columns:a}},[n.oT](e){const{path:r}=t;return{...e,directPathToFilter:r}}};if(t.type===n.ib)return(0,s.DU)({dashboardFilters:e,components:t.components}),e;if(t.type===n.cK){const r=t.scopes,n=Object.entries(r).reduce(((e,t)=>{const[r,{scope:n,immune:a}]=t,{chartId:o,column:s}=(0,i._)(r),l={...e[o].scopes,[s]:{scope:n,immune:a}};return{...e,[o]:{...e[o],scopes:l}}}),e);return(0,s.DU)({dashboardFilters:n}),n}if(t.type===a.$)return t.data.dashboardFilters;if(t.type in r){const n={...e,[t.chartId]:r[t.type](e[t.chartId])};return c.includes(t.type)&&(0,s.DU)({dashboardFilters:n}),n}return e}},437927:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,b:()=>s});var n=r(61988),a=r(138523),o=r(904305);const s={slices:{},isLoading:!0,errorMessage:null,lastUpdated:0};function i(e=s,t){const r={[o.$]:()=>({...t.data.sliceEntities}),[a.D2]:()=>({...e,isLoading:!0}),[a.JV]:()=>({...e,isLoading:!1,slices:{...e.slices,...t.payload.slices},lastUpdated:(new Date).getTime()}),[a.EO]:()=>({isLoading:!1,slices:{...t.payload.slices},lastUpdated:(new Date).getTime()}),[a.cK]:()=>({...e,isLoading:!1,lastUpdated:(new Date).getTime(),errorMessage:t.payload.error||(0,n.t)("Could not fetch all saved charts")})};return t.type in r?r[t.type]():e}},643399:(e,t,r)=>{"use strict";r.d(t,{DU:()=>v,De:()=>y,Q1:()=>g,_f:()=>E});var n=r(958809),a=r.n(n),o=r(108816),s=r.n(o),i=r(283927),l=r.n(i),c=r(441609),d=r.n(c),u=r(820194),p=r(81255),m=r(839023);let h={},_={},f={};function y(){return h}function E(e,t){if(!(e in _)){const r=Object.entries(t||h).filter((([,{scope:t}])=>t.includes(e)));_[e]=s()(a()((([e])=>(0,u._)(e).column)),l()((([,{values:e}])=>e)))(r)}return _[e]}function g({filterScope:e}){function t(e=[],r={},n=[]){r&&(r.type===p.dW&&r.meta&&r.meta.chartId&&!n.includes(r.meta.chartId)?e.push(r.meta.chartId):r.children&&r.children.forEach((r=>t(e,f[r],n))))}const r=[],{scope:n,immune:a}=e||m.GI;return n.forEach((e=>t(r,f[e],a))),r}function v({dashboardFilters:e={},components:t={}}){d()(t)||(f=t),_={},h=Object.values(e).reduce(((e,t)=>{const{chartId:r,columns:n,scopes:a}=t,o={};return Object.keys(n).forEach((e=>{if(Array.isArray(n[e])?n[e].length:void 0!==n[e]){const t=g({filterScope:a[e]}).filter((e=>r!==e));o[(0,u.w)({chartId:r,column:e})]={values:n[e],scope:t}}})),{...e,...o}}),{})}},347456:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(680621),a=r(995173),o=r(272673),s=r(128428);function i({dropResult:e,layout:t}){const{source:r,destination:i,dragging:l}=e,c=r.id===n.D0?(0,s.Z)(l.type):t[l.id]||{};if(r.id===i.id)return c.meta.width;const{width:d,minimumWidth:u}=(0,o.Z)({component:c,components:t}),{width:p,occupiedWidth:m}=(0,o.Z)({id:i.id,components:t});let h=Number(p-m);if(Number.isNaN(h)){const{width:e,occupiedWidth:r}=(0,o.Z)({id:(0,a.Z)({childId:i.id,layout:t}),components:t});h=Number(e-r)}return Number.isNaN(h)||Number.isNaN(Number(d))||h>=d?d:h>=u?h:-1}},272673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(995173),a=r(680621),o=r(81255);function s({id:e,components:t}){const r=t[e];if(!r)return 0;let n=0;return(r.children||[]).forEach((e=>{const r=t[e]||{};n+=(r.meta||{}).width||0})),n}function i({id:e,component:t,components:r={}}){const l={width:void 0,occupiedWidth:void 0,minimumWidth:void 0},c=t||r[e];return c?(l.width=(c.meta||{}).width,l.occupiedWidth=l.width,c.type===o.Os?(l.width=i({id:(0,n.Z)({childId:c.id,layout:r}),components:r}).width||a.cz,l.occupiedWidth=s({id:c.id,components:r}),l.minimumWidth=l.occupiedWidth||a.cx):c.type===o.BA?(l.minimumWidth=a.cx,l.occupiedWidth=0,(c.children||[]).forEach((e=>{r[e].type===o.Os&&(l.minimumWidth=Math.max(l.minimumWidth,s({id:e,components:r})))}))):c.type!==o.t&&c.type!==o.xh&&c.type!==o.dW||(l.minimumWidth=a.cx),l):l}},128428:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(964296),a=r(61988),o=r(81255),s=r(680621);const i={[o.dW]:{width:s.fw,height:50},[o.BA]:{width:s.fw,background:s.HE},[o.hE]:null,[o.Nc]:{text:(0,a.t)("New header"),headerSize:s.OE,background:s.HE},[o.xh]:{width:s.fw,height:50},[o.Os]:{background:s.HE},[o.yR]:null,[o.gn]:{text:"",defaultText:(0,a.t)("Tab title"),placeholder:(0,a.t)("Tab title")},[o.t]:{width:s.cz,background:s.HE}};function l(e){return`${e}-${(0,n.x0)()}`}function c(e,t,r=[]){return{type:e,id:l(e),children:[],parents:r,meta:{...i[e],...t}}}},411370:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(820194);function a(e){return Object.entries(e).reduce(((e,t)=>{const[r,{values:a}]=t,{chartId:o,column:s}=(0,n._)(r),i={...e[o],[s]:a};return{...e,[o]:i}}),{})}},437418:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(68492);function a({currentComponent:e,layout:t={}}){if(e&&t)if(t[e.id]){const r=Array.isArray(e.parents)?e.parents.slice():[];r.push(e.id),Array.isArray(e.children)&&e.children.forEach((e=>{t[e]?(t[e]={...t[e],parents:r},a({currentComponent:t[e],layout:t})):n.Z.warn(`The current layout does not contain a component with the id: ${e}.  Skipping this component`)}))}else n.Z.warn(`The current layout does not contain a component with the id: ${null==e?void 0:e.id}.  Skipping this component`)}},692252:(e,t,r)=>{"use strict";r.d(t,{ai:()=>g});var n=r(281545),a=r(45511),o=r(61988),s=r(895826),i=r(375294),l=r(112515),c=r(269856),d=r(699963),u=r(135944);const p=(0,n.Z)(),m=(0,a.Z)(),h=[["SMART_NUMBER",(0,o.t)("Adaptive formatting")],["~g",(0,o.t)("Original value")],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION",(0,o.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,o.t)("Duration in ms (100.40008 => 100ms 400µs 80ns)")]],_=((0,o.t)("Adaptive formatting"),{verbose_name:"Time",column_name:"__timestamp",description:(0,o.t)("A reference to the [Time] configuration, taking granularity into account")}),f={type:"SelectControl",multi:!0,freeForm:!0,label:(0,o.t)("Dimensions"),default:[],includeTime:!1,description:(0,o.t)("One or many columns to group by. High cardinality groupings should include a series limit to limit the number of fetched and rendered series."),optionRenderer:e=>(0,u.tZ)(d.l,{column:e,showType:!0}),valueKey:"column_name",filterOption:({data:e},t)=>e.column_name&&e.column_name.toLowerCase().indexOf(t.toLowerCase())>=0||e.verbose_name&&e.verbose_name.toLowerCase().indexOf(t.toLowerCase())>=0,mapStateToProps:(e,t)=>{const r={};return e.datasource&&(r.options=e.datasource.columns.filter((e=>e.groupby)),t&&t.includeTime&&r.options.push(_)),r}},y={type:"MetricsControl",multi:!0,label:(0,o.t)("Metrics"),validators:[s.Z],mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasource:t}},description:(0,o.t)("One or many metrics to display")},E={...y,multi:!1,label:(0,o.t)("Metric"),description:(0,o.t)("Metric")},g={metrics:y,metric:E,datasource:{type:"DatasourceControl",label:(0,o.t)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",default:"table",description:(0,o.t)("The type of visualization to display")},color_picker:{label:(0,o.t)("Fixed color"),description:(0,o.t)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:{...E,label:(0,o.t)("Right axis metric"),clearable:!0,description:(0,o.t)("Choose a metric for right axis")},linear_color_scheme:{type:"ColorSchemeControl",label:(0,o.t)("Linear color scheme"),choices:()=>m.values().map((e=>[e.id,e.label])),default:m.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>m.getMap(),isLinear:!0},secondary_metric:{...E,label:(0,o.t)("Color metric"),default:null,validators:[],description:(0,o.t)("A metric to use for color")},groupby:f,columns:{...f,label:(0,o.t)("Columns"),description:(0,o.t)("One or many controls to pivot as columns")},granularity:{type:"SelectControl",freeForm:!0,label:c.m_.granularity,default:"P1D",choices:[[null,(0,o.t)("all")],["PT5S",(0,o.t)("5 seconds")],["PT30S",(0,o.t)("30 seconds")],["PT1M",(0,o.t)("1 minute")],["PT5M",(0,o.t)("5 minutes")],["PT30M",(0,o.t)("30 minutes")],["PT1H",(0,o.t)("1 hour")],["PT6H",(0,o.t)("6 hour")],["P1D",(0,o.t)("1 day")],["P7D",(0,o.t)("7 days")],["P1W",(0,o.t)("week")],["week_starting_sunday",(0,o.t)("week starting Sunday")],["week_ending_saturday",(0,o.t)("week ending Saturday")],["P1M",(0,o.t)("month")],["P3M",(0,o.t)("quarter")],["P1Y",(0,o.t)("year")]],description:(0,o.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`,`1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:c.m_.granularity_sqla,description:(0,o.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>(0,u.tZ)(d.l,{column:e,showType:!0}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:c.m_.time_grain_sqla,default:"P1D",description:(0,o.t)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:c.m_.time_range,default:(0,o.t)("No filter"),description:(0,o.t)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},row_limit:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Row limit"),validators:[i.Z],default:1e4,choices:(0,l.mG)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,o.t)("Limits the number of rows that get displayed.")},limit:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Series limit"),validators:[i.Z],choices:(0,l.mG)([5,10,25,50,100,500]),clearable:!0,description:(0,o.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},timeseries_limit_metric:{type:"MetricsControl",label:(0,o.t)("Sort by"),default:null,clearable:!0,description:(0,o.t)("Metric used to define how the top series are sorted if a series or row limit is present. If undefined reverts to the first metric (where appropriate)."),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},series:{...f,label:(0,o.t)("Dimensions"),multi:!1,default:null,description:(0,o.t)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},entity:{...f,label:(0,o.t)("Entity"),default:null,multi:!1,validators:[s.Z],description:(0,o.t)("This defines the element to be plotted on the chart")},x:{...E,label:(0,o.t)("X Axis"),description:(0,o.t)("Metric assigned to the [X] axis"),default:null},y:{...E,label:(0,o.t)("Y Axis"),default:null,description:(0,o.t)("Metric assigned to the [Y] axis")},size:{...E,label:(0,o.t)("Bubble size"),default:null},y_axis_format:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h,description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?(0,o.t)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:(0,o.t)("Filters"),default:null,description:"",mapStateToProps:e=>({columns:e.datasource?e.datasource.columns.filter((e=>e.filterable)):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},color_scheme:{type:"ColorSchemeControl",label:(0,o.t)("Color scheme"),default:p.getDefaultKey(),renderTrigger:!0,choices:()=>p.keys().map((e=>[e,e])),description:(0,o.t)("The color scheme for rendering chart"),schemes:()=>p.getMap()}}},112515:(e,t,r)=>{"use strict";r.d(t,{AH:()=>D,CB:()=>N,H6:()=>R,Jp:()=>y,bX:()=>w,hz:()=>A,kN:()=>S,mG:()=>L,pd:()=>I,pe:()=>O,u:()=>C,xW:()=>v,y8:()=>b});var n=r(667294),a=r(354998),o=r.n(a),s=r(311064),i=r(719427),l=r(861654),c=r(431069),d=r(355786),u=r(986374),p=r(309679),m=r(454076),h=r(427600),_=r(269856),f=r(680621);function y(e){var t,r;const{slice:n,form_data:a}=e;return null!=(t=null!=(r=null==n?void 0:n.slice_id)?r:null==a?void 0:a.slice_id)?t:_.xA}let E=0;function g(e=!1){let t=0;return e&&(t=E%u.X.length,E+=1,0===t&&(t+=1,E+=1)),u.X[t]}function v(e,t){return null==e?null:o()(window.location.search).pathname("/api/v1/chart/data").search({form_data:(0,p.o)({slice_id:e}),force:t}).toString()}function T(e="base"){return["full","json","csv","query","results","samples"].includes(e)?"/superset/explore_json/":"/explore/"}function b(e,t={},r=!1){const n=new(o())("/"),a=T(e),s=n.search(!0);return Object.keys(t).forEach((e=>{s[e]=t[e]})),e===h.KD.standalone.name&&(r&&(s.force="1"),s.standalone=f._B.HideNav),n.directory(a).search(s).toString()}function S({path:e,qs:t,allowDomainSharding:r=!1}){let n=new(o())({protocol:window.location.protocol.slice(0,-1),hostname:g(r),port:window.location.port?window.location.port:"",path:e});return t&&(n=n.search(t)),n}function R({formData:e,endpointType:t="base",force:r=!1,curUrl:n=null,requestParams:a={},allowDomainSharding:s=!1,method:i="POST"}){if(!e.datasource)return null;delete e.label_colors;let l=S({path:"/",allowDomainSharding:s});n&&(l=o()(o()(n).search()));const c=T(t),d=l.search(!0),{slice_id:u,extra_filters:m,adhoc_filters:_,viz_type:f}=e;if(u){const e={slice_id:u};"GET"===i&&(e.viz_type=f,m&&m.length&&(e.extra_filters=m),_&&_.length&&(e.adhoc_filters=_)),d.form_data=(0,p.o)(e)}r&&(d.force="true"),"csv"===t&&(d.csv="true"),t===h.KD.standalone.name&&(d.standalone="1"),"query"===t&&(d.query="true"),"results"===t&&(d.results="true"),"samples"===t&&(d.samples="true");const y=Object.keys(a);return y.length&&y.forEach((e=>{a.hasOwnProperty(e)&&(d[e]=a[e])})),l.search(d).directory(c).toString()}const A=e=>{var t,r;const n=(0,s.Z)().get(e.viz_type);return[null!=(t=null==n?void 0:n.useLegacyApi)&&t,null!=(r=null==n?void 0:n.parseMethod)?r:"json-bigint"]},C=({formData:e,force:t,resultFormat:r,resultType:n,setDataMask:a,ownState:o})=>{var s;return(null!=(s=(0,i.Z)().get(e.viz_type))?s:e=>(0,l.Z)(e,(e=>[{...e}])))({...e,force:t,result_format:r,result_type:n},{ownState:o,hooks:{setDataMask:a}})},I=({resultType:e,resultFormat:t})=>"csv"===t?t:e,O=({formData:e,resultFormat:t="json",resultType:r="full",force:n=!1,ownState:a={}})=>{let o,s;const[i,l]=A(e);i?(o=R({formData:e,endpointType:I({resultFormat:t,resultType:r}),allowDomainSharding:!1}),s=e):(o="/api/v1/chart/data",s=C({formData:e,force:n,resultFormat:t,resultType:r,ownState:a,parseMethod:l})),c.Z.postForm(o,{form_data:(0,p.o)(s)})},D=(e,t)=>{const r=R({formData:e,endpointType:"base",allowDomainSharding:!1,requestParams:t});c.Z.postForm(r,{form_data:(0,p.o)(e)})},w=(e,t,r)=>{const a=(0,n.useCallback)(e,r);(0,n.useEffect)((()=>{const e=setTimeout((()=>{a()}),t);return()=>{clearTimeout(e)}}),[a,t])},N=(e,t,r)=>{var n;const a=[..._.qK].map((e=>_.LT[e].operation)).indexOf(t)>=0;let o="object"==typeof e?null!=(n=null==e?void 0:e.column_name)?n:"":null!=e?e:"";if(e&&t){o+=` ${t}`;const e=a&&Array.isArray(r)?r[0]:r,n=(0,d.Z)(r),s=void 0!==e&&Number.isNaN(Number(e)),i=s?"'":"",[l,c]=a?["(",")"]:["",""],u=n.map((e=>(0,m.lo)(e))).map((e=>`${i}${s?String(e).replace(/'/g,"''"):e}${i}`));n.length>0&&(o+=` ${l}${u.join(", ")}${c}`)}return o};function L(e){return e.map((e=>[e,e.toString()]))}},635854:(e,t,r)=>{"use strict";r.d(t,{R3:()=>s,oN:()=>i});var n=r(837687),a=r(410331),o=r(692252);function s(e,t){var r;const o={...t},s=o.viz_type||(null==(r=e.common)?void 0:r.conf.DEFAULT_VIZ_TYPE)||"table";!function(e){e.y_axis_zero&&(e.y_axis_bounds=[0,null])}(o);const i=(0,a.mi)(s,e.datasource.type,e,o),l=(0,n.Z)().get(s)||{};return l.onInit?l.onInit(i):i}function i(e){const t=e.datasource.split("__")[1],r=e.viz_type,n=(0,a.mi)(r,t,null,e),o=(0,a.Hu)(n),s={};return Object.keys(n).concat(Object.keys(e)).forEach((t=>{void 0===e[t]?s[t]=o[t]:s[t]=e[t]})),s}const l={...o.ai};Object.keys(o.ai).forEach((e=>{l[e].value=o.ai[e].default})),(0,a.Hu)(l)},439666:(e,t,r)=>{"use strict";r.d(t,{Aw:()=>u,Dr:()=>_,J8:()=>m,M:()=>y,MZ:()=>g,Me:()=>f,_M:()=>E,cq:()=>h,jt:()=>d});var n=r(441609),a=r.n(n),o=r(431069),s=r(61988),i=r(115926),l=r.n(i),c=r(672570);const d="SET_REPORT";function u({userId:e,filterField:t,creationMethod:r,resourceId:n}){const a=l().encode({filters:[{col:t,opr:"eq",value:n},{col:"creation_method",opr:"eq",value:r},{col:"created_by",opr:"rel_o_m",value:e}]});return function(e){return o.Z.get({endpoint:`/api/v1/report/?q=${a}`}).then((({json:a})=>{e(function(e,t,r,n){return{type:d,report:e,resourceId:t,creationMethod:r,filterField:n}}(a,n,r,t))})).catch((()=>e((0,c.Gb)((0,s.t)("There was an issue fetching reports attached to this dashboard.")))))}}const p=(e,t)=>{const r=t(),{user:n,dashboardInfo:o,charts:s,explore:i}=r;if(a()(o)){var l;const[t]=Object.keys(s);e(u({userId:(null==(l=i.user)?void 0:l.userId)||(null==n?void 0:n.userId),filterField:"chart_id",creationMethod:"charts",resourceId:s[t].id}))}else e(u({userId:n.userId,filterField:"dashboard_id",creationMethod:"dashboards",resourceId:o.id}))},m="ADD_REPORT",h=e=>t=>o.Z.post({endpoint:"/api/v1/report/",jsonPayload:e}).then((({json:e})=>{t({type:m,json:e}),t((0,c.ws)((0,s.t)("The report has been created")))})),_="EDIT_REPORT",f=(e,t)=>r=>o.Z.put({endpoint:`/api/v1/report/${e}`,jsonPayload:t}).then((({json:e})=>{r({type:_,json:e}),r((0,c.ws)((0,s.t)("Report updated")))}));function y(e,t){return function(r){return o.Z.put({endpoint:encodeURI(`/api/v1/report/${e.id}`),headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})}).catch((()=>{r((0,c.Gb)((0,s.t)("We were unable to active or deactivate this report.")))})).finally((()=>{r(p)}))}}const E="DELETE_REPORT";function g(e){return function(t){return o.Z.delete({endpoint:encodeURI(`/api/v1/report/${e.id}`)}).catch((()=>{t((0,c.Gb)((0,s.t)("Your report could not be deleted")))})).finally((()=>{t({type:E,report:e}),t((0,c.ws)((0,s.t)("Deleted: %s",e.name)))}))}}},454076:(e,t,r)=>{"use strict";r.d(t,{EI:()=>y,G6:()=>g,G9:()=>p,Mv:()=>_,Tb:()=>c,cD:()=>f,fV:()=>E,jy:()=>d,li:()=>l,lo:()=>m});var n=r(751115),a=r(642846),o=r(431069),s=r(355786);const i="<empty string>",l="<NULL>",c="TRUE",d="FALSE",u=(0,n.bt)(a.default.DATABASE_DATETIME);function p(e){return o.Z.post({endpoint:"/kv/store/",postPayload:{data:e}}).then((e=>`${window.location.origin+window.location.pathname}?id=${e.json.id}`))}function m(e){return null===e?l:""===e?i:!0===e?c:!1===e?d:"string"!=typeof e&&e.toString?e.toString():e}function h(e){return e.name||e}function _(e,t){let r=t.length?`${t.map(h).join("\t")}\n`:"";for(let n=0;n<e.length;n+=1){const a={};for(let r=0;r<t.length;r+=1){const o=h(t[r]);o in e[n]?a[r]=e[n][o]:a[r]=e[n][parseFloat(o)]}r+=`${Object.values(a).join("\t")}\n`}return r}function f(e,t){return e&&0!==e.length&&0!==(0,s.Z)(t).length?e.map((e=>({...e,...t.reduce(((t,r)=>(null!==e[r]&&void 0!==e[r]&&(t[r]=u(e[r])),t)),{})}))):e}const y=()=>{},E=()=>{const{appVersion:e}=navigator;return e.includes("Win")?"Windows":e.includes("Mac")?"MacOS":e.includes("X11")?"UNIX":e.includes("Linux")?"Linux":"Unknown OS"},g=()=>{const{userAgent:e}=navigator;return e&&/^((?!chrome|android).)*safari/i.test(e)}},444814:(e,t,r)=>{"use strict";r.d(t,{zO:()=>s,zQ:()=>o});var n=r(730381),a=r.n(n);const o=function(e,t,r="HH:mm:ss.SS"){const n=t-e;return a()(new Date(n)).utc().format(r)},s=function(){return a()().utc().valueOf()}},986374:(e,t,r)=>{"use strict";r.d(t,{X:()=>o,_:()=>s});var n=r(593185),a=r(920292);const o=function(){var e,t;if(!document.getElementById("app"))return[];const r=new Set([window.location.hostname]);if("1"===new URLSearchParams(window.location.search).get("disableDomainSharding"))return Array.from(r);const o=(0,a.Z)();return(0,n.fG)(o.common.feature_flags),null!=o&&null!=(e=o.common)&&null!=(t=e.conf)&&t.SUPERSET_WEBSERVER_DOMAINS&&o.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach((e=>{r.add(e)})),Array.from(r)}(),s=o.length>1},461819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(121804),a=r.n(n),o=r(751995),s=r(61988),i=r(51776),l=r(135944);const c=o.iK.div`
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,d=function({certifiedBy:e,details:t,metricName:r}){const n=(0,o.Fg)();return(0,l.tZ)(i.Z,{id:`${a()(r)}-tooltip`,title:(0,l.BX)("div",{children:[e&&(0,l.tZ)(c,{children:(0,s.t)("Certified by %s",e)}),(0,l.tZ)("div",{children:t})]}),children:(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"14",viewBox:"0 0 24 24",width:"14",children:(0,l.tZ)("g",{children:(0,l.tZ)("path",{fill:n.colors.primary.base,d:"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M9.38,16.01L7,13.61c-0.39-0.39-0.39-1.02,0-1.41 l0.07-0.07c0.39-0.39,1.03-0.39,1.42,0l1.61,1.62l5.15-5.16c0.39-0.39,1.03-0.39,1.42,0l0.07,0.07c0.39,0.39,0.39,1.02,0,1.41 l-5.92,5.94C10.41,16.4,9.78,16.4,9.38,16.01z"})})})})}},365634:(e,t,r)=>{"use strict";r.d(t,{E:()=>_});var n=r(667294),a=r(751995),o=r(211965),s=r(178186),i=r(51776),l=r(701455),c=r(461819),d=r(671963),u=r(660605),p=r(409882),m=r(135944);const h=a.iK.span`
  display: flex;
  align-items: center;
  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function _({column:e,labelRef:t,showType:r=!1}){const{expression:a,column_name:_,type_generic:f}=e,y=a&&a!==_,E=e.warning_markdown||e.warning_text||e.error_text,g=y?"expression":f,[v,T]=(0,n.useState)(e.column_name),[b,S]=(0,n.useState)(e.type);return(0,n.useLayoutEffect)((()=>{T((0,d.ZK)(e,t)),S((0,d.GX)(e))}),[t,e]),(0,m.BX)(h,{children:[r&&void 0!==g&&(0,m.tZ)(i.u,{id:"metric-type-tooltip",title:b,placement:"bottomRight",align:{offset:[8,-2]},children:(0,m.tZ)("span",{children:(0,m.tZ)(l.j,{type:g})})}),(0,m.tZ)(i.u,{id:"metric-name-tooltip",title:v,children:(0,m.tZ)("span",{className:"option-label column-option-label",css:e=>o.iv`
            margin-right: ${e.gridUnit}px;
          `,ref:t,children:(0,d.ok)(e)})}),y&&(0,m.tZ)(u.Z,{sqlExpression:a}),e.is_certified&&(0,m.tZ)(c.Z,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),E&&(0,m.tZ)(p.Z,{className:"text-warning",icon:"warning",tooltip:(0,m.tZ)(s.Z,{source:E}),label:`warn-${e.column_name}`,iconsStyle:{marginLeft:0},...e.error_text&&{className:"text-danger",icon:"exclamation-circle"}})]})}},701455:(e,t,r)=>{"use strict";r.d(t,{j:()=>O});var n,a=r(751995),o=r(211965),s=r(61988),i=r(88889),l=r(163270),c=r(830071),d=r(667294);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}const p=({title:e,titleId:t,...r},a)=>d.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:a,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,n||(n=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m6.988 10.809-1.031 4.84q-.276 1.3-1.16 2.126-.885.827-1.822.827-.516 0-.76-.197a.61.61 0 0 1-.242-.495.7.7 0 0 1 .152-.445q.152-.194.44-.194.18 0 .319.082a1 1 0 0 1 .243.206q.082.099.185.27l.178.292q.452-.034.77-.61.32-.573.554-1.64l1.079-5.062H4.75l.123-.534h1.13l.083-.398q.14-.68.445-1.225t.692-.925q.381-.375.864-.59.483-.213.929-.213.515 0 .758.196a.61.61 0 0 1 .244.495.73.73 0 0 1-.144.446q-.144.193-.448.193a.6.6 0 0 1-.317-.08.9.9 0 0 1-.24-.207 2 2 0 0 1-.187-.276 4 4 0 0 0-.176-.287q-.405.018-.715.534-.311.515-.562 1.716l-.13.621H8.57l-.123.534zm2.225 2.261c0-1.758.45-3.183 1.387-4.424h.713c-.694.89-1.236 2.774-1.236 4.424 0 1.66.537 3.54 1.236 4.429H10.6c-.938-1.24-1.387-2.666-1.387-4.429m5.288.957h-.078l-1.25 1.988h-.952l1.802-2.632L12.2 10.75h1.001l1.25 1.958h.078l1.236-1.958h.952l-1.787 2.598 1.811 2.666h-.996zm5.23-.952c0 1.758-.45 3.184-1.387 4.424h-.713c.693-.889 1.235-2.773 1.235-4.424 0-1.66-.537-3.54-1.235-4.429h.713c.937 1.24 1.386 2.666 1.386 4.43",clipRule:"evenodd"}))),m=(0,d.forwardRef)(p);var h;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(null,arguments)}const f=({title:e,titleId:t,...r},n)=>d.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,h||(h=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 4h-1v16h1zm3.248 8.475c0 2.343.913 3.691 2.5 3.691 1.582 0 2.49-1.338 2.49-3.677 0-2.334-.923-3.7-2.49-3.7-1.577 0-2.5 1.361-2.5 3.686M5.579 9.93V16h.879V8.954h-.874l-1.875 1.348v.928l1.792-1.3zm12.169 5.468c1.04 0 1.607-1.035 1.607-2.924 0-1.87-.577-2.915-1.607-2.915s-1.616 1.054-1.616 2.915c0 1.884.576 2.924 1.616 2.924",clipRule:"evenodd"}))),y=(0,d.forwardRef)(f);var E;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(null,arguments)}const v=({title:e,titleId:t,...r},n)=>d.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,E||(E=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.91 16.14c-1.14 0-2.047-.671-2.047-1.843 0-1.375 1.215-1.621 2.328-1.766 1.094-.14 1.547-.117 1.547-.562 0-.778-.41-1.235-1.265-1.235-.88 0-1.36.47-1.563.907l-.875-.313c.469-1.094 1.5-1.406 2.406-1.406.766 0 2.22.219 2.22 2.125V16h-.923v-.812h-.047c-.187.39-.734.953-1.78.953m.14-.828c1.095 0 1.688-.734 1.688-1.484v-.844c-.156.188-1.203.297-1.593.344-.72.094-1.36.313-1.36 1.016 0 .64.531.969 1.266.969M9.799 16V8h.922v2.953h.078c.203-.312.562-1.031 1.734-1.031 1.516 0 2.563 1.203 2.563 3.094 0 1.906-1.047 3.109-2.547 3.109-1.157 0-1.547-.719-1.75-1.047h-.11V16zm.906-3c0 1.36.61 2.297 1.719 2.297 1.156 0 1.75-1.016 1.75-2.297 0-1.266-.578-2.25-1.75-2.25-1.125 0-1.72.906-1.72 2.25m7.684 3.125c-1.687 0-2.719-1.297-2.719-3.094 0-1.828 1.079-3.11 2.704-3.11 1.265 0 2.218.75 2.375 1.876h-.922c-.14-.547-.625-1.047-1.438-1.047-1.078 0-1.797.89-1.797 2.25 0 1.39.703 2.297 1.797 2.297.719 0 1.266-.39 1.438-1.047h.922c-.157 1.063-1.032 1.875-2.36 1.875",clipRule:"evenodd"}))),T=(0,d.forwardRef)(v);var b;function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(null,arguments)}const R=({title:e,titleId:t,...r},n)=>d.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,b||(b=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 8h1v2h2V8h1v2h2v1h-2v2h2v1h-2v2h-1v-2h-2v2h-1v-2H8v-1h2v-2H8v-1h2zm3 5v-2h-2v2z",clipRule:"evenodd"}))),A=(0,d.forwardRef)(R);var C=r(135944);const I=a.iK.div`
  ${({theme:e})=>o.iv`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${6*e.gridUnit}px;
    height: ${6*e.gridUnit}px;
    margin-right: ${e.gridUnit}px;

    && svg {
      margin-right: 0;
      margin-left: 0;
      width: 100%;
      height: 100%;
    }
  `};
`;function O({type:e}){let t=(0,C.tZ)(l.Z,{"aria-label":(0,s.t)("unknown type icon")});return""===e||"expression"===e?t=(0,C.tZ)(m,{"aria-label":(0,s.t)("function type icon")}):e===i.Z.String?t=(0,C.tZ)(T,{"aria-label":(0,s.t)("string type icon")}):e===i.Z.Numeric?t=(0,C.tZ)(A,{"aria-label":(0,s.t)("numeric type icon")}):e===i.Z.Boolean?t=(0,C.tZ)(y,{"aria-label":(0,s.t)("boolean type icon")}):e===i.Z.Temporal&&(t=(0,C.tZ)(c.Z,{"aria-label":(0,s.t)("temporal type icon")})),(0,C.tZ)(I,{children:t})}},246666:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});const n=r(751995).iK.div`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
  font-size: ${({theme:e})=>e.typography.sizes.s};
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
`},409882:(e,t,r)=>{"use strict";r.d(t,{V:()=>l,Z:()=>c});var n=r(121804),a=r.n(n),o=r(61988),s=r(51776),i=r(135944);function l({label:e,tooltip:t,bsStyle:r,onClick:n,icon:l="info-circle",className:c="text-muted",placement:d="right",iconsStyle:u={}}){const p=`fa fa-${l} ${c} ${r?`text-${r}`:""}`,m=(0,i.tZ)("i",{role:"button","aria-label":(0,o.t)("Show info tooltip"),tabIndex:0,className:p,style:{cursor:n?"pointer":void 0,...u},onClick:n,onKeyPress:n&&(e=>{"Enter"!==e.key&&" "!==e.key||n()})});return t?(0,i.tZ)(s.u,{id:`${a()(e)}-tooltip`,title:t,placement:d,children:m}):m}const c=l},251384:(e,t,r)=>{"use strict";r.d(t,{m:()=>_});var n=r(667294),a=r(751995),o=r(211965),s=r(178186),i=r(409882),l=r(701455),c=r(461819),d=r(51776),u=r(671963),p=r(660605),m=r(135944);const h=a.iK.div`
  align-items: center;
  display: flex;

  > svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function _({metric:e,labelRef:t,openInNewWindow:r=!1,showFormula:a=!0,showType:_=!1,shouldShowTooltip:f=!0,url:y=""}){const E=e.verbose_name||e.metric_name||e.label,g=y?(0,m.tZ)("a",{href:y,target:r?"_blank":"",rel:"noreferrer",children:E}):E,v=(0,m.tZ)("span",{className:"option-label metric-option-label",css:e=>o.iv`
        margin-right: ${e.gridUnit}px;
      `,ref:t,children:g}),T=e.warning_markdown||e.warning_text||e.error_text,[b,S]=(0,n.useState)(e.metric_name);return(0,n.useLayoutEffect)((()=>{S((0,u.Lk)(e,t))}),[t,e]),(0,m.BX)(h,{className:"metric-option",children:[_&&(0,m.tZ)(l.j,{type:"expression"}),f?(0,m.tZ)(d.Z,{id:"metric-name-tooltip",title:b,children:v}):v,a&&e.expression&&(0,m.tZ)(p.Z,{sqlExpression:e.expression}),e.is_certified&&(0,m.tZ)(c.Z,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),T&&(0,m.tZ)(i.Z,{className:"text-warning",icon:"warning",tooltip:(0,m.tZ)(s.Z,{source:T}),label:`warn-${e.metric_name}`,iconsStyle:{marginLeft:0},...e.error_text&&{className:"text-danger",icon:"exclamation-circle"}})]})}},660605:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(219181),a=r(874981),o=r(285369),s=r(751995),i=r(211965),l=r(61988),c=(r(789899),r(135944));const d=(0,s.iK)(o.Z)`
  ${({theme:e})=>i.iv`
    color: ${e.colors.grayscale.base};
    font-size: ${e.typography.sizes.s}px;
    & svg {
      margin-left: ${e.gridUnit}px;
      margin-right: ${e.gridUnit}px;
    }
  `}
`,u=e=>{const t=(0,s.Fg)();return(0,c.tZ)(n.Z,{content:(0,c.tZ)(a.default,{mode:"sql",value:e.sqlExpression,editorProps:{$blockScrolling:!0},setOptions:{highlightActiveLine:!1,highlightGutterLine:!1},minLines:2,maxLines:6,readOnly:!0,wrapEnabled:!0,style:{border:`1px solid ${t.colors.grayscale.light2}`,background:t.colors.secondary.light5,maxWidth:100*t.gridUnit}}),placement:"bottomLeft",arrowPointAtCenter:!0,title:(0,l.t)("SQL expression"),...e,children:(0,c.tZ)(d,{})})}},51776:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,u:()=>i});var n=r(751995),a=r(211965),o=r(931097),s=r(135944);const i=({overlayStyle:e,color:t,...r})=>{const i=(0,n.Fg)(),l=`${i.colors.grayscale.dark2}e6`;return(0,s.BX)(s.HY,{children:[(0,s.tZ)(a.xB,{styles:a.iv`
          .ant-tooltip-open {
            display: inline-block;
            &::after {
              content: '';
              display: block;
            }
          }
        `}),(0,s.tZ)(o.Z,{overlayStyle:{fontSize:i.typography.sizes.s,lineHeight:"1.6",maxWidth:62*i.gridUnit,minWidth:30*i.gridUnit,...e},align:{offset:[0,1]},color:l||t,trigger:"hover",placement:"bottom",mouseLeaveDelay:0,...r})]})},l=i},671963:(e,t,r)=>{"use strict";r.d(t,{GX:()=>p,Lk:()=>h,ZK:()=>m,ok:()=>u});var n=r(751995),a=r(211965),o=r(61988),s=r(135944);const i=n.iK.div`
  ${({theme:e})=>a.iv`
    display: flex;
    flex-direction: column;
    font-size: ${e.typography.sizes.s}px;
    line-height: 1.2;

    &:not(:last-of-type) {
      margin-bottom: ${2*e.gridUnit}px;
    }
    &:last-of-type {
      display: -webkit-box;
      -webkit-line-clamp: 40;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  `}
`,l=n.iK.span`
  ${({theme:e})=>a.iv`
    font-weight: ${e.typography.weights.bold};
  `}
`,c=({label:e,text:t})=>(0,s.BX)(i,{children:[(0,s.tZ)(l,{children:e}),": ",(0,s.tZ)("span",{children:t})]}),d=e=>{var t,r;return!!((null==e||null==(t=e.current)?void 0:t.scrollWidth)>(null==e||null==(r=e.current)?void 0:r.clientWidth))},u=e=>e.verbose_name||e.column_name,p=e=>e.type?(0,s.tZ)(c,{label:(0,o.t)("Column type"),text:e.type}):null,m=(e,t)=>e.column_name&&e.verbose_name||e.description||d(t)?(0,s.BX)(s.HY,{children:[e.column_name&&(0,s.tZ)(c,{label:(0,o.t)("Column name"),text:e.column_name}),e.verbose_name&&(0,s.tZ)(c,{label:(0,o.t)("Label"),text:e.verbose_name}),e.description&&(0,s.tZ)(c,{label:(0,o.t)("Description"),text:e.description})]}):null,h=(e,t)=>e.verbose_name||e.description||e.label||d(t)?(0,s.BX)(s.HY,{children:[(0,s.tZ)(c,{label:(0,o.t)("Metric name"),text:e.metric_name}),(e.label||e.verbose_name)&&(0,s.tZ)(c,{label:(0,o.t)("Label"),text:e.label||e.verbose_name}),e.description&&(0,s.tZ)(c,{label:(0,o.t)("Description"),text:e.description})]}):null},535622:(e,t,r)=>{"use strict";r.d(t,{$z:()=>l,CV:()=>p,DS:()=>d,LU:()=>u,PJ:()=>h,YY:()=>_,ZK:()=>f,cm:()=>m,m_:()=>c});var n=r(61988),a=r(5364),o=r(88889),s=r(920620),i=r(338575);const l=1e5,c={time_range:(0,n.t)("Time Range"),granularity_sqla:(0,n.t)("Time Column"),time_grain_sqla:(0,n.t)("Time Grain"),granularity:(0,n.t)("Time Granularity")},d={[a.W3]:(0,n.t)("Time")},u={verbose_name:d[a.W3],column_name:a.W3,type:"TIMESTAMP",type_generic:o.Z.Temporal,description:(0,n.t)("A reference to the [Time] configuration, taking granularity into account")},p={column_name:a.W3,is_dttm:!0,type:"TIMESTAMP",type_generic:o.Z.Temporal},m={[s.n.Aggregate]:(0,n.t)("Aggregate"),[s.n.Raw]:(0,n.t)("Raw records")},h={sort_series_type:i.Id.Sum,sort_series_ascending:!1},_=[[i.Id.Name,(0,n.t)("Category name")],[i.Id.Sum,(0,n.t)("Total value")],[i.Id.Min,(0,n.t)("Minimum value")],[i.Id.Max,(0,n.t)("Maximum value")],[i.Id.Avg,(0,n.t)("Average value")]],f={sort_series_type:i.Id.Name,sort_series_ascending:!0}},593362:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var n=r(211965),a=r(751995),o=r(61988),s=r(409882),i=r(51776),l=r(135944);function c({name:e,description:t,label:r,tooltipOnClick:n,onClick:a,warning:c,danger:d,leftNode:u,rightNode:p,validationErrors:m=[],renderTrigger:h=!1,hovered:_=!1,required:f=!1}){if(!r)return null;const y=m.length>0?"text-danger":"";return(0,l.BX)("div",{className:"ControlHeader",children:[(0,l.tZ)("div",{className:"pull-left",children:(0,l.BX)("label",{className:"control-label",htmlFor:e,children:[u&&(0,l.tZ)("span",{children:u}),(0,l.tZ)("span",{role:"button",tabIndex:0,onClick:a,className:y,style:{cursor:a?"pointer":""},children:r})," ",c&&(0,l.BX)("span",{children:[(0,l.tZ)(i.u,{id:"error-tooltip",placement:"top",title:c,children:(0,l.tZ)("i",{className:"fa fa-exclamation-circle text-warning"})})," "]}),d&&(0,l.BX)("span",{children:[(0,l.tZ)(i.u,{id:"error-tooltip",placement:"top",title:d,children:(0,l.tZ)("i",{className:"fa fa-exclamation-circle text-danger"})})," "]}),m.length>0&&(0,l.BX)("span",{children:[(0,l.tZ)(i.u,{id:"error-tooltip",placement:"top",title:m.join(" "),children:(0,l.tZ)("i",{className:"fa fa-exclamation-circle text-danger"})})," "]}),_?(0,l.BX)("span",{children:[t&&(0,l.BX)("span",{children:[(0,l.tZ)(s.V,{label:(0,o.t)("description"),tooltip:t,placement:"top",onClick:n})," "]}),h&&(0,l.BX)("span",{children:[(0,l.tZ)(s.V,{label:(0,o.t)("bolt"),tooltip:(0,o.t)("Changing this control takes effect instantly"),placement:"top",icon:"bolt"})," "]})]}):null,f&&(0,l.tZ)("span",{className:"text-danger m-l-4",children:(0,l.tZ)("strong",{children:"*"})})]})}),p&&(0,l.tZ)("div",{className:"pull-right",children:p}),(0,l.tZ)("div",{className:"clearfix"})]})}const d={RadioButtonControl:function({value:e,options:t,onChange:r,...o}){const s=e||t[0][0],i=(0,a.Fg)();return(0,l.BX)("div",{css:(0,n.iv)({".btn svg":{position:"relative",top:"0.2em"},".btn:focus":{outline:"none"},".control-label":{color:i.colors.grayscale.base,marginBottom:i.gridUnit},".control-label + .btn-group":{marginTop:"1px"},".btn-group .btn-default":{color:i.colors.grayscale.dark1},".btn-group .btn.active":{background:i.colors.grayscale.light4,fontWeight:i.typography.weights.bold,boxShadow:"none"}},"",""),children:[(0,l.tZ)(c,{...o}),(0,l.tZ)("div",{className:"btn-group btn-group-sm",children:t.map((([e,t])=>(0,l.tZ)("button",{type:"button",className:"btn btn-default "+(e===s?"active":""),onClick:()=>{r(e)},children:t},JSON.stringify(e))))})]})}}},353769:(e,t,r)=>{"use strict";r.d(t,{$c:()=>b,Pi:()=>A,QF:()=>h,RW:()=>_,UQ:()=>R,Z8:()=>m,aG:()=>T,db:()=>E,iQ:()=>y,iR:()=>S,lC:()=>p,ql:()=>f,sH:()=>v,x$:()=>g,xM:()=>u});var n=r(61988),a=r(895826),o=r(338575),s=r(535622),i=r(365634),l=r(419835),c=r(783389),d=r(135944);const u={type:"DndColumnSelect",label:(0,n.t)("Dimensions"),multi:!0,freeForm:!0,clearable:!0,default:[],includeTime:!1,description:(0,n.t)("Dimensions contain qualitative values such as names, dates, or geographical data. Use dimensions to categorize, segment, and reveal the details in your data. Dimensions affect the level of detail in the view."),optionRenderer:e=>(0,d.tZ)(i.E,{showType:!0,column:e}),valueRenderer:e=>(0,d.tZ)(i.E,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var r,n;return(null==(r=e.column_name)?void 0:r.toLowerCase().includes(t.toLowerCase()))||(null==(n=e.verbose_name)?void 0:n.toLowerCase().includes(t.toLowerCase()))||!1},promptTextCreator:e=>e,mapStateToProps(e,t){var r;const n={},{datasource:a}=e;if(null!=a&&null!=(r=a.columns[0])&&r.hasOwnProperty("groupby")){const e=a.columns.filter((e=>e.groupby));null!=t&&t.includeTime&&e.unshift(s.LU),n.options=e,n.savedMetrics=a.metrics||[]}else{const e=(null==a?void 0:a.columns)||[];null!=t&&t.includeTime&&e.unshift(s.CV),n.options=e}return n},commaChoosesOption:!1},p={...u,label:(0,n.t)("Columns"),description:(0,n.t)("Add dataset columns here to group the pivot table columns.")},m={...u,label:(0,n.t)("Dimension"),multi:!1,default:null,description:(0,n.t)("Defines the grouping of entities. Each series is represented by a specific color in the chart.")},h={...u,label:(0,n.t)("Entity"),default:null,multi:!1,validators:[a.Z],description:(0,n.t)("This defines the element to be plotted on the chart")},_={type:"DndFilterSelect",label:(0,n.t)("Filters"),default:[],description:"",mapStateToProps:({datasource:e,form_data:t})=>({columns:(0,o.It)(e)?e.columns.filter((e=>e.filterable)):(null==e?void 0:e.columns)||[],savedMetrics:(0,l.R)(e),selectedMetrics:t.metrics||(t.metric?[t.metric]:[]),datasource:e}),provideFormDataToProps:!0,...c.sy},f={type:"DndMetricSelect",multi:!0,label:(0,n.t)("Metrics"),validators:[a.Z],mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,l.R)(e),datasource:e,datasourceType:null==e?void 0:e.type}),description:(0,n.t)("Select one or many metrics to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},y={...f,multi:!1,label:(0,n.t)("Metric"),description:(0,n.t)("Select a metric to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},E={...y,label:(0,n.t)("Right Axis Metric"),clearable:!0,description:(0,n.t)("Select a metric to display on the right axis")},g={type:"DndMetricSelect",label:(0,n.t)("Sort by"),default:null,description:(0,n.t)("This metric is used to define row selection criteria (how the rows are sorted) if a series or row limit is present. If not defined, it reverts to the first metric (where appropriate)."),mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,l.R)(e),datasource:e,datasourceType:null==e?void 0:e.type})},v={...y,label:(0,n.t)("Bubble Size"),description:(0,n.t)("Metric used to calculate bubble size"),default:null},T={...y,label:(0,n.t)("X Axis"),description:(0,n.t)("The dataset column/metric that returns the values on your chart's x-axis."),default:null},b={...y,label:(0,n.t)("Y Axis"),description:(0,n.t)("The dataset column/metric that returns the values on your chart's y-axis."),default:null},S={...y,label:(0,n.t)("Color Metric"),default:null,validators:[],description:(0,n.t)("A metric to use for color")},R={...m,...c.V7,label:s.m_.granularity_sqla,description:(0,n.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),default:e=>e.default,clearable:!1,canDelete:!1,ghostButtonText:(0,n.t)("Drop a temporal column here or click"),optionRenderer:e=>(0,d.tZ)(i.E,{showType:!0,column:e}),valueRenderer:e=>(0,d.tZ)(i.E,{column:e}),valueKey:"column_name"},A={...u,...c.P2}},783389:(e,t,r)=>{"use strict";r.d(t,{P2:()=>c,V7:()=>d,sy:()=>u});var n=r(61988),a=r(895826),o=r(355786),s=r(5364),i=r(945211);const l=e=>"horizontal"===(null==e?void 0:e.orientation)?{label:(0,n.t)("Y-axis"),description:(0,n.t)("Dimension to use on y-axis.")}:{label:(0,n.t)("X-axis"),description:(0,n.t)("Dimension to use on x-axis.")},c={label:e=>l(null==e?void 0:e.form_data).label,multi:!1,description:e=>l(null==e?void 0:e.form_data).description,validators:[a.Z],initialValue:(e,t)=>{var r,n;if(null!=t&&null!=(r=t.form_data)&&r.granularity_sqla&&(null==(n=t.form_data)||!n.x_axis)&&(null==e||!e.value))return t.form_data.granularity_sqla},default:void 0},d={isTemporal:!0,mapStateToProps:({datasource:e})=>{const t=(0,i.X)(e);return{options:t.temporalColumns,default:t.defaultTemporalColumn}}},u={initialValue:(e,t)=>{var r,n,a,l;if(null!=t&&null!=(r=t.controls)&&null!=(n=r.time_range)&&n.value||(0,o.Z)(e.value).findIndex((e=>"TEMPORAL_RANGE"===(null==e?void 0:e.operator)))>-1)return;if(null!=t&&null!=(a=t.form_data)&&a.granularity_sqla&&null!=t&&null!=(l=t.form_data)&&l.time_range)return[...(0,o.Z)(e.value),{clause:"WHERE",subject:t.form_data.granularity_sqla,operator:"TEMPORAL_RANGE",comparator:t.form_data.time_range,expressionType:"SIMPLE"}];const c=(null==t?void 0:t.datasource)&&(0,i.X)(t.datasource).defaultTemporalColumn;var d,u;return c?[...(0,o.Z)(e.value),{clause:"WHERE",subject:c,operator:"TEMPORAL_RANGE",comparator:(null==t||null==(d=t.common)||null==(u=d.conf)?void 0:u.DEFAULT_TIME_FILTER)||s.vM,expressionType:"SIMPLE"}]:void 0}}},539650:(e,t,r)=>{"use strict";r.d(t,{Z:()=>H});var n=r(441609),a=r.n(n),o=r(281545),s=r(45511),i=r(61988),l=r(237731),c=r(5364),d=r(375294),u=r(274029),p=r(662363),m=r(355786),h=r(497039),_=r(736846),f=r(806126),y=r(558842),E=r(535622),g=r(353769);const v=(0,o.Z)(),T=(0,s.Z)(),b=[5,10,25,50,100,500],S=document.getElementById("app"),{user:R}=JSON.parse((null==S?void 0:S.getAttribute("data-bootstrap"))||"{}"),A={type:"DatasourceControl",label:(0,i.t)("Datasource"),default:null,description:null,mapStateToProps:({datasource:e,form_data:t})=>({datasource:e,form_data:t,user:R})},C={type:"VizTypeControl",label:(0,i.t)("Visualization Type"),default:"table",description:(0,i.t)("The type of visualization to display")},I={type:"ColorPickerControl",label:(0,i.t)("Fixed Color"),description:(0,i.t)("Use this to define a static color for all circles"),default:{r:0,g:122,b:135,a:1},renderTrigger:!0},O={type:"ColorSchemeControl",label:(0,i.t)("Linear Color Scheme"),choices:()=>T.values().map((e=>[e.id,e.label])),default:T.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>T.getMap(),isLinear:!0,mapStateToProps:e=>(0,h.H)(e)},D={type:"SelectControl",freeForm:!0,label:E.m_.granularity,default:"one day",choices:[[null,(0,i.t)("all")],["PT5S",(0,i.t)("5 seconds")],["PT30S",(0,i.t)("30 seconds")],["PT1M",(0,i.t)("1 minute")],["PT5M",(0,i.t)("5 minutes")],["PT30M",(0,i.t)("30 minutes")],["PT1H",(0,i.t)("1 hour")],["PT6H",(0,i.t)("6 hour")],["P1D",(0,i.t)("1 day")],["P7D",(0,i.t)("7 days")],["P1W",(0,i.t)("week")],["week_starting_sunday",(0,i.t)("week starting Sunday")],["week_ending_saturday",(0,i.t)("week ending Saturday")],["P1M",(0,i.t)("month")],["P3M",(0,i.t)("quarter")],["P1Y",(0,i.t)("year")]],description:(0,i.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},w={type:"SelectControl",label:E.m_.time_grain_sqla,placeholder:(0,i.t)("None"),initialValue:(e,t)=>{var r,n;return(0,l.Z)(t)?null!=t&&t.metadata||"time_grain_sqla"in(null!=(r=null==t?void 0:t.form_data)?r:{})?null==t||null==(n=t.form_data)?void 0:n.time_grain_sqla:"P1D":e.value},description:(0,i.t)("Select a time grain for the visualization. The grain is the time interval represented by a single point on the chart."),mapStateToProps:({datasource:e})=>({choices:(null==e?void 0:e.time_grain_sqla)||[]}),visibility:_.Z},N={type:"DateFilterControl",freeForm:!0,label:E.m_.time_range,default:c.vM,description:(0,i.t)('This control filters the whole chart based on the selected time range. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},L={type:"SelectControl",freeForm:!0,label:(0,i.t)("Row limit"),clearable:!1,mapStateToProps:e=>{var t,r;return{maxValue:null==e||null==(t=e.common)||null==(r=t.conf)?void 0:r.SQL_MAX_ROW}},validators:[d.Z,(e,t)=>(0,u.Z)(e,(null==t?void 0:t.maxValue)||E.$z)],default:1e4,choices:(0,f.m)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,i.t)("Limits the number of the rows that are computed in the query that is the source of the data used for this chart.")},q={type:"CheckboxControl",label:(0,i.t)("Sort Descending"),default:!0,description:(0,i.t)("If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending."),visibility:({controls:e})=>Boolean((null==e?void 0:e.timeseries_limit_metric.value)&&!a()(null==e?void 0:e.timeseries_limit_metric.value))},x={type:"SelectControl",freeForm:!0,label:(0,i.t)("Series limit"),placeholder:(0,i.t)("None"),validators:[d.Z],choices:(0,f.m)(b),clearable:!0,description:(0,i.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},U={type:"SelectControl",freeForm:!0,label:(0,i.t)("Series limit"),placeholder:(0,i.t)("None"),validators:[d.Z],choices:(0,f.m)(b),description:(0,i.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},P={type:"SelectControl",freeForm:!0,label:(0,i.t)("Y Axis Format"),renderTrigger:!0,default:y.Ul,choices:y.F6,description:y.YD,tokenSeparators:["\n","\t",";"],filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t),mapStateToProps:e=>{var t,r;return{choices:(null==(t=e.controls)||null==(r=t.comparison_type)?void 0:r.value)===p.wj.Percentage?y.F6.filter((e=>e[0].includes("%"))):y.F6}}},Z={type:"CurrencyControl",label:(0,i.t)("Currency format"),renderTrigger:!0},M={type:"SelectControl",freeForm:!0,label:(0,i.t)("Time format"),renderTrigger:!0,default:y._r,choices:y.HC,description:y.oq,filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t)},F={type:"ColorSchemeControl",label:(0,i.t)("Color Scheme"),default:v.getDefaultKey(),renderTrigger:!0,choices:()=>v.keys().map((e=>[e,e])),description:(0,i.t)("The color scheme for rendering chart"),schemes:()=>v.getMap(),mapStateToProps:e=>(0,h.H)(e)},k={type:"CheckboxControl",label:(0,i.t)("Truncate Metric"),default:!0,description:(0,i.t)("Whether to truncate metrics")},Q={type:"CheckboxControl",label:(0,i.t)("Show empty columns"),default:!0,description:(0,i.t)("Show empty columns")},$={type:"HiddenControl",initialValue:(e,t)=>{var r;return Object.fromEntries((0,m.Z)(null==t||null==(r=t.datasource)?void 0:r.columns).filter((e=>e.is_dttm)).map((e=>{var t;return[null!=(t=e.column_name)?t:e.name,e.is_dttm]})))}},B={type:"CheckboxControl",label:(0,i.t)("Sort by metric"),description:(0,i.t)("Whether to sort results by the selected metric in descending order.")},H={metrics:g.ql,metric:g.iQ,datasource:A,viz_type:C,color_picker:I,metric_2:g.db,linear_color_scheme:O,secondary_metric:g.iR,groupby:g.xM,columns:g.lC,granularity:D,granularity_sqla:g.UQ,time_grain_sqla:w,time_range:N,row_limit:L,limit:x,timeseries_limit_metric:g.x$,orderby:g.x$,order_desc:q,series:g.Z8,entity:g.QF,x:g.aG,y:g.$c,size:g.sH,y_axis_format:P,x_axis_time_format:M,adhoc_filters:g.RW,color_scheme:F,series_columns:g.lC,series_limit:U,series_limit_metric:g.x$,legacy_order_by:g.x$,truncate_metric:k,x_axis:g.Pi,show_empty_columns:Q,temporal_columns_lookup:$,currency_format:Z,sort_by_metric:B}},338575:(e,t,r)=>{"use strict";r.d(t,{D_:()=>l,Id:()=>u,It:()=>c,JQ:()=>d,i3:()=>o,pp:()=>n,s2:()=>a,xN:()=>s,zy:()=>i});const n=e=>{var t,r;return(null==e||null==(t=e.standardizedFormData)?void 0:t.controls)&&(null==e||null==(r=e.standardizedFormData)?void 0:r.memorizedFormData)&&Array.isArray(e.standardizedFormData.controls.metrics)&&Array.isArray(e.standardizedFormData.controls.columns)};var a;!function(e){e.None="None",e.GreaterThan=">",e.LessThan="<",e.GreaterOrEqual="≥",e.LessOrEqual="≤",e.Equal="=",e.NotEqual="≠",e.Between="< x <",e.BetweenOrEqual="≤ x ≤",e.BetweenOrLeftEqual="≤ x <",e.BetweenOrRightEqual="< x ≤"}(a||(a={}));const o=[a.Between,a.BetweenOrEqual,a.BetweenOrLeftEqual,a.BetweenOrRightEqual];function s(e){return!!e&&"column_name"in e}function i(e){return"column_name"in e&&"expression"in e&&!!e.expression}function l(e){return null!==e}function c(e){return!!e&&"columns"in e&&!("sqlEditorId"in e)}function d(e){return!!e&&"results"in e&&"sqlEditorId"in e}var u;!function(e){e.Name="name",e.Max="max",e.Min="min",e.Sum="sum",e.Avg="avg"}(u||(u={}))},558842:(e,t,r)=>{"use strict";r.d(t,{F6:()=>u,HC:()=>m,Ul:()=>h,YD:()=>i,_r:()=>_,oq:()=>p,pj:()=>l,u6:()=>c});var n=r(61988),a=r(767190),o=r(645636),s=r(778900);const i=(0,n.t)("D3 format syntax: https://github.com/d3/d3-format"),l=(0,n.t)('Only applies when "Label Type" is set to show values.'),c=(0,n.t)('Only applies when "Label Type" is not set to a percentage.'),d=[",d",".1s",".3s",",.1%",".2%",".3%",".4r",",.1f",",.2f",",.3f","+,","$,.2f"].map((e=>[e,`${e} (${(0,a.JB)(e).preview()})`])),u=[[o.default.SMART_NUMBER,(0,n.t)("Adaptive formatting")],["~g",(0,n.t)("Original value")],...d,["DURATION",(0,n.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,n.t)("Duration in ms (1.40008 => 1ms 400µs 80ns)")]],p=(0,n.t)("D3 time format syntax: https://github.com/d3/d3-time-format"),m=[[s.y,(0,n.t)("Adaptive formatting")],["%d/%m/%Y","%d/%m/%Y | 14/01/2019"],["%m/%d/%Y","%m/%d/%Y | 01/14/2019"],["%Y-%m-%d","%Y-%m-%d | 2019-01-14"],["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M:%S | 2019-01-14 01:32:10"],["%d-%m-%Y %H:%M:%S","%d-%m-%Y %H:%M:%S | 14-01-2019 01:32:10"],["%H:%M:%S","%H:%M:%S | 01:32:10"]],h=u[0][0],_=m[0][0]},497039:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});const n=e=>{var t,r,n,a,o,s,i;const l=null==e||null==(t=e.form_data)?void 0:t.dashboardId;return{chartId:null==e||null==(r=e.slice)?void 0:r.slice_id,dashboardId:l,hasDashboardColorScheme:!!l&&!(null==e||null==(n=e.form_data)||!n.dashboard_color_scheme),hasCustomLabelsColor:Object.keys((null==e||null==(a=e.form_data)?void 0:a.label_colors)||{}).length>0,colorNamespace:null==e||null==(o=e.form_data)?void 0:o.color_namespace,mapLabelsColors:(null==e||null==(s=e.form_data)?void 0:s.map_label_colors)||{},sharedLabelsColors:(null==e||null==(i=e.form_data)?void 0:i.shared_label_colors)||[]}}},419835:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var n=r(46078);const a=e=>null!=e&&e.hasOwnProperty("metrics")?(null==e?void 0:e.metrics)||[]:n.BH},736846:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(472813);function a({controls:e}){if(null==e||!e.x_axis)return!0;const t=null==e?void 0:e.x_axis,r=null==t?void 0:t.value;return!!(0,n.GA)(r)||!!(0,n.s9)(r)&&!(null==(a=(null!=(o=null==t?void 0:t.options)?o:[]).find((e=>(null==e?void 0:e.column_name)===r)))||!a.is_dttm);var a,o}},389368:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,q:()=>i});var n=r(667294),a=r(593362),o=r(539650);function s(e){return"string"==typeof e&&e in a.default?a.default[e]:e}function i(e,t={}){if("string"==typeof e&&e in o.Z){const r=e;return{name:r,config:{...o.Z[r],...t[r]}}}if(!e||"string"==typeof e||(0,n.isValidElement)(e))return e;if("name"in e&&"config"in e)return{...e,config:{...e.config,type:s(e.config.type)}};if("override"in e&&e.name in o.Z){const{name:t,override:r}=e;return{name:t,config:{...o.Z[t],...r}}}return null}},320002:(e,t,r)=>{"use strict";r.d(t,{u:()=>o});var n=r(601875),a=r(338575);const o=(0,n.Z)(class{constructor(){this.controls=void 0,this.controls={metrics:[],columns:[]}}setStandardizedControls(e){if((0,a.pp)(e)){const{controls:t}=e.standardizedFormData;this.controls={metrics:t.metrics,columns:t.columns}}}shiftMetric(){return this.controls.metrics.shift()}shiftColumn(){return this.controls.columns.shift()}popAllMetrics(){return this.controls.metrics.splice(0,this.controls.metrics.length)}popAllColumns(){return this.controls.columns.splice(0,this.controls.columns.length)}clear(){this.controls={metrics:[],columns:[]}}})},945211:(e,t,r)=>{"use strict";r.d(t,{X:()=>s,x:()=>i});var n=r(355786),a=r(237731),o=r(338575);function s(e){const t={temporalColumns:[],defaultTemporalColumn:void 0};var r,s,i;return(0,o.It)(e)&&(t.temporalColumns=(0,n.Z)(e.columns).filter((e=>e.is_dttm))),(0,o.JQ)(e)&&(t.temporalColumns=(0,n.Z)(e.columns).filter((e=>e.is_dttm))),(0,o.It)(e)&&(t.defaultTemporalColumn=e.main_dttm_col),(0,a.Z)(t.defaultTemporalColumn)||(t.defaultTemporalColumn=null!=(r=null==(s=t.temporalColumns[0])?void 0:s.column_name)?r:null==(i=t.temporalColumns[0])?void 0:i.name),t}function i(e,t){const r=s(t).temporalColumns;for(let t=0;t<r.length;t+=1)if(r[t].column_name===e)return!0;return!1}},806126:(e,t,r)=>{"use strict";function n(e){return e.map((e=>Array.isArray(e)?e:[e,e.toString()]))}function a(e,t,r=1){const n=[];for(let a=e;a<=t;a+=r)n.push([a,a.toString()]);return n}r.d(t,{B:()=>a,m:()=>n})},719427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(590537),a=r(601875);class o extends n.Z{constructor(){super({name:"ChartBuildQuery",overwritePolicy:n.r.Warn})}}const s=(0,a.Z)(o)},837687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(590537),a=r(601875);class o extends n.Z{constructor(){super({name:"ChartControlPanel"})}}const s=(0,a.Z)(o)},311064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(590537),a=r(601875);class o extends n.Z{constructor(){super({name:"ChartMetadata",overwritePolicy:n.r.Warn})}}const s=(0,a.Z)(o)},616355:(e,t,r)=>{"use strict";var n,a,o;r.d(t,{Df:()=>o,Tr:()=>a,ZP:()=>c,cg:()=>n,eH:()=>i,t$:()=>s,we:()=>l}),function(e){e.InteractiveChart="INTERACTIVE_CHART",e.NativeFilter="NATIVE_FILTER",e.DrillToDetail="DRILL_TO_DETAIL",e.DrillBy="DRILL_BY"}(n||(n={})),function(e){e.Explore="EXPLORE",e.Dashboard="DASHBOARD",e.FilterBar="FILTER_BAR",e.FilterConfigModal="FILTER_CONFIG_MODAL",e.Embedded="EMBEDDED"}(a||(a={})),function(e){e.Deprecated="DEPRECATED",e.Featured="FEATURED"}(o||(o={}));const s={[o.Deprecated]:"This chart uses features or modules which are no longer actively maintained. It will eventually be replaced or removed.",[o.Featured]:"This chart was tested and verified, so the overall experience should be stable."},i={[o.Deprecated]:{weight:-.1},[o.Featured]:{weight:.1}};var l;!function(e){e.Category="category",e.Value="value",e.Time="time",e.Log="log"}(l||(l={}));const c={}},328062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_NAMESPACE:()=>d,default:()=>l,getColor:()=>p,getNamespace:()=>u,getScale:()=>m});var n=r(150361),a=r.n(n),o=r(997466),s=r(281545),i=r(786041);class l{constructor(e){this.name=void 0,this.forcedItems=void 0,this.scales=void 0,this.name=e,this.scales={},this.forcedItems={}}getScale(e){var t,r;const n=null!=(t=null!=e?e:(0,s.Z)().getDefaultKey())?t:"",a=(0,s.Z)().get(n);return new o.Z(null!=(r=null==a?void 0:a.colors)?r:[],this.forcedItems,e)}setColor(e,t){return this.forcedItems[(0,i.Z)(e)]=t,this}resetColors(){this.forcedItems={}}resetColorsForLabels(e=[]){const t=a()(this.forcedItems);e.forEach((e=>{t.hasOwnProperty(e)&&delete t[e]})),this.forcedItems={...t}}}const c={},d="GLOBAL";function u(e=d){const t=c[e];if(t)return t;const r=new l(e);return c[e]=r,r}function p(e,t,r){return u(r).getScale(t).getColor(e)}function m(e,t){return u(t).getScale(e)}},997466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(899481),a=r(454732),o=r(786041),s=r(677205),i=r(25130),l=r(593185);class c extends a.Z{constructor(e,t={},r){super(((e,t)=>this.getColor(e,t,r))),this.originColors=void 0,this.colors=void 0,this.scale=void 0,this.forcedColors=void 0,this.labelsColorMapInstance=void 0,this.chartLabelsColorMap=void 0,this.multiple=void 0,this.originColors=e,this.colors=e,this.chartLabelsColorMap=new Map,this.labelsColorMapInstance=(0,s.ZP)(),this.multiple=0,this.scale=(0,n.Z)(),this.scale.range(e),Object.entries(t).forEach((([r,n])=>{"number"==typeof n&&(t[r]=e[n%e.length])})),this.forcedColors=t}incrementColorRange(){const e=Math.floor(this.domain().length/this.originColors.length);if(e>this.multiple){this.multiple=e;const t=(0,i.Gh)(this.originColors,e),r=this.originColors.concat(t);this.range(r),this.colors=r}}getColor(e,t,r){var n;const a=(0,o.Z)(e),i=null==(n=this.forcedColors)?void 0:n[a],{source:c}=this.labelsColorMapInstance,d=c===s.Fx.Dashboard?this.labelsColorMapInstance.getColorMap():this.chartLabelsColorMap,u=d.has(a);let p=i||(u?d.get(a):this.scale(a));return i||u||((0,l.cr)(l.TT.UseAnalagousColors)&&this.incrementColorRange(),(0,l.cr)(l.TT.AvoidColorsCollision)&&this.isColorUsed(p)&&(p=this.getNextAvailableColor(a,p))),this.chartLabelsColorMap.set(a,p),t&&this.labelsColorMapInstance.addSlice(a,p,t,r),p}isColorUsed(e){return this.getColorUsageCount(e)>0}getColorUsageCount(e){return Array.from(this.chartLabelsColorMap.values()).filter((t=>t===e)).length}getNextAvailableColor(e,t){const r=new Map(this.colors.map((e=>[e,this.getColorUsageCount(e)]))),n=Array.from(this.chartLabelsColorMap.keys()),a=n.indexOf(e),o=(()=>{const e=a>0?n[a-1]:null,t=a<n.length-1?n[a+1]:null;return[e?this.chartLabelsColorMap.get(e):null,t?this.chartLabelsColorMap.get(t):null].filter((e=>e))})(),s=e=>(r.get(e)||0)+(o.includes(e)?100:0),i=this.colors.find((e=>0===(r.get(e)||0)));return i||this.colors.filter((e=>e!==t)).reduce(((e,t)=>{const r=s(e);return s(t)<r?t:e}),t)}setColor(e,t){return this.forcedColors[(0,o.Z)(e)]=t,this}getColorMap(){const e={};return this.scale.domain().forEach((t=>{e[t.toString()]=this.scale(t)})),{...e,...this.forcedColors}}copy(){const e=new c(this.scale.range(),this.forcedColors);return e.forcedColors={...this.forcedColors},e.domain(this.domain()),e.unknown(this.unknown()),e}domain(e){return void 0===e?this.scale.domain():(this.scale.domain(e),this)}range(e){return void 0===e?this.scale.range():(this.colors=e,this.scale.range(e),this)}unknown(e){return void 0===e?this.scale.unknown():(this.scale.unknown(e),this)}}const d=c},677205:(e,t,r)=>{"use strict";r.d(t,{Fx:()=>n,ZP:()=>s,eY:()=>o});var n,a=r(601875);!function(e){e[e.Dashboard=0]="Dashboard",e[e.Explore=1]="Explore"}(n||(n={}));class o{constructor(){this.chartsLabelsMap=void 0,this.colorMap=void 0,this.source=void 0,this.chartsLabelsMap=new Map,this.colorMap=new Map,this.source=n.Dashboard}updateColorMap(e,t,r=!1){const n=this.colorMap;r||n.clear(),this.chartsLabelsMap.forEach(((a,o)=>{const{labels:s,ownScheme:i}=a,l=t||i,c=e.getScale(l);s.forEach((e=>{if(!r||!this.colorMap.has(e)){const t=c.getColor(e,o,l);n.set(e,t)}}))})),this.colorMap=n}getColorMap(){return this.colorMap}addSlice(e,t,r,a){const o=this.chartsLabelsMap.get(r)||{labels:[],scheme:void 0,ownScheme:void 0},{labels:s}=o;s.includes(e)||(s.push(e),this.chartsLabelsMap.set(r,{labels:s,scheme:a,ownScheme:o.ownScheme})),this.source===n.Dashboard&&this.colorMap.set(e,t)}setOwnColorScheme(e,t){const r=this.chartsLabelsMap.get(e);r&&this.chartsLabelsMap.set(e,{...r,ownScheme:t})}removeSlice(e){if(this.source!==n.Dashboard)return;this.chartsLabelsMap.delete(e);const t=new Map;this.chartsLabelsMap.forEach((e=>{const{labels:r}=e;r.forEach((e=>{t.set(e,this.colorMap.get(e))}))})),this.colorMap=t}clear(){this.colorMap.clear()}reset(){this.clear(),this.chartsLabelsMap.clear()}}const s=(0,a.Z)(o)},786041:(e,t,r)=>{"use strict";function n(e){return String(e).trim()}r.d(t,{Z:()=>n})},25130:(e,t,r)=>{"use strict";r.d(t,{Gh:()=>i,Qg:()=>s,Zf:()=>l,oo:()=>c,vq:()=>d});var n=r(717621),a=r.n(n);const o=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/;function s(e,t=186){let r=0,n=0,a=0;if(e.length>7){const t=o.exec(e);if(!t)throw new Error(`Invalid color: ${e}`);r=parseInt(t[1],10),n=parseInt(t[2],10),a=parseInt(t[3],10)}else{let t=e;if(t.startsWith("#")&&(t=t.substring(1)),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]].join("")),6!==t.length)throw new Error(`Invalid color: ${e}`);r=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16)}return.299*r+.587*n+.114*a>t?"#000":"#FFF"}function i(e,t){const r=[],n=e.map((e=>a()(e).analogous(t+3).slice(3)));for(;null!=(o=n[n.length-1])&&o.length;){var o;n.forEach((e=>{const t=e.shift();r.push(t.toHexString())}))}return r}function l(e,t){if(t>1||t<0)throw new Error(`The opacity should between 0 and 1, but got: ${t}`);return`${e}${`0${Math.round(255*t).toString(16).toUpperCase()}`.slice(-2)}`}function c(e){let t="0",r="0",n="0";return 4===e.length?(t=`0x${e[1]}${e[1]}`,r=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`):7===e.length&&(t=`0x${e[1]}${e[2]}`,r=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`),`rgb(${+t}, ${+r}, ${+n})`}function d(e,t,r){let n=e.toString(16),a=t.toString(16),o=r.toString(16);return 1===n.length&&(n=`0${n}`),1===a.length&&(a=`0${a}`),1===o.length&&(o=`0${o}`),`#${n}${a}${o}`}},178186:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(701469),a=r.n(n),o=r(730236),s=r.n(o),i=r(667294),l=r(87627),c=r(882781),d=r(714390),u=r(497341),p=r(255582),m=r(593185),h=r(135944);const _=function({source:e,htmlSanitization:t=!0,htmlSchemaOverrides:r={}}){const n=(0,m.cr)(m.TT.EscapeMarkdownHtml),o=(0,i.useMemo)((()=>{const e=[];if(!n&&(e.push(u.Z),t)){const t=function(e,t){return s()(e,t,((e,t)=>a()(e)?e.concat(t):void 0))}(c.R,r);e.push([d.Z,t])}return e}),[n,t,r]);return(0,h.tZ)(l.D,{rehypePlugins:o,remarkPlugins:[p.Z],skipHtml:!1,transformLinkUri:null,children:e})}},785716:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var n=r(667294);function a(e,t){const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}},903297:(e,t,r)=>{"use strict";r.d(t,{B:()=>a,Z:()=>o});var n=r(667294);const a={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},o=()=>{const[e,t]=(0,n.useState)(!0),r=(0,n.useRef)(null),[a,o]=(0,n.useState)(0),[s,i]=(0,n.useState)(0);return(0,n.useEffect)((()=>{var e,t,n,a;o(null!=(e=null==(t=r.current)?void 0:t.offsetWidth)?e:0),i(null!=(n=null==(a=r.current)?void 0:a.scrollWidth)?n:0)})),(0,n.useEffect)((()=>{t(a<s)}),[a,s]),[r,e]}},653652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=class{constructor(e){this.name="TypedRegistry",this.records=void 0,this.records=e}get(e){return this.records[e]}set(e,t){this.records[e]=t}}},667706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(46078);class a{constructor(e){this.id=void 0,this.type=void 0;const[t,r]=e.split("__");this.id=parseInt(t,10),this.type=n.i9.Table,this.type="query"===r?n.i9.Query:this.type}toString(){return`${this.id}__${this.type}`}toObject(){return{id:this.id,type:this.type}}}},861654:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(365946),a=r(667706),o=r(678444),s=r(111146);const i=e=>[e];function l(e,t){const{queryFields:r,buildQuery:l=i}="function"==typeof t?{buildQuery:t,queryFields:{}}:t||{};let c=l((0,n.Z)(e,r));return c.forEach((e=>{Array.isArray(e.post_processing)&&(e.post_processing=e.post_processing.filter(Boolean))})),(0,s.SR)(e)&&(c=c.map((t=>(0,o.T)(e,t)))),{datasource:new a.Z(e.datasource).toObject(),force:e.force||!1,queries:c,form_data:e,result_format:e.result_format||"json",result_type:e.result_type||"full"}}},365946:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(62446),a=r(46306),o=r(478483);function s(e){let t=e;return e.includes("--")&&(t=`${e}\n`),`(${t})`}var i=r(569363),l=r(5364),c=r(237731);function d(e,t){var r,d;const{annotation_layers:u=[],extra_form_data:p,time_range:m,since:h,until:_,row_limit:f,row_offset:y,order_desc:E,limit:g,timeseries_limit_metric:v,granularity:T,url_params:b={},custom_params:S={},series_columns:R,series_limit:A,series_limit_metric:C,...I}=e,{adhoc_filters:O=[],filters:D=[],custom_form_data:w={},...N}=p||{},L=Number(f),q=Number(y),{metrics:x,columns:U,orderby:P}=(0,i.Z)(I,t),Z=function(e){const t={},r=[],n={},a={filters:r,extras:n,applied_time_extras:t},o={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"};return(e.extra_filters||[]).forEach((e=>{if(e.col in o){const r=e.col;a[o[r]]=e.val,t[r]=e.val}else r.push(e)})),n.time_grain_sqla=a.time_grain_sqla||e.time_grain_sqla,a.granularity=a.granularity_sqla||e.granularity||e.granularity_sqla,delete a.granularity_sqla,delete a.time_grain_sqla,a}(e),{filters:M}=Z,F={filters:[...M,...D],adhoc_filters:[...e.adhoc_filters||[],...O]},k=function(e){const{adhoc_filters:t,extras:r={},filters:n=[],where:i}=e,l=n,c=[];i&&c.push(i);const d=[];return(t||[]).forEach((e=>{const{clause:t}=e;if((0,a.Ki)(e)){const r=(0,o.Z)(e);"WHERE"===t&&l.push(r)}else{const{sqlExpression:r}=e;"WHERE"===t?c.push(r):d.push(r)}})),r.having=d.map(s).join(" AND "),r.where=c.map(s).join(" AND "),{filters:l,extras:r}}({...e,...Z,...F});let Q={time_range:m||void 0,since:h||void 0,until:_||void 0,granularity:T||void 0,...Z,...k,columns:U,metrics:x,orderby:P,annotation_layers:u,row_limit:null==f||Number.isNaN(L)?void 0:L,row_offset:null==y||Number.isNaN(q)?void 0:q,series_columns:R,series_limit:null!=A?A:(0,c.Z)(g)?Number(g):0,series_limit_metric:null!=(r=null!=(d=(e=>{if((0,n.I0)(e))return e})(C))?d:v)?r:void 0,order_desc:void 0===E||E,url_params:b||void 0,custom_params:S};return Q=function(e,t){const r={...e},{extras:n={}}=r;return Object.entries(l.gn).forEach((([e,n])=>{const a=t[e];void 0!==a&&(r[n]=a)})),l.fn.forEach((e=>{e in t&&(n[e]=t[e])})),Object.keys(n).length>0&&(r.extras=n),r}(Q,N),{...Q,custom_form_data:w}}},5364:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,Ci:()=>s,NU:()=>l,W3:()=>n,fn:()=>o,gn:()=>i,vM:()=>a});const n="__timestamp",a="No filter",o=["relative_start","relative_end","time_grain_sqla"],s=["adhoc_filters","filters","interactive_groupby","interactive_highlight","interactive_drilldown","custom_form_data"],i={granularity:"granularity",granularity_sqla:"granularity",time_column:"time_column",time_grain:"time_grain",time_range:"time_range"},l=Object.keys(i),c=[...l,...o]},478483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(46306);function a(e){const{subject:t}=e;if((0,n._l)(e)){const{operator:r}=e;return{col:t,op:r}}if((0,n.kC)(e)){const{operator:r}=e;return{col:t,op:r,val:e.comparator}}const{operator:r}=e;return{col:t,op:r,val:e.comparator}}},569363:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(61988),a=r(274765),o=r(310581),s=r(956652),i=r(920620);function l(e,t){const r={metric:"metrics",metric_2:"metrics",secondary_metric:"metrics",x:"metrics",y:"metrics",size:"metrics",all_columns:"columns",series:"groupby",order_by_cols:"orderby",...t},{query_mode:l,...c}=e;let d=[],u=[],p=[];return Object.entries(c).forEach((([e,t])=>{if(null==t)return;let n=r[e]||e;l===i.n.Aggregate&&"columns"===n||(l!==i.n.Raw||"groupby"!==n&&"metrics"!==n)&&("groupby"===n&&(n="columns"),"metrics"===n?u=u.concat(t):"columns"===n?d=d.concat(t):"orderby"===n&&(p=p.concat(t)))})),{columns:(0,a.Z)(d.filter((e=>""!==e)),o.Z),metrics:l===i.n.Raw?void 0:(0,a.Z)(u,s.Z),orderby:p.length>0?p.map((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){throw new Error((0,n.t)("Found invalid orderby options"))}return e})):void 0}}},844818:(e,t,r)=>{"use strict";r.d(t,{HR:()=>h,J2:()=>u,MV:()=>p,O$:()=>m,T6:()=>d,Ue:()=>l,d7:()=>_,oz:()=>c});var n=r(332103),a=r(61988),o=r(516416),s=r(343716);const i={400:"Bad request",401:"Unauthorized",402:"Payment required",403:"Forbidden",404:"Not found",405:"Method not allowed",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",410:"Gone",411:"Length required",412:"Precondition failed",413:"Payload too large",414:"URI too long",415:"Unsupported media type",416:"Range not satisfiable",417:"Expectation failed",418:"I'm a teapot",500:"Server error",501:"Not implemented",502:"Bad gateway",503:"Service unavailable",504:"Gateway timeout",505:"HTTP version not supported",506:"Variant also negotiates",507:"Insufficient storage",508:"Loop detected",510:"Not extended",511:"Network authentication required",599:"Network error"};function l(e){return!(0,n.Pb)(e)&&(0,n.Kv)(e)}function c(e){if(l(e)){for(const[t,r]of Object.entries(i))if(new RegExp(`${t}|${r}`,"i").test(e))return(0,a.t)(r);return(0,a.t)("Unknown error")}return e}function d(e){return i[e]||null}function u(e,t){return("status"in t?d(t.status):null)||c(e)}function p(e){let t={...e};var r,n,s;(t.errors&&t.errors.length>0&&(t.error=t.description=t.errors[0].message,t.link=null==(r=t.errors[0])||null==(n=r.extra)?void 0:n.link),!t.error&&t.message)&&("object"==typeof t.message&&(t.error=(null==(s=Object.values(t.message)[0])?void 0:s[0])||(0,a.t)("Invalid input")),"string"==typeof t.message&&(l(t.message)?t.error=u(t.message,t):t.error=t.message));return t.stack?t={...t,error:(0,a.t)("Unexpected error: ")+(t.description||(0,a.t)("(no description, click to see stack trace)")),stacktrace:t.stack}:t.responseText&&t.responseText.indexOf("CSRF")>=0&&(t={...t,error:(0,a.t)(o.tU.SESSION_TIMED_OUT)}),{...t,error:t.error}}function m(e){return new Promise((t=>{if("string"==typeof e)return void t({error:c(e)});if(e instanceof TypeError&&"Failed to fetch"===e.message)return void t({error:(0,a.t)("Network error")});if("timeout"in e&&"statusText"in e&&"timeout"===e.statusText)return void t({...e,error:(0,a.t)("Request timed out"),errors:[{error_type:s.C5.FRONTEND_TIMEOUT_ERROR,extra:{timeout:e.timeout/1e3,issue_codes:[{code:1e3,message:(0,a.t)("Issue 1000 - The dataset is too large to query.")},{code:1001,message:(0,a.t)("Issue 1001 - The database is under an unusual load.")}]},level:"error",message:"Request timed out"}]});const r=e instanceof Response?e:e.response;if(r&&!r.bodyUsed)return void r.clone().json().then((e=>{const{url:n,status:a,statusText:o,redirected:s,type:i}=r,l={...e,url:n,status:a,statusText:o,redirected:s,type:i};t(p(l))})).catch((()=>{r.text().then((e=>{t({...r,error:u(e,r)})}))}));let n=e.statusText||e.message;n||(console.error("non-standard error:",e),n=(0,a.t)("An error occurred")),t({...r,error:c(n)})}))}async function h(e,t){const{error:r,message:n}=await m(e);let o=(0,a.t)("Sorry, an unknown error occurred.");return r&&(o=(0,a.t)("Sorry, there was an error saving this %s: %s",t,r)),"string"==typeof n&&"Forbidden"===n&&(o=(0,a.t)("You do not have permission to edit this %s",t)),o}function _(e,t){let r=e;const n=(null==t?void 0:t.message)||(null==t?void 0:t.error);return n&&(r=`${r}:\n${n}`),r}},310581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(472813);function a(e){return(0,n.s9)(e)?e:null!=e&&e.label?e.label:null==e?void 0:e.sqlExpression}},956652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(62446);function a(e){return(0,n.AG)(e)?e:e.label?e.label:(0,n.nX)(e)?`${e.aggregate}(${e.column.columnName||e.column.column_name})`:e.sqlExpression}},111146:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>i,M8:()=>l,SR:()=>s});var n=r(472813),a=r(5364),o=r(310581);const s=e=>(0,n.Gk)(e.x_axis),i=e=>{if(e.granularity_sqla||e.x_axis)return s(e)?e.x_axis:a.W3},l=e=>{const t=i(e);if(t)return(0,o.Z)(t)}},678444:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var n=r(957557),a=r.n(n),o=r(472813),s=r(111146);function i(e,t){if(!(0,s.SR)(e))return t;const{columns:r,extras:n}=t,i=[...r||[]],l=null==r?void 0:r.findIndex((t=>(0,o.s9)(t)&&(0,o.s9)(e.x_axis)&&t===e.x_axis||(0,o.GA)(t)&&(0,o.GA)(e.x_axis)&&t.sqlExpression===e.x_axis.sqlExpression));if(void 0!==l&&l>-1&&e.x_axis&&Array.isArray(r)){(0,o.GA)(r[l])?i[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",...r[l]}:i[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:e.x_axis,label:e.x_axis,expressionType:"SQL"};const s=a()(t,["is_timeseries"]);return s.columns=i,s}return t}},662363:(e,t,r)=>{"use strict";var n,a;r.d(t,{ZP:()=>o,su:()=>n,wj:()=>a}),function(e){e.Mean="mean",e.Sum="sum",e.Std="std",e.Cumsum="cumsum"}(n||(n={})),function(e){e.Values="values",e.Difference="difference",e.Percentage="percentage",e.Ratio="ratio"}(a||(a={}));const o={}},472813:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&void 0!==(null==e?void 0:e.sqlExpression)&&void 0!==(null==e?void 0:e.label)&&(void 0===(null==e?void 0:e.expressionType)||"SQL"===(null==e?void 0:e.expressionType))}function o(e){return n(e)||a(e)}r.d(t,{GA:()=>a,Gk:()=>o,ZP:()=>s,s9:()=>n});const s={}},10916:(e,t,r)=>{"use strict";var n,a;function o(e){return void 0===e.filterType&&e.hasOwnProperty("values")}function s(e){return"filter_select"===e.filterType&&e.hasOwnProperty("values")}function i(e){return e.type===n.NativeFilter}function l(e){var t,r;return i(e)&&(null==(t=e.dataMask)||null==(r=t.filterState)?void 0:r.value)}function c(e){return e.type===n.Divider}r.d(t,{A8:()=>s,BE:()=>n,S0:()=>l,ZP:()=>d,gT:()=>a,kI:()=>i,nY:()=>c,w0:()=>o}),function(e){e.NativeFilter="NATIVE_FILTER",e.Divider="DIVIDER"}(n||(n={})),function(e){e.NativeFilters="nativeFilters",e.CrossFilters="crossFilters"}(a||(a={}));const d={}},46078:(e,t,r)=>{"use strict";var n;r.d(t,{BH:()=>a,ZP:()=>o,i9:()=>n}),function(e){e.Table="table",e.Query="query",e.Dataset="dataset",e.SlTable="sl_table",e.SavedQuery="saved_query"}(n||(n={}));const a=[{metric_name:"COUNT(*)",expression:"COUNT(*)"}],o={}},46306:(e,t,r)=>{"use strict";r.d(t,{Ki:()=>a,VK:()=>l,_l:()=>s,jz:()=>o,kC:()=>i});var n=r(631612);function a(e){return"SIMPLE"===e.expressionType}function o(e){return"SQL"===e.expressionType}function s(e){return(0,n.CW)(e.operator)}function i(e){return(0,n.VU)(e.operator)}function l(e){return(0,n.XA)(e.operator)}},62446:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&"SIMPLE"===(null==e?void 0:e.expressionType)}function o(e){return"string"!=typeof e&&"SQL"===(null==e?void 0:e.expressionType)}function s(e){return n(e)||a(e)||o(e)}r.d(t,{AG:()=>n,I0:()=>s,ZP:()=>i,nX:()=>a,q5:()=>o});const i={}},631612:(e,t,r)=>{"use strict";r.d(t,{CW:()=>a,VU:()=>s,XA:()=>l});const n=new Set(["IS NOT NULL","IS NULL"]);function a(e){return n.has(e)}const o=new Set(["==","!=",">","<",">=","<=","ILIKE","LIKE","NOT LIKE","REGEX","TEMPORAL_RANGE"]);function s(e){return o.has(e)}const i=new Set(["IN","NOT IN"]);function l(e){return i.has(e)}},343716:(e,t,r)=>{"use strict";r.d(t,{C5:()=>o,Qn:()=>d,Tb:()=>i,WN:()=>s,YC:()=>m,ZP:()=>h,eh:()=>u,pY:()=>p,sn:()=>l,yv:()=>c});var n=r(46078),a=r(88889);const o={FRONTEND_CSRF_ERROR:"FRONTEND_CSRF_ERROR",FRONTEND_NETWORK_ERROR:"FRONTEND_NETWORK_ERROR",FRONTEND_TIMEOUT_ERROR:"FRONTEND_TIMEOUT_ERROR",GENERIC_DB_ENGINE_ERROR:"GENERIC_DB_ENGINE_ERROR",COLUMN_DOES_NOT_EXIST_ERROR:"COLUMN_DOES_NOT_EXIST_ERROR",TABLE_DOES_NOT_EXIST_ERROR:"TABLE_DOES_NOT_EXIST_ERROR",SCHEMA_DOES_NOT_EXIST_ERROR:"SCHEMA_DOES_NOT_EXIST_ERROR",CONNECTION_INVALID_USERNAME_ERROR:"CONNECTION_INVALID_USERNAME_ERROR",CONNECTION_INVALID_PASSWORD_ERROR:"CONNECTION_INVALID_PASSWORD_ERROR",CONNECTION_INVALID_HOSTNAME_ERROR:"CONNECTION_INVALID_HOSTNAME_ERROR",CONNECTION_PORT_CLOSED_ERROR:"CONNECTION_PORT_CLOSED_ERROR",CONNECTION_INVALID_PORT_ERROR:"CONNECTION_INVALID_PORT_ERROR",CONNECTION_HOST_DOWN_ERROR:"CONNECTION_HOST_DOWN_ERROR",CONNECTION_ACCESS_DENIED_ERROR:"CONNECTION_ACCESS_DENIED_ERROR",CONNECTION_UNKNOWN_DATABASE_ERROR:"CONNECTION_UNKNOWN_DATABASE_ERROR",CONNECTION_DATABASE_PERMISSIONS_ERROR:"CONNECTION_DATABASE_PERMISSIONS_ERROR",CONNECTION_MISSING_PARAMETERS_ERROR:"CONNECTION_MISSING_PARAMETERS_ERROR",OBJECT_DOES_NOT_EXIST_ERROR:"OBJECT_DOES_NOT_EXIST_ERROR",SYNTAX_ERROR:"SYNTAX_ERROR",CONNECTION_DATABASE_TIMEOUT:"CONNECTION_DATABASE_TIMEOUT",VIZ_GET_DF_ERROR:"VIZ_GET_DF_ERROR",UNKNOWN_DATASOURCE_TYPE_ERROR:"UNKNOWN_DATASOURCE_TYPE_ERROR",FAILED_FETCHING_DATASOURCE_INFO_ERROR:"FAILED_FETCHING_DATASOURCE_INFO_ERROR",TABLE_SECURITY_ACCESS_ERROR:"TABLE_SECURITY_ACCESS_ERROR",DATASOURCE_SECURITY_ACCESS_ERROR:"DATASOURCE_SECURITY_ACCESS_ERROR",DATABASE_SECURITY_ACCESS_ERROR:"DATABASE_SECURITY_ACCESS_ERROR",QUERY_SECURITY_ACCESS_ERROR:"QUERY_SECURITY_ACCESS_ERROR",MISSING_OWNERSHIP_ERROR:"MISSING_OWNERSHIP_ERROR",USER_ACTIVITY_SECURITY_ACCESS_ERROR:"USER_ACTIVITY_SECURITY_ACCESS_ERROR",DASHBOARD_SECURITY_ACCESS_ERROR:"DASHBOARD_SECURITY_ACCESS_ERROR",CHART_SECURITY_ACCESS_ERROR:"CHART_SECURITY_ACCESS_ERROR",OAUTH2_REDIRECT:"OAUTH2_REDIRECT",OAUTH2_REDIRECT_ERROR:"OAUTH2_REDIRECT_ERROR",BACKEND_TIMEOUT_ERROR:"BACKEND_TIMEOUT_ERROR",DATABASE_NOT_FOUND_ERROR:"DATABASE_NOT_FOUND_ERROR",MISSING_TEMPLATE_PARAMS_ERROR:"MISSING_TEMPLATE_PARAMS_ERROR",INVALID_TEMPLATE_PARAMS_ERROR:"INVALID_TEMPLATE_PARAMS_ERROR",RESULTS_BACKEND_NOT_CONFIGURED_ERROR:"RESULTS_BACKEND_NOT_CONFIGURED_ERROR",DML_NOT_ALLOWED_ERROR:"DML_NOT_ALLOWED_ERROR",INVALID_CTAS_QUERY_ERROR:"INVALID_CTAS_QUERY_ERROR",INVALID_CVAS_QUERY_ERROR:"INVALID_CVAS_QUERY_ERROR",SQLLAB_TIMEOUT_ERROR:"SQLLAB_TIMEOUT_ERROR",RESULTS_BACKEND_ERROR:"RESULTS_BACKEND_ERROR",ASYNC_WORKERS_ERROR:"ASYNC_WORKERS_ERROR",ADHOC_SUBQUERY_NOT_ALLOWED_ERROR:"ADHOC_SUBQUERY_NOT_ALLOWED_ERROR",INVALID_SQL_ERROR:"INVALID_SQL_ERROR",GENERIC_COMMAND_ERROR:"GENERIC_COMMAND_ERROR",GENERIC_BACKEND_ERROR:"GENERIC_BACKEND_ERROR",INVALID_PAYLOAD_FORMAT_ERROR:"INVALID_PAYLOAD_FORMAT_ERROR",INVALID_PAYLOAD_SCHEMA_ERROR:"INVALID_PAYLOAD_SCHEMA_ERROR",MARSHMALLOW_ERROR:"MARSHMALLOW_ERROR",REPORT_NOTIFICATION_ERROR:"REPORT_NOTIFICATION_ERROR"},s={TABLE:"TABLE",VIEW:"VIEW"};var i;!function(e){e.Started="started",e.Stopped="stopped",e.Failed="failed",e.Pending="pending",e.Running="running",e.Scheduled="scheduled",e.Success="success",e.Fetching="fetching",e.TimedOut="timed_out"}(i||(i={}));const l=[i.Running,i.Started,i.Pending,i.Fetching,i.Scheduled],c=[i.Stopped,i.Failed,i.Success,i.TimedOut],d={id:"clientId2353",dbId:1,sql:"SELECT * FROM something",sqlEditorId:"dfsadfs",tab:"unimportant",tempTable:"",ctas:!1,cached:!1,errorMessage:null,extra:{progress:null},isDataPreview:!1,progress:0,resultsKey:null,state:i.Success,tempSchema:null,trackingUrl:null,templateParams:null,rows:42,queryLimit:100,limitingFactor:"",endDttm:1476910579693,duration:"",startDttm:1476910566092.96,time:{},user:{},userId:1,db:{},started:"",querylink:{},queryId:1,executedSql:"",output:"",actions:{},type:n.i9.Query,columns:[{column_name:"Column 1",type:"STRING",is_dttm:!1,type_generic:a.Z.String},{column_name:"Column 3",type:"STRING",is_dttm:!1,type_generic:a.Z.String},{column_name:"Column 2",type:"TIMESTAMP",is_dttm:!0,type_generic:a.Z.Temporal}]},u={results:{displayLimitReached:!1,columns:[{column_name:"Column 1",type:"STRING",type_generic:a.Z.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:a.Z.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:a.Z.Temporal,is_dttm:!0}],data:[{"Column 1":"a","Column 2":"b","Column 3":"2014-11-11T00:00:00"}],expanded_columns:[],selected_columns:[{column_name:"Column 1",type:"STRING",type_generic:a.Z.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:a.Z.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:a.Z.Temporal,is_dttm:!0}],query:{limit:6}}},p={...d,...u};var m;!function(e){e.Row="row",e.Column="column"}(m||(m={}));const h={}},920620:(e,t,r)=>{"use strict";var n;r.d(t,{Z:()=>a,n:()=>n}),function(e){e.Aggregate="aggregate",e.Raw="raw"}(n||(n={}));const a={}},88889:(e,t,r)=>{"use strict";var n;r.d(t,{C:()=>a,Z:()=>n}),function(e){e[e.Numeric=0]="Numeric",e[e.String=1]="String",e[e.Temporal=2]="Temporal",e[e.Boolean=3]="Boolean"}(n||(n={}));const a={}},588484:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,t:()=>n});const n=/(\d{4}-\d{2}-\d{2})[\sT](\d{2}:\d{2}:\d{2}\.?\d*).*/;function a(e){const t=e.match(n);return t?`${t[1]}T${t[2]}Z`:e}},175049:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var n=r(653652),a=r(601875);class o extends n.Z{constructor(...e){super(...e),this.name="ExtensionsRegistry"}}const s=(0,a.Z)(o,{})},355786:(e,t,r)=>{"use strict";function n(e){return null==e?[]:Array.isArray(e)?e:[e]}r.d(t,{Z:()=>n})},332103:(e,t,r)=>{"use strict";r.d(t,{Ah:()=>m,Kv:()=>l,Pb:()=>p,T4:()=>c,Ul:()=>d,Z6:()=>s,ZU:()=>u,k3:()=>i});var n=r(568924),a=r(135944);const o=new n.FilterXSS({whiteList:{...(0,n.getDefaultWhiteList)(),span:["style","class","title"],div:["style","class"],a:["style","class","href","title","target"],img:["style","class","src","alt","title","width","height"],video:["autoplay","controls","loop","preload","src","height","width","muted"]},stripIgnoreTag:!0,css:!1});function s(e){return o.process(e)}function i(e){return/<(html|head|body|div|span|a|p|h[1-6]|title|meta|link|script|style)/i.test(e)}function l(e){const t=e.trim().toLowerCase();if(t.startsWith("<!doctype html>")&&i(t))return!0;const r=(new DOMParser).parseFromString(t,"text/html");return Array.from(r.body.childNodes).some((({nodeType:e})=>1===e))}function c(e){return l(e)?s(e):e}function d(e){return l(e)?(0,a.tZ)("span",{className:"safe-html-wrapper",dangerouslySetInnerHTML:{__html:s(e)}}):e}function u(e){return e.replace(/<[^>]*>/g,"")}function p(e){try{return JSON.parse(e),!0}catch(e){return!1}}function m(e){if(!l(e))return null;const t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("p");if(0===t.length)return null;const r={};return t.forEach(((e,t)=>{r[`p${t+1}`]=e.textContent||""})),r}},237731:(e,t,r)=>{"use strict";function n(e){return null!=e}r.d(t,{Z:()=>n})},585684:(e,t,r)=>{"use strict";function n(e,t){return new Promise((r=>{setTimeout((()=>{r(e())}),t)}))}r.d(t,{Z:()=>n})},274765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e,t){if(t){const r=new Set;return e.filter((e=>{const n=t(e);return!r.has(n)&&(r.add(n),!0)}))}return[...new Set(e)]}},375294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(61988);function a(e){return!(!e||!Number.isNaN(Number(e))&&parseInt(e,10)===Number(e))&&(0,n.t)("is expected to be an integer")}},274029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(61988);function a(e,t){return Number(e)>+t&&(0,n.t)("Value cannot exceed %s",t)}},895826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(61988);function a(e){return!!(null==e||""===e||Array.isArray(e)&&0===e.length)&&(0,n.t)("cannot be empty")}},443693:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>E,VS:()=>y});var n=r(667294),a=r(828216),o=r(68492),s=r(535937),i=r.n(s),l=r(928241);const c=r(610362).h.injectEndpoints({endpoints:e=>({updateSqlEditorTab:e.mutation({query:({queryEditor:{version:e=l.o7,id:t,dbId:r,catalog:n,schema:a,queryLimit:o,sql:s,name:c,latestQueryId:d,hideLeftBar:u,templateParams:p,autorun:m,updatedAt:h},extra:_})=>({method:"PUT",endpoint:encodeURI(`/tabstateview/${t}`),postPayload:i()({database_id:r,catalog:n,schema:a,sql:s,label:c,query_limit:o,latest_query_id:d,template_params:p,hide_left_bar:u,autorun:m,extra_json:JSON.stringify({updatedAt:h,version:e,..._})},(e=>void 0!==e))})}),updateCurrentSqlEditorTab:e.mutation({query:e=>({method:"POST",endpoint:encodeURI(`/tabstateview/${e}/activate`),transformResponse:()=>e})}),deleteSqlEditorTab:e.mutation({query:e=>({method:"DELETE",endpoint:encodeURI(`/tabstateview/${e}`),transformResponse:()=>e})})})}),{useUpdateSqlEditorTabMutation:d,useUpdateCurrentSqlEditorTabMutation:u,useDeleteSqlEditorTabMutation:p}=c;var m=r(474004),h=r(611409),_=r(938325);const f=5e3;function y(e,t,r){return e.map((e=>({...e,...t.id===e.id&&t}))).filter((e=>function(e,t){return e.inLocalStorage||e.updatedAt&&e.updatedAt>t}(e,r)))}const E=()=>{const e=(0,a.v9)((e=>e.sqlLab.queryEditors)),t=(0,a.v9)((e=>e.sqlLab.unsavedQueryEditor)),r=(0,a.v9)((e=>e.sqlLab.editorTabLastUpdatedAt)),s=(0,a.I0)(),i=(0,n.useRef)(r),l=(0,a.v9)((({sqlLab:e})=>e.tabHistory.slice(-1)[0]||"")),c=(0,a.v9)((({sqlLab:e})=>e.lastUpdatedActiveTab)),E=(0,a.v9)((({sqlLab:e})=>e.destroyedQueryEditors)),[g,{error:v}]=d(),[T]=u(),[b]=p(),S=(0,m.n)(t,f),R=(0,_.Z)((t=>y(e,t,i.current))),A=(0,_.Z)((()=>y(e,t,i.current).find((({inLocalStorage:e})=>Boolean(e))))),C=(0,_.Z)((()=>{var t;!l||l===c||null!=(t=e.find((({id:e})=>e===l)))&&t.inLocalStorage||T(l).then((()=>{s((0,h.setLastUpdatedActiveTab)(l))}))})),I=(0,_.Z)((()=>{Object.keys(E).length>0&&Object.keys(E).forEach((e=>{b(e).then((()=>{s((0,h.clearDestoryedQueryEditor)(e))})).catch((({status:t})=>{404===t&&s((0,h.clearDestoryedQueryEditor)(e))}))}))}));return(0,n.useEffect)((()=>{let e;const t=setInterval(C,f);e=setTimeout((function t(){const r=A();r&&s((0,h.syncQueryEditor)(r)),e=setTimeout(t,f)}),f);const r=setInterval(I,f);return()=>{clearTimeout(e),clearInterval(t),clearInterval(r)}}),[A,C,I,s]),(0,n.useEffect)((()=>{const e=R(S);Promise.all(e.filter((({inLocalStorage:e})=>!e)).map((e=>g({queryEditor:e})))).then((e=>{e.some((e=>"error"in e))||(i.current=Date.now(),s((0,h.setEditorTabLastUpdate)(i.current)))}))}),[S,R,s,g]),(0,n.useEffect)((()=>{v&&o.Z.warn("An error occurred while saving your editor state.",v)}),[s,v]),null}},444904:(e,t,r)=>{"use strict";r.d(t,{Em:()=>s,GJ:()=>C,IY:()=>a,N2:()=>R,OI:()=>D,TU:()=>g,U$:()=>v,Yn:()=>A,Yo:()=>E,b$:()=>T,bR:()=>i,eU:()=>l,ev:()=>c,fM:()=>_,hC:()=>f,iJ:()=>I,lV:()=>h,lr:()=>O,oN:()=>m,rD:()=>S,rP:()=>u,rp:()=>d,uC:()=>o,xj:()=>p,zY:()=>y,zf:()=>b});var n=r(61988);const a={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},o={offline:(0,n.t)("offline"),failed:(0,n.t)("failed"),pending:(0,n.t)("pending"),fetching:(0,n.t)("fetching"),running:(0,n.t)("running"),stopped:(0,n.t)("stopped"),success:(0,n.t)("success")},s={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},i={success:(0,n.t)("success"),failed:(0,n.t)("failed"),running:(0,n.t)("running"),offline:(0,n.t)("offline"),pending:(0,n.t)("pending")},l=5,c=3,d=51,u=400,p=10,m=30,h=70,_=2e3,f=600,y=100,E=1024,g=2,v=864e5,T=5120,b=1024,S=.9,R=8e3,A=100,C=90,I=60,O=55,D=50},536627:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(61988),a=r(928241);function o(e){return e.reduce(((e,t)=>e.slice(-1)[0]===t?e:e.concat(t)),[])}function s({common:e,active_tab:t,tab_state_ids:r=[],databases:s,queries:i,...l}){let c={};const d={version:a.o7,loaded:!0,name:(0,n.t)("Untitled query"),sql:"",latestQueryId:null,autorun:!1,dbId:e.conf.SQLLAB_DEFAULT_DBID,queryLimit:e.conf.DEFAULT_SQLLAB_LIMIT,hideLeftBar:!1,remoteId:null,cursorPosition:{row:0,column:0}};let u={};r.forEach((({id:e,label:r})=>{let n;var o,s,i,l;n=t&&t.id===e?{version:null!=(o=null==(s=t.extra_json)?void 0:s.version)?o:a.$I.V1,id:e.toString(),loaded:!0,name:t.label,sql:t.sql||"",selectedText:void 0,latestQueryId:t.latest_query?t.latest_query.id:null,remoteId:(null==(i=t.saved_query)?void 0:i.id)||null,autorun:Boolean(t.autorun),templateParams:t.template_params||void 0,dbId:t.database_id,catalog:t.catalog,schema:t.schema,queryLimit:t.query_limit,hideLeftBar:t.hide_left_bar,updatedAt:null==(l=t.extra_json)?void 0:l.updatedAt}:{...d,id:e.toString(),loaded:!1,name:r,dbId:void 0},c={...c,[n.id]:n}}));const p=t?[t.id.toString()]:[];let m=t?t.id.toString():"",h={},_=Date.now();var f;t&&(_=(null==(f=t.extra_json)?void 0:f.updatedAt)||_,t.table_schemas.filter((e=>null!==e.description)).forEach((e=>{const{dataPreviewQueryId:t,...r}=e.description,n={dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:t,persistData:r,initialized:!0};h={...h,[n.id]:n}})));const y={...i,...(null==t?void 0:t.latest_query)&&{[t.latest_query.id]:t.latest_query}},E={};try{const e=localStorage.getItem("redux"),t=e?JSON.parse(e):void 0;if(e&&null!=t&&t.sqlLab){const{sqlLab:e}=t;if(0===e.queryEditors.length)localStorage.removeItem("redux");else{u=e.unsavedQueryEditor||u,e.queryEditors.forEach((e=>{var t,r;const n=Boolean(c[e.id]),a=null==(t=c[e.id])?void 0:t.updatedAt,o=e.updatedAt&&(!a||e.updatedAt>a),s=!n||o?e:{};c={...c,[e.id]:{...c[e.id],...s,name:s.title||s.name||(null==(r=c[e.id])?void 0:r.name),...s.id&&u.id===e.id&&u,inLocalStorage:!n,loaded:!0}}}));const t=new Set;e.tables&&(h=e.tables.reduce(((e,r)=>{const n=!t.has(r.queryEditorId);return n&&t.add(r.queryEditorId),{...e,[r.id]:{...h[r.id],...r,expanded:n,inLocalStorage:!0}}}),h)),e.queries&&Object.values(e.queries).forEach((e=>{y[e.id]={...e,inLocalStorage:!0}})),e.tabHistory&&p.push(...e.tabHistory),m=p.slice(p.length-1)[0]||"",e.destroyedQueryEditors&&Object.entries(e.destroyedQueryEditors).forEach((([e,t])=>{c[e]&&(E[e]=t,delete c[e])}))}}}catch(e){}return{sqlLab:{activeSouthPaneTab:"Results",alerts:[],databases:s,offline:!1,queries:Object.fromEntries(Object.entries(y).map((([e,t])=>[e,{...t,...t.startDttm&&{startDttm:Number(t.startDttm)},...t.endDttm&&{endDttm:Number(t.endDttm)}}]))),queryEditors:Object.values(c),tabHistory:o(p),tables:Object.values(h),queriesLastUpdate:Date.now(),editorTabLastUpdatedAt:_,queryCostEstimates:{},unsavedQueryEditor:u,lastUpdatedActiveTab:m,destroyedQueryEditors:E},localStorageUsageInKilobytes:0,common:e,...l}}},928241:(e,t,r)=>{"use strict";var n;r.d(t,{$I:()=>n,C9:()=>s,fT:()=>o,o7:()=>a}),function(e){e[e.V1=1]="V1"}(n||(n={}));const a=n.V1;var o;!function(e){e[e.SaveNew=1]="SaveNew",e[e.OverwriteDataset=2]="OverwriteDataset"}(o||(o={}));const s={metrics:[],groupby:[],time_range:"No filter",row_limit:1e3}},182591:(e,t,r)=>{"use strict";r.d(t,{$e:()=>p,NU:()=>d,St:()=>u,uQ:()=>c});var n=r(478718),a=r.n(n),o=r(123936),s=r(444904);const i=new Set(["version","remoteId","autorun","dbId","height","id","latestQueryId","northPercent","queryLimit","schema","selectedText","southPercent","sql","templateParams","name","hideLeftBar"]);function l(e){var t;const{startDttm:r,results:n}=e;return Date.now()-r>s.U$||((null==(t=JSON.stringify(n))?void 0:t.length)||0)*s.TU/s.Yo>s.zf}function c(e){return e.map((e=>a()(e,["id","name","dbId","schema","dataPreviewQueryId","queryEditorId"]))).filter((({queryEditorId:e})=>Boolean(e)))}function d(e){return Object.keys(e).reduce(((t,r)=>{const{results:n}=e[r];return{...t,[r]:{...e[r],results:l(e[r])?{}:n}}}),{})}function u(e){return e.map((e=>Object.keys(e).filter((e=>i.has(e))).reduce(((t,r)=>({...t,[r]:e[r]})),{})))}function p(e,t){t.sqlLab.tables.forEach((({name:t,catalog:r,schema:n,dbId:a,persistData:s})=>{a&&n&&t&&null!=s&&s.columns&&(e(o.$K.upsertQueryData("tableMetadata",{dbId:a,catalog:r,schema:n,table:t},s)),e(o.$K.upsertQueryData("tableExtendedMetadata",{dbId:a,catalog:r,schema:n,table:t},{})))}))}},835932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(211965),a=r(667294),o=r(884967),s=r(693967),i=r.n(s),l=r(104715),c=r(751995),d=r(358593),u=r(135944);function p(e){const{tooltip:t,placement:r,disabled:s=!1,buttonSize:p,buttonStyle:m,className:h,cta:_,children:f,href:y,showMarginRight:E=!0,...g}=e,v=(0,c.Fg)(),{colors:T,transitionTiming:b,borderRadius:S,typography:R}=v,{primary:A,grayscale:C,success:I,warning:O,error:D}=T;let w=32,N=18;"xsmall"===p?(w=22,N=5):"small"===p&&(w=30,N=10);let L=A.light4,q=(0,o.CD)(.1,A.base,A.light4),x=(0,o.CD)(.25,A.base,A.light4),U=C.light2,P=A.dark1,Z=P,M=0,F="none",k="transparent",Q="transparent",$="transparent";"primary"===m?(L=A.base,q=A.dark1,x=(0,o.CD)(.2,C.dark2,A.dark1),P=C.light5,Z=P):"tertiary"===m||"dashed"===m?(L=C.light5,q=C.light5,x=C.light5,U=C.light5,M=1,F="dashed"===m?"dashed":"solid",k=A.dark1,Q=A.light1,$=C.light2):"danger"===m?(L=D.base,q=(0,o.CD)(.1,C.light5,D.base),x=(0,o.CD)(.2,C.dark2,D.base),P=C.light5,Z=P):"warning"===m?(L=O.base,q=(0,o.CD)(.1,C.dark2,O.base),x=(0,o.CD)(.2,C.dark2,O.base),P=C.light5,Z=P):"success"===m?(L=I.base,q=(0,o.CD)(.1,C.light5,I.base),x=(0,o.CD)(.2,C.dark2,I.base),P=C.light5,Z=P):"link"===m&&(L="transparent",q="transparent",x="transparent",Z=A.base);const B=f;let H=[];H=B&&B.type===a.Fragment?a.Children.toArray(B.props.children):a.Children.toArray(f);const Y=E&&H.length>1?2*v.gridUnit:0,j=(0,u.tZ)(l.C0,{href:s?void 0:y,disabled:s,className:i()(h,"superset-button",`superset-button-${m}`,{cta:!!_}),css:(0,n.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1.5715,fontSize:R.sizes.s,fontWeight:R.weights.bold,height:w,textTransform:"uppercase",padding:`0px ${N}px`,transition:`all ${b}s`,minWidth:_?36*v.gridUnit:void 0,minHeight:_?8*v.gridUnit:void 0,boxShadow:"none",borderWidth:M,borderStyle:F,borderColor:k,borderRadius:S,color:P,backgroundColor:L,"&:hover":{color:Z,backgroundColor:q,borderColor:Q},"&:active":{color:P,backgroundColor:x},"&:focus":{color:P,backgroundColor:L,borderColor:k},"&[disabled], &[disabled]:hover":{color:C.base,backgroundColor:"link"===m?"transparent":U,borderColor:"link"===m?"transparent":$,pointerEvents:"none"},marginLeft:0,"& + .superset-button":{marginLeft:2*v.gridUnit},"& > :first-of-type":{marginRight:Y}},"",""),...g,children:f});return t?(0,u.tZ)(d.u,{placement:r,title:t,children:s?(0,u.tZ)("span",{css:(0,n.iv)({cursor:"not-allowed","& > .superset-button":{marginLeft:2*v.gridUnit}},"",""),children:j}):j}):j}},937863:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m,u:()=>p});var n=r(957557),a=r.n(n),o=r(61988),s=r(904305),i=r(550810),l=r(410331),c=r(476445),d=r(444814),u=r(452256);const p={id:0,chartAlert:null,chartStatus:"loading",chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:{},sliceFormData:null,queryController:null,queriesResponse:null,triggerQuery:!0,lastRendered:0};function m(e={},t){const r={[u.ADD_CHART]:()=>({...p,...t.chart}),[u.CHART_UPDATE_SUCCEEDED]:e=>({...e,chartStatus:"success",chartAlert:null,queriesResponse:t.queriesResponse,chartUpdateEndTime:(0,d.zO)()}),[u.CHART_UPDATE_STARTED]:e=>({...e,chartStatus:"loading",chartStackTrace:null,chartAlert:null,chartUpdateEndTime:null,chartUpdateStartTime:(0,d.zO)(),queryController:t.queryController}),[u.CHART_UPDATE_STOPPED]:e=>({...e,chartStatus:"stopped",chartAlert:(0,o.t)("Updating chart was stopped"),chartUpdateEndTime:(0,d.zO)()}),[u.CHART_RENDERING_SUCCEEDED]:e=>({...e,chartStatus:"rendered",chartUpdateEndTime:(0,d.zO)()}),[u.CHART_RENDERING_FAILED]:e=>({...e,chartStatus:"failed",chartStackTrace:t.stackTrace,chartAlert:(0,o.t)("An error occurred while rendering the visualization: %s",t.error)}),[u.CHART_UPDATE_FAILED](e){var r,n,a,s;return{...e,chartStatus:"failed",chartAlert:t.queriesResponse?null==(r=t.queriesResponse)||null==(n=r[0])?void 0:n.error:(0,o.t)("Network error."),chartUpdateEndTime:(0,d.zO)(),queriesResponse:t.queriesResponse,chartStackTrace:t.queriesResponse?null==(a=t.queriesResponse)||null==(s=a[0])?void 0:s.stacktrace:null}},[u.DYNAMIC_PLUGIN_CONTROLS_READY]:e=>({...e,sliceFormData:(0,l.Hu)(t.controlsState)}),[u.TRIGGER_QUERY]:e=>({...e,triggerQuery:t.value,chartStatus:"loading"}),[u.RENDER_TRIGGERED]:e=>({...e,lastRendered:t.value}),[u.UPDATE_QUERY_FORM_DATA]:e=>({...e,latestQueryFormData:t.value}),[u.ANNOTATION_QUERY_STARTED](e){var r;null!=(r=e.annotationQuery)&&r[t.annotation.name]&&e.annotationQuery[t.annotation.name].abort();const n={...e.annotationQuery,[t.annotation.name]:t.queryController};return{...e,annotationQuery:n}},[u.ANNOTATION_QUERY_SUCCESS](e){const r={...e.annotationData,[t.annotation.name]:t.queryResponse.data},n={...e.annotationError};delete n[t.annotation.name];const a={...e.annotationQuery};return delete a[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:a}},[u.ANNOTATION_QUERY_FAILED](e){const r={...e.annotationData};delete r[t.annotation.name];const n={...e.annotationError,[t.annotation.name]:t.queryResponse?t.queryResponse.error:(0,o.t)("Network error.")},a={...e.annotationQuery};return delete a[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:a}}};if(t.type===u.REMOVE_CHART)return a()(e,[t.key]);if(t.type===u.UPDATE_CHART_ID){const{newId:r,key:n}=t;return e[r]={...e[n],id:r},delete e[n],e}return t.type===s.$||t.type===c._?{...t.data.charts}:t.type===i.Rn.SetDatasources?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,"failed"===t.chartStatus&&t.chartStackTrace?{...t,chartStatus:"",chartStackTrace:null,chartAlert:null}:t]))):t.type in r?{...e,[t.key]:r[t.type](e[t.key])}:e}},843617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(667294),a=r(61988),o=r(358593),s=r(414114),i=r(710222),l=r(135944);const c={copyNode:(0,l.tZ)("span",{children:(0,a.t)("Copy")}),onCopyEnd:()=>{},shouldShowText:!0,wrapped:!0,tooltipText:(0,a.t)("Copy to clipboard"),hideTooltip:!1};var d={name:"8irbms",styles:"display:inline-flex;align-items:center"};class u extends n.Component{constructor(e){super(e),this.copyToClipboard=this.copyToClipboard.bind(this),this.onClick=this.onClick.bind(this)}onClick(){this.props.getText?this.props.getText((e=>{this.copyToClipboard(Promise.resolve(e))})):this.copyToClipboard(Promise.resolve(this.props.text||""))}getDecoratedCopyNode(){return(0,n.cloneElement)(this.props.copyNode,{style:{cursor:"pointer"},onClick:this.onClick})}copyToClipboard(e){(0,i.Z)((()=>e)).then((()=>{this.props.addSuccessToast((0,a.t)("Copied to clipboard!"))})).catch((()=>{this.props.addDangerToast((0,a.t)("Sorry, your browser does not support copying. Use Ctrl / Cmd + C!"))})).finally((()=>{this.props.onCopyEnd&&this.props.onCopyEnd()}))}renderTooltip(e){return(0,l.tZ)(l.HY,{children:this.props.hideTooltip?this.getDecoratedCopyNode():(0,l.tZ)(o.u,{id:"copy-to-clipboard-tooltip",placement:"topRight",style:{cursor:e},title:this.props.tooltipText||"",trigger:["hover"],arrowPointAtCenter:!0,children:this.getDecoratedCopyNode()})})}renderNotWrapped(){return this.renderTooltip("pointer")}renderLink(){return(0,l.BX)("span",{css:d,children:[this.props.shouldShowText&&this.props.text&&(0,l.tZ)("span",{className:"m-r-5",children:this.props.text}),this.renderTooltip("pointer")]})}render(){const{wrapped:e}=this.props;return e?this.renderLink():this.renderNotWrapped()}}u.defaultProps=c;const p=(0,s.ZP)(u)},891178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(667294),a=r(751995),o=r(61988),s=r(454076),i=r(774069),l=r(835932),c=r(71894),d=r(313322),u=r(843617),p=r(135944);const m=a.iK.div`
  align-items: center;
  background-color: ${({level:e,theme:t})=>t.colors[e].light2};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  border: 1px solid ${({level:e,theme:t})=>t.colors[e].base};
  color: ${({level:e,theme:t})=>t.colors[e].dark2};
  padding: ${({theme:e})=>2*e.gridUnit}px;
  width: 100%;

  .top-row {
    display: flex;
    justify-content: space-between;
  }

  .error-body {
    padding-top: ${({theme:e})=>e.gridUnit}px;
    padding-left: ${({theme:e})=>8*e.gridUnit}px;
  }

  .icon {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
  }

  .link {
    color: ${({level:e,theme:t})=>t.colors[e].dark2};
    text-decoration: underline;
    &:focus-visible {
      border: 1px solid ${({theme:e})=>e.colors.primary.base};
      padding: ${({theme:e})=>e.gridUnit/2}px;
      margin: -${({theme:e})=>e.gridUnit/2+1}px;
      border-radius: ${({theme:e})=>e.borderRadius}px;
  }
`,h=(0,a.iK)(i.default)`
  color: ${({level:e,theme:t})=>t.colors[e].dark2};
  overflow-wrap: break-word;

  .ant-modal-header {
    background-color: ${({level:e,theme:t})=>t.colors[e].light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;
  }

  .icon {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
  }

  .header {
    display: flex;
    align-items: center;
    font-size: ${({theme:e})=>e.typography.sizes.l}px;
  }
`,_=a.iK.div`
  align-items: center;
  display: flex;
`;function f({body:e,copyText:t,level:r="error",source:i="dashboard",subtitle:f,title:y,description:E}){const g=(0,a.Fg)(),[v,T]=(0,n.useState)(!1),[b,S]=(0,n.useState)((0,c.b)()),R=(0,c.b)()||["explore","sqllab"].includes(i),A=g.colors[r].base;return(0,p.BX)(m,{level:r,role:"alert",children:[(0,p.BX)("div",{className:"top-row",children:[(0,p.BX)(_,{children:["error"===r?(0,p.tZ)(d.Z.ErrorSolid,{className:"icon",iconColor:A}):(0,p.tZ)(d.Z.WarningSolid,{className:"icon",iconColor:A}),(0,p.tZ)("strong",{children:y})]}),!R&&!E&&(0,p.tZ)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>T(!0),onKeyDown:e=>{"Enter"===e.key&&T(!0)},children:(0,o.t)("See more")})]}),E&&(0,p.BX)("div",{className:"error-body",children:[(0,p.tZ)("p",{children:E}),!R&&(0,p.tZ)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>T(!0),onKeyDown:e=>{"Enter"===e.key&&T(!0)},children:(0,o.t)("See more")})]}),R?(0,p.BX)("div",{className:"error-body",children:[(0,p.tZ)("p",{children:f}),e&&(0,p.BX)(p.HY,{children:[!b&&(0,p.tZ)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>S(!0),onKeyDown:e=>{"Enter"===e.key&&S(!0)},children:(0,o.t)("See more")}),b&&(0,p.BX)(p.HY,{children:[(0,p.tZ)("br",{}),e,(0,p.tZ)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>S(!1),onKeyDown:e=>{"Enter"===e.key&&S(!1)},children:(0,o.t)("See less")})]})]})]}):(0,p.tZ)(h,{level:r,show:v,onHide:()=>T(!1),destroyOnClose:!0,title:(0,p.BX)("div",{className:"header",children:["error"===r?(0,p.tZ)(d.Z.ErrorSolid,{className:"icon",iconColor:A}):(0,p.tZ)(d.Z.WarningSolid,{className:"icon",iconColor:A}),(0,p.tZ)("div",{className:"title",children:y})]}),footer:(0,p.BX)(p.HY,{children:[t&&(0,p.tZ)(u.Z,{text:t,shouldShowText:!1,wrapped:!1,copyNode:(0,p.tZ)(l.Z,{onClick:s.EI,children:(0,o.t)("Copy message")})}),(0,p.tZ)(l.Z,{cta:!0,buttonStyle:"primary",onClick:()=>T(!1),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&T(!1)},children:(0,o.t)("Close")})]}),children:(0,p.BX)(p.HY,{children:[(0,p.tZ)("p",{children:f}),f&&e&&(0,p.tZ)("br",{}),e]})})]})}},272875:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(61988),a=r(792869),o=r(891178),s=r(135944);const i=(0,n.t)("Unexpected error");function l({title:e=i,error:t,subtitle:r,copyText:n,link:l,stackTrace:c,source:d,description:u,fallback:p}){if(t){const e=(0,a.Z)().get(t.error_type);if(e)return(0,s.tZ)(e,{error:t,source:d,subtitle:r})}return p?(0,s.tZ)(s.HY,{children:p}):(0,s.tZ)(o.Z,{level:"warning",title:e,subtitle:r,copyText:n,description:u,source:d,body:l||c?(0,s.BX)(s.HY,{children:[l&&(0,s.tZ)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:"(Request Access)"}),(0,s.tZ)("br",{}),c&&(0,s.tZ)("pre",{children:c})]}):void 0})}},792869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(590537),a=r(601875);class o extends n.Z{constructor(){super({name:"ErrorMessageComponent",overwritePolicy:n.r.Allow})}}const s=(0,a.Z)(o)},313322:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(318029),a=r.n(n),o=r(362816),s=r(667294),i=r(316165),l=r(751995);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}const d=({title:e,titleId:t,...r},n)=>s.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r)),u=(0,s.forwardRef)(d);var p=r(135944);const m=(0,l.iK)((({iconColor:e,iconSize:t,viewBox:r,...n})=>(0,p.tZ)(i.Z,{viewBox:r||"0 0 24 24",...n})))`
  ${({iconColor:e})=>e&&`color: ${e};`};
  font-size: ${({iconSize:e,theme:t})=>e?`${t.typography.sizes[e]||t.typography.sizes.m}px`:"24px"};
`,h=e=>{const{fileName:t,...n}=e,[,a]=(0,s.useState)(!1),o=(0,s.useRef)(),i=t.replace("_","-");(0,s.useEffect)((()=>{let e=!1;return async function(){o.current=(await r(169233)(`./${t}.svg`)).default,e||a(!0)}(),()=>{e=!0}}),[t,o]);const l=null!=e&&e.onClick?"button":"img";return(0,p.tZ)(m,{component:o.current||u,"aria-label":i,role:l,...n})},_=Object.keys(o).filter((e=>!e.includes("TwoTone"))).map((e=>({[e]:t=>{const r=null!=t&&t.onClick?"button":"img";return(0,p.tZ)(m,{component:o[e],role:r,...t})}}))).reduce(((e,t)=>({...e,...t}))),f={};["alert","alert_solid","alert_solid_small","area-chart-tile","bar-chart-tile","big-number-chart-tile","binoculars","bolt","bolt_small","bolt_small_run","calendar","cancel","cancel_solid","cancel-x","card_view","cards","cards_locked","caret_down","caret_left","caret_right","caret_up","certified","check","checkbox-half","checkbox-off","checkbox-on","circle_check","circle_check_solid","circle","clock","close","code","cog","collapse","color_palette","current-rendered-tile","components","copy","cursor_target","database","dataset_physical","dataset_virtual_greyscale","dataset_virtual","download","drag","edit_alt","edit","email","error","error_solid","error_solid_small","exclamation","expand","eye","eye_slash","favorite-selected","favorite_small_selected","favorite-unselected","field_abc","field_boolean","field_date","field_derived","field_num","field_struct","file","filter","filter_small","folder","full","function_x","gear","grid","image","import","info","info-solid","info_solid_small","join","keyboard","layers","lightbulb","line-chart-tile","link","list","list_view","location","lock_locked","lock_unlocked","map","message","minus","minus_solid","more_horiz","more_vert","move","nav_charts","nav_dashboard","nav_data","nav_explore","nav_home","nav_lab","note","offline","paperclip","pie-chart-tile","placeholder","plus","plus_large","plus_small","plus_solid","queued","refresh","running","save","sql","search","server","share","slack","sort_asc","sort_desc","sort","table","table-chart-tile","tag","trash","triangle_change","triangle_down","triangle_up","up-level","user","warning","warning_solid","x-large","x-small","tags","ballot","category","undo","redo"].forEach((e=>{const t=a()(e).replace(/ /g,"");f[t]=t=>(0,p.tZ)(h,{fileName:e,...t})}));const y={..._,...f}},838703:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(751995),a=r(693967),o=r.n(a),s=r(289419),i=r(135944);const l=n.iK.img`
  z-index: 99;
  width: 50px;
  height: unset;
  position: relative;
  margin: 10px;
  &.inline {
    margin: 0px;
    width: 30px;
  }
  &.inline-centered {
    margin: 0 auto;
    width: 30px;
    display: block;
  }
  &.floating {
    padding: 0;
    margin: 0;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;function c({position:e="floating",image:t,className:r}){return(0,i.tZ)(l,{className:o()("loading",e,r),alt:"Loading...",src:t||s,role:"status","aria-live":"polite","aria-label":"Loading"})}},672570:(e,t,r)=>{"use strict";r.d(t,{Dz:()=>u,Gb:()=>p,K7:()=>i,RS:()=>l,bM:()=>c,h:()=>o,s2:()=>m,ws:()=>d});var n=r(964296),a=r(101927);const o="ADD_TOAST";function s({toastType:e,text:t,duration:r=8e3,noDuplicate:a=!1}){return{type:o,payload:{id:(s=e,`${s}-${(0,n.x0)()}`),toastType:e,text:t,duration:r,noDuplicate:a}};var s}const i="REMOVE_TOAST";function l(e){return{type:i,payload:{id:e}}}function c(e,t){return s({text:e,toastType:a.p.Info,duration:4e3,...t})}function d(e,t){return s({text:e,toastType:a.p.Success,duration:4e3,...t})}function u(e,t){return s({text:e,toastType:a.p.Warning,duration:6e3,...t})}function p(e,t){return s({text:e,toastType:a.p.Danger,duration:8e3,...t})}const m={addInfoToast:c,addSuccessToast:d,addWarningToast:u,addDangerToast:p}},101927:(e,t,r)=>{"use strict";var n;r.d(t,{p:()=>n}),function(e){e.Info="INFO_TOAST",e.Success="SUCCESS_TOAST",e.Warning="WARNING_TOAST",e.Danger="DANGER_TOAST"}(n||(n={}))},414114:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>l,e1:()=>c});var n=r(667294),a=r(14890),o=r(828216),s=r(672570);const i={addInfoToast:s.bM,addSuccessToast:s.ws,addWarningToast:s.Dz,addDangerToast:s.Gb};function l(e){return(0,o.$j)(null,(e=>(0,a.DE)(i,e)))(e)}function c(){const e=(0,o.I0)();return(0,n.useMemo)((()=>(0,a.DE)(i,e)),[e])}},774069:(e,t,r)=>{"use strict";r.d(t,{o:()=>_,default:()=>g});var n=r(414293),a=r.n(n),o=r(667294),s=r(751995),i=r(61988),l=r(211965),c=r(104715),d=r(835932),u=r(929119),p=r(861193),m=r.n(p),h=r(135944);const _=(0,s.iK)((e=>(0,h.tZ)(c.xT,{...e,maskTransitionName:""})))`
  ${({theme:e,responsive:t,maxWidth:r})=>t&&(0,l.iv)("max-width:",null!=r?r:"900px",";padding-left:",3*e.gridUnit,"px;padding-right:",3*e.gridUnit,"px;padding-bottom:0;top:0;","")}

  .ant-modal-content {
    display: flex;
    flex-direction: column;
    max-height: ${({theme:e})=>`calc(100vh - ${8*e.gridUnit}px)`};
    margin-bottom: ${({theme:e})=>4*e.gridUnit}px;
    margin-top: ${({theme:e})=>4*e.gridUnit}px;
  }

  .ant-modal-header {
    flex: 0 0 auto;
    background-color: ${({theme:e})=>e.colors.grayscale.light4};
    border-radius: ${({theme:e})=>e.borderRadius}px
      ${({theme:e})=>e.borderRadius}px 0 0;
    padding-left: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>4*e.gridUnit}px;

    .ant-modal-title h4 {
      display: flex;
      margin: 0;
      align-items: center;
    }
  }

  .ant-modal-close-x {
    display: flex;
    align-items: center;

    .close {
      flex: 1 1 auto;
      margin-bottom: ${({theme:e})=>e.gridUnit}px;
      color: ${({theme:e})=>e.colors.secondary.dark1};
      font-size: 32px;
      font-weight: ${({theme:e})=>e.typography.weights.light};
    }
  }

  .ant-modal-body {
    flex: 0 1 auto;
    padding: ${({theme:e})=>4*e.gridUnit}px;
    overflow: auto;
    ${({resizable:e,height:t})=>!e&&t&&`height: ${t};`}
  }
  .ant-modal-footer {
    flex: 0 0 1;
    border-top: ${({theme:e})=>e.gridUnit/4}px solid
      ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;

    .btn {
      font-size: 12px;
      text-transform: uppercase;
    }

    .btn + .btn {
      margin-left: ${({theme:e})=>2*e.gridUnit}px;
    }
  }

  // styling for Tabs component
  // Aaron note 20-11-19: this seems to be exclusively here for the Edit Database modal.
  // TODO: remove this as it is a special case.
  .ant-tabs-top {
    margin-top: -${({theme:e})=>4*e.gridUnit}px;
  }

  &.no-content-padding .ant-modal-body {
    padding: 0;
  }

  ${({draggable:e,theme:t})=>e&&`\n    .ant-modal-header {\n      padding: 0;\n      .draggable-trigger {\n          cursor: move;\n          padding: ${4*t.gridUnit}px;\n          width: 100%;\n        }\n    }\n  `};

  ${({resizable:e,hideFooter:t})=>e&&`\n    .resizable {\n      pointer-events: all;\n\n      .resizable-wrapper {\n        height: 100%;\n      }\n\n      .ant-modal-content {\n        height: 100%;\n\n        .ant-modal-body {\n          /* 100% - header height - footer height */\n          height: ${t?"calc(100% - 55px);":"calc(100% - 55px - 65px);"}\n        }\n      }\n    }\n  `}
`,f=e=>({maxHeight:"100vh",maxWidth:"100vw",minHeight:e?109:174,minWidth:"380px",enable:{bottom:!0,bottomLeft:!1,bottomRight:!0,left:!1,top:!1,topLeft:!1,topRight:!1,right:!0}}),y=({children:e,disablePrimaryButton:t=!1,primaryTooltipMessage:r,primaryButtonLoading:n=!1,onHide:s,onHandledPrimaryAction:l,primaryButtonName:c=(0,i.t)("OK"),primaryButtonType:p="primary",show:y,name:E,title:g,width:v,maxWidth:T,responsive:b=!1,centered:S,footer:R,hideFooter:A,wrapProps:C,draggable:I=!1,resizable:O=!1,resizableConfig:D=f(A),draggableConfig:w,destroyOnClose:N,...L})=>{const q=(0,o.useRef)(null),[x,U]=(0,o.useState)(),[P,Z]=(0,o.useState)(!0);let M;(0,o.isValidElement)(R)&&(M=(0,o.cloneElement)(R,{closeModal:s}));const F=a()(M)?[(0,h.tZ)(d.Z,{onClick:s,cta:!0,children:(0,i.t)("Cancel")},"back"),(0,h.tZ)(d.Z,{buttonStyle:p,disabled:t,tooltip:r,loading:n,onClick:l,cta:!0,children:c},"submit")]:M,k=v||(b?"100vw":"600px"),Q=!(O||I),$=(0,o.useMemo)((()=>0===Object.keys(D).length?f(A):D),[A,D]);return(0,h.tZ)(_,{centered:!!S,onOk:l,onCancel:s,width:k,maxWidth:T,responsive:b,visible:y,title:(0,h.tZ)((()=>I?(0,h.tZ)("div",{className:"draggable-trigger",onMouseOver:()=>P&&Z(!1),onMouseOut:()=>!P&&Z(!0),children:g}):(0,h.tZ)(h.HY,{children:g})),{}),closeIcon:(0,h.tZ)("span",{className:"close","aria-hidden":"true",children:"×"}),footer:A?null:F,hideFooter:A,wrapProps:{...C},modalRender:e=>O||I?(0,h.tZ)(m(),{disabled:!I||P,bounds:x,onStart:(e,t)=>((e,t)=>{var r,n,a;const{clientWidth:o,clientHeight:s}=null==(r=window)||null==(n=r.document)?void 0:n.documentElement,i=null==q||null==(a=q.current)?void 0:a.getBoundingClientRect();i&&U({left:-(null==i?void 0:i.left)+(null==t?void 0:t.x),right:o-((null==i?void 0:i.right)-(null==t?void 0:t.x)),top:-(null==i?void 0:i.top)+(null==t?void 0:t.y),bottom:s-((null==i?void 0:i.bottom)-(null==t?void 0:t.y))})})(0,t),...w,children:O?(0,h.tZ)(u.e,{className:"resizable",...$,children:(0,h.tZ)("div",{className:"resizable-wrapper",ref:q,children:e})}):(0,h.tZ)("div",{ref:q,children:e})}):e,mask:Q,draggable:I,resizable:O,destroyOnClose:N,...L,children:e})};y.displayName="Modal";const E={okButtonProps:{className:"modal-functions-ok-button"},cancelButtonProps:{className:"modal-functions-cancel-button"}},g=Object.assign(y,{error:e=>c.xT.error({...e,...E}),warning:e=>c.xT.warning({...e,...E}),confirm:e=>c.xT.confirm({...e,...E}),useModal:c.xT.useModal})},784101:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(944908),a=r.n(n),o=r(618446),s=r.n(o),i=r(23279),l=r.n(i),c=r(667294),d=r(61988),u=r(785716),p=r(355786),m=r(844818),h=r(313322),_=r(427600),f=r(985633),y=r(747767),E=r(526579),g=r(134891),v=r(135944);const T=({error:e})=>(0,v.BX)(y.BD,{children:[(0,v.tZ)(h.Z.ErrorSolid,{})," ",(0,v.tZ)(y.Vv,{children:e})]}),b=(e,t,r)=>`${e};${t};${r}`,S=(0,c.forwardRef)((({allowClear:e,allowNewOptions:t=!1,ariaLabel:r,autoClearSearchValue:n=!1,fetchOnlyOnSearch:o,filterOption:i=!0,header:h=null,headerPosition:S="top",helperText:R,invertSelection:A=!1,lazyLoading:C=!0,loading:I,mode:O="single",name:D,notFoundContent:w,onBlur:N,onError:L,onChange:q,onClear:x,onDropdownVisibleChange:U,onDeselect:P,onSearch:Z,onSelect:M,optionFilterProps:F=["label","value"],options:k,pageSize:Q=E.L8,placeholder:$=(0,d.t)("Select ..."),showSearch:B=!0,sortComparator:H=E.Ns,tokenSeparators:Y=E.pp,value:j,getPopupContainer:V,oneLine:G,maxTagCount:z,...W},K)=>{const X="single"===O,[J,ee]=(0,c.useState)(j),[te,re]=(0,c.useState)(""),[ne,ae]=(0,c.useState)(I),[oe,se]=(0,c.useState)(""),[ie,le]=(0,c.useState)(!1),[ce,de]=(0,c.useState)(0),[ue,pe]=(0,c.useState)(0),[me,he]=(0,c.useState)(!C),[_e,fe]=(0,c.useState)(!1),ye=(0,c.useRef)(J),Ee=(0,c.useRef)(new Map),ge=X?void 0:"multiple",ve=!o||te,[Te,be]=(0,c.useState)(null!=z?z:E.pM),[Se,Re]=(0,c.useState)(0),Ae=(0,u.D)(Se,0),Ce=(0,c.useCallback)((()=>Re(Se+1)),[Se]);(0,c.useEffect)((()=>{G&&be(ie?0:1)}),[ie,G]),(0,c.useEffect)((()=>{ye.current=J}),[J]);const Ie=(0,c.useCallback)(((e,t)=>(0,f.Y1)(e,t,ye.current)),[]),Oe=(0,c.useCallback)(((e,t)=>(0,f.tj)(e,t,te,Ie,H)),[te,H,Ie]),De=(0,c.useCallback)(((e,t)=>(0,f.Sl)(e,t,Ie,H)),[H,Ie]),[we,Ne]=(0,c.useState)(E.DW),Le=(0,c.useMemo)((()=>{const e=(0,p.Z)(J).filter((e=>!(0,f.Gq)((0,f.NA)(e),we))).map((e=>(0,f.nq)(e)?e:{value:e,label:String(e)}));return e.length>0?e.concat(we):we}),[we,J]),qe=(0,c.useCallback)((e=>(0,m.O$)(e).then((e=>{const{error:t}=e;se(t),L&&L(t)}))),[L]),xe=(0,c.useCallback)((e=>{let t=[];if(e&&Array.isArray(e)&&e.length){const r=new Set(e.map((e=>e.value)));Ne((n=>(t=n.filter((e=>!r.has(e.value))).concat(e).sort(De),t)))}return t}),[De]),Ue=(0,c.useMemo)((()=>(e,t)=>{if(de(t),_e)return void ae(!1);const r=b(e,t,Q),n=Ee.current.get(r);if(void 0!==n)return pe(n),void ae(!1);ae(!0),k(e,t,Q).then((({data:t,totalCount:n})=>{const a=xe(t);Ee.current.set(r,n),pe(n),!o&&""===e&&a.length>=n&&fe(!0)})).catch(qe).finally((()=>{ae(!1)}))}),[_e,o,xe,qe,k,Q]),Pe=(0,c.useMemo)((()=>l()(Ue,_.M$)),[Ue]),Ze=l()((e=>{const r=e.trim();if(t){const e=r&&!(0,f.Gq)(r,Le,!0)&&{label:r,value:r,isNewOption:!0},t=Le.filter((e=>!e.isNewOption||(0,f.Gq)(e.value,J))),n=e?[e,...t]:t;Ne(n)}_e||!me||Ee.current.has(b(r,0,Q))||ae(!(o&&!r)),re(e),null==Z||Z(r)}),_.oP);(0,c.useEffect)((()=>()=>Ze.cancel()),[Ze]),(0,c.useEffect)((()=>{if(Se!==Ae){const e=(0,p.Z)(J),t=new Set(e.map(f.NA)),r=(0,f.vi)(Le.filter((e=>t.has(e.value))));X?null==q||q(J,r[0]):null==q||q(e,r)}}),[Le,X,q,Se,Ae,J]),(0,c.useEffect)((()=>{Ee.current.clear(),fe(!1),Ne(E.DW)}),[k]),(0,c.useEffect)((()=>{ee(j)}),[j]),(0,c.useEffect)((()=>()=>{Pe.cancel()}),[Pe]),(0,c.useEffect)((()=>{me&&ve&&(te?Pe(te,0):Ue("",0))}),[me,Ue,ve,te,Pe]),(0,c.useEffect)((()=>{void 0!==I&&I!==ne&&ae(I)}),[ne,I]);const Me=()=>Ee.current.clear();(0,c.useImperativeHandle)(K,(()=>({...K.current,clearCache:Me})),[K]);const Fe=(0,c.useCallback)((async e=>{let r=(0,f.Rl)(e,Le,!0);if(!r&&!_e){const t=k;r=await t(e,0,Q).then((({data:t})=>t.find((t=>t.label===e))))}if(!r&&!t)return;const n={label:e,value:e};return r&&(n.label=(0,f.Kn)(r)?r.label:r,n.value=(0,f.Kn)(r)?r.value:r),n}),[_e,t,Le,k,Q]),ke=(0,c.useMemo)((()=>(0,f.$)(Le)),[Le]);return(0,v.BX)(y.PQ,{headerPosition:S,children:[h&&(0,v.tZ)(y.eb,{headerPosition:S,children:h}),(0,v.tZ)(y.Qr,{allowClear:!ne&&e,"aria-label":r||D,autoClearSearchValue:n,dropdownRender:e=>(0,f.RI)(e,ie,ne,Le.length,R,oe?(0,v.tZ)(T,{error:oe}):void 0),filterOption:(e,t)=>(0,f.Dz)(e,t,F,i),filterSort:Oe,getPopupContainer:V||(e=>e.parentNode),headerPosition:S,labelInValue:!0,maxTagCount:Te,mode:ge,notFoundContent:ne?(0,d.t)("Loading..."):w,onBlur:e=>{re(""),null==N||N(e)},onDeselect:(e,t)=>{Array.isArray(J)&&((0,f.nq)(e)?ee(J.filter((t=>t.value!==e.value))):ee(J.filter((t=>t!==e))),t.isNewOption&&Ne(Le.filter((t=>(0,f.NA)(t.value)!==(0,f.NA)(e))))),Ce(),null==P||P(e,t)},onDropdownVisibleChange:e=>{if(le(e),me!==e&&he(e),!e&&ne&&setTimeout((()=>{ae(!1)}),250),e&&!te&&we.length>1){const e=we.slice().sort(De);s()(e,we)||Ne(e)}U&&U(e)},onPaste:async e=>{const t=e.clipboardData.getData("text");if(X){const e=await Fe(t);e&&ee(e)}else{const e=Y.find((e=>t.includes(e))),r=e?a()(t.split(e)):[t],n=(await Promise.all(r.map((e=>Fe(e))))).filter((e=>void 0!==e));ee((e=>[...e||[],...n.filter((t=>!(0,f.Gq)(t.value,e)))]))}Ce()},onPopupScroll:e=>{const t=e.currentTarget,r=t.scrollTop>.7*(t.scrollHeight-t.offsetHeight);!ne&&ce*Q+Q<ue&&r&&Ue(te,ce+1)},onSearch:B?Ze:void 0,onSelect:(e,t)=>{if(X){const t=!(0,f.Xy)(e,J,"value");ee(e),t&&Ce()}else ee((t=>{const r=(0,p.Z)(t),n=(0,f.NA)(e);if(!(0,f.Gq)(n,r)){const t=[...r,e];return(0,f.nq)(e),t}return t})),Ce();null==M||M(e,t)},onClear:()=>{ee(void 0),x&&x(),Ce()},options:ke?void 0:Le,placeholder:$,showSearch:B,showArrow:!0,tokenSeparators:Y,value:J,suffixIcon:(0,f.AI)(ne,B,ie),menuItemSelectedIcon:A?(0,v.tZ)(y.F6,{iconSize:"m","aria-label":"stop"}):(0,v.tZ)(y.Y1,{iconSize:"m","aria-label":"check"}),oneLine:G,tagRender:g.Z,...W,ref:K,children:(0,f.$)(Le)&&(0,f.PO)(Le)})]})}))},134891:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(560331),a=r(751995),o=r(903297),s=r(358593),i=r(908420),l=r(985633),c=r(747767),d=r(135944);const u=(0,a.iK)(n.Z)`
  & .ant-tag-close-icon {
    display: inline-flex;
    align-items: center;
    margin-left: ${({theme:e})=>e.gridUnit}px;
  }

  & .tag-content {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,p=e=>{const[t,r]=(0,o.Z)();return(0,d.tZ)(s.u,{title:r?e.children:null,children:(0,d.tZ)(u,{closeIcon:null!=e&&e.closable?i.H:void 0,...e,className:"ant-select-selection-item",children:(0,d.tZ)("span",{className:"tag-content",ref:t,children:e.children})})})},m=e=>{const{label:t,value:r}=e;return r!==l.qP?(0,d.tZ)(p,{onMouseDown:e=>{const t=e.target;("svg"===t.tagName||"path"===t.tagName||"span"===t.tagName&&t.className.includes("ant-tag-close-icon"))&&e.stopPropagation()},...e,children:t}):(0,d.tZ)(c.WC,{})}},281315:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(944908),a=r.n(n),o=r(618446),s=r.n(o),i=r(23279),l=r.n(i),c=r(667294),d=r(61988),u=r(785716),p=r(355786),m=r(767190),h=r(645636),_=r(564749),f=r(427600),y=r(985633),E=r(747767),g=r(526579),v=r(134891),T=r(135944);const b=(0,c.forwardRef)((({allowClear:e,allowNewOptions:t=!1,allowSelectAll:r=!0,ariaLabel:n,autoClearSearchValue:o=!1,filterOption:i=!0,header:b=null,headerPosition:S="top",helperText:R,invertSelection:A=!1,labelInValue:C=!1,loading:I,mode:O="single",name:D,notFoundContent:w,onBlur:N,onChange:L,onClear:q,onDropdownVisibleChange:x,onDeselect:U,onSearch:P,onSelect:Z,optionFilterProps:M=["label","value"],options:F,placeholder:k=(0,d.t)("Select ..."),showSearch:Q=!0,sortComparator:$=g.Ns,tokenSeparators:B=g.pp,value:H,getPopupContainer:Y,oneLine:j,maxTagCount:V,...G},z)=>{const W="single"===O,K=!!t||Q,[X,J]=(0,c.useState)(H),[ee,te]=(0,c.useState)(""),[re,ne]=(0,c.useState)(I),[ae,oe]=(0,c.useState)(!1),[se,ie]=(0,c.useState)(null!=V?V:g.pM),[le,ce]=(0,c.useState)(0),de=(0,u.D)(le,0),ue=(0,c.useCallback)((()=>ce(le+1)),[le]);(0,c.useEffect)((()=>{j&&ie(ae?0:1)}),[ae,j]);const pe=W?void 0:"multiple",{Option:me}=_.default,he=(0,c.useCallback)(((e,t)=>(0,y.Y1)(e,t,X)),[X]),_e=(0,c.useCallback)(((e,t)=>(0,y.tj)(e,t,ee,he,$)),[ee,$,he]),fe=(0,c.useMemo)((()=>Array.isArray(F)?F.slice():g.DW),[F]),ye=(0,c.useMemo)((()=>fe.slice().sort(he)),[fe,he]),[Ee,ge]=(0,c.useState)(ye),ve=(0,c.useMemo)((()=>{let e;Ee.some((e=>e.options))&&(e=Ee.reduce(((e,t)=>[...e,...t.options]),[]));const t=(0,p.Z)(X).filter((t=>!(0,y.Gq)((0,y.NA)(t),e||Ee))).map((e=>(0,y.nq)(e)?e:{value:e,label:String(e)}));return(t.length>0?t.concat(Ee):Ee).filter((e=>e.value!==y.qP))}),[Ee,X]),Te=(0,c.useMemo)((()=>ve.filter((e=>!e.disabled))),[ve]),be=(0,c.useMemo)((()=>ve.filter((e=>(0,y.Gq)(e.value,X)||!e.disabled))),[ve,X]),Se=(0,c.useMemo)((()=>!W&&r&&Ee.length>0&&Te.length>1&&!ee),[W,r,Ee.length,Te.length,ee]),Re=(0,c.useMemo)((()=>(0,p.Z)(X).length===be.length+1),[X,be]),Ae=()=>{J(W?void 0:ve.filter((e=>e.disabled&&(0,y.Gq)(e.value,X))).map((e=>C?{label:e.label,value:e.value}:e.value))),ue()},Ce=l()((e=>{const r=e.trim();if(t){const e=r&&!(0,y.Gq)(r,ve,!0)&&{label:r,value:r,isNewOption:!0},t=(0,p.Z)(ve).filter((e=>!e.isNewOption||(0,y.Gq)(e.value,X))),n=e?[e,...t]:t;ge(n)}te(r),null==P||P(r)}),f.oP);(0,c.useEffect)((()=>()=>Ce.cancel()),[Ce]),(0,c.useEffect)((()=>{ge(fe)}),[fe]),(0,c.useEffect)((()=>{void 0!==I&&I!==re&&ne(I)}),[re,I]),(0,c.useEffect)((()=>{J(H)}),[H]),(0,c.useEffect)((()=>{Se&&(0,p.Z)(H).length===be.length&&J(C?[...(0,p.Z)(H),y.tP]:[...(0,p.Z)(H),y.qP])}),[C,be.length,Se,H]),(0,c.useEffect)((()=>{if((0,p.Z)(X).some((e=>(0,y.NA)(e)===y.qP))&&!Re){const e=be.map((e=>C?e:e.value));e.push(C?y.tP:y.qP),J(e),ue()}}),[X,Re,C,be,ue]);const Ie=(0,c.useMemo)((()=>()=>`${y.qP} (${(0,m.uf)(h.default.INTEGER,be.length)})`),[be]),Oe=(0,c.useCallback)(((e,t)=>{let r=e,n=t;if(!W)if((0,p.Z)(r).some((e=>(0,y.NA)(e)===y.qP)))Re?r=(0,p.Z)(e).filter((e=>(0,y.NA)(e)!==y.qP)):(r=(0,y.Q8)(be,C),n=(0,y.vi)(be));else if((0,p.Z)(e).length===be.length&&Re){const e=be.filter((e=>(0,y.Gq)(e.value,X)&&e.disabled));r=(0,y.Q8)(e,C),n=(0,y.vi)(e)}null==L||L(r,n)}),[W,C,L,be,Re,X]);(0,c.useEffect)((()=>{if(le!==de){const e=(0,p.Z)(X),t=new Set(e.map(y.NA)),r=(0,y.vi)(ve.filter((e=>t.has(e.value))));W?Oe(X,X?r[0]:void 0):Oe(e,r)}}),[ve,Oe,W,L,le,de,X]);const De=(0,c.useMemo)((()=>Se||(0,y.$)(F)),[Se,F]),we=(0,c.useMemo)((()=>(0,p.Z)(X).length-se-(Re?1:0)),[se,Re,X]);let Ne=se;"responsive"!==Ne&&0===we&&Re&&(Ne-=1);const Le=(0,c.useCallback)((e=>{const r=(0,y.Rl)(e,ve,!0);if(r||t){if(C){const t={label:e,value:e};return r&&(t.label=(0,y.Kn)(r)?r.label:r,t.value=(0,y.Kn)(r)?r.value:r),t}return r?(0,y.Kn)(r)?r.value:r:e}}),[t,ve,C]);return(0,T.BX)(E.PQ,{headerPosition:S,children:[b&&(0,T.tZ)(E.eb,{headerPosition:S,children:b}),(0,T.BX)(E.Qr,{allowClear:!re&&e,"aria-label":n||D,autoClearSearchValue:o,dropdownRender:e=>(0,y.RI)(e,ae,re,ve.length,R),filterOption:(e,t)=>(0,y.Dz)(e,t,M,i),filterSort:_e,getPopupContainer:Y||(e=>e.parentNode),headerPosition:S,labelInValue:C,maxTagCount:Ne,maxTagPlaceholder:()=>`+ ${we>0?we:1} ...`,mode:pe,notFoundContent:re?(0,d.t)("Loading..."):w,onBlur:e=>{te(""),null==N||N(e)},onDeselect:(e,t)=>{if(Array.isArray(X))if((0,y.NA)(e)===(0,y.NA)(y.qP))Ae();else{let r=X;r=r.filter((t=>(0,y.NA)(t)!==(0,y.NA)(e))),Re&&!t.isNewOption&&(r=r.filter((e=>(0,y.NA)(e)!==y.qP))),J(r),t.isNewOption&&ge(ve.filter((t=>(0,y.NA)(t.value)!==(0,y.NA)(e))))}ue(),null==U||U(e,t)},onDropdownVisibleChange:e=>{oe(e),e&&!ee&&Ee.length>1&&(s()(ye,Ee)||ge(ye)),x&&x(e)},onPaste:e=>{const t=e.clipboardData.getData("text");if(W){const e=Le(t);e&&J(e)}else{const e=B.find((e=>t.includes(e))),r=(e?a()(t.split(e)):[t]).map((e=>Le(e))).filter((e=>void 0!==e));J((e=>[...e||[],...r]))}ue()},onPopupScroll:void 0,onSearch:K?Ce:void 0,onSelect:(e,t)=>{if(W){const t=!(0,y.Xy)(e,X,"value");J(e),t&&ue()}else J((t=>{const r=(0,p.Z)(t),n=(0,y.NA)(e);if(n===(0,y.NA)(y.qP))return(0,y.nq)(e)?[...be,y.tP]:[y.qP,...be.map((e=>e.value))];if(!(0,y.Gq)(n,r)){const t=[...r,e];return t.length===be.length&&Se?(0,y.nq)(e)?[...t,y.tP]:[...t,y.qP]:t}return t})),ue();null==Z||Z(e,t)},onClear:()=>{Ae(),q&&q()},placeholder:k,showSearch:K,showArrow:!0,tokenSeparators:B,value:X,suffixIcon:(0,y.AI)(re,K,ae),menuItemSelectedIcon:A?(0,T.tZ)(E.F6,{iconSize:"m","aria-label":"stop"}):(0,T.tZ)(E.Y1,{iconSize:"m","aria-label":"check"}),options:De?void 0:ve,oneLine:j,tagRender:v.Z,...G,ref:z,children:[Se&&(0,T.tZ)(me,{id:"select-all",className:"select-all",value:y.qP,children:Ie()},y.qP),De&&(0,y.PO)(ve)]})]})}))},526579:(e,t,r)=>{"use strict";r.d(t,{L8:()=>s,Ns:()=>i,DW:()=>o,pM:()=>n,pp:()=>a});const n=4,a=[",","\r\n","\n","\t",";"],o=[],s=100,i=(e,t,r)=>{let n,a;return"string"==typeof e.label&&"string"==typeof t.label?(n=e.label,a=t.label):"string"==typeof e.value&&"string"==typeof t.value&&(n=e.value,a=t.value),"string"==typeof n&&"string"==typeof a?r?function(e,t,r){const n=e.toLowerCase()||"",a=t.toLowerCase()||"",o=r.toLowerCase()||"";return r&&(Number(t===r)-Number(e===r)||Number(t.startsWith(r))-Number(e.startsWith(r))||Number(a===o)-Number(n===o)||Number(a.startsWith(o))-Number(n.startsWith(o))||Number(t.includes(r))-Number(e.includes(r))||Number(a.includes(o))-Number(e.includes(o)))||e.localeCompare(t)}(n,a,r):n.localeCompare(a):e.value-t.value}},747767:(e,t,r)=>{"use strict";r.d(t,{BD:()=>y,F6:()=>p,H$:()=>h,PQ:()=>c,Qr:()=>d,SC:()=>_,Vv:()=>E,WC:()=>u,Y1:()=>m,eb:()=>l,oz:()=>f});var n=r(751995),a=r(313322),o=r(560331),s=r(911382),i=r(564749);const l=n.iK.span`
  ${({theme:e,headerPosition:t})=>`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin-right: ${"left"===t?2*e.gridUnit:0}px;\n  `}
`,c=n.iK.div`
  ${({headerPosition:e})=>`\n    display: flex;\n    flex-direction: ${"top"===e?"column":"row"};\n    align-items: ${"left"===e?"center":void 0};\n    width: 100%;\n  `}
`,d=(0,n.iK)(i.default,{shouldForwardProp:e=>"headerPosition"!==e&&"oneLine"!==e})`
  ${({theme:e,headerPosition:t,oneLine:r})=>`\n    flex: ${"left"===t?1:0};\n    && .ant-select-selector {\n      border-radius: ${e.gridUnit}px;\n    }\n    // Open the dropdown when clicking on the suffix\n    // This is fixed in version 4.16\n    .ant-select-arrow .anticon:not(.ant-select-suffix) {\n      pointer-events: none;\n    }\n    .select-all {\n      border-bottom: 1px solid ${e.colors.grayscale.light3};\n    }\n    ${r&&`\n        .ant-select-selection-overflow {\n          flex-wrap: nowrap;\n        }\n\n        .ant-select-selection-overflow-item:not(.ant-select-selection-overflow-item-rest):not(.ant-select-selection-overflow-item-suffix) {\n          flex-shrink: 1;\n          min-width: ${13*e.gridUnit}px;\n        }\n\n        .ant-select-selection-overflow-item-suffix {\n          flex: unset;\n          min-width: 0px;\n        }\n      `};\n `}
`,u=n.iK.span`
  display: none;
`,p=((0,n.iK)(o.Z)`
  ${({theme:e})=>`\n    background: ${e.colors.grayscale.light3};\n    font-size: ${e.typography.sizes.m}px;\n    border: none;\n  `}
`,(0,n.iK)(a.Z.StopOutlined)`
  vertical-align: 0;
`),m=(0,n.iK)(a.Z.CheckOutlined)`
  vertical-align: 0;
`,h=(0,n.iK)(s.Z)`
  margin-top: ${({theme:e})=>-e.gridUnit}px;
`,_=n.iK.div`
  ${({theme:e})=>`\n   margin-left: ${3*e.gridUnit}px;\n   line-height: ${8*e.gridUnit}px;\n   color: ${e.colors.grayscale.light1};\n `}
`,f=n.iK.div`
  ${({theme:e})=>`\n   padding: ${2*e.gridUnit}px ${3*e.gridUnit}px;\n   color: ${e.colors.grayscale.base};\n   font-size: ${e.typography.sizes.s}px;\n   cursor: default;\n   border-bottom: 1px solid ${e.colors.grayscale.light2};\n `}
`,y=n.iK.div`
  ${({theme:e})=>`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    width: 100%;\n    padding: ${2*e.gridUnit}px;\n    color: ${e.colors.error.base};\n    & svg {\n      margin-right: ${2*e.gridUnit}px;\n    }\n  `}
`,E=n.iK.div`
  overflow: hidden;
  text-overflow: ellipsis;
`},985633:(e,t,r)=>{"use strict";r.d(t,{$:()=>C,AI:()=>S,Dz:()=>A,Gq:()=>E,Kn:()=>m,NA:()=>_,PO:()=>I,Q8:()=>O,RI:()=>R,Rl:()=>y,Sl:()=>b,Xy:()=>f,Y1:()=>v,mj:()=>g,nq:()=>h,qP:()=>u,tP:()=>p,tj:()=>T,vi:()=>D});var n=r(355786),a=r(61988),o=r(564749),s=r(313322),i=r(747767),l=r(135944),c=r(211965);const{Option:d}=o.default,u="Select All",p={value:u,label:String(u)};function m(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}function h(e){return m(e)&&"value"in e&&"label"in e}function _(e){return h(e)?e.value:e}function f(e,t,r){return(m(e)&&r in e?e[r]:e)==(m(t)&&r in t?t[r]:t)}function y(e,t,r=!1){return(0,n.Z)(t).find((t=>f(t,e,"value")||r&&f(t,e,"label")))}function E(e,t,r=!1){return void 0!==y(e,t,r)}const g=e=>(t,r)=>"string"==typeof t[e]&&"string"==typeof r[e]?t[e].localeCompare(r[e]):t[e]-r[e],v=(e,t,r)=>r&&void 0!==e.value&&void 0!==t.value?Number(E(t.value,r))-Number(E(e.value,r)):0,T=(e,t,r,n,a)=>n(e,t)||a(e,t,r),b=(e,t,r,n)=>r(e,t)||n(e,t,""),S=(e,t,r)=>e?(0,l.tZ)(i.H$,{size:"small"}):t&&r?(0,l.tZ)(s.Z.SearchOutlined,{iconSize:"s"}):(0,l.tZ)(s.Z.DownOutlined,{iconSize:"s"}),R=(e,t,r,n,o,s)=>{var c,d;return t||null==(c=e.ref)||null==(d=c.current)||d.scrollTo({top:0}),r&&0===n?(0,l.tZ)(i.SC,{children:(0,a.t)("Loading...")}):s||(0,l.BX)(l.HY,{children:[o&&(0,l.tZ)(i.oz,{role:"note",children:o}),e]})},A=(e,t,r,n)=>{if("function"==typeof n)return n(e,t);if(n){const n=e.trim().toLowerCase();if(null!=r&&r.length)return r.some((e=>(null!=t&&t[e]?String(t[e]).trim().toLowerCase():"").includes(n)))}return!1},C=e=>null==e?void 0:e.some((e=>!(null==e||!e.customLabel))),I=e=>e.map((e=>{const t="object"==typeof e,r=t?(null==e?void 0:e.label)||e.value:e,n=t?e.value:e,{customLabel:a,...o}=e;return(0,c.az)(d,{...o,key:n,label:r,value:n},t&&a?a:r)})),O=(e,t)=>t?e.map((e=>({key:e.value,value:e.value,label:e.label}))):e.map((e=>e.value)),D=e=>e.map((e=>({children:e.label,key:e.value,...e})))},908420:(e,t,r)=>{"use strict";r.d(t,{H:()=>d,Z:()=>u});var n=r(751995),a=r(625271),o=r(667294),s=r(358593),i=r(828508),l=r(135944);const c=(0,n.iK)(a.Z)`
  ${({theme:e})=>`\n  margin-top: ${e.gridUnit}px;\n  margin-bottom: ${e.gridUnit}px;\n  `};
`,d=(0,l.tZ)(i.Z,{role:"button"}),u=({name:e,id:t,index:r,onDelete:n,editable:a=!1,onClick:i,toolTipTitle:u=e})=>{const p=(0,o.useMemo)((()=>e.length>20),[e])?`${e.slice(0,20)}...`:e,m=i?t?"link":"button":void 0;return(0,l.tZ)(l.HY,{children:a?(0,l.tZ)(s.u,{title:u,children:(0,l.tZ)(c,{closable:a,onClose:()=>r?null==n?void 0:n(r):null,color:"blue",closeIcon:a?d:void 0,children:p},t)},u):(0,l.tZ)(s.u,{title:u,children:(0,l.tZ)(c,{onClick:i,role:m,children:t?(0,l.tZ)("a",{href:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer",children:p}):p},t)},u)})}},358593:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});var n=r(751995),a=r(211965),o=r(931097),s=r(135944);const i=e=>{const t=(0,n.Fg)();return(0,s.BX)(s.HY,{children:[(0,s.tZ)(a.xB,{styles:a.iv`
          .ant-tooltip-open {
            display: inline-block;
            &::after {
              content: '';
              display: block;
            }
          }
          .ant-tooltip-inner > p {
            margin: 0;
          }
        `}),(0,s.tZ)(o.Z,{overlayStyle:{fontSize:t.typography.sizes.s,lineHeight:"1.6"},overlayInnerStyle:{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:40,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},color:`${t.colors.grayscale.dark2}e6`,...e})]})}},229147:(e,t,r)=>{"use strict";r.d(t,{DG:()=>c,fG:()=>l});var n=r(667294),a=r(427600),o=r(23525),s=r(135944);const i=(0,n.createContext)({hideTitle:!1,hideTab:!1,hideNav:!1,hideChartControls:!1}),l=()=>(0,n.useContext)(i),c=({children:e})=>{const t=(0,o.eY)(a.KD.uiConfig)||0,[r]=(0,n.useState)({hideTitle:0!=(1&t),hideTab:0!=(2&t),hideNav:0!=(4&t),hideChartControls:0!=(8&t)});return(0,s.tZ)(i.Provider,{value:r,children:e})}},104715:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>T.Z,C0:()=>v.Z,Gj:()=>R.Z,Grid:()=>c.ZP,HY:()=>l.Z,IZ:()=>O.Z,JX:()=>s.Z,KU:()=>w.Z,O5:()=>g.Z,Od:()=>p.Z,Ol:()=>S.Z,Ph:()=>n.Z,Rg:()=>h.Z,T:()=>m.Z,Vp:()=>_.Z,X2:()=>u.Z,ZT:()=>y.Z,_e:()=>N.Z,aV:()=>d.ZP,gq:()=>E.Z,iz:()=>i.Z,mp:()=>f.Z,oc:()=>C.Z,qE:()=>o.C,qb:()=>a.Z,qz:()=>A.Z,r4:()=>b.Z,rb:()=>D.Z,xT:()=>I.Z});var n=r(281315),a=r(784101),o=r(751890),s=r(515746),i=r(227049),l=r(814277),c=r(75302),d=r(808243),u=r(771230),p=r(133860),m=r(519650),h=r(627220),_=r(560331),f=r(44885),y=r(616809),E=r(681306),g=r(435247),v=r(71577),T=r(201403),b=r(609676),S=r(46445),R=r(113013),A=r(34821),C=r(477808),I=r(499441),O=r(908834),D=r(245794),w=r(359314),N=r(931097)},641295:(e,t,r)=>{"use strict";r.d(t,{$A:()=>l,C6:()=>_,Fl:()=>m,Jy:()=>d,Mi:()=>u,Mn:()=>h,a8:()=>c,nH:()=>p});var n=r(522102),a=r(61988),o=r(844818),s=r(672570),i=r(909467);const l="DASHBOARD_INFO_UPDATED";function c(e){return{type:l,newInfo:e}}const d="SAVE_CHART_CONFIG_COMPLETE",u=({chartConfiguration:e,globalChartConfiguration:t})=>async(r,o)=>{r({type:"SAVE_CHART_CONFIG_BEGIN",chartConfiguration:e,globalChartConfiguration:t});const{id:i,metadata:l}=o().dashboardInfo,u=(0,n.Z)({method:"PUT",endpoint:`/api/v1/dashboard/${i}`});try{const n=await u({json_metadata:JSON.stringify({...l,chart_configuration:null!=e?e:l.chart_configuration,global_chart_configuration:null!=t?t:l.global_chart_configuration})});r(c({metadata:JSON.parse(n.result.json_metadata)})),r({type:d,chartConfiguration:e,globalChartConfiguration:t})}catch(n){r({type:"SAVE_CHART_CONFIG_FAIL",chartConfiguration:e,globalChartConfiguration:t}),r((0,s.Gb)((0,a.t)("Failed to save cross-filter scoping")))}},p="SET_FILTER_BAR_ORIENTATION",m="SET_CROSS_FILTERS_ENABLED";function h(e){return async(t,r)=>{const{id:a,metadata:l}=r().dashboardInfo,c=(0,n.Z)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`});try{const r=await c({json_metadata:JSON.stringify({...l,filter_bar_orientation:e})}),n=r.result,a=r.last_modified_time;if(n.json_metadata){const e=JSON.parse(n.json_metadata);e.filter_bar_orientation&&t((d=e.filter_bar_orientation,{type:p,filterBarOrientation:d}))}a&&t((0,i.Vv)(a))}catch(e){const r=await(0,o.HR)(e,"dashboard");throw t((0,s.Gb)(r)),e}var d}}function _(e){return async(t,r)=>{const{id:a,metadata:l}=r().dashboardInfo,c=(0,n.Z)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`});try{const r=await c({json_metadata:JSON.stringify({...l,cross_filters_enabled:e})}),n=r.result,a=r.last_modified_time;n.json_metadata&&t(function(e){return{type:m,crossFiltersEnabled:e}}(JSON.parse(n.json_metadata).cross_filters_enabled)),a&&t((0,i.Vv)(a))}catch(e){const r=await(0,o.HR)(e,"dashboard");throw t((0,s.Gb)(r)),e}}}},550810:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>o,QR:()=>i,Rn:()=>n});var n,a=r(431069);function o(e){return{type:n.SetDatasources,datasources:e}}function s(e,t){return{type:n.SetDatasource,key:t,datasource:e}}function i(e){return(t,r)=>{const{datasources:n}=r(),o=n[e];return o?t(s(o,e)):a.Z.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`}).then((({json:r})=>t(s(r,e))))}}!function(e){e.SetDatasources="SET_DATASOURCES",e.SetDatasource="SET_DATASOURCE"}(n||(n={}))},152794:(e,t,r)=>{"use strict";r.d(t,{$7:()=>h,DU:()=>g,RY:()=>d,T6:()=>m,TT:()=>y,Up:()=>_,X8:()=>p,jE:()=>f,kN:()=>c,qN:()=>E,qe:()=>l,rF:()=>T,rR:()=>v,xk:()=>u});var n=r(150361),a=r.n(n),o=r(522102),s=r(174599),i=r(641295);const l="SET_FILTER_CONFIG_COMPLETE",c="SET_IN_SCOPE_STATUS_OF_FILTERS",d=e=>async(t,r)=>{var n;t({type:"SET_FILTER_CONFIG_BEGIN",filterConfig:e});const{id:a,metadata:c}=r().dashboardInfo,d=null==(n=r().nativeFilters)?void 0:n.filters,u=(0,o.Z)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`}),p=e.map((e=>{const t=d[e.id];return t?{...t,...e}:e}));try{const e=await u({json_metadata:JSON.stringify({...c,native_filter_configuration:p})});t((0,i.a8)({metadata:JSON.parse(e.result.json_metadata)})),t({type:l,filterConfig:p}),t((0,s.Ft)(p,d))}catch(e){t({type:"SET_FILTER_CONFIG_FAIL",filterConfig:p}),t({type:s.u3,filterConfig:p})}},u=e=>async(t,r)=>{var n;const o=null==(n=r().nativeFilters)?void 0:n.filters,s=e.map((e=>({...o[e.filterId],chartsInScope:e.chartsInScope,tabsInScope:e.tabsInScope})));t({type:c,filterConfig:s});const l=a()(r().dashboardInfo.metadata),d=l.native_filter_configuration.map((e=>{const t=s.find((t=>t.id===e.id));return t?{...t,...e}:e}));l.native_filter_configuration=d,t((0,i.a8)({metadata:l}))},p="SET_FOCUSED_NATIVE_FILTER",m="UNSET_FOCUSED_NATIVE_FILTER";function h(e){return{type:p,id:e}}function _(){return{type:m}}const f="SET_HOVERED_NATIVE_FILTER",y="UNSET_HOVERED_NATIVE_FILTER";function E(e){return{type:f,id:e}}function g(){return{type:y}}const v="UPDATE_CASCADE_PARENT_IDS";function T(e,t){return{type:v,id:e,parentIds:t}}},138523:(e,t,r)=>{"use strict";r.d(t,{D2:()=>p,EO:()=>u,Ff:()=>_,JV:()=>d,cK:()=>m,ex:()=>f});var n=r(115926),a=r.n(n),o=r(431069),s=r(844818),i=r(61988),l=r(672570);const c=200,d="ADD_SLICES",u="SET_SLICES",p="FETCH_ALL_SLICES_STARTED",m="FETCH_ALL_SLICES_FAILED",h=e=>e.reduce(((e,t)=>{let r=JSON.parse(t.params);var n,a;return r={...r,datasource:(n=t.datasource_id,a=t.datasource_type,`${n}__${a}`||r.datasource)},{...e,[t.id]:{slice_id:t.id,slice_url:t.url,slice_name:t.slice_name,form_data:r,datasource_name:t.datasource_name_text,datasource_url:t.datasource_url,datasource_id:t.datasource_id,datasource_type:t.datasource_type,changed_on:new Date(t.changed_on_utc).getTime(),description:t.description,description_markdown:t.description_markeddown,viz_type:t.viz_type,modified:t.changed_on_delta_humanized,changed_on_humanized:t.changed_on_delta_humanized,thumbnail_url:t.thumbnail_url,owners:t.owners,created_by:t.created_by}}}),{});function _(e){return t=>{t(function(e){return{type:u,payload:{slices:e}}}(e))}}function f(e,t,r="changed_on"){return n=>{n({type:p});const u=t?[{col:"slice_name",opr:"chart_all_text",value:t}]:[];return e&&u.push({col:"owners",opr:"rel_m_m",value:e}),o.Z.get({endpoint:`/api/v1/chart/?q=${a().encode({columns:["changed_on_delta_humanized","changed_on_utc","datasource_id","datasource_type","datasource_url","datasource_name_text","description_markeddown","description","id","params","slice_name","thumbnail_url","url","viz_type","owners.id","created_by.id"],filters:u,page_size:c,order_column:"changed_on"===r?"changed_on_delta_humanized":r,order_direction:"changed_on"===r?"desc":"asc"})}`}).then((({json:e})=>{const{result:t}=e,r=h(t);return n(function(e){return{type:d,payload:{slices:e}}}(r))})).catch((e=>(0,s.O$)(e).then((({error:e})=>{n(function(e){return{type:m,payload:{error:e}}}(e||(0,i.t)("Could not fetch all saved charts"))),n((0,l.Gb)((0,i.t)("Sorry there was an error fetching saved charts: ")+e))}))))}}},392242:(e,t,r)=>{"use strict";r.d(t,{EJ:()=>u,G$:()=>c,GA:()=>d,Ky:()=>m,QN:()=>_,W6:()=>h,rW:()=>p,uh:()=>l});var n=r(68492),a=r(10916),o=r(964296),s=r(680621),i=r(8868);const l=(e,t,r=[])=>{if(r.includes(t))return!0;const n=e.get(t);return!!n&&n.some((n=>l(e,n,[...r,t])))},c=async(e,t,r)=>{try{let t;try{t=await e.validateFields()}catch(e){var a;if(null!=e&&null!=(a=e.errorFields)&&a.length||null==e||!e.outOfDate)throw e;t=e.values}return t}catch(e){var o;if(n.Z.warn("Filter configuration failed:",e),null==(o=e.errorFields)||!o.length)return null;const a=e.errorFields;if(!a.some((e=>e.name[1]===t))){const e=a.find((e=>"filters"===e.name[0]));e&&r(e.name[1])}return null}},d=(e,t,r,n,o)=>async()=>{const l=t.filter((e=>!r[e])).map((t=>{var r,n,l,c;const d=null==(r=o.filters)?void 0:r[t];if(!d)return e[t];if(d.type===a.BE.Divider)return{id:t,type:a.BE.Divider,scope:{rootPath:[s._4],excluded:[]},title:d.title,description:d.description};const u={};return d.dataset&&(u.datasetId=d.dataset.value),d.dataset&&d.column&&(u.column={name:d.column}),{id:t,adhoc_filters:d.adhoc_filters,time_range:d.time_range,controlValues:null!=(n=d.controlValues)?n:{},granularity_sqla:d.granularity_sqla,requiredFirst:Object.values(null!=(l=d.requiredFirst)?l:{}).find((e=>e)),name:d.name,filterType:d.filterType,targets:[u],defaultDataMask:null!=(c=d.defaultDataMask)?c:(0,i.H)(),cascadeParentIds:d.dependencies||[],scope:d.scope,sortMetric:d.sortMetric,type:d.type,description:(d.description||"").trim()}}));await n(l)},u=(e,t,r)=>n=>{const a=window.setTimeout((()=>{(r=>{e((e=>({...e,[r]:{isPending:!1}}))),t((e=>e.filter((e=>e!==r))))})(n)}),5e3);e((e=>({...e,[n]:{isPending:!0,timerId:a}}))),r(!1)},p="NATIVE_FILTER-",m="NATIVE_FILTER_DIVIDER-",h=e=>`${e===a.BE.NativeFilter?p:m}${(0,o.x0)()}`,_=e=>e.map((e=>e.id))},409531:(e,t,r)=>{"use strict";r.d(t,{I6:()=>l,Ky:()=>s,UN:()=>d,XX:()=>u,aF:()=>c,eV:()=>h,gz:()=>i,oB:()=>m,tw:()=>o,yT:()=>p});var n=r(46078),a=r(680621);const o={id:0,type:n.i9.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_formats:{},currency_formats:{},verbose_map:{},main_dttm_col:"",description:""},s=53,i=32,l=260,c=550,d=80,u=374,p=["css","json_metadata.filter_scopes"],m=10,h={rootPath:[a._4],excluded:[]}},239759:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s,a:()=>o});var n=r(152794),a=r(904305);function o({filterConfig:e,state:t}){const r={},n={};var a;return e?(e.forEach((e=>{const{id:t}=e;n[t]=e})),r.filters=n):r.filters=null!=(a=null==t?void 0:t.filters)?a:{},r.focusedFilterId=void 0,r}function s(e={filters:{}},t){switch(t.type){case a.$:return{filters:t.data.nativeFilters.filters};case n.qe:case n.kN:return o({filterConfig:t.filterConfig,state:e});case n.X8:return{...e,focusedFilterId:t.id};case n.T6:return{...e,focusedFilterId:void 0};case n.jE:return{...e,hoveredFilterId:t.id};case n.TT:return{...e,hoveredFilterId:void 0};case n.rR:return{...e,filters:{...e.filters,[t.id]:{...e.filters[t.id],cascadeParentIds:t.parentIds}}};default:return e}}},52004:(e,t,r)=>{"use strict";var n;r.d(t,{$:()=>a,Bp:()=>n,_6:()=>o,bu:()=>s}),function(e){e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL"}(n||(n={}));const a="global",o=e=>e===a;var s;!function(e){e.DownloadAsImage="download_as_image",e.ExploreChart="explore_chart",e.ExportCsv="export_csv",e.ExportPivotCsv="export_pivot_csv",e.ExportFullCsv="export_full_csv",e.ExportXlsx="export_xlsx",e.ExportFullXlsx="export_full_xlsx",e.ForceRefresh="force_refresh",e.Fullscreen="fullscreen",e.ToggleChartDescription="toggle_chart_description",e.ViewQuery="view_query",e.ViewResults="view_results",e.DrillToDetail="drill_to_detail",e.CrossFilterScoping="cross_filter_scoping",e.Share="share",e.ShareByEmail="share_by_email",e.CopyLink="copy_link",e.Download="download",e.SaveModal="save_modal",e.RefreshDashboard="refresh_dashboard",e.AutorefreshModal="autorefresh_modal",e.SetFilterMapping="set_filter_mapping",e.EditProperties="edit_properties",e.EditCss="edit_css",e.ToggleFullscreen="toggle_fullscreen",e.ManageEmbedded="manage_embedded",e.ManageEmailReports="manage_email_reports"}(s||(s={}))},81255:(e,t,r)=>{"use strict";r.d(t,{BA:()=>a,BG:()=>s,F0:()=>u,Nc:()=>c,Os:()=>p,U0:()=>i,Vl:()=>o,ZP:()=>f,dW:()=>n,gn:()=>h,hE:()=>l,t:()=>_,xh:()=>d,yR:()=>m});const n="CHART",a="COLUMN",o="HEADER",s="GRID",i="ROOT",l="DIVIDER",c="HEADER",d="MARKDOWN",u="NEW_COMPONENT_SOURCE",p="ROW",m="TABS",h="TAB",_="DYNAMIC",f={CHART_TYPE:n,COLUMN_TYPE:a,DASHBOARD_HEADER_TYPE:o,DASHBOARD_GRID_TYPE:s,DASHBOARD_ROOT_TYPE:i,DIVIDER_TYPE:l,HEADER_TYPE:c,MARKDOWN_TYPE:d,NEW_COMPONENT_SOURCE_TYPE:u,ROW_TYPE:p,TABS_TYPE:m,TAB_TYPE:h,DYNAMIC_TYPE:_}},680621:(e,t,r)=>{"use strict";r.d(t,{AA:()=>b,Bu:()=>q,C3:()=>p,D0:()=>i,ES:()=>d,Ep:()=>x,HE:()=>O,Jd:()=>l,M2:()=>a,Mu:()=>y,NN:()=>_,NT:()=>N,Nb:()=>c,OE:()=>A,PV:()=>n,Q9:()=>D,TN:()=>w,Xk:()=>h,Z1:()=>u,Zn:()=>s,_4:()=>o,_B:()=>P,b5:()=>I,cd:()=>E,cx:()=>T,cz:()=>v,dU:()=>U,es:()=>g,fw:()=>S,gR:()=>f,kS:()=>L,pQ:()=>C,u_:()=>R,vD:()=>m});const n="GRID_ID",a="HEADER_ID",o="ROOT_ID",s="DASHBOARD_VERSION_KEY",i="NEW_COMPONENTS_SOURCE_ID",l="NEW_CHART_ID",c="NEW_COLUMN_ID",d="NEW_DIVIDER_ID",u="NEW_HEADER_ID",p="NEW_MARKDOWN_ID",m="NEW_ROW_ID",h="NEW_TAB_ID",_="NEW_TABS_ID",f="NEW_DYNAMIC_COMPONENT",y=0,E=8,g=2*E,v=12,T=1,b=5,S=4,R="SMALL_HEADER",A="MEDIUM_HEADER",C="LARGE_HEADER",I="BACKGROUND_WHITE",O="BACKGROUND_TRANSPARENT",D=50,w="overwrite",N="overwriteConfirmed",L="newDashboard",q=65535,x=["LABEL"],U="ALL_FILTERS_ROOT";var P;!function(e){e[e.None=0]="None",e[e.HideNav=1]="HideNav",e[e.HideNavAndTitle=2]="HideNavAndTitle",e[e.Report=3]="Report"}(P||(P={}))},852838:(e,t,r)=>{"use strict";r.d(t,{U:()=>p,g:()=>m});var n=r(150361),a=r.n(n),o=r(593185),s=r(237731),i=r(311064),l=r(616355),c=r(732873),d=r(52004),u=r(409531);const p=e=>(0,o.cr)(o.TT.DashboardCrossFilters)&&(void 0===e||e),m=(e,t,r)=>{var n;if(!(0,o.cr)(o.TT.DashboardCrossFilters))return;const p=null!=(n=t.global_chart_configuration)&&n.scope?{scope:t.global_chart_configuration.scope,chartsInScope:(0,c.Q)(t.global_chart_configuration.scope,Object.values(r).map((e=>e.id)),e)}:{scope:u.eV,chartsInScope:Object.values(r).map((e=>e.id))},m={};return Object.values(e).forEach((n=>{var o,u,h,_,f,y;const E=null==(o=n.meta)?void 0:o.chartId;var g;(0,s.Z)(E)&&((null!=(u=null==(h=null!=(_=(0,i.Z)().get(null==(f=r[E])||null==(y=f.form_data)?void 0:y.viz_type))?_:{})?void 0:h.behaviors)?u:[]).includes(l.cg.InteractiveChart)&&(null!=(g=t.chart_configuration)&&g[E]&&(m[E]=a()(t.chart_configuration[E])),m[E]||(m[E]={id:E,crossFilters:{scope:d.$}}),m[E].crossFilters.chartsInScope=(0,d._6)(m[E].crossFilters.scope)?p.chartsInScope.filter((e=>e!==Number(E))):(0,c.Q)(m[E].crossFilters.scope,Object.values(r).map((e=>e.id)),e)))})),{chartConfiguration:m,globalChartConfiguration:p}}},870400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(517563);const a=new Set(["standalone","edit"]);function o(e){const t=n.parse(window.location.search);return Object.entries(t).reduce(((t,[r,n])=>"regular"===e&&a.has(r)||"reserved"===e&&!a.has(r)?t:Array.isArray(n)?{...t,[r]:n[0]}:{...t,[r]:n}),{})}},995173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const n={};function a(e){let t=null;if(e){const{childId:a,layout:o={}}=e;if(n[a]){var r;const e=(null==o?void 0:o[n[a]])||{};if(null!=e&&e.children&&null!=e&&null!=(r=e.children)&&null!=r.includes&&r.includes(a))return e.id}t=function(e){let t=null;if(e){const{childId:n,layout:a={}}=e;if(a){const e=Object.keys(a);for(let o=0;o<=e.length-1;o+=1){var r;const s=e[o],i=a[s]||{};if(s!==n&&null!=i&&null!=(r=i.children)&&null!=r.includes&&r.includes(n)){t=s;break}}}}return t}({childId:a,layout:o}),n[a]=t}return t}},732873:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});var n=r(81255);function a(e,t,r){const a=Object.values(r);return t.filter((t=>{var r,o;return!e.excluded.includes(t)&&(null==(r=a.find((e=>{var r;return(null==e?void 0:e.type)===n.dW&&(null==(r=e.meta)?void 0:r.chartId)===t})))||null==(o=r.parents)?void 0:o.some((t=>e.rootPath.includes(t))))}))}},820194:(e,t,r)=>{"use strict";function n({chartId:e,column:t}){return`${e}_${t}`}r.d(t,{_:()=>o,w:()=>n});const a=/^([0-9]+)_(.*)$/;function o(e){const t=a.exec(e);if(!t)throw new Error("Cannot parse invalid filter key");return{chartId:parseInt(t[1],10),column:t[2]}}},156967:(e,t,r)=>{"use strict";function n(){return(window.location.hash||"#").substring(1)}r.d(t,{Z:()=>n})},922318:(e,t,r)=>{"use strict";r.d(t,{Ms:()=>d,Xg:()=>p,i5:()=>l,N$:()=>u});var n=r(593185),a=r(968630),o=r.n(a);function s(e){return function(e){return o()(e)&&"username"in e}(e)&&"permissions"in e&&"roles"in e}var i=r(212617);const l=e=>s(e)&&Object.keys(e.roles||{}).some((e=>"admin"===e.toLowerCase())),c=(e,t)=>s(t)&&e.owners.some((e=>e.id===t.userId)),d=(e,t)=>s(t)&&(l(t)||c(e,t))&&(0,i.R)("can_write","Dashboard",null==t?void 0:t.roles);function u(e,t,r){return l(e)||s(e)&&Object.values(e.roles||{}).flat().some((e=>e[0]===r&&e[1]===t))}const p=(e,t)=>s(t)&&(0,i.R)("can_write","Dashboard",null==t?void 0:t.roles)&&(!(0,n.cr)(n.TT.DashboardRbac)||l(t)||c(e,t))},174599:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,Ch:()=>a,Ft:()=>l,eG:()=>c,mO:()=>s,sh:()=>u,u3:()=>i,ze:()=>d});var n=r(8868);const a="CLEAR_DATA_MASK_STATE",o="UPDATE_DATA_MASK",s="SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE",i="SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL";function l(e,t){return{type:s,filterConfig:e,filters:t}}function c(e,t){return{type:o,filterId:e,dataMask:t}}function d(e){return c(e,(0,n.H)(e))}function u(){return{type:a}}},8868:(e,t,r)=>{"use strict";r.d(t,{H:()=>c,Z:()=>u});var n=r(512902),a=r(593185),o=r(392242),s=r(904305),i=r(174599),l=r(599543);function c(e,t={}){let r={};return e&&(r={id:e}),{...r,extraFormData:{},filterState:{},ownState:{},...t}}function d(e,t,r,n,a){e.forEach((e=>{var r;const o=n||{};t[e.id]={...c(e.id),...e.defaultDataMask,...o[e.id]},a&&!(0,l.JB)(e.defaultDataMask,null==(r=a[e.id])?void 0:r.defaultDataMask,{ignoreUndefined:!0})&&(t[e.id]={...t[e.id],...e.defaultDataMask})})),Object.values(r).forEach((e=>{String(null==e?void 0:e.id).startsWith(o.rW)||(t[null==e?void 0:e.id]=e)}))}const u=(0,n.ZP)(((e,t)=>{var r,n,o,l;const u={};switch(t.type){case i.Ch:return u;case i.A:return e[t.filterId]={...c(t.filterId),...e[t.filterId],...t.dataMask},e;case s.$:var p,m;return(0,a.cr)(a.TT.DashboardCrossFilters)&&Object.keys(null==(p=t.data.dashboardInfo)||null==(m=p.metadata)?void 0:m.chart_configuration).forEach((e=>{u[e]={...c(e)}})),d(null!=(r=null==(n=t.data.dashboardInfo)||null==(o=n.metadata)?void 0:o.native_filter_configuration)?r:[],u,e,t.data.dataMask),u;case i.mO:return d(null!=(l=t.filterConfig)?l:[],u,e,t.filters),u;default:return e}}),{})},199068:(e,t,r)=>{"use strict";r.d(t,{AG:()=>i,yn:()=>d});var n=r(431069),a=r(844818),o=r(672570),s=r(200651);const i="SET_DATASOURCE";function l(e){return{type:i,datasource:e}}function c(e){return function(t,r){const{explore:{datasource:n}}=r();t(l(e)),t((0,s.updateFormDataByDatasource)(n,e))}}const d={setDatasource:l,changeDatasource:c,saveDataset:function({schema:e,sql:t,database:r,templateParams:s,datasourceName:i,columns:l}){return async function(d){try{const{json:{data:a}}=await n.Z.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:null==r?void 0:r.id,table_name:i,schema:e,sql:t,template_params:s,columns:l})});return d(c(a)),a}catch(e){throw(0,a.O$)(e).then((e=>{d((0,o.Gb)(e.error))})),e}}}}},200651:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CREATE_NEW_SLICE:()=>q,FETCH_DATASOURCES_STARTED:()=>m,FETCH_DATASOURCES_SUCCEEDED:()=>_,FETCH_DATASOURCE_SUCCEEDED:()=>u,FETCH_FAVE_STAR:()=>g,POST_DATASOURCE_STARTED:()=>d,SAVE_FAVE_STAR:()=>T,SET_EXPLORE_CONTROLS:()=>A,SET_FIELD_VALUE:()=>S,SET_FORCE_QUERY:()=>Z,SET_FORM_DATA:()=>I,SET_SAVE_ACTION:()=>N,SET_STASH_FORM_DATA:()=>F,SLICE_UPDATED:()=>U,TOGGLE_FAVE_STAR:()=>y,UPDATE_CHART_TITLE:()=>D,UPDATE_FORM_DATA_BY_DATASOURCE:()=>l,createNewSlice:()=>x,exploreActions:()=>Q,fetchDatasourceSucceeded:()=>p,fetchDatasourcesStarted:()=>h,fetchDatasourcesSucceeded:()=>f,fetchFaveStar:()=>v,saveFaveStar:()=>b,setControlValue:()=>R,setExploreControls:()=>C,setForceQuery:()=>M,setFormData:()=>O,setSaveAction:()=>L,setStashFormData:()=>k,sliceUpdated:()=>P,toggleFaveStar:()=>E,updateChartTitle:()=>w,updateFormDataByDatasource:()=>c});var n=r(115926),a=r.n(n),o=r(431069),s=r(61988),i=r(672570);const l="UPDATE_FORM_DATA_BY_DATASOURCE";function c(e,t){return{type:l,prevDatasource:e,newDatasource:t}}const d="POST_DATASOURCE_STARTED",u="FETCH_DATASOURCE_SUCCEEDED";function p(){return{type:u}}const m="FETCH_DATASOURCES_STARTED";function h(){return{type:m}}const _="FETCH_DATASOURCES_SUCCEEDED";function f(){return{type:_}}const y="TOGGLE_FAVE_STAR";function E(e){return{type:y,isStarred:e}}const g="FETCH_FAVE_STAR";function v(e){return function(t){o.Z.get({endpoint:`/api/v1/chart/favorite_status/?q=${a().encode([e])}`}).then((({json:e})=>{var r,n;t(E(!(null==e||null==(r=e.result)||null==(n=r[0])||!n.value)))}))}}const T="SAVE_FAVE_STAR";function b(e,t){return function(r){const n=`/api/v1/chart/${e}/favorites/`;(t?o.Z.delete({endpoint:n}):o.Z.post({endpoint:n})).then((()=>r(E(!t)))).catch((()=>{r((0,i.Gb)((0,s.t)("An error occurred while starring this chart")))}))}}const S="SET_FIELD_VALUE";function R(e,t,r){return{type:S,controlName:e,value:t,validationErrors:r}}const A="UPDATE_EXPLORE_CONTROLS";function C(e){return{type:A,formData:e}}const I="UPDATE_FORM_DATA";function O(e){return{type:I,formData:e}}const D="UPDATE_CHART_TITLE";function w(e){return{type:D,sliceName:e}}const N="SET_SAVE_ACTION";function L(e){return{type:N,saveAction:e}}const q="CREATE_NEW_SLICE";function x(e,t,r,n,a){return{type:q,can_add:e,can_download:t,can_overwrite:r,slice:n,form_data:a}}const U="SLICE_UPDATED";function P(e){return{type:U,slice:e}}const Z="SET_FORCE_QUERY";function M(e){return{type:Z,force:e}}const F="SET_STASH_FORM_DATA";function k(e,t){return{type:F,isHidden:e,fieldNames:t}}const Q={...i.s2,fetchDatasourcesStarted:h,fetchDatasourcesSucceeded:f,toggleFaveStar:E,fetchFaveStar:v,saveFaveStar:b,setControlValue:R,setExploreControls:C,setStashFormData:k,updateChartTitle:w,createNewSlice:x,sliceUpdated:P,setForceQuery:M}},476445:(e,t,r)=>{"use strict";r.d(t,{_:()=>f,u:()=>y});var n,a=r(112515),o=r(635854),s=r(5364),i=r(310581),l=r(355786),c=r(281545),d=r(45511),u=r(410331),p=r(542313),m=r(23525),h=r(427600),_=r(212617);!function(e){e.CATEGORICAL="CATEGORICAL",e.SEQUENTIAL="SEQUENTIAL"}(n||(n={}));const f="HYDRATE_EXPLORE",y=({form_data:e,slice:t,dataset:r,metadata:y,saveAction:E=null})=>(g,v)=>{var T,b;const{user:S,datasources:R,charts:A,sliceEntities:C,common:I,explore:O}=v(),D=(0,m.eY)(h.KD.sliceId),w=(0,m.eY)(h.KD.dashboardId),N=D?null==C||null==(T=C.slices)?void 0:T[D]:null,L=null!=t?t:N,q=null!=e?e:null==L?void 0:L.form_data;if(!q.viz_type){const e=(null==I?void 0:I.conf.DEFAULT_VIZ_TYPE)||"table";q.viz_type=(0,m.eY)(h.KD.vizType)||e}var x;q.time_range||(q.time_range=(null==I||null==(x=I.conf)?void 0:x.DEFAULT_TIME_FILTER)||s.vM),!q.include_time||!q.granularity_sqla||null!=(b=q.groupby)&&b.some((e=>(0,i.Z)(e)===(0,i.Z)(q.granularity_sqla)))||(q.groupby=[q.granularity_sqla,...(0,l.Z)(q.groupby)],q.granularity_sqla=void 0),w&&(q.dashboardId=w);const U=r,P={form_data:q,slice:L,datasource:U},Z=(0,o.R3)(P,q),M=Z.color_scheme&&"color_scheme",F=Z.linear_color_scheme&&"linear_color_scheme",k=e=>{const t="CATEGORICAL"===e?(0,c.Z)():(0,d.Z)(),r="CATEGORICAL"===e?M:F,n=t.defaultKey,a="CATEGORICAL"===e?"supersetColors":"superset_seq_1",o=q[r],s=!!t.get(o,!0);o&&!s&&(Z[r].value=n||a)};M&&k(n.CATEGORICAL),F&&k(n.SEQUENTIAL);const Q={can_add:(0,_.R)("can_write","Chart",null==S?void 0:S.roles),can_download:(0,_.R)("can_csv","Superset",null==S?void 0:S.roles),can_overwrite:(0,l.Z)(null==t?void 0:t.owners).includes(null==S?void 0:S.userId),isDatasourceMetaLoading:!1,isStarred:!1,triggerRender:!1,datasource:U,controls:Z,form_data:q,slice:L,controlsTransferred:O.controlsTransferred,standalone:(0,m.eY)(h.KD.standalone),force:(0,m.eY)(h.KD.force),metadata:y,saveAction:E,common:I};Object.entries(Q.controls).forEach((([e,t])=>{Q.controls[e]=(0,u.RO)(t,Q)}));const $=L?(0,u.Hu)(Z):null,B=(0,a.Jp)(P),H={id:B,chartAlert:null,chartStatus:null,chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:(0,u.Hu)(Q.controls),sliceFormData:$,queryController:null,queriesResponse:null,triggerQuery:!1,lastRendered:0};return g({type:f,data:{charts:{...A,[B]:H},datasources:{...R,[(0,p.T)(U)]:U},saveModal:{dashboards:[],saveModalAlert:null,isVisible:!1},explore:Q}})}},955633:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FETCH_DASHBOARDS_FAILED:()=>f,FETCH_DASHBOARDS_SUCCEEDED:()=>h,SAVE_SLICE_FAILED:()=>v,SAVE_SLICE_SUCCESS:()=>b,SET_SAVE_CHART_MODAL_VISIBILITY:()=>E,createDashboard:()=>O,createSlice:()=>I,fetchDashboardsFailed:()=>y,fetchDashboardsSucceeded:()=>_,getSliceDashboards:()=>D,getSlicePayload:()=>R,saveSliceFailed:()=>T,saveSliceSuccess:()=>S,setSaveChartModalVisibility:()=>g,updateSlice:()=>C});var n=r(441609),a=r.n(n),o=r(115926),s=r.n(o),i=r(46078),l=r(61988),c=r(431069),d=r(672570),u=r(269856),p=r(112515);const m=/^adhoc_filters/,h="FETCH_DASHBOARDS_SUCCEEDED";function _(e){return{type:h,choices:e}}const f="FETCH_DASHBOARDS_FAILED";function y(e){return{type:f,userId:e}}const E="SET_SAVE_CHART_MODAL_VISIBILITY";function g(e){return{type:E,isVisible:e}}const v="SAVE_SLICE_FAILED";function T(){return{type:v}}const b="SAVE_SLICE_SUCCESS";function S(e){return{type:b,data:e}}const R=(e,t={},r,n,o={})=>{const s=function(e){const t={};return Object.entries(e).forEach((([e,r])=>{m.test(e)&&Array.isArray(r)&&(t[e]=r.filter((e=>!e.isExtra)))})),t}(t);if(!a()(o)&&t.adhoc_filters&&t.adhoc_filters.length>0&&Object.keys(s).forEach((e=>{if(a()(s[e])){const t=o[e];if(Array.isArray(t)){const r=s[e]||[];t.forEach((e=>{e.operator===u.d.TemporalRange&&r.push({...e,comparator:e.comparator||"No filter"})})),s[e]=r}}})),!(e=>((null==e?void 0:e.adhoc_filters)||[]).some((e=>e.operator===u.d.TemporalRange)))(s)){const e=Object.keys(t).filter((e=>m.test(e)));null==e||e.forEach((e=>{var r;null==(r=t[e])||r.forEach((t=>{t.operator===u.d.TemporalRange&&t.isExtra&&(s[e]||(s[e]=[]),s[e].push({...t,comparator:"No filter"}))}))}))}const l={...t,...s,dashboards:r};let c=0,d=i.i9.Table;if(l.datasource){const[e,t]=l.datasource.split("__");c=parseInt(e,10);const r=t.charAt(0).toUpperCase()+t.slice(1);r in i.i9&&(d=i.i9[r])}return{params:JSON.stringify(l),slice_name:e,viz_type:l.viz_type,datasource_id:c,datasource_type:d,dashboards:r,owners:n,query_context:JSON.stringify((0,p.u)({formData:l,force:!1,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null}))}},A=(e,t,r)=>{const n=[];return e?n.push((0,d.ws)((0,l.t)("Chart [%s] has been saved",t))):n.push((0,d.ws)((0,l.t)("Chart [%s] has been overwritten",t))),r&&(r.new?n.push((0,d.ws)((0,l.t)("Dashboard [%s] just got created and chart [%s] was added to it",r.title,t))):n.push((0,d.ws)((0,l.t)("Chart [%s] was added to dashboard [%s]",t,r.title)))),n},C=(e,t,r,n)=>async(a,o)=>{var s;const{slice_id:i,owners:l,form_data:d}=e,u=null==(s=o().explore)?void 0:s.form_data;try{const e=await c.Z.put({endpoint:`/api/v1/chart/${i}`,jsonPayload:R(t,u,r,l,d)});return a(S(e.json)),A(!1,t,n).map(a),e.json}catch(e){throw a(T()),e}},I=(e,t,r)=>async(n,a)=>{var o;const s=null==(o=a().explore)?void 0:o.form_data;try{const a=await c.Z.post({endpoint:"/api/v1/chart/",jsonPayload:R(e,s,t,[],{})});return n(S(a.json)),A(!0,e,r).map(n),a.json}catch(e){throw n(T()),e}},O=e=>async t=>{try{return(await c.Z.post({endpoint:"/api/v1/dashboard/",jsonPayload:{dashboard_title:e}})).json}catch(e){throw t(T()),e}},D=e=>async t=>{try{return(await c.Z.get({endpoint:`/api/v1/chart/${e.slice_id}?q=${s().encode({columns:["dashboards.id"]})}`})).json.result.dashboards.map((({id:e})=>e))}catch(e){throw t(T()),e}}},699963:(e,t,r)=>{"use strict";r.d(t,{B:()=>l,l:()=>c});var n=r(751995),a=r(251384),o=r(365634),s=r(135944);const i=n.iK.div`
  width: 100%;
  > span {
    display: flex;
    align-items: center;
  }

  .option-label {
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    & ~ i {
      margin-left: ${({theme:e})=>e.gridUnit}px;
    }
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,l=e=>(0,s.tZ)(i,{children:(0,s.tZ)(a.m,{...e})}),c=e=>(0,s.tZ)(i,{children:(0,s.tZ)(o.E,{...e})})},269856:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>c,GS:()=>l,H7:()=>f,LT:()=>i,Ps:()=>o,Q_:()=>m,YY:()=>a,Yl:()=>g,d:()=>s,i2:()=>_,kc:()=>y,m_:()=>h,qB:()=>u,qK:()=>d,xA:()=>E,yi:()=>p});var n=r(61988);const a={AVG:"AVG",COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",MAX:"MAX",MIN:"MIN",SUM:"SUM"},o=Object.values(a);var s;!function(e){e.Equals="EQUALS",e.NotEquals="NOT_EQUALS",e.LessThan="LESS_THAN",e.LessThanOrEqual="LESS_THAN_OR_EQUAL",e.GreaterThan="GREATER_THAN",e.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",e.In="IN",e.NotIn="NOT_IN",e.Like="LIKE",e.CaseInsensitiveLike="ILIKE",e.IsNotNull="IS_NOT_NULL",e.IsNull="IS_NULL",e.LatestPartition="LATEST_PARTITION",e.IsTrue="IS_TRUE",e.IsFalse="IS_FALSE",e.TemporalRange="TEMPORAL_RANGE"}(s||(s={}));const i={[s.Equals]:{display:(0,n.t)("Equal to (=)"),operation:"=="},[s.NotEquals]:{display:(0,n.t)("Not equal to (≠)"),operation:"!="},[s.LessThan]:{display:(0,n.t)("Less than (<)"),operation:"<"},[s.LessThanOrEqual]:{display:(0,n.t)("Less or equal (<=)"),operation:"<="},[s.GreaterThan]:{display:(0,n.t)("Greater than (>)"),operation:">"},[s.GreaterThanOrEqual]:{display:(0,n.t)("Greater or equal (>=)"),operation:">="},[s.In]:{display:(0,n.t)("In"),operation:"IN"},[s.NotIn]:{display:(0,n.t)("Not in"),operation:"NOT IN"},[s.Like]:{display:(0,n.t)("Like"),operation:"LIKE"},[s.CaseInsensitiveLike]:{display:(0,n.t)("Like (case insensitive)"),operation:"ILIKE"},[s.IsNotNull]:{display:(0,n.t)("Is not null"),operation:"IS NOT NULL"},[s.IsNull]:{display:(0,n.t)("Is null"),operation:"IS NULL"},[s.LatestPartition]:{display:(0,n.t)("use latest_partition template"),operation:"LATEST PARTITION"},[s.IsTrue]:{display:(0,n.t)("Is true"),operation:"=="},[s.IsFalse]:{display:(0,n.t)("Is false"),operation:"=="},[s.TemporalRange]:{display:(0,n.t)("TEMPORAL_RANGE"),operation:"TEMPORAL_RANGE"}},l=Object.values(s),c=(s.Like,s.CaseInsensitiveLike,[s.Equals,s.NotEquals,s.LessThan,s.LessThanOrEqual,s.GreaterThan,s.GreaterThanOrEqual]),d=new Set([s.In,s.NotIn]),u=new Set([s.LatestPartition,s.TemporalRange]),p=[s.IsNotNull,s.IsNull,s.LatestPartition,s.IsTrue,s.IsFalse],m=/^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,h={time_range:(0,n.t)("Time range"),granularity_sqla:(0,n.t)("Time column"),time_grain_sqla:(0,n.t)("Time grain"),granularity:(0,n.t)("Time granularity")},_={time_range:"__time_range",granularity_sqla:"__time_col",time_grain_sqla:"__time_grain",granularity:"__granularity"},f=240,y=320,E=0,g=new Set(["all_columns","groupby","metrics","percent_metrics","order_by_cols"])},410331:(e,t,r)=>{"use strict";r.d(t,{os:()=>Z,RO:()=>b,mi:()=>R,Bx:()=>v,vP:()=>S,YY:()=>D,Hu:()=>A,Bq:()=>E});var n={};r.r(n),r.d(n,{NVD3TimeSeries:()=>f,annotations:()=>_,colorScheme:()=>m,datasourceAndVizType:()=>p,sqlaTimeSeries:()=>h});var a=r(130845),o=r(46078),s=r(837687),i=r(338575),l=r(389368),c=r(61988),d=r(246666),u=r(135944);const p={controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:(0,c.t)("Chart ID"),hidden:!0,description:(0,c.t)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:(0,c.t)("Cache Timeout (seconds)"),hidden:!0,description:(0,c.t)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:(0,c.t)("URL parameters"),hidden:!0,description:(0,c.t)("Extra parameters for use in jinja templated queries")}}]]},m={label:(0,c.t)("Color scheme"),controlSetRows:[["color_scheme"]]},h={label:(0,c.t)("Time"),description:(0,c.t)("Time related form attributes"),expanded:!0,controlSetRows:[["granularity_sqla"],["time_range"]]},_={label:(0,c.t)("Annotations and layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:(0,c.t)("Annotation layers"),renderTrigger:!0,tabOverride:"data"}}]]},f=[{label:(0,c.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,c.t)("Contribution"),default:!1,description:(0,c.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,c.t)("Advanced analytics"),tabOverride:"data",description:(0,c.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,u.tZ)(d.U,{children:(0,c.t)("Rolling window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,c.t)("Rolling function"),default:"None",choices:[["None",(0,c.t)("None")],["mean",(0,c.t)("mean")],["sum",(0,c.t)("sum")],["std",(0,c.t)("std")],["cumsum",(0,c.t)("cumsum")]],description:(0,c.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}},{name:"rolling_periods",config:{type:"TextControl",label:(0,c.t)("Periods"),isInt:!0,description:(0,c.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,c.t)("Min periods"),isInt:!0,description:(0,c.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,u.tZ)(d.U,{children:(0,c.t)("Time comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,c.t)("Time shift"),choices:[["1 day",(0,c.t)("1 day")],["1 week",(0,c.t)("1 week")],["28 days",(0,c.t)("28 days")],["30 days",(0,c.t)("30 days")],["52 weeks",(0,c.t)("52 weeks")],["1 year",(0,c.t)("1 year")],["104 weeks",(0,c.t)("104 weeks")],["2 years",(0,c.t)("2 years")],["156 weeks",(0,c.t)("156 weeks")],["3 years",(0,c.t)("3 years")]],description:(0,c.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,c.t)("Calculation type"),default:"values",choices:[["values",(0,c.t)("Actual values")],["absolute",(0,c.t)("Difference")],["percentage",(0,c.t)("Percentage change")],["ratio",(0,c.t)("Ratio")]],description:(0,c.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,u.tZ)(d.U,{children:(0,c.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,c.t)("Rule"),default:null,choices:[["1T",(0,c.t)("1T")],["1H",(0,c.t)("1H")],["1D",(0,c.t)("1D")],["7D",(0,c.t)("7D")],["1M",(0,c.t)("1M")],["1AS",(0,c.t)("1AS")]],description:(0,c.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,c.t)("Method"),default:null,choices:[["asfreq",(0,c.t)("asfreq")],["bfill",(0,c.t)("bfill")],["ffill",(0,c.t)("ffill")],["median",(0,c.t)("median")],["mean",(0,c.t)("mean")],["sum",(0,c.t)("sum")]],description:(0,c.t)("Pandas resample method")}}]]}],y=(0,a.Z)(((e,t)=>{const{sectionOverrides:r={},controlOverrides:a,controlPanelSections:s=[]}=t,c={...n};Object.entries(r).forEach((([e,t])=>{"object"==typeof t&&t.constructor===Object?c[e]={...c[e],...t}:c[e]=t}));const{datasourceAndVizType:d}=c,u=[o.i9.Query,o.i9.Table].includes(e)?["granularity"]:["granularity_sqla","time_grain_sqla"];return[d].concat(s.filter(i.D_)).map((e=>{const{controlSetRows:t}=e;return{...e,controlSetRows:(null==t?void 0:t.map((e=>e.filter((e=>"string"!=typeof e||!u.includes(e))).map((e=>(0,l.q)(e,a))))))||[]}}))}));function E(e,t){const r=(0,s.Z)().get(e)||{};return y(t,r)}const g=(0,a.Z)(((e,t)=>{const{controlOverrides:r={},controlPanelSections:n=[]}=t,a=(0,l.q)(function(e,t){var r;return null!=(r=e.filter(i.D_).map((e=>e.controlSetRows)).flat(2).find((e=>t===e||null!==e&&"object"==typeof e&&"name"in e&&e.name===t)))?r:null}(n,e),r);return a&&"config"in a?a.config:a})),v=function(e,t){const r=(0,s.Z)().get(t)||{};return g(e,r)};var T=r(355786);function b(e,t){const{mapStateToProps:r}=e;let n={...e},{value:a}=n;return r&&t&&(n={...e,...r.call(e,t,e)},a=a||n.value),"function"==typeof n.initialValue&&(n.initialValue=n.initialValue(n,t),"function"==typeof n.initialValue&&delete n.initialValue),n.initialValue&&(a=n.initialValue,delete n.initialValue),"function"==typeof n.default&&(n.default=n.default(n,t),"function"==typeof n.default&&delete n.default),n.default&&void 0===a&&(a=n.default),a&&n.multi&&!Array.isArray(a)&&(a=[a]),n.value=a,function(e,t){const r=e.validators,{externalValidationErrors:n=[]}=e,a=[];r&&r.length>0&&r.forEach((r=>{const n=r.call(e,e.value,t);n&&a.push(n)}));const o=[...a,...n];return{...e,validationErrors:o}}(function(e){if("SelectControl"===e.type&&!e.freeForm&&e.choices&&e.value){const t={...e},r=e.choices,n=(0,T.Z)(e.value),a=r.map((e=>e[0]));if(e.multi&&n.length>0)return t.value=n.filter((e=>a.includes(e))),t;if(!e.multi&&!a.includes(n[0]))return t.value=null,t}return e}(n),n)}function S(e,t,r){if(!e)return null;const n={...e,value:r};return null!=t&&t.controls||null===t?b(n,t):n}function R(e,t,r,n){const a={};return E(e,t).forEach((e=>e.controlSetRows.forEach((e=>e.forEach((e=>{if(null!=e&&e.config&&e.name){const{config:t,name:o}=e;a[o]=S(t,r,n[o])}})))))),a}function A(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];t[r]=n.value})),t}var C=r(62446),I=r(46306);const O=(e,t,r)=>t.options&&"string"==typeof r&&t.options.some((e=>Array.isArray(e)?e[0]===r:e.column_name===r))?e.columns.some((e=>e.column_name===r)):t.savedMetrics&&(0,C.AG)(r)&&t.savedMetrics.some((e=>e.metric_name===r))?e.metrics.some((e=>e.metric_name===r)):t.columns&&((0,C.nX)(r)||(0,I.Ki)(r))&&t.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject}))?e.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject})):!!(0,C.q5)(r)&&(Object.assign(r,{datasourceWarning:!0}),!0),D=(e,t,r)=>{if(null!=r){if(Array.isArray(r)){const n=r.filter((r=>O(e,t,r)));return n.length>0?n:t.default}return O(e,t,r)?r:t.default}};var w=r(957557),N=r.n(w),L=r(320002),q=r(635854);const x=["metric","metrics","metric_2","size","x","y","secondary_metric"],U=["groupby","columns","groupbyColumns","groupbyRows","entity","series","series_columns"],P=["granularity_sqla","time_grain_sqla","time_range","adhoc_filters","limit","timeseries_limit_metric","series_limit_metric","order_desc","row_limit","x_axis","rolling_type","rolling_periods","min_periods","time_compare","comparison_type","resample_rule","resample_method"];class Z{constructor(e){var t,r;this.sfd=void 0;const n=Object.freeze(e),a=null==n||null==(t=n.standardizedFormData)?void 0:t.memorizedFormData,o=n.viz_type;let s,i=new Map;if(Array.isArray(a)&&a.length>0&&n.datasource===(null==(r=a.slice(-1)[0][1])?void 0:r.datasource))i=new Map(n.standardizedFormData.memorizedFormData),i.has(o)&&i.delete(o),i.set(o,n),s=Z.getStandardizedControls(n);else{const e=N()(n,"standardizedFormData");i.set(o,e),s=Z.getStandardizedControls(e)}this.sfd={controls:s,memorizedFormData:i}}static getStandardizedControls(e){const t={metrics:[],columns:[]};if(Object.entries(e).forEach((([e,r])=>{x.includes(e)&&t.metrics.push(...(0,T.Z)(r)),U.includes(e)&&t.columns.push(...(0,T.Z)(r))})),(0,i.pp)(e)){const{metrics:r,columns:n}=e.standardizedFormData.controls;t.metrics.push(...r),t.columns.push(...n)}return t}getLatestFormData(e){return this.has(e)?this.get(e):this.memorizedFormData.slice(-1)[0][1]}get standardizedControls(){return this.sfd.controls}get memorizedFormData(){return Array.from(this.sfd.memorizedFormData.entries())}serialize(){return{controls:this.standardizedControls,memorizedFormData:this.memorizedFormData}}has(e){return this.sfd.memorizedFormData.has(e)}get(e){return this.sfd.memorizedFormData.get(e)}transform(e,t){const r=this.getLatestFormData(e),n={};P.forEach((e=>{e in t.form_data&&(n[e]=t.form_data[e])}));const a=(0,q.R3)(t,{...r,...n,viz_type:e}),o={...A(a),standardizedFormData:this.serialize()};let i={formData:o,controlsState:a};const l=(0,s.Z)().get(e);if(null!=l&&l.formDataOverrides){(0,L.u)().setStandardizedControls(o);const e={...l.formDataOverrides(o),standardizedFormData:{controls:{...(0,L.u)().controls},memorizedFormData:this.memorizedFormData}};(0,L.u)().clear(),i={formData:e,controlsState:(0,q.R3)(t,e)}}return i.controlsState=(0,q.R3)({...t,controls:i.controlsState},i.formData),i}}},242190:(e,t,r)=>{"use strict";r.d(t,{l6:()=>i,ni:()=>n,s_:()=>c});var n,a=r(522102),o=r(667294);!function(e){e.Loading="loading",e.Complete="complete",e.Error="error"}(n||(n={}));const s={status:n.Loading,result:null,error:null};function i(e,t){return(0,o.useMemo)((()=>{if(e.status!==n.Complete)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:n.Error,result:null,error:e}}}),[e,t])}const l=e=>e.result;function c(e){return i(function(e){const[t,r]=(0,o.useState)(s),i=(0,o.useRef)((()=>{}));return(0,o.useEffect)((()=>{r(s),i.current();let t=!1;return i.current=()=>{t=!0},(0,a.Z)({method:"GET",endpoint:e})({}).then((e=>{t||r({status:n.Complete,result:e,error:null})})).catch((e=>{t||r({status:n.Error,result:null,error:e})})),()=>{t=!0}}),[e]),t}(e),l)}},610362:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var n=r(115926),a=r.n(n),o=r(830848),s=r(431069),i=r(844818);const l=(0,o.LC)({reducerPath:"queryApi",tagTypes:["Catalogs","Schemas","Tables","DatabaseFunctions","QueryValidations","TableMetadatas","SqlLabInitialState","EditorQueries"],endpoints:()=>({}),baseQuery:({endpoint:e,urlParams:t,transformResponse:r,method:n="GET",parseMethod:o="json",...l},c)=>s.Z.request({...l,endpoint:`${e}${t?`?q=${a().encode(t)}`:""}`,method:n,parseMethod:o,signal:c.signal}).then((e=>{var t;return{data:null!=(t=null==r?void 0:r(e))?t:e}})).catch((e=>(0,i.O$)(e).then((t=>({error:{error:(null==t?void 0:t.message)||(null==t?void 0:t.error)||e.statusText,status:e.status}})))))})},469279:(e,t,r)=>{"use strict";r.d(t,{Kt:()=>l,Xx:()=>u});var n=r(667294),a=r(938325);const o=r(610362).h.injectEndpoints({endpoints:e=>({schemas:e.query({providesTags:[{type:"Schemas",id:"LIST"}],query:({dbId:e,catalog:t,forceRefresh:r})=>({endpoint:`/api/v1/database/${e}/schemas/`,urlParams:{force:r,...void 0!==t&&{catalog:t}},transformResponse:({json:e})=>e.result.sort().map((e=>({value:e,label:e,title:e})))}),serializeQueryArgs:({queryArgs:{dbId:e,catalog:t}})=>({dbId:e,catalog:t})})})}),{useLazySchemasQuery:s,useSchemasQuery:i,endpoints:l,util:c}=o,d=[];function u(e){const{dbId:t,catalog:r,onSuccess:o,onError:l}=e||{},[c]=s(),u=i({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:!t}),p=(0,a.Z)(((e,t,r=!1)=>{!e||u.currentData&&!r||c({dbId:e,catalog:t,forceRefresh:r}).then((({isSuccess:e,isError:t,data:n})=>{e&&(null==o||o(n||d,r)),t&&(null==l||l())}))}));(0,n.useEffect)((()=>{p(t,r,!1)}),[t,r,p]);const m=(0,n.useCallback)((()=>{p(t,r,!0)}),[t,r,p]);return{...u,refetch:m}}},123936:(e,t,r)=>{"use strict";r.d(t,{$K:()=>h,QD:()=>m,SJ:()=>p,uY:()=>u,zA:()=>_});var n=r(667294),a=r(938325),o=r(23525),s=r(610362),i=r(469279);const l=s.h.injectEndpoints({endpoints:e=>({tables:e.query({providesTags:["Tables"],query:({dbId:e,catalog:t,schema:r,forceRefresh:n})=>({endpoint:`/api/v1/database/${null!=e?e:"undefined"}/tables/`,urlParams:{force:n,schema_name:r?encodeURIComponent(r):"",...t&&{catalog_name:t}},transformResponse:({json:e})=>({options:e.result,hasMore:e.count>e.result.length})}),serializeQueryArgs:({queryArgs:{dbId:e,schema:t}})=>({dbId:e,schema:t})}),tableMetadata:e.query({providesTags:e=>e?[{type:"TableMetadatas",id:e.name},{type:"TableMetadatas",id:"LIST"}]:[{type:"TableMetadatas",id:"LIST"}],query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/${(0,o.UK)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e})}),tableExtendedMetadata:e.query({query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/extra/${(0,o.UK)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e})})})}),{useLazyTablesQuery:c,useTablesQuery:d,useTableMetadataQuery:u,useTableExtendedMetadataQuery:p,endpoints:m,util:h}=l;function _(e){const{dbId:t,catalog:r,schema:o,onSuccess:s,onError:l}=e||{},u=(0,n.useRef)(!1),{currentData:p,isFetching:m}=(0,i.Xx)({dbId:t,catalog:r||void 0}),h=(0,n.useMemo)((()=>new Set(null==p?void 0:p.map((({value:e})=>e)))),[p]),_=Boolean(t&&o&&!m&&h.has(o)),f=d({dbId:t,catalog:r,schema:o,forceRefresh:!1},{skip:!_}),[y]=c(),E=(0,a.Z)(((e,t)=>{null==s||s(e,t)})),g=(0,a.Z)((e=>{null==l||l(e)})),v=(0,n.useCallback)((()=>{_&&y({dbId:t,catalog:r,schema:o,forceRefresh:!0}).then((({isSuccess:e,isError:t,data:r,error:n})=>{e&&r&&E(r,!0),t&&g(n)}))}),[t,r,o,_,E,g,y]);return(0,n.useEffect)((()=>{if(u.current){const{requestId:e,isSuccess:t,isError:r,isFetching:n,currentData:a,error:o,originalArgs:s}=f;null!=s&&s.forceRefresh||!e||n||(t&&a&&E(a,!1),r&&g(o))}else u.current=!0}),[f,E,g]),{...f,refetch:v}}},474004:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});var n=r(667294),a=r(427600);function o(e,t=a.oP){const[r,o]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=setTimeout((()=>{o(e)}),t);return()=>{clearTimeout(r)}}),[e,t]),r}},938325:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(993355);function a(e){return(0,n.Z)(e)}},203741:(e,t,r)=>{"use strict";r.d(t,{$K:()=>$,$b:()=>i,BL:()=>w,Bu:()=>Y,Eh:()=>v,Ep:()=>d,Ev:()=>o,F8:()=>O,FY:()=>g,H3:()=>p,Im:()=>q,Iq:()=>l,JC:()=>H,Kr:()=>C,P$:()=>b,P2:()=>B,PC:()=>_,Ph:()=>E,QB:()=>k,Qg:()=>y,S:()=>m,Sl:()=>G,TA:()=>T,TD:()=>c,TG:()=>Z,TY:()=>K,Tl:()=>N,W9:()=>n,Wl:()=>s,Yd:()=>X,ZX:()=>L,aD:()=>a,aN:()=>j,br:()=>f,bv:()=>Q,du:()=>W,g3:()=>U,iA:()=>V,kK:()=>F,kV:()=>S,n2:()=>A,oK:()=>h,qL:()=>P,t4:()=>D,vH:()=>u,xD:()=>M,xE:()=>I,yG:()=>z,yw:()=>R,zf:()=>x});const n="load_chart",a="render_chart",o="hide_browser_tab",s="mount_dashboard",i="mount_explorer",l="select_dashboard_tab",c="force_refresh_chart",d="change_explore_controls",u="toggle_edit_dashboard",p="force_refresh_dashboard",m="periodic_render_dashboard",h="explore_dashboard_chart",_="export_csv_dashboard_chart",f="export_xlsx_dashboard_chart",y="change_dashboard_filter",E="dataset_creation_empty_cancellation",g="dataset_creation_database_cancellation",v="dataset_creation_schema_cancellation",T="dataset_creation_table_cancellation",b="dataset_creation_success",S="spa_navigation",R="confirm_overwrite_dashboard_metadata",A="dashboard_download_as_image",C="dashboard_download_as_pdf",I="chart_download_as_image",O="chart_download_as_csv",D="chart_download_as_csv_pivoted",w="chart_download_as_xls",N="chart_download_as_json",L="sqllab_warn_local_storage_usage",q="sqllab_fetch_failed_query",x="drill_by_modal_opened",U="further_drill_by",P="drill_by_edit_chart",Z="drill_by_breadcrumb_clicked",M="sqllab_monitor_local_storage_usage",F="sqllab_create_table_as",k="sqllab_create_view_as",Q="sqllab_run_query",$="sqllab_stop_query",B="sqllab_estimate_query_cost",H="sqllab_save_query",Y="sqllab_copy_link",j="sqllab_format_sql",V="sqllab_download_csv",G="sqllab_copy_result_to_clipboard",z="sqllab_create_chart",W="sqllab_load_tab_state",K=new Set([n,a,o,q,W]),X=(new Set([s,l,h,c,_,y,d,u,p,m,i,R,A,C,I]),{timeOriginOffset:0,markTimeOrigin(){this.timeOriginOffset=window.performance.now()},getTimestamp(){return Math.round(window.performance.now()-this.timeOriginOffset)}})},797381:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LOG_EVENT:()=>n,logEvent:()=>a});const n="LOG_EVENT";function a(e,t){return r=>r({type:n,payload:{eventName:e,eventData:t}})}},677997:(e,t,r)=>{"use strict";r.d(t,{YJ:()=>g});var n=r(431069),a=r(844818),o=r(355786),s=r(68492),i=r(522102),l=r(593185),c=r(920292);const d="polling",u="last_async_event_id";let p,m,h,_,f,y,E;const g=async e=>new Promise(((t,r)=>{const i=e.job_id;var l;l=async e=>{switch(e.status){case"done":{let{data:s,status:i}=await(async e=>{let t,r="success";try{const{json:r}=await n.Z.get({endpoint:String(e.result_url)});t="result"in r?r.result:r}catch(e){r="error",t=await(0,a.O$)(e)}return{status:r,data:t}})(e);s=(0,o.Z)(s),"success"===i?t(s):r(s);break}case"error":{const t=(0,a.MV)(e);r(t);break}default:s.Z.warn("received event with status",e.status)}var l;f[l=i]&&delete f[l]},f[i]=l})),v=(0,i.Z)({method:"GET",endpoint:"/api/v1/async_event/"}),T=async e=>{e.forEach((e=>{const t=e.job_id,r=f[t];r?(r(e),delete y[t]):(y[t]||(y[t]=0),y[t]+=1,y[t]<=6?setTimeout((()=>{T([e])}),100*y[t]):(delete y[t],s.Z.warn("listener not found for job_id",e.job_id))),(e=>{E=e.id;try{localStorage.setItem(u,E)}catch(e){s.Z.warn("Error saving event Id to localStorage",e)}})(e)}))},b=async()=>{const e=E?{last_id:E}:{};if(Object.keys(f).length)try{const{result:t}=await v(e);null!=t&&t.length&&await T(t)}catch(e){s.Z.warn(e)}m===d&&(_=window.setTimeout(b,h))};let S,R,A=0;const C=()=>{let e=p.GLOBAL_ASYNC_QUERIES_WEBSOCKET_URL;E&&(e+=`?last_id=${E}`),R=new WebSocket(e),R.addEventListener("open",(()=>{s.Z.log("WebSocket connected"),clearTimeout(S),A=0})),R.addEventListener("close",(()=>{S=setTimeout((()=>{A+=1,A<=6?C():(s.Z.warn("WebSocket not available, falling back to async polling"),b())}),2500)})),R.addEventListener("error",(()=>{R.readyState<2&&R.close()})),R.addEventListener("message",(async e=>{let t=[];try{t=[JSON.parse(e.data)],await T(t)}catch(e){s.Z.warn(e)}}))};(e=>{if((0,l.cr)(l.TT.GlobalAsyncQueries)){_&&clearTimeout(_),f={},y={},E=null,p=(0,c.Z)().common.conf,m=p.GLOBAL_ASYNC_QUERIES_TRANSPORT||d,h=p.GLOBAL_ASYNC_QUERIES_POLLING_DELAY||500;try{E=localStorage.getItem(u)}catch(e){s.Z.warn("Failed to fetch last event Id from localStorage")}m===d&&b(),"ws"===m&&C()}})()},599543:(e,t,r)=>{"use strict";r.d(t,{JB:()=>R,SJ:()=>y,_0:()=>b,gP:()=>v,gf:()=>g,p1:()=>T,wK:()=>E,zd:()=>S});var n=r(428368),a=r.n(n),o=r(845220),s=r.n(o),i=r(352353),l=r.n(i),c=r(957557),d=r.n(c),u=r(114176),p=r.n(u),m=r(618446),h=r.n(m),_=r(964296),f=(r(964417),r(355786));function y(e,t,r){const n={...e[t]},a={...r};return a.id||(a.id=(0,_.x0)()),n[a.id]=a,{...e,[t]:n}}function E(e,t,r,n){const a={...e[t]};return a[r.id]={...a[r.id],...n},{...e,[t]:a}}function g(e,t,r,n,a="id"){const o=[];return e[t].forEach((e=>{r[a]===e[a]?o.push({...e,...n}):o.push(e)})),{...e,[t]:o}}function v(e,t,r,n="id"){const a=[];return e[t].forEach((e=>{r[n]!==e[n]&&a.push(e)})),{...e,[t]:a}}function T(e,t){let r;return e.forEach((e=>{e.id===t&&(r=e)})),r}function b(e,t,r,n=!1){const a={...r};a.id||(a.id=(0,_.x0)());const o={};return o[t]=n?[a,...e[t]]:[...e[t],a],{...e,...o}}function S(e,t,r,n=!1){const a=[...r];a.forEach((e=>{e.id||(e.id=(0,_.x0)())}));const o={};return o[t]=n?[...a,...e[t]]:[...e[t],...a],{...e,...o}}function R(e,t,r={ignoreUndefined:!1,ignoreNull:!1,ignoreFields:[]}){var n;let o=e,i=t;if(r.ignoreUndefined&&(o=p()(o,l()),i=p()(i,l())),r.ignoreNull&&(o=p()(o,s()),i=p()(i,s())),null!=(n=r.ignoreFields)&&n.length){const e=(0,f.Z)(r.ignoreFields);return a()(o,i,((t,r)=>h()((0,f.Z)(t).map((t=>d()(t,e))),(0,f.Z)(r).map((t=>d()(t,e))))))}return h()(o,i)}},999547:(e,t,r)=>{"use strict";r.d(t,{$C:()=>m,$k:()=>d,$w:()=>p,J8:()=>u,RB:()=>c,UY:()=>s,fy:()=>i,nl:()=>l});var n=r(677205),a=r(281545),o=r(328062);const s=e=>e||void 0,i=e=>Array.isArray(e)?e:[],l=(e=[])=>{const{chartsLabelsMap:t}=(0,n.ZP)(),r=Array.from(t.values()).flatMap((({labels:e})=>e)),a=Array.from(r.reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map)).filter((([,e])=>e>1)).map((([e])=>e));return Array.from(new Set([...e,...a]))},c=(e={})=>{const t=(0,n.ZP)(),r=Object.fromEntries(t.getColorMap());return Object.keys(e).forEach((e=>{delete r[e]})),r},d=e=>{var t;return(null==(t=(0,a.Z)().get(e))?void 0:t.colors)||[]},u=e=>{const t=e.map_label_colors||{},r=e.label_colors||{},a=(0,n.ZP)().getColorMap(),o={...Object.fromEntries(a),...r};return Object.entries(o).every((([e,r])=>t.hasOwnProperty(e)&&t[e]===r))},p=e=>{const t=(0,n.ZP)();o.getNamespace(s(e)).resetColors(),t.reset()},m=(e,t=!1,r=!1,a=!1)=>{const l=s(null==e?void 0:e.color_namespace),d=o.getNamespace(l),u=null==e?void 0:e.color_scheme,p=(null==e?void 0:e.map_label_colors)||{},m=i(null==e?void 0:e.shared_label_colors),h=(null==e?void 0:e.label_colors)||{},_=((e,t)=>Object.fromEntries(Object.entries(e).filter((([e])=>t.includes(e)))))(p,m);t&&!Array.isArray(t)&&d.resetColors(),t&&Array.isArray(t)&&d.resetColorsForLabels(t),(t||r)&&((e,t,r=!1)=>{const a=s(e),i=o.getNamespace(a);(0,n.ZP)().updateColorMap(i,t,r)})(null==e?void 0:e.color_namespace,u,r);let f=p;t&&(f={...c(h)}),r&&(f={...p,...c(h)}),a&&(f=_),f={...f,...h},f&&Object.keys(f).forEach((e=>{d.setColor(e,f[e])}))}},710222:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(454076);const a=e=>(async e=>{if((0,n.G6)())try{const t=new ClipboardItem({"text/plain":e()});await navigator.clipboard.write([t])}catch{const t=await e();await navigator.clipboard.writeText(t)}else{const t=await e();await navigator.clipboard.writeText(t)}})(e).catch((()=>e().then((e=>new Promise(((t,r)=>{const n=document.getSelection();if(n){n.removeAllRanges();const t=document.createRange(),a=document.createElement("span");a.textContent=e,a.style.position="fixed",a.style.top="0",a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",document.body.appendChild(a),t.selectNode(a),n.addRange(t);try{document.execCommand("copy")||r()}catch(e){r()}document.body.removeChild(a),n.removeRange?n.removeRange(t):n.removeAllRanges()}t()}))))))},212617:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});const n=(0,r(130845).Z)(((e,t,r)=>!!r&&Object.values(r).some((r=>r.some((([r,n])=>r===e&&n===t))))))},542313:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n=e=>{var t,r;return null!=(t=e.uid)?t:`${null!=(r=e.id)?r:"None"}__${e.type}`}},71894:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});const n=()=>{var e,t;return null==(e=window)||null==(t=e.navigator)?void 0:t.webdriver}},309679:(e,t,r)=>{"use strict";function n(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r}))}r.d(t,{o:()=>n})},23525:(e,t,r)=>{"use strict";r.d(t,{Nm:()=>g,TO:()=>T,UK:()=>S,YE:()=>E,eY:()=>p,en:()=>b,f4:()=>f});var n=r(441609),a=r.n(n),o=r(431069),s=r(237731),i=r(115926),l=r.n(i),c=r(427600),d=r(643399),u=r(411370);function p({name:e,type:t}){const r=new URLSearchParams(window.location.search).get(e);switch(t){case"number":return r?"true"===r.toLowerCase()?1:"false"===r.toLowerCase()?0:Number.isNaN(Number(r))?null:Number(r):null;case"object":return r?JSON.parse(r):null;case"boolean":return r?"false"!==r.toLowerCase()&&"0"!==r:null;case"rison":if(!r)return null;try{return l().decode(r)}catch{return r}default:return r}}function m(e){const t=new URLSearchParams;return new URLSearchParams(window.location.search).forEach(((r,n)=>{e.includes(n)||t.append(n,r)})),t}function h(e){const t=[];return e.forEach(((e,r)=>t.push([r,e]))),t}function _(e){const t=e||c.$O,r=m(t),n=(0,d.De)();return a()(n)||t.includes(c.KD.preselectFilters.name)||r.append(c.KD.preselectFilters.name,JSON.stringify((0,u.Z)((0,d.De)()))),h(r)}function f(e=[]){const t=m([...c.Rv,...e]),r=(0,d.De)();return a()(r)||t.append(c.KD.preselectFilters.name,JSON.stringify((0,u.Z)((0,d.De)()))),h(t)}function y(e,t){return o.Z.post({endpoint:e,jsonPayload:t}).then((e=>e.json.url))}function E(e,t){return y("/api/v1/explore/permalink",{formData:e,urlParams:_(t)})}function g({dashboardId:e,dataMask:t,activeTabs:r,anchor:n}){return y(`/api/v1/dashboard/${e}/permalink`,{urlParams:f(),dataMask:t,activeTabs:r,anchor:n})}const v=/^([^:/?#]+:)?(?:(\/\/)?([^/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/;function T(e){const t=e.match(v)||[];return"string"==typeof t[1]&&t[1].length>0||"//"===t[2]||"string"==typeof t[3]&&t[3].length>0}function b(e){const t=e.match(v)||[];return!T(e)||(0,s.Z)(t[1])||e.startsWith("//")?e:`//${e}`}function S(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];null!=n&&t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)})),t.length>0?`?${t.join("&")}`:""}},760835:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>Ie,zn:()=>we,h:()=>Ne});var n=r(829829),a=r(753894),o=r(610362),s=r(672570),i=r(937863),l=r(8868),c=r(957557),d=r.n(c),u=r(439666),p=r(641295),m=r(904305),h=r(909467),_=r(839023),f=r(239759),y=r(224350),E=r.n(y),g=r(550810),v=r(437927),T=r(21090),b=r(680621),S=r(312885),R=r(81255);function A(e){return[R.BA,R.dW,R.xh,R.t].indexOf(e.type)>-1}var C=r(995173),I=r(347456),O=r(437418),D=r(128428);const w={[R.BG]:{[R.dW]:!0,[R.BA]:!0,[R.xh]:!0},[R.gn]:{[R.dW]:!0,[R.BA]:!0,[R.xh]:!0}};function N({parentType:e,childType:t}){if(!e||!t)return!1;const r=w[e];return!!r&&Boolean(r[t])}function L({dropResult:e,layout:t}){const{dragging:r,destination:n}=e,a=r.type,o=t[n.id],s=o.type;let i=(0,D.Z)(a,r.meta);i.parents=(o.parents||[]).concat(o.id),A(r)&&(i.meta.width=(0,I.Z)({dropResult:e,layout:t})||void 0);const l=N({parentType:s,childType:a}),c={[i.id]:i};if(l){const e=(0,D.Z)(R.Os);e.children=[i.id],e.parents=(o.parents||[]).concat(o.id),c[e.id]=e,i.parents=e.parents.concat(e.id),i=e}else if(a===R.yR){const e=(0,D.Z)(R.gn);e.parents=(o.parents||[]).concat(o.id),i.children=[e.id],c[e.id]=e}const d=[...o.children];return d.splice(n.index,0,i.id),c[n.id]={...o,children:d},c}function q(e,t,r){const n=null==r?void 0:r[e];if(n){delete r[e];const{children:a=[]}=n;null==a||null==a.forEach||a.forEach((t=>{q(t,e,r)}));const o=null==r?void 0:r[t];if(Array.isArray(null==o?void 0:o.children)){const n=o.children.indexOf(e);if(n>-1){const e=[...o.children];e.splice(n,1),r[t]={...o,children:e}}}}}const x={[m.$]:(e,t)=>({...t.data.dashboardLayout.present}),[S.nj](e,t){const{payload:{nextComponents:r}}=t;return{...e,...r}},[S.CB](e,t){var r;const{payload:{id:n,parentId:a}}=t;if(!(a&&n&&e[n]&&e[a]))return e;const o={...e};q(n,a,o);const s=o[a];return(null==s?void 0:s.type)===R.Os&&0===(null==s||null==(r=s.children)?void 0:r.length)&&q(a,(0,C.Z)({childId:a,layout:o}),o),o},[S.J0](e,t){const{payload:{dropResult:r}}=t,n=L({dropResult:r,layout:e});return{...e,...n}},[S.aZ](e,t){const{payload:{dropResult:r}}=t,{source:n,destination:a,dragging:o}=r;if(!n||!a||!o)return e;const s=function({entitiesMap:e,source:t,destination:r}){const n=[...e[t.id].children],a=[...e[r.id].children],o=n[t.index];if(t.id===r.id){const a=function(e,t,r){const n=[...e],[a]=n.splice(t,1);return n.splice(r,0,a),n}(n,t.index,r.index);return{...e,[t.id]:{...e[t.id],children:a}}}return n.splice(t.index,1),a.splice(r.index,0,o),{...e,[t.id]:{...e[t.id],children:n},[r.id]:{...e[r.id],children:a}}}({entitiesMap:e,source:n,destination:a});if(A(s[o.id])){const t=(0,I.Z)({dropResult:r,layout:e})||void 0;(s[o.id].meta||{}).width!==t&&(s[o.id]={...s[o.id],meta:{...s[o.id].meta,width:t}})}if(N({parentType:a.type,childType:o.type})){const e=s[a.id],t=e.children,r=(0,D.Z)(R.Os);r.children=[t[a.index]],r.parents=(e.parents||[]).concat(a.id),t[a.index]=r.id,s[r.id]=r}return{...e,...s}},[S.YA](e,t){const{payload:{dropResult:r}}=t,{source:n,dragging:a}=r,o=e[b._4],s=o.children[0],i=e[s];if(n.id!==b.D0){const t=e[a.id].children[0],r=e[t],n=[...i.children].filter((e=>e!==a.id));return{...e,[b._4]:{...o,children:[a.id]},[s]:{...i,children:[]},[t]:{...r,children:[...r.children,...n]}}}const l=L({dropResult:r,layout:e}),c=Object.values(l),d=c.find((e=>e.type===R.gn)),u=c.find((e=>e.type===R.yR));return d.children=[...i.children],l[s]={...i,children:[]},l[b._4]={...o,children:[u.id]},{...e,...l}},[S.Mu](e){const t=e[b._4],r=t.children[0],n=e[r];if(n.type!==R.yR)return e;let a=[];const o={...e};return n.children.forEach((t=>{const r=e[t];a=[...a,...r.children],delete o[t]})),delete o[r],o[b._4]={...t,children:[b.PV]},o[b.PV]={...e[b.PV],children:a},o},[S.x_](e){const t={...e};return(0,O.Z)({currentComponent:t[b._4],layout:t}),{...t}},[S.bK]:(e,t)=>({...e,[b.M2]:{...e[b.M2],meta:{...e[b.M2].meta,text:t.text}}})},U=(0,T.ZP)((function(e={},t){return t.type in x?(0,x[t.type])(e,t):e}),{limit:b.Q9+2,ignoreInitialState:!0,filter:(0,T.an)([m.$,S.nj,S.CB,S.J0,S.YA,S.Mu,S.qL,S.aZ,S.L1])});var P=r(964296),Z=r(431069),M=r(309679),F=r(797381),k=r(203741),Q=r(23279),$=r.n(Q);const B=new class{constructor({callback:e=(()=>{}),sizeThreshold:t=1e3,delayThreshold:r=1e3}){this.queue=[],this.sizeThreshold=t,this.delayThreshold=r,this.trigger=$()(this.trigger.bind(this),this.delayThreshold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){const e=this.queue.splice(0,this.sizeThreshold);this.callback.call(null,e),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:r,source_id:n}=e[0];if("dashboard"===r?t+=`&dashboard_id=${n}`:"slice"===r&&(t+=`&slice_id=${n}`),navigator.sendBeacon){const r=new FormData;r.append("events",(0,M.o)(e)),Z.Z.getGuestToken()&&r.append("guest_token",Z.Z.getGuestToken()),navigator.sendBeacon(t,r)}else Z.Z.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let H=0;const Y=e=>t=>r=>{var n;if(r.type!==F.LOG_EVENT)return t(r);const{dashboardInfo:a,explore:o,impressionId:s,dashboardLayout:i,sqlLab:l}=e.getState();let c={impression_id:s,version:"v2"};if(null!=a&&a.id)c={source:"dashboard",source_id:a.id,...c};else if(null!=o&&o.slice)c={source:"explore",source_id:o.slice?o.slice.slice_id:0,...c};else if(l){const e=l.queryEditors.find((({id:e})=>e===l.tabHistory.slice(-1)[0]));c={source:"sqlLab",source_id:null==e?void 0:e.id,db_id:null==e?void 0:e.dbId,schema:null==e?void 0:e.schema}}const{eventName:d}=r.payload;let{eventData:u={}}=r.payload;if(u={...c,ts:(new Date).getTime(),event_name:d,...u},k.TY.has(d)?u={...u,event_type:"timing",trigger_event:H}:(H=(0,P.x0)(),u={...u,event_type:"user",event_id:H,visibility:document.visibilityState}),u.target_id&&null!=i&&null!=(n=i.present)&&n[u.target_id]){const{meta:e}=i.present[u.target_id];u.target_name=e.chartId?e.sliceName:e.text}return B.append(u),u};var j=r(955633),V=r(476445),G=r(478718),z=r.n(G),W=r(355786),K=r(452256),X=r(635854),J=r(410331),ee=r(200651),te=r(542313),re=r(199068),ne=r(535937),ae=r.n(ne),oe=r(964417),se=r.n(oe),ie=r(593185),le=r(443693),ce=r(182591),de=r(444904);const ue={tables:ce.uQ,queries:ce.NU,queryEditors:ce.St,unsavedQueryEditor:e=>(0,ce.St)([e])[0]},pe={paths:["sqlLab"],config:{slicer:e=>t=>{const r={};e.forEach((e=>{if((0,ie.cr)(ie.TT.SqllabBackendPersistence)){const{queryEditors:e,editorTabLastUpdatedAt:n,unsavedQueryEditor:a,tables:o,queries:s,tabHistory:i,lastUpdatedActiveTab:l,destroyedQueryEditors:c}=t.sqlLab,d=(0,le.VS)(e,a,n),u=i.slice(-1)[0]!==l,p=Object.keys(c).length>0;if(d.length>0||u||p){const e=d.every((({inLocalStorage:e})=>!e));r.sqlLab={queryEditors:d,...!e&&{tabHistory:i,tables:o.filter((e=>e.inLocalStorage)),queries:ae()(s,(e=>e.inLocalStorage&&!e.isDataPreview))},...u&&{tabHistory:i},destroyedQueryEditors:c}}}else delete t[e].common,"sqlLab"===e&&(r[e]=Object.fromEntries(Object.entries(t[e]).map((([e,t])=>{var r,n;return[e,null!=(r=null==(n=ue[e])?void 0:n.call(ue,t))?r:t]}))))}));const n=JSON.stringify(r),a=Math.round(n.length*de.TU/de.Yo*100)/100;return t.localStorageUsageInKilobytes!==a&&(t.localStorageUsageInKilobytes=a),r},merge:(e,t={})=>({...e,...t,sqlLab:{...(null==t?void 0:t.sqlLab)||{},...e.sqlLab}})}},me=se()(pe.paths,pe.config);var he=r(618446),_e=r.n(he),fe=r(61988),ye=r(343716),Ee=r(588484),ge=r(828216),ve=r(611409),Te=r(444814),be=r(599543);function Se(e,t,r,n=!1){if(e.tabHistory[e.tabHistory.length-1]!==r){const{queryEditors:n}=(0,be.gf)(e,"queryEditors",{id:r},t);return{queryEditors:n}}return{unsavedQueryEditor:{...e.unsavedQueryEditor.id===r&&e.unsavedQueryEditor,...r?{id:r,...t}:e.unsavedQueryEditor,...!n&&{updatedAt:(new Date).getTime()}}}}var Re=r(536627);const Ae=e=>(t=e)=>t,Ce=(0,r(920292).Z)(),Ie="USER_LOADED",Oe=e=>[a.Z,Y,o.h.middleware],De={sqlLab:function e(t={},r){const n={[ve.ADD_QUERY_EDITOR](){const e={...(0,be.gf)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),tabHistory:[...t.tabHistory,r.queryEditor.id]};return(0,be._0)(e,"queryEditors",{...r.queryEditor,updatedAt:(new Date).getTime()})},[ve.QUERY_EDITOR_SAVED](){const{query:e,result:n,clientId:a}=r,o=t.queryEditors.find((e=>e.id===a));return(0,be.gf)(t,"queryEditors",o,{remoteId:n.remoteId,name:e.name},"id")},[ve.UPDATE_QUERY_EDITOR](){const e=r.alterations.remoteId,n=t.queryEditors.find((t=>t.remoteId===e));return null==n?t:(0,be.gf)(t,"queryEditors",n,r.alterations,"remoteId")},[ve.CLONE_QUERY_TO_NEW_TAB](){const n=t.queryEditors.find((e=>e.id===t.tabHistory[t.tabHistory.length-1])),a={...n,...t.unsavedQueryEditor.id===n.id&&t.unsavedQueryEditor},o={remoteId:a.remoteId,name:(0,fe.t)("Copy of %s",a.name),dbId:r.query.dbId?r.query.dbId:null,catalog:r.query.catalog?r.query.catalog:null,schema:r.query.schema?r.query.schema:null,autorun:!0,sql:r.query.sql,queryLimit:r.query.queryLimit,maxRow:r.query.maxRow};return e({...t,unsavedQueryEditor:{}},ve.addQueryEditor(o))},[ve.REMOVE_QUERY_EDITOR](){const e={...r.queryEditor,...r.queryEditor.id===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};let n=(0,be.gP)(t,"queryEditors",e);const a=n.queryEditors.map((e=>e.id)),o={};Object.keys(t.queries).forEach((e=>{const r=t.queries[e];a.indexOf(r.sqlEditorId)>-1&&(o[e]=r)}));let s=t.tabHistory.slice();s=s.filter((e=>a.indexOf(e)>-1));const i=t.tables.filter((t=>t.queryEditorId!==e.id));return n={...n,tabHistory:0===s.length&&n.queryEditors.length>0?n.queryEditors.slice(-1).map((e=>e.id)):s,tables:i,queries:o,unsavedQueryEditor:{...r.queryEditor.id!==t.unsavedQueryEditor.id&&t.unsavedQueryEditor},destroyedQueryEditors:{...n.destroyedQueryEditors,[e.id]:Date.now()}},n},[ve.CLEAR_DESTROYED_QUERY_EDITOR](){const e={...t.destroyedQueryEditors};return delete e[r.queryEditorId],{...t,destroyedQueryEditors:e}},[ve.REMOVE_QUERY](){const e={...t.queries};return delete e[r.query.id],{...t,queries:e}},[ve.RESET_STATE]:()=>({...r.sqlLabInitialState}),[ve.MERGE_TABLE](){const e={...r.table};let n;if(t.tables.forEach((t=>{t.dbId===e.dbId&&t.queryEditorId===e.queryEditorId&&t.catalog===e.catalog&&t.schema===e.schema&&t.name===e.name&&(n=t)})),n)return r.query&&(e.dataPreviewQueryId=r.query.id),n.initialized&&(e.id=n.id),(0,be.gf)(t,"tables",n,e);e.dataPreviewQueryId=null;let a=(0,be._0)(t,"tables",e,Boolean(r.prepend));return r.query&&(a=(0,be.gf)(a,"tables",e,{dataPreviewQueryId:r.query.id})),a},[ve.EXPAND_TABLE]:()=>(0,be.gf)(t,"tables",r.table,{expanded:!0}),[ve.REMOVE_DATA_PREVIEW](){const e={...t.queries};return delete e[r.table.dataPreviewQueryId],{...(0,be.gf)(t,"tables",r.table,{dataPreviewQueryId:null}),queries:e}},[ve.CHANGE_DATA_PREVIEW_ID](){const e={...t.queries};delete e[r.oldQueryId];const n=[];return t.tables.forEach((e=>{e.dataPreviewQueryId===r.oldQueryId?n.push({...e,dataPreviewQueryId:r.newQuery.id}):n.push(e)})),{...t,queries:e,tables:n,activeSouthPaneTab:r.newQuery.id}},[ve.COLLAPSE_TABLE]:()=>(0,be.gf)(t,"tables",r.table,{expanded:!1}),[ve.REMOVE_TABLES](){const e=r.tables.map((e=>e.id));return{...t,tables:t.tables.filter((t=>!e.includes(t.id)))}},[ve.COST_ESTIMATE_STARTED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:null}}}),[ve.COST_ESTIMATE_RETURNED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!0,cost:r.json.result,error:null}}}),[ve.COST_ESTIMATE_FAILED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:r.error}}}),[ve.START_QUERY](){let e={...t};if(r.query.sqlEditorId){const n={...(0,be.p1)(t.queryEditors,r.query.sqlEditorId),...r.query.sqlEditorId===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};if(n.latestQueryId&&t.queries[n.latestQueryId]){const r={...t.queries[n.latestQueryId].results,data:[],query:null},a={...t.queries[n.latestQueryId],results:r},o={...t.queries,[a.id]:a};e={...t,queries:o}}}else e.activeSouthPaneTab=r.query.id;return e=(0,be.SJ)(e,"queries",r.query),{...e,...Se(t,{latestQueryId:r.query.id},r.query.sqlEditorId,r.query.isDataPreview)}},[ve.STOP_QUERY]:()=>(0,be.wK)(t,"queries",r.query,{state:ye.Tb.Stopped,results:[]}),[ve.CLEAR_QUERY_RESULTS](){const e={...r.query.results};return e.data=[],(0,be.wK)(t,"queries",r.query,{results:e,cached:!0})},[ve.REQUEST_QUERY_RESULTS]:()=>(0,be.wK)(t,"queries",r.query,{state:ye.Tb.Fetching}),[ve.QUERY_SUCCESS](){var e,n,a,o,s,i,l,c,d,u;if(r.query.state===ye.Tb.STOPPED||r.results.status!==ye.Tb.Success)return t;const p={endDttm:(0,Te.zO)(),progress:100,results:r.results,rows:(null==r||null==(e=r.results)||null==(n=e.query)?void 0:n.rows)||0,state:ye.Tb.Success,limitingFactor:null==r||null==(a=r.results)||null==(o=a.query)?void 0:o.limitingFactor,tempSchema:null==r||null==(s=r.results)||null==(i=s.query)?void 0:i.tempSchema,tempTable:null==r||null==(l=r.results)||null==(c=l.query)?void 0:c.tempTable,errorMessage:null,cached:!1},m=null==r||null==(d=r.results)||null==(u=d.query)?void 0:u.resultsKey;return m&&(p.resultsKey=m),(0,be.wK)(t,"queries",r.query,p)},[ve.QUERY_FAILED](){if(r.query.state===ye.Tb.Stopped)return t;const e={state:ye.Tb.Failed,errors:r.errors,errorMessage:r.msg,endDttm:(0,Te.zO)(),link:r.link};return(0,be.wK)(t,"queries",r.query,e)},[ve.SET_ACTIVE_QUERY_EDITOR](){var e;if(t.queryEditors.map((e=>e.id)).indexOf(null==(e=r.queryEditor)?void 0:e.id)>-1&&t.tabHistory[t.tabHistory.length-1]!==r.queryEditor.id){const e={...(0,be.gf)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),unsavedQueryEditor:{}};return{...r.queryEditor.id===t.unsavedQueryEditor.id?(0,be.gf)(e,"queryEditors",r.queryEditor,{...r.queryEditor,...t.unsavedQueryEditor}):e,tabHistory:[...t.tabHistory,r.queryEditor.id]}}return t},[ve.LOAD_QUERY_EDITOR](){const e=(0,be.gf)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor});return(0,be.gf)(e,"queryEditors",r.queryEditor,{...r.queryEditor})},[ve.SET_TABLES]:()=>(0,be.zd)(t,"tables",r.tables),[ve.SET_ACTIVE_SOUTHPANE_TAB]:()=>({...t,activeSouthPaneTab:r.tabId}),[ve.MIGRATE_QUERY_EDITOR](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.queryEditors=e.queryEditors.filter((e=>e.id!==r.oldQueryEditor.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,be.gf)(t,"queryEditors",r.oldQueryEditor,r.newQueryEditor)},[ve.MIGRATE_TABLE](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.tables=e.tables.filter((e=>e.id!==r.oldTable.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,be._0)((0,be.gP)(t,"tables",r.oldTable),"tables",r.newTable)},[ve.MIGRATE_TAB_HISTORY](){const e=t.tabHistory.map((e=>e===r.oldId?r.newId:e));return{...t,tabHistory:e}},[ve.MIGRATE_QUERY](){const e={...t.queries[r.queryId],sqlEditorId:r.queryEditorId},n={...t.queries,[e.id]:e};return{...t,queries:n}},[ve.QUERY_EDITOR_SETDB]:()=>({...t,...Se(t,{dbId:r.dbId},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_CATALOG]:()=>({...t,...Se(t,{catalog:r.catalog},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_SCHEMA]:()=>({...t,...Se(t,{schema:r.schema},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_TITLE]:()=>({...t,...Se(t,{name:r.name},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_SQL](){const{unsavedQueryEditor:e}=t;return(null==e?void 0:e.id)===r.queryEditor.id&&e.sql===r.sql?t:{...t,...Se(t,{sql:r.sql,...r.queryId&&{latestQueryId:r.queryId}},r.queryEditor.id)}},[ve.QUERY_EDITOR_SET_CURSOR_POSITION]:()=>({...t,...Se(t,{cursorPosition:r.position},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_QUERY_LIMIT]:()=>({...t,...Se(t,{queryLimit:r.queryLimit},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_TEMPLATE_PARAMS]:()=>({...t,...Se(t,{templateParams:r.templateParams},r.queryEditor.id)}),[ve.QUERY_EDITOR_SET_SELECTED_TEXT]:()=>({...t,...Se(t,{selectedText:r.sql},r.queryEditor.id,!0)}),[ve.QUERY_EDITOR_SET_AUTORUN]:()=>({...t,...Se(t,{autorun:r.autorun},r.queryEditor.id)}),[ve.QUERY_EDITOR_PERSIST_HEIGHT]:()=>({...t,...Se(t,{northPercent:r.northPercent,southPercent:r.southPercent},r.queryEditor.id)}),[ve.QUERY_EDITOR_TOGGLE_LEFT_BAR]:()=>({...t,...Se(t,{hideLeftBar:r.hideLeftBar},r.queryEditor.id)}),[ve.SET_DATABASES](){const e={};return r.databases.forEach((t=>{e[t.id]={...t,extra_json:JSON.parse(t.extra||"")}})),{...t,databases:e}},[ve.REFRESH_QUERIES](){let e={...t.queries},n=!1,{queriesLastUpdate:a}=t;return Object.entries(r.alteredQueries).forEach((([r,o])=>{if(!t.queries.hasOwnProperty(r)||t.queries[r].state!==ye.Tb.Stopped&&t.queries[r].state!==ye.Tb.Failed){var s;const i=(0,Ee.Z)(o.changed_on),l=Date.parse(i);l>a&&(a=l);const c=null==(s=t.queries[r])?void 0:s.state,u=o.state;e[r]={...t.queries[r],...o,...o.startDttm&&{startDttm:Number(o.startDttm)},...o.endDttm&&{endDttm:Number(o.endDttm)},state:u===ye.Tb.Success&&[ye.Tb.Fetching,ye.Tb.Success,ye.Tb.Running].includes(c)?c:u},(0,ge.wU)(d()(e[r],["extra"]),d()(t.queries[r],["extra"]))&&_e()(e[r].extra,t.queries[r].extra)?e[r]=t.queries[r]:n=!0}})),n||(e=t.queries),{...t,queries:e,queriesLastUpdate:a}},[ve.CLEAR_INACTIVE_QUERIES](){const{queries:e}=t,n=Object.fromEntries(Object.entries(e).filter((([,e])=>!(["running","pending"].includes(e.state)&&Date.now()-e.startDttm>r.interval&&0===e.progress))).map((([e,t])=>{var r;return[e,{...t,state:t.resultsKey&&null!=(r=t.results)&&r.status?t.results.status:t.state}]})));return{...t,queries:n}},[ve.SET_USER_OFFLINE]:()=>({...t,offline:r.offline}),[ve.CREATE_DATASOURCE_STARTED]:()=>({...t,isDatasourceLoading:!0,errorMessage:null}),[ve.CREATE_DATASOURCE_SUCCESS]:()=>({...t,isDatasourceLoading:!1,errorMessage:null,datasource:r.datasource}),[ve.CREATE_DATASOURCE_FAILED]:()=>({...t,isDatasourceLoading:!1,errorMessage:r.err}),[ve.SET_EDITOR_TAB_LAST_UPDATE]:()=>({...t,editorTabLastUpdatedAt:r.timestamp}),[ve.SET_LAST_UPDATED_ACTIVE_TAB]:()=>({...t,lastUpdatedActiveTab:r.queryEditorId})};return r.type in n?n[r.type]():t},localStorageUsageInKilobytes:Ae(0),messageToasts:function(e=[],t){switch(t.type){case s.h:{const{payload:r}=t,n=e.slice();return r.noDuplicate&&n.find((e=>e.text===r.text))?e:[r,...e]}case s.K7:{const{payload:{id:r}}=t;return[...e].filter((e=>e.id!==r))}default:return e}},common:Ae(Ce.common),user:(e=Ce.user||{},t)=>t.type===Ie?t.user:e,impressionId:Ae((0,P.x0)()),charts:i.Z,datasources:(e,t)=>t.type===g.Rn.SetDatasources?function(e,t){return t.type===g.Rn.SetDatasources?{...e,...E()(t.datasources,"uid")}:t.type===g.Rn.SetDatasource?{...e,[t.key]:t.datasource}:e||{}}(e,t):function(e,t){return t.type===re.AG?{...e,[(0,te.T)(t.datasource)]:t.datasource}:t.type===V._?{...t.data.datasources}:e||{}}(e,t),dashboardInfo:function(e={},t){switch(t.type){case p.$A:return{...e,...t.newInfo,last_modified_time:Math.round((new Date).getTime()/1e3)};case m.$:return{...e,...t.data.dashboardInfo};case p.nH:return{...e,filterBarOrientation:t.filterBarOrientation};case p.Fl:return{...e,crossFiltersEnabled:t.crossFiltersEnabled};default:return e}},dashboardFilters:_.ZP,dataMask:l.Z,nativeFilters:f.Z,dashboardState:function(e={},t){const r={[m.$]:()=>({...e,...t.data.dashboardState}),[h.Be]:()=>({...e,css:t.css}),[h.BD](){const r=new Set(e.sliceIds);return r.add(t.slice.slice_id),{...e,sliceIds:Array.from(r)}},[h.Vd](){const{sliceId:r}=t,n=new Set(e.sliceIds);return n.delete(r),{...e,sliceIds:Array.from(n)}},[h.Z9]:()=>({...e,isStarred:t.isStarred}),[h.H9]:()=>({...e,isPublished:t.isPublished}),[h.$f]:()=>({...e,editMode:t.editMode}),[h.n1](){const{maxUndoHistoryExceeded:r=!0}=t.payload;return{...e,maxUndoHistoryExceeded:r}},[h.oJ]:()=>({...e}),[h.J$]:()=>({...e,colorScheme:t.colorScheme,updatedColorScheme:!0}),[h.zW]:()=>({...e,labelsColorMapMustSync:!0}),[h.UB]:()=>({...e,labelsColorMapMustSync:!1}),[h.h$]:()=>({...e,sharedLabelsColorsMustSync:!0}),[h.jX]:()=>({...e,sharedLabelsColorsMustSync:!1}),[h.ek](){const r={...e.expandedSlices},{sliceId:n}=t;return r[n]?delete r[n]:r[n]=!0,{...e,expandedSlices:r}},[h.P0]:()=>({...e,hasUnsavedChanges:!0}),[h.hD]:()=>({...e,dashboardIsSaving:!0}),[h.qJ]:()=>({...e,dashboardIsSaving:!1}),[h.Ii]:()=>({...e,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,editMode:!1,updatedColorScheme:!1,lastModifiedTime:t.lastModifiedTime}),[h.ee](){const{hasUnsavedChanges:r}=t.payload;return{...e,hasUnsavedChanges:r}},[h.yV]:()=>({...e,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:t.isPersistent,hasUnsavedChanges:t.isPersistent}),[h.ec]:()=>({...e,isRefreshing:!0}),[h.bs]:()=>({...e,isFiltersRefreshing:!0}),[h.sm]:()=>({...e,isFiltersRefreshing:!1}),[h.k5]:()=>({...e,isRefreshing:!1}),[h.RU]:()=>({...e,directPathToChild:t.path,directPathLastUpdated:Date.now()}),[h.om](){const r=new Set(e.activeTabs);return r.delete(t.prevTabId),r.add(t.tabId),{...e,activeTabs:Array.from(r)}},[h.nV]:()=>({...e,activeTabs:t.activeTabs}),[h.w9]:()=>({...e,overwriteConfirmMetadata:t.overwriteConfirmMetadata}),[h.mq]:()=>({...e,focusedFilterField:{chartId:t.chartId,column:t.column}}),[h.Iw]:()=>e.focusedFilterField&&t.chartId===e.focusedFilterField.chartId&&t.column===e.focusedFilterField.column?{...e,focusedFilterField:null}:e,[h.r$]:()=>({...e,fullSizeChartId:t.chartId}),[h.FF]:()=>({...e,datasetsStatus:t.status})};return t.type in r?r[t.type]():e},dashboardLayout:U,sliceEntities:v.Z,reports:function(e={},t){const r={[u.jt](){var r,n;const{report:a,resourceId:o,creationMethod:s,filterField:i}=t,l=null==(r=a.result)?void 0:r.find((e=>e[i]===o));if(l)return{...e,[s]:{...e[s],[o]:l}};if(null!=e&&null!=(n=e[s])&&n[o]){const t={...e};return delete t[s][o],t}return{...e}},[u.J8](){const{result:r,id:n}=t.json,a={...r,id:n},o=a.dashboard||a.chart;return{...e,[a.creation_method]:{...e[a.creation_method],[o]:a}}},[u.Dr](){const r={...t.json.result,id:t.json.id},n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...e[r.creation_method],[n]:r}}},[u._M](){const{report:r}=t,n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...d()(e[r.creation_method],n)}}}};return t.type in r?r[t.type]():e},saveModal:function(e={},t){const r={[j.SET_SAVE_CHART_MODAL_VISIBILITY]:()=>({...e,isVisible:t.isVisible}),[j.FETCH_DASHBOARDS_SUCCEEDED]:()=>({...e,dashboards:t.choices}),[j.FETCH_DASHBOARDS_FAILED]:()=>({...e,saveModalAlert:`fetching dashboards failed for ${t.userId}`}),[j.SAVE_SLICE_FAILED]:()=>({...e,saveModalAlert:"Failed to save slice"}),[j.SAVE_SLICE_SUCCESS]:t=>({...e,data:t}),[V._]:()=>({...t.data.saveModal})};return t.type in r?r[t.type]():e},explore:function(e={},t){const r={[K.DYNAMIC_PLUGIN_CONTROLS_READY]:()=>({...e,controls:t.controlsState}),[ee.TOGGLE_FAVE_STAR]:()=>({...e,isStarred:t.isStarred}),[ee.POST_DATASOURCE_STARTED]:()=>({...e,isDatasourceMetaLoading:!0}),[ee.UPDATE_FORM_DATA_BY_DATASOURCE](){const r={...e.form_data},{prevDatasource:n,newDatasource:a}=t,o={...e.controls},s=[];n.id===a.id&&n.type===a.type||(r.datasource=a.uid),Object.entries(o).forEach((([e,t])=>{("column_name"===t.valueKey||"savedMetrics"in t||"columns"in t||"options"in t&&!Array.isArray(t.options))&&(r[e]=(0,J.YY)(a,t,t.value),(0,W.Z)(r[e]).length>0&&r[e]!==o[e].default&&s.push(e))}));const i={...e,controls:o,datasource:t.newDatasource};return{...i,form_data:r,controls:(0,X.R3)(i,r),controlsTransferred:s}},[ee.FETCH_DATASOURCES_STARTED]:()=>({...e,isDatasourcesLoading:!0}),[ee.SET_FIELD_VALUE](){const{controlName:r,value:n,validationErrors:a}=t;let o={...e.form_data,[r]:n};const s=e.form_data.metrics,i=e.form_data.column_config,l=o.viz_type;"metrics"===r&&s&&i&&(n.forEach(((e,t)=>{var r,n;!s.some((t=>(null==t?void 0:t.label)===(null==e?void 0:e.label)))&&(null==e?void 0:e.label)!==(null==(r=s[t])?void 0:r.label)&&i[null==(n=s[t])?void 0:n.label]&&(i[e.label]=i[s[t].label],delete i[s[t].label])})),o.column_config=i);const c=e.controls[t.controlName]||(0,J.Bx)(t.controlName,l)||null,d={...(0,J.vP)(c,e,t.value)},u={...e.controls.column_config,...i&&{value:i}},p={...e,controls:{...e.controls,...c&&{[r]:d},..."metrics"===r&&{column_config:u}}},m={};Array.isArray(d.rerender)&&d.rerender.forEach((e=>{m[e]={...(0,J.vP)(p.controls[e],p,p.controls[e].value)}}));const h=d.validationErrors||[];(a||[]).forEach((e=>{h.includes(e)||h.push(e)}));const _=h&&h.length>0,f="viz_type"===t.controlName&&t.value!==e.controls.viz_type.value;let y=e.controls;if(f){const r=new J.os(e.form_data).transform(t.value,e);o=r.formData,y=r.controlsState}return{...e,form_data:o,triggerRender:d.renderTrigger&&!_,controls:{...y,...c&&{[t.controlName]:{...d,validationErrors:h}},...m}}},[ee.SET_EXPLORE_CONTROLS]:()=>({...e,controls:(0,X.R3)(e,t.formData)}),[ee.SET_FORM_DATA]:()=>({...e,form_data:t.formData}),[ee.UPDATE_CHART_TITLE]:()=>({...e,sliceName:t.sliceName}),[ee.SET_SAVE_ACTION]:()=>({...e,saveAction:t.saveAction}),[ee.CREATE_NEW_SLICE]:()=>({...e,slice:t.slice,controls:(0,X.R3)(e,t.form_data),can_add:t.can_add,can_download:t.can_download,can_overwrite:t.can_overwrite}),[ee.SET_STASH_FORM_DATA](){const{form_data:r,hiddenFormData:n}=e,{fieldNames:a,isHidden:o}=t;if(o)return{...e,hiddenFormData:{...n,...z()(r,a)},form_data:d()(r,a)};const s=z()(n,a);return 0===Object.keys(s).length?e:{...e,form_data:{...r,...s},hiddenFormData:d()(n,a)}},[ee.SLICE_UPDATED](){var r;return{...e,slice:{...e.slice,...t.slice,owners:t.slice.owners?t.slice.owners.map((e=>e.value)):null},sliceName:null!=(r=t.slice.slice_name)?r:e.sliceName,metadata:{...e.metadata,owners:t.slice.owners?t.slice.owners.map((e=>e.label)):null}}},[ee.SET_FORCE_QUERY]:()=>({...e,force:t.force}),[V._]:()=>({...t.data.explore})};return t.type in r?r[t.type]():e}};function we({disableDebugger:e=!1,initialState:t=(0,Re.Z)(Ce),rootReducers:r=De,...a}={}){return(0,n.xC)({preloadedState:t,reducer:{[o.h.reducerPath]:o.h.reducer,...r},middleware:Oe,devTools:!1,enhancers:[me],...a})}const Ne=we()},169233:(e,t,r)=>{var n={"./alert.svg":[826230,6230],"./alert_solid.svg":[2886,2886],"./alert_solid_small.svg":[814002,4002],"./area-chart-tile.svg":[65573,5573],"./ballot.svg":[370287,287],"./bar-chart-tile.svg":[191084,1084],"./big-number-chart-tile.svg":[658310,8310],"./binoculars.svg":[381684,1684],"./bolt.svg":[506450,6450],"./bolt_small.svg":[440894,894],"./bolt_small_run.svg":[405094,5094],"./calendar.svg":[348829,8829],"./cancel-x.svg":[965394,5394],"./cancel.svg":[789364,9364],"./cancel_solid.svg":[130869,869],"./card_view.svg":[591277,1277],"./cards.svg":[876145,6145],"./cards_locked.svg":[449490,9490],"./caret_down.svg":[440149,149],"./caret_left.svg":[391363,1363],"./caret_right.svg":[56746,6746],"./caret_up.svg":[38754,8754],"./category.svg":[875362,5362],"./certified.svg":[307914,7914],"./check.svg":[769814,9814],"./checkbox-half.svg":[272109,2109],"./checkbox-off.svg":[751923,9131],"./checkbox-on.svg":[572426,2426],"./circle.svg":[131603,1603],"./circle_check.svg":[91503,1503],"./circle_check_solid.svg":[782078,2078],"./clock.svg":[633211,3211],"./close.svg":[748082,8082],"./code.svg":[528295,8295],"./cog.svg":[193533,3533],"./collapse.svg":[529414,9414],"./color_palette.svg":[581997,1997],"./components.svg":[327618,7618],"./copy.svg":[7335,7335],"./cross-filter-badge.svg":[760642,642],"./current-rendered-tile.svg":[711626,1626],"./cursor_target.svg":[842679,2679],"./database.svg":[557056,7056],"./dataset_physical.svg":[314255,4255],"./dataset_virtual.svg":[905336,1016],"./dataset_virtual_greyscale.svg":[280389,389],"./default_db_image.svg":[159286,9286],"./download.svg":[477239,7239],"./drag.svg":[833709,3709],"./edit.svg":[200673,673],"./edit_alt.svg":[284749,4749],"./email.svg":[3702,3702],"./error.svg":[916525,6525],"./error_solid.svg":[448277,8277],"./error_solid_small.svg":[868162,8162],"./error_solid_small_red.svg":[583702,8700],"./exclamation.svg":[924602,4602],"./expand.svg":[465481,5481],"./eye.svg":[213456,3456],"./eye_slash.svg":[395305,5305],"./favorite-selected.svg":[162913,2913],"./favorite-unselected.svg":[497914,9452],"./favorite_small_selected.svg":[366146,6146],"./field_abc.svg":[678942,8942],"./field_boolean.svg":[214804,4804],"./field_date.svg":[122417,2417],"./field_derived.svg":[23045,3045],"./field_num.svg":[827461,7461],"./field_struct.svg":[528325,8325],"./file.svg":[84376,4376],"./filter.svg":[385205,5205],"./filter_small.svg":[548225,8225],"./folder.svg":[783431,3431],"./full.svg":[309542,9542],"./function_x.svg":[383339,3339],"./gear.svg":[515634,5634],"./grid.svg":[489480,9480],"./image.svg":[8417,8417],"./import.svg":[747508,7508],"./info-solid.svg":[689558,9558],"./info.svg":[373489,3489],"./info_solid_small.svg":[707822,7822],"./join.svg":[472405,2405],"./keyboard.svg":[545310,5310],"./layers.svg":[351705,1705],"./lightbulb.svg":[946712,6712],"./line-chart-tile.svg":[783423,3423],"./link.svg":[854641,4641],"./list.svg":[991019,1019],"./list_view.svg":[448074,8074],"./location.svg":[155840,5840],"./lock_locked.svg":[9174,9174],"./lock_unlocked.svg":[125280,5280],"./map.svg":[648058,8058],"./message.svg":[325922,5922],"./minus.svg":[535117,5117],"./minus_solid.svg":[67539,7539],"./more_horiz.svg":[893246,3246],"./more_vert.svg":[251441,1441],"./move.svg":[734801,4801],"./nav_charts.svg":[498430,8430],"./nav_dashboard.svg":[36239,6239],"./nav_data.svg":[166730,6730],"./nav_explore.svg":[259360,9360],"./nav_home.svg":[158960,8960],"./nav_lab.svg":[243613,3613],"./note.svg":[560971,971],"./offline.svg":[970650,650],"./paperclip.svg":[244837,4837],"./pie-chart-tile.svg":[219804,9804],"./placeholder.svg":[227850,7850],"./plus.svg":[134616,4616],"./plus_large.svg":[967820,7820],"./plus_small.svg":[174585,4585],"./plus_solid.svg":[683070,3070],"./queued.svg":[862905,2905],"./redo.svg":[713043,3043],"./refresh.svg":[100084,84],"./running.svg":[315350,5350],"./save.svg":[390511,511],"./search.svg":[552652,2652],"./server.svg":[326878,6878],"./share.svg":[925869,5869],"./slack.svg":[751044,1044],"./sort.svg":[216945,6945],"./sort_asc.svg":[888012,8012],"./sort_desc.svg":[888426,8426],"./sql.svg":[817248,7248],"./table-chart-tile.svg":[85499,5499],"./table.svg":[199684,9684],"./tag.svg":[492237,2237],"./tags.svg":[451378,1378],"./transparent.svg":[154858,4858],"./trash.svg":[262663,2663],"./triangle_change.svg":[347635,7635],"./triangle_down.svg":[697589,6384],"./triangle_up.svg":[433478,3478],"./undo.svg":[962202,2202],"./up-level.svg":[315029,5029],"./user.svg":[572837,2837],"./warning.svg":[792707,2707],"./warning_solid.svg":[485725,5725],"./x-large.svg":[455521,5521],"./x-small.svg":[520057,57]};function a(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((()=>r(a)))}a.keys=()=>Object.keys(n),a.id=169233,e.exports=a},289419:(e,t,r)=>{"use strict";e.exports=r.p+"loading.cff8a5da.gif"}}]);
//# sourceMappingURL=7130.905c11b7a6989e73d64c.entry.js.map