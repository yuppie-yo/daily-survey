{"version":3,"file":"72bf7f9cc046885ece6c.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/rc-field-form/lib/FieldContext.js","webpack://superset/./node_modules/rc-util/lib/hooks/useMemo.js","webpack://superset/./node_modules/rc-util/lib/raf.js","webpack://superset/./node_modules/rc-util/lib/ref.js","webpack://superset/./packages/superset-ui-core/src/time-format/formatters/finestTemporalGrain.ts","webpack://superset/./src/components/Form/FormItem.tsx","webpack://superset/./src/explore/components/controls/FilterControl/types.ts","webpack://superset/./src/filters/components/Select/SelectFilterPlugin.tsx","webpack://superset/./src/filters/components/common.ts","webpack://superset/./src/filters/utils.ts","webpack://superset/./node_modules/use-immer/dist/use-immer.module.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.HOOK_MARK = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n\nvar HOOK_MARK = 'RC_FORM_INTERNAL_HOOKS'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexports.HOOK_MARK = HOOK_MARK;\n\nvar warningFunc = function warningFunc() {\n  (0, _warning.default)(false, 'Can not find FormContext. Please make sure you wrap Field under Form.');\n};\n\nvar Context = /*#__PURE__*/React.createContext({\n  getFieldValue: warningFunc,\n  getFieldsValue: warningFunc,\n  getFieldError: warningFunc,\n  getFieldsError: warningFunc,\n  isFieldsTouched: warningFunc,\n  isFieldTouched: warningFunc,\n  isFieldValidating: warningFunc,\n  isFieldsValidating: warningFunc,\n  resetFields: warningFunc,\n  setFields: warningFunc,\n  setFieldsValue: warningFunc,\n  validateFields: warningFunc,\n  submit: warningFunc,\n  getInternalHooks: function getInternalHooks() {\n    warningFunc();\n    return {\n      dispatch: warningFunc,\n      initEntityValue: warningFunc,\n      registerField: warningFunc,\n      useSubscribe: warningFunc,\n      setInitialValues: warningFunc,\n      setCallbacks: warningFunc,\n      getFields: warningFunc,\n      setValidateMessages: warningFunc,\n      setPreserve: warningFunc\n    };\n  }\n});\nvar _default = Context;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useMemo;\nvar React = _interopRequireWildcard(require(\"react\"));\nfunction useMemo(getValue, condition, shouldUpdate) {\n  var cacheRef = React.useRef({});\n  if (!('value' in cacheRef.current) || shouldUpdate(cacheRef.current.condition, condition)) {\n    cacheRef.current.value = getValue();\n    cacheRef.current.condition = condition;\n  }\n  return cacheRef.current.value;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar raf = function raf(callback) {\n  return +setTimeout(callback, 16);\n};\nvar caf = function caf(num) {\n  return clearTimeout(num);\n};\nif (typeof window !== 'undefined' && 'requestAnimationFrame' in window) {\n  raf = function raf(callback) {\n    return window.requestAnimationFrame(callback);\n  };\n  caf = function caf(handle) {\n    return window.cancelAnimationFrame(handle);\n  };\n}\nvar rafUUID = 0;\nvar rafIds = new Map();\nfunction cleanup(id) {\n  rafIds.delete(id);\n}\nvar wrapperRaf = function wrapperRaf(callback) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  rafUUID += 1;\n  var id = rafUUID;\n  function callRef(leftTimes) {\n    if (leftTimes === 0) {\n      // Clean up\n      cleanup(id);\n\n      // Trigger\n      callback();\n    } else {\n      // Next raf\n      var realId = raf(function () {\n        callRef(leftTimes - 1);\n      });\n\n      // Bind real raf id\n      rafIds.set(id, realId);\n    }\n  }\n  callRef(times);\n  return id;\n};\nwrapperRaf.cancel = function (id) {\n  var realId = rafIds.get(id);\n  cleanup(id);\n  return caf(realId);\n};\nif (process.env.NODE_ENV !== 'production') {\n  wrapperRaf.ids = function () {\n    return rafIds;\n  };\n}\nvar _default = exports.default = wrapperRaf;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useComposeRef = exports.supportRef = exports.supportNodeRef = exports.getNodeRef = exports.fillRef = exports.composeRef = void 0;\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _react = require(\"react\");\nvar _reactIs = require(\"react-is\");\nvar _useMemo = _interopRequireDefault(require(\"./hooks/useMemo\"));\nvar fillRef = exports.fillRef = function fillRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else if ((0, _typeof2.default)(ref) === 'object' && ref && 'current' in ref) {\n    ref.current = node;\n  }\n};\n\n/**\n * Merge refs into one ref function to support ref passing.\n */\nvar composeRef = exports.composeRef = function composeRef() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n  var refList = refs.filter(Boolean);\n  if (refList.length <= 1) {\n    return refList[0];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      fillRef(ref, node);\n    });\n  };\n};\nvar useComposeRef = exports.useComposeRef = function useComposeRef() {\n  for (var _len2 = arguments.length, refs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    refs[_key2] = arguments[_key2];\n  }\n  return (0, _useMemo.default)(function () {\n    return composeRef.apply(void 0, refs);\n  }, refs, function (prev, next) {\n    return prev.length !== next.length || prev.every(function (ref, i) {\n      return ref !== next[i];\n    });\n  });\n};\nvar supportRef = exports.supportRef = function supportRef(nodeOrComponent) {\n  var _type$prototype, _nodeOrComponent$prot;\n  var type = (0, _reactIs.isMemo)(nodeOrComponent) ? nodeOrComponent.type.type : nodeOrComponent.type;\n\n  // Function component node\n  if (typeof type === 'function' && !((_type$prototype = type.prototype) !== null && _type$prototype !== void 0 && _type$prototype.render) && type.$$typeof !== _reactIs.ForwardRef) {\n    return false;\n  }\n\n  // Class component\n  if (typeof nodeOrComponent === 'function' && !((_nodeOrComponent$prot = nodeOrComponent.prototype) !== null && _nodeOrComponent$prot !== void 0 && _nodeOrComponent$prot.render) && nodeOrComponent.$$typeof !== _reactIs.ForwardRef) {\n    return false;\n  }\n  return true;\n};\nfunction isReactElement(node) {\n  return /*#__PURE__*/(0, _react.isValidElement)(node) && !(0, _reactIs.isFragment)(node);\n}\nvar supportNodeRef = exports.supportNodeRef = function supportNodeRef(node) {\n  return isReactElement(node) && supportRef(node);\n};\n\n/**\n * In React 19. `ref` is not a property from node.\n * But a property from `props.ref`.\n * To check if `props.ref` exist or fallback to `ref`.\n */\nvar getNodeRef = exports.getNodeRef = Number(_react.version.split('.')[0]) >= 19 ?\n// >= React 19\nfunction (node) {\n  if (isReactElement(node)) {\n    return node.props.ref;\n  }\n  return null;\n} :\n// < React 19\nfunction (node) {\n  if (isReactElement(node)) {\n    return node.ref;\n  }\n  return null;\n};","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { utcFormat, timeFormat } from 'd3-time-format';\nimport { utcUtils, localTimeUtils } from '../utils/d3Time';\nimport TimeFormatter from '../TimeFormatter';\n\n/*\n * A formatter that examines all the values, and uses the finest temporal grain.\n */\nexport default function finestTemporalGrain(\n  values: any[],\n  useLocalTime = false,\n) {\n  const format = useLocalTime ? timeFormat : utcFormat;\n\n  const formatMillisecond = format('%Y-%m-%d %H:%M:%S.%L');\n  const formatSecond = format('%Y-%m-%d %H:%M:%S');\n  const formatMinute = format('%Y-%m-%d %H:%M');\n  const formatHour = format('%Y-%m-%d %H:%M');\n  const formatDay = format('%Y-%m-%d');\n  const formatMonth = format('%Y-%m-%d');\n  const formatYear = format('%Y');\n\n  const {\n    hasMillisecond,\n    hasSecond,\n    hasMinute,\n    hasHour,\n    isNotFirstDayOfMonth,\n    isNotFirstMonth,\n  } = useLocalTime ? localTimeUtils : utcUtils;\n\n  let formatFunc = formatYear;\n  values.forEach((value: any) => {\n    if (formatFunc === formatYear && isNotFirstMonth(value)) {\n      formatFunc = formatMonth;\n    }\n    if (formatFunc === formatMonth && isNotFirstDayOfMonth(value)) {\n      formatFunc = formatDay;\n    }\n    if (formatFunc === formatDay && hasHour(value)) {\n      formatFunc = formatHour;\n    }\n    if (formatFunc === formatHour && hasMinute(value)) {\n      formatFunc = formatMinute;\n    }\n    if (formatFunc === formatMinute && hasSecond(value)) {\n      formatFunc = formatSecond;\n    }\n    if (formatFunc === formatSecond && hasMillisecond(value)) {\n      formatFunc = formatMillisecond;\n    }\n  });\n\n  return new TimeFormatter({\n    description:\n      'Use the finest grain in an array of dates to format all dates in the array',\n    formatFunc,\n    id: 'finest_temporal_grain',\n    label: 'Format temporal columns with the finest grain',\n    useLocalTime,\n  });\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport Form from 'antd/lib/form';\nimport { styled } from '@superset-ui/core';\n\nconst StyledItem = styled(Form.Item)`\n  ${({ theme }) => `\n    .ant-form-item-label {\n      padding-bottom: ${theme.gridUnit}px;\n      & > label {\n        text-transform: uppercase;\n        font-size: ${theme.typography.sizes.s}px;\n        color: ${theme.colors.grayscale.base};\n\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            color: ${theme.colors.error.base};\n            font-size: ${theme.typography.sizes.s}px;\n            content: '*';\n          }\n        }\n      }\n    }\n  `}\n`;\n\nexport default StyledItem;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport enum ExpressionTypes {\n  Simple = 'SIMPLE',\n  Sql = 'SQL',\n}\n\nexport enum Clauses {\n  Having = 'HAVING',\n  Where = 'WHERE',\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n  AppSection,\n  DataMask,\n  ensureIsArray,\n  ExtraFormData,\n  GenericDataType,\n  getColumnLabel,\n  JsonObject,\n  finestTemporalGrainFormatter,\n  t,\n  tn,\n} from '@superset-ui/core';\nimport { LabeledValue as AntdLabeledValue } from 'antd/lib/select';\nimport { debounce } from 'lodash';\nimport { useImmerReducer } from 'use-immer';\nimport { Select } from 'src/components';\nimport { SLOW_DEBOUNCE } from 'src/constants';\nimport { hasOption, propertyComparator } from 'src/components/Select/utils';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { PluginFilterSelectProps, SelectValue } from './types';\nimport { FilterPluginStyle, StatusMessage, StyledFormItem } from '../common';\nimport { getDataRecordFormatter, getSelectExtraFormData } from '../../utils';\n\ntype DataMaskAction =\n  | { type: 'ownState'; ownState: JsonObject }\n  | {\n      type: 'filterState';\n      extraFormData: ExtraFormData;\n      filterState: { value: SelectValue; label?: string };\n    };\n\nfunction reducer(draft: DataMask, action: DataMaskAction) {\n  switch (action.type) {\n    case 'ownState':\n      draft.ownState = {\n        ...draft.ownState,\n        ...action.ownState,\n      };\n      return draft;\n    case 'filterState':\n      if (\n        JSON.stringify(draft.extraFormData) !==\n        JSON.stringify(action.extraFormData)\n      ) {\n        draft.extraFormData = action.extraFormData;\n      }\n      if (\n        JSON.stringify(draft.filterState) !== JSON.stringify(action.filterState)\n      ) {\n        draft.filterState = { ...draft.filterState, ...action.filterState };\n      }\n\n      return draft;\n    default:\n      return draft;\n  }\n}\n\nexport default function PluginFilterSelect(props: PluginFilterSelectProps) {\n  const {\n    coltypeMap,\n    data,\n    filterState,\n    formData,\n    height,\n    isRefreshing,\n    width,\n    setDataMask,\n    setHoveredFilter,\n    unsetHoveredFilter,\n    setFocusedFilter,\n    unsetFocusedFilter,\n    setFilterActive,\n    appSection,\n    showOverflow,\n    parentRef,\n    inputRef,\n    filterBarOrientation,\n  } = props;\n  const {\n    enableEmptyFilter,\n    multiSelect,\n    showSearch,\n    inverseSelection,\n    defaultToFirstItem,\n    searchAllOptions,\n  } = formData;\n  const groupby = useMemo(\n    () => ensureIsArray(formData.groupby).map(getColumnLabel),\n    [formData.groupby],\n  );\n  const [col] = groupby;\n  const [initialColtypeMap] = useState(coltypeMap);\n  const [search, setSearch] = useState('');\n  const [dataMask, dispatchDataMask] = useImmerReducer(reducer, {\n    extraFormData: {},\n    filterState,\n  });\n  const datatype: GenericDataType = coltypeMap[col];\n  const labelFormatter = useMemo(\n    () =>\n      getDataRecordFormatter({\n        timeFormatter: finestTemporalGrainFormatter(data.map(el => el[col])),\n      }),\n    [data, col],\n  );\n\n  const updateDataMask = useCallback(\n    (values: SelectValue) => {\n      const emptyFilter =\n        enableEmptyFilter && !inverseSelection && !values?.length;\n\n      const suffix = inverseSelection && values?.length ? t(' (excluded)') : '';\n      dispatchDataMask({\n        type: 'filterState',\n        extraFormData: getSelectExtraFormData(\n          col,\n          values,\n          emptyFilter,\n          inverseSelection,\n        ),\n        filterState: {\n          ...filterState,\n          label: values?.length\n            ? `${(values || [])\n                .map(value => labelFormatter(value, datatype))\n                .join(', ')}${suffix}`\n            : undefined,\n          value:\n            appSection === AppSection.FilterConfigModal && defaultToFirstItem\n              ? undefined\n              : values,\n        },\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      appSection,\n      col,\n      datatype,\n      defaultToFirstItem,\n      dispatchDataMask,\n      enableEmptyFilter,\n      inverseSelection,\n      JSON.stringify(filterState),\n      labelFormatter,\n    ],\n  );\n\n  const isDisabled =\n    appSection === AppSection.FilterConfigModal && defaultToFirstItem;\n\n  const onSearch = useMemo(\n    () =>\n      debounce((search: string) => {\n        setSearch(search);\n        if (searchAllOptions) {\n          dispatchDataMask({\n            type: 'ownState',\n            ownState: {\n              coltypeMap: initialColtypeMap,\n              search,\n            },\n          });\n        }\n      }, SLOW_DEBOUNCE),\n    [dispatchDataMask, initialColtypeMap, searchAllOptions],\n  );\n\n  const handleBlur = useCallback(() => {\n    unsetFocusedFilter();\n    onSearch('');\n  }, [onSearch, unsetFocusedFilter]);\n\n  const handleChange = useCallback(\n    (value?: SelectValue | number | string) => {\n      const values = value === null ? [null] : ensureIsArray(value);\n\n      if (values.length === 0) {\n        updateDataMask(null);\n      } else {\n        updateDataMask(values);\n      }\n    },\n    [updateDataMask],\n  );\n\n  const placeholderText =\n    data.length === 0\n      ? t('No data')\n      : tn('%s option', '%s options', data.length, data.length);\n\n  const formItemExtra = useMemo(() => {\n    if (filterState.validateMessage) {\n      return (\n        <StatusMessage status={filterState.validateStatus}>\n          {filterState.validateMessage}\n        </StatusMessage>\n      );\n    }\n    return undefined;\n  }, [filterState.validateMessage, filterState.validateStatus]);\n\n  const uniqueOptions = useMemo(() => {\n    const allOptions = new Set([...data.map(el => el[col])]);\n    return [...allOptions].map((value: string) => ({\n      label: labelFormatter(value, datatype),\n      value,\n      isNewOption: false,\n    }));\n  }, [data, datatype, col, labelFormatter]);\n\n  const options = useMemo(() => {\n    if (search && !multiSelect && !hasOption(search, uniqueOptions, true)) {\n      uniqueOptions.unshift({\n        label: search,\n        value: search,\n        isNewOption: true,\n      });\n    }\n    return uniqueOptions;\n  }, [multiSelect, search, uniqueOptions]);\n\n  const sortComparator = useCallback(\n    (a: AntdLabeledValue, b: AntdLabeledValue) => {\n      const labelComparator = propertyComparator('label');\n      if (formData.sortAscending) {\n        return labelComparator(a, b);\n      }\n      return labelComparator(b, a);\n    },\n    [formData.sortAscending],\n  );\n\n  useEffect(() => {\n    if (defaultToFirstItem && filterState.value === undefined) {\n      // initialize to first value if set to default to first item\n      const firstItem: SelectValue = data[0]\n        ? (groupby.map(col => data[0][col]) as string[])\n        : null;\n      // firstItem[0] !== undefined for a case when groupby changed but new data still not fetched\n      // TODO: still need repopulate default value in config modal when column changed\n      if (firstItem?.[0] !== undefined) {\n        updateDataMask(firstItem);\n      }\n    } else if (isDisabled) {\n      // empty selection if filter is disabled\n      updateDataMask(null);\n    } else {\n      // reset data mask based on filter state\n      updateDataMask(filterState.value);\n    }\n  }, [\n    col,\n    isDisabled,\n    defaultToFirstItem,\n    enableEmptyFilter,\n    inverseSelection,\n    updateDataMask,\n    data,\n    groupby,\n    JSON.stringify(filterState.value),\n  ]);\n\n  useEffect(() => {\n    setDataMask(dataMask);\n  }, [JSON.stringify(dataMask)]);\n\n  return (\n    <FilterPluginStyle height={height} width={width}>\n      <StyledFormItem\n        validateStatus={filterState.validateStatus}\n        extra={formItemExtra}\n      >\n        <Select\n          allowClear\n          allowNewOptions={!searchAllOptions}\n          allowSelectAll={!searchAllOptions}\n          // @ts-ignore\n          value={filterState.value || []}\n          disabled={isDisabled}\n          getPopupContainer={\n            showOverflow\n              ? () => (parentRef?.current as HTMLElement) || document.body\n              : (trigger: HTMLElement) =>\n                  (trigger?.parentNode as HTMLElement) || document.body\n          }\n          showSearch={showSearch}\n          mode={multiSelect ? 'multiple' : 'single'}\n          placeholder={placeholderText}\n          onClear={() => onSearch('')}\n          onSearch={onSearch}\n          onBlur={handleBlur}\n          onFocus={setFocusedFilter}\n          onMouseEnter={setHoveredFilter}\n          onMouseLeave={unsetHoveredFilter}\n          // @ts-ignore\n          onChange={handleChange}\n          ref={inputRef}\n          loading={isRefreshing}\n          oneLine={filterBarOrientation === FilterBarOrientation.Horizontal}\n          invertSelection={inverseSelection}\n          options={options}\n          sortComparator={sortComparator}\n          onDropdownVisibleChange={setFilterActive}\n        />\n      </StyledFormItem>\n    </FilterPluginStyle>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { PluginFilterStylesProps } from './types';\nimport FormItem from '../../components/Form/FormItem';\n\nexport const RESPONSIVE_WIDTH = 0;\n\nexport const FilterPluginStyle = styled.div<PluginFilterStylesProps>`\n  min-height: ${({ height }) => height}px;\n  width: ${({ width }) => (width === RESPONSIVE_WIDTH ? '100%' : `${width}px`)};\n`;\n\nexport const StyledFormItem = styled(FormItem)`\n  &.ant-row.ant-form-item {\n    margin: 0;\n  }\n`;\n\nexport const StatusMessage = styled.div<{\n  status?: 'error' | 'warning' | 'info';\n}>`\n  color: ${({ theme, status = 'error' }) => theme.colors[status]?.base};\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataRecordValue,\n  GenericDataType,\n  NumberFormatter,\n  QueryObjectFilterClause,\n  TimeFormatter,\n  ExtraFormData,\n} from '@superset-ui/core';\nimport { FALSE_STRING, NULL_STRING, TRUE_STRING } from 'src/utils/common';\nimport {\n  Clauses,\n  ExpressionTypes,\n} from '../explore/components/controls/FilterControl/types';\n\nexport const getSelectExtraFormData = (\n  col: string,\n  value?: null | (string | number | boolean | null)[],\n  emptyFilter = false,\n  inverseSelection = false,\n): ExtraFormData => {\n  const extra: ExtraFormData = {};\n  if (emptyFilter) {\n    extra.adhoc_filters = [\n      {\n        expressionType: ExpressionTypes.Sql,\n        clause: Clauses.Where,\n        sqlExpression: '1 = 0',\n      },\n    ];\n  } else if (value !== undefined && value !== null && value.length !== 0) {\n    extra.filters = [\n      {\n        col,\n        op: inverseSelection ? ('NOT IN' as const) : ('IN' as const),\n        // @ts-ignore\n        val: value,\n      },\n    ];\n  }\n  return extra;\n};\n\nexport const getRangeExtraFormData = (\n  col: string,\n  lower?: number | null,\n  upper?: number | null,\n) => {\n  const filters: QueryObjectFilterClause[] = [];\n  if (lower !== undefined && lower !== null && lower !== upper) {\n    filters.push({ col, op: '>=', val: lower });\n  }\n  if (upper !== undefined && upper !== null && upper !== lower) {\n    filters.push({ col, op: '<=', val: upper });\n  }\n  if (\n    upper !== undefined &&\n    upper !== null &&\n    lower !== undefined &&\n    lower !== null &&\n    upper === lower\n  ) {\n    filters.push({ col, op: '==', val: upper });\n  }\n\n  return filters.length\n    ? {\n        filters,\n      }\n    : {};\n};\n\nexport interface DataRecordValueFormatter {\n  (value: DataRecordValue, dtype: GenericDataType): string;\n}\n\nexport function getDataRecordFormatter({\n  timeFormatter,\n  numberFormatter,\n}: {\n  timeFormatter?: TimeFormatter;\n  numberFormatter?: NumberFormatter;\n} = {}): DataRecordValueFormatter {\n  return (value, dtype) => {\n    if (value === null || value === undefined) {\n      return NULL_STRING;\n    }\n    if (typeof value === 'boolean') {\n      return value ? TRUE_STRING : FALSE_STRING;\n    }\n    if (dtype === GenericDataType.Boolean) {\n      try {\n        return JSON.parse(String(value).toLowerCase())\n          ? TRUE_STRING\n          : FALSE_STRING;\n      } catch {\n        return FALSE_STRING;\n      }\n    }\n    if (typeof value === 'string') {\n      return value;\n    }\n    if (timeFormatter && dtype === GenericDataType.Temporal) {\n      return timeFormatter(value);\n    }\n    if (\n      numberFormatter &&\n      typeof value === 'number' &&\n      dtype === GenericDataType.Numeric\n    ) {\n      return numberFormatter(value);\n    }\n    return String(value);\n  };\n}\n","import{freeze as n,produce as r}from\"immer\";import{useState as t,useCallback as o,useMemo as f,useReducer as u}from\"react\";function i(f){var u=t(function(){return n(\"function\"==typeof f?f():f,!0)}),i=u[1];return[u[0],o(function(t){i(\"function\"==typeof t?r(t):n(t))},[])]}function e(n,t,o){var i=f(function(){return r(n)},[n]);return u(i,t,o)}export{i as useImmer,e as useImmerReducer};\n//# sourceMappingURL=use-immer.module.js.map\n"],"names":["_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","HOOK_MARK","React","_warning","warningFunc","default","_default","createContext","getFieldValue","getFieldsValue","getFieldError","getFieldsError","isFieldsTouched","isFieldTouched","isFieldValidating","isFieldsValidating","resetFields","setFields","setFieldsValue","validateFields","submit","getInternalHooks","dispatch","initEntityValue","registerField","useSubscribe","setInitialValues","setCallbacks","getFields","setValidateMessages","setPreserve","getValue","condition","shouldUpdate","cacheRef","useRef","current","raf","callback","setTimeout","caf","num","clearTimeout","window","requestAnimationFrame","handle","cancelAnimationFrame","rafUUID","rafIds","Map","cleanup","id","delete","wrapperRaf","callRef","leftTimes","realId","set","arguments","length","undefined","cancel","get","useComposeRef","supportRef","supportNodeRef","getNodeRef","fillRef","composeRef","_typeof2","_react","_reactIs","_useMemo","ref","node","_len","refs","Array","_key","refList","filter","Boolean","forEach","_len2","_key2","apply","prev","next","every","i","nodeOrComponent","_type$prototype","_nodeOrComponent$prot","type","isMemo","prototype","render","$$typeof","ForwardRef","isReactElement","isValidElement","isFragment","Number","version","split","props","finestTemporalGrain","values","useLocalTime","format","timeFormat","utcFormat","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","hasMillisecond","hasSecond","hasMinute","hasHour","isNotFirstDayOfMonth","isNotFirstMonth","localTimeUtils","utcUtils","formatFunc","TimeFormatter","description","label","styled","Form","Item","theme","gridUnit","typography","sizes","s","colors","grayscale","base","error","ExpressionTypes","Clauses","reducer","draft","action","ownState","JSON","stringify","extraFormData","filterState","PluginFilterSelect","coltypeMap","data","formData","height","isRefreshing","width","setDataMask","setHoveredFilter","unsetHoveredFilter","setFocusedFilter","unsetFocusedFilter","setFilterActive","appSection","showOverflow","parentRef","inputRef","filterBarOrientation","enableEmptyFilter","multiSelect","showSearch","inverseSelection","defaultToFirstItem","searchAllOptions","groupby","useMemo","ensureIsArray","map","getColumnLabel","col","initialColtypeMap","useState","search","setSearch","dataMask","dispatchDataMask","useImmerReducer","datatype","labelFormatter","getDataRecordFormatter","timeFormatter","finestTemporalGrainFormatter","el","updateDataMask","useCallback","emptyFilter","suffix","t","getSelectExtraFormData","join","AppSection","FilterConfigModal","isDisabled","onSearch","_debounce","SLOW_DEBOUNCE","handleBlur","handleChange","placeholderText","tn","formItemExtra","validateMessage","_jsx","StatusMessage","status","validateStatus","children","uniqueOptions","Set","isNewOption","options","hasOption","unshift","sortComparator","a","b","labelComparator","propertyComparator","sortAscending","useEffect","firstItem","FilterPluginStyle","StyledFormItem","extra","Select","allowClear","allowNewOptions","allowSelectAll","disabled","getPopupContainer","document","body","trigger","parentNode","mode","placeholder","onClear","onBlur","onFocus","onMouseEnter","onMouseLeave","onChange","loading","oneLine","FilterBarOrientation","Horizontal","invertSelection","onDropdownVisibleChange","RESPONSIVE_WIDTH","div","FormItem","_theme$colors$status","adhoc_filters","expressionType","Sql","clause","Where","sqlExpression","filters","op","val","getRangeExtraFormData","lower","upper","push","numberFormatter","dtype","NULL_STRING","TRUE_STRING","FALSE_STRING","GenericDataType","parse","String","toLowerCase","Temporal","Numeric","f","u","e","n","o"],"sourceRoot":""}