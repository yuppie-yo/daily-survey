"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[811],{389033:(t,e,r)=>{r.d(e,{Z:()=>g});var s=r(204942),i=r(336750),o=r(149331),n=r(184287),a=r(739450);function u(t,e){const r={};for(const s in t)e.includes(s)||(r[s]=t[s]);return r}class g extends i.Z{constructor(...t){super(...t),(0,s.Z)(this,"state",void 0)}initializeAggregationLayer(t){super.initializeState(this.context),this.setState({ignoreProps:u(this.constructor._propTypes,t.data.props),dimensions:t})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){const t=this.getShaders({});t&&t.defines&&(t.defines.NON_INSTANCED_MODEL=1),this.updateShaders(t)}this._updateAttributes()}updateAttributes(t){this.setState({changedAttributes:t})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:t,mousePosition:e,gl:r}=this.context;return Object.assign(Object.create(this.props),{viewport:t,mousePosition:e,pickingActive:0,devicePixelRatio:(0,a.w)(r)})}updateShaders(t){}isAggregationDirty(t,e={}){const{props:r,oldProps:s,changeFlags:i}=t,{compareAll:n=!1,dimension:a}=e,{ignoreProps:u}=this.state,{props:g,accessors:c=[]}=a,{updateTriggersChanged:d}=i;if(i.dataChanged)return!0;if(d){if(d.all)return!0;for(const t of c)if(d[t])return!0}if(n)return!!i.extensionsChanged||(0,o.tg)({oldProps:s,newProps:r,ignoreProps:u,propTypes:this.constructor._propTypes});for(const t of g)if(r[t]!==s[t])return!0;return!1}isAttributeChanged(t){const{changedAttributes:e}=this.state;return t?e&&void 0!==e[t]:!function(t){let e=!0;for(const r in t){e=!1;break}return e}(e)}_getAttributeManager(){return new n.Z(this.context.gl,{id:this.props.id,stats:this.context.stats})}}(0,s.Z)(g,"layerName","AggregationLayer")},579543:(t,e,r)=>{r.d(e,{K:()=>s,P:()=>i});const s=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function i(t,e=!1,r=Float32Array){let s;if(Number.isFinite(t[0]))s=new r(t);else{s=new r(4*t.length);let e=0;for(let r=0;r<t.length;r++){const i=t[r];s[e++]=i[0],s[e++]=i[1],s[e++]=i[2],s[e++]=Number.isFinite(i[3])?i[3]:255}}if(e)for(let t=0;t<s.length;t++)s[t]/=255;return s}},336750:(t,e,r)=>{r.d(e,{Z:()=>u});var s=r(204942),i=r(905259),o=r(911482),n=r(77552),a=r(33230);class u extends i.Z{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(t.object=e.__source.object,t.index=e.__source.index,t):t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||e}getSubLayerRow(t,e,r){return t.__source={parent:this,object:e,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const e={index:-1,data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(e.index=r.__source.index,t(r.__source.object,e)):t(r,s)}return t}getSubLayerProps(t={}){var e;const{opacity:r,pickable:s,visible:i,parameters:o,getPolygonOffset:n,highlightedObjectIndex:u,autoHighlight:g,highlightColor:c,coordinateSystem:d,coordinateOrigin:p,wrapLongitude:l,positionFormat:h,modelMatrix:b,extensions:f,fetch:y,operation:_,_subLayerProps:S}=this.props,L={id:"",updateTriggers:{},opacity:r,pickable:s,visible:i,parameters:o,getPolygonOffset:n,highlightedObjectIndex:u,autoHighlight:g,highlightColor:c,coordinateSystem:d,coordinateOrigin:p,wrapLongitude:l,positionFormat:h,modelMatrix:b,extensions:f,fetch:y,operation:_},m=S&&t.id&&S[t.id],x=m&&m.updateTriggers,v=t.id||"sublayer";if(m){const e=this.props[a.Wb],r=t.type?t.type._propTypes:{};for(const t in m){const s=r[t]||e[t];s&&"accessor"===s.type&&(m[t]=this.getSubLayerAccessor(m[t]))}}Object.assign(L,t,m),L.id="".concat(this.props.id,"-").concat(v),L.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...x};for(const t of f){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(L,e,{updateTriggers:Object.assign(L.updateTriggers,e.updateTriggers)})}return L}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let r=this.internalState.subLayers;const s=!r||this.needsUpdate();if(s){const t=this.renderLayers();r=(0,n.x)(t,Boolean),this.internalState.subLayers=r}(0,o.Z)("compositeLayer.renderLayers",this,s,r);for(const t of r)t.parent=this}}(0,s.Z)(u,"layerName","CompositeLayer")},602429:(t,e,r)=>{r.r(e),r.d(e,{default:()=>h,getLayer:()=>l});var s=r(185672),i=r(61988),o=r(45511),n=r(58371),a=r(363241),u=r(889503),g=r(589691),c=r(51805),d=r(135944);function p(t){return(0,d.tZ)("div",{className:"deckgl-tooltip",children:(0,d.tZ)(c.Z,{label:(0,i.t)("Centroid (Longitude and Latitude): "),value:`(${null==t?void 0:t.coordinate[0]}, ${null==t?void 0:t.coordinate[1]})`})})}const l=(t,e,r,i)=>{var g,c,d,l;const h=t,{intensity:b=1,radius_pixels:f=30,aggregation:y="SUM",js_data_mutator:_,linear_color_scheme:S}=h;let L=e.data.features;_&&(L=(0,a.Z)(h.js_data_mutator)(L));const m=null==(g=(0,o.Z)())||null==(c=g.get(S))?void 0:c.createLinearScale([0,6]),x=null==m||null==(d=m.range())||null==(l=d.map((t=>(0,u.hexToRGB)(t))))?void 0:l.reverse();return new s.Z({id:`heatmp-layer-${h.slice_id}`,data:L,intensity:b,radiusPixels:f,colorRange:x,aggregation:y.toUpperCase(),getPosition:t=>t.position,getWeight:t=>t.weight?t.weight:1,...(0,n.N)(h,i,p)})},h=(0,g.G)(l,(function(t){return t.map((t=>t.position))}))}}]);
//# sourceMappingURL=8521342e916e2b720d42.chunk.js.map