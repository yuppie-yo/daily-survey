"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[373],{452630:(e,a,t)=>{a.iB=a.YM=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=s(t(667294)),i=s(t(45697)),o=t(402371);function s(e){return e&&e.__esModule?e:{default:e}}a.YM=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,s=void 0===t?"div":t,l=function(e){var t=e.currentPage,i=e.totalPages,l=e.boundaryPagesRange,d=e.siblingPagesRange,u=e.hideEllipsis,c=e.hidePreviousAndNextPageLinks,g=e.hideFirstAndLastPageLinks,h=e.onChange,p=e.disabled,P=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),b=(0,o.getPaginationModel)({currentPage:t,totalPages:i,boundaryPagesRange:l,siblingPagesRange:d,hideEllipsis:u,hidePreviousAndNextPageLinks:c,hideFirstAndLastPageLinks:g}),m=function(e,a,t){return function(i){var o,s,l,d=e[i.type],u=(s=(o=i).value,l=o.isDisabled,function(){!l&&t&&a!==s&&t(s)});return r.default.createElement(d,n({onClick:u},i))}}(a,t,h);return r.default.createElement(s,P,b.map((function(e){return m(n({},e,{isDisabled:!!p}))})))};return l.propTypes={currentPage:i.default.number.isRequired,totalPages:i.default.number.isRequired,boundaryPagesRange:i.default.number,siblingPagesRange:i.default.number,hideEllipsis:i.default.bool,hidePreviousAndNextPageLinks:i.default.bool,hideFirstAndLastPageLinks:i.default.bool,onChange:i.default.func,disabled:i.default.bool},l},a.iB=o.ITEM_TYPES},554070:(e,a,t)=>{t.d(a,{w:()=>s});var n=t(358593),r=t(83379),i=t(61988),o=t(135944);const s=({user:e,date:a})=>{const t=(0,o.tZ)("span",{className:"no-wrap",children:a});if(e){const a=(0,r.Z)(e),s=(0,i.t)("Modified by: %s",a);return(0,o.tZ)(n.u,{title:s,placement:"bottom",children:t})}return t}},745181:(e,a,t)=>{t.d(a,{Z:()=>_});var n=t(667294),r=t(115926),i=t.n(r),o=t(774069),s=t(784101),l=t(49238),d=t(751995),u=t(431069),c=t(61988),g=t(477808),h=t(104715),p=t(835932),P=t(848273),b=t(135944);const m=d.iK.div`
  .ant-select-dropdown {
    max-height: ${({theme:e})=>40*e.gridUnit}px;
  }
  .tag-input {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`;var E;!function(e){e.Chart="chart",e.Dashboard="dashboard",e.SavedQuery="query"}(E||(E={}));const _=({show:e,onHide:a,editTag:t,refreshData:r,addSuccessToast:d,addDangerToast:_,clearOnHide:v=!1})=>{const[S,f]=(0,n.useState)([]),[y,T]=(0,n.useState)([]),[I,L]=(0,n.useState)([]),[N,Z]=(0,n.useState)(""),[A,w]=(0,n.useState)(""),C=!!t,M=C?"Edit Tag":"Create Tag",k=()=>{Z(""),w(""),f([]),T([]),L([])};(0,n.useEffect)((()=>{const e={[E.Dashboard]:[],[E.Chart]:[],[E.SavedQuery]:[]},a=({id:a,name:t,type:n})=>{const r=e[n];r&&r.push({value:a,label:t,key:a})};f([]),T([]),L([]),C&&((0,P.AN)({tagIds:[t.id],types:null},(t=>{t.forEach(a),f(e[E.Dashboard]),T(e[E.Chart]),L(e[E.SavedQuery])}),(e=>{_("Error Fetching Tagged Objects")})),Z(t.name),w(t.description))}),[t]);const R=async(e,a,t,n,r,o,s)=>{const l=i().encode({columns:n,filters:[{col:r,opr:"ct",value:e}],page:a,order_column:o}),{json:d}=await u.Z.get({endpoint:`/api/v1/${s}/?q=${l}`}),{result:c,count:g}=d;return{data:c.map((e=>({value:e.id,label:e[r]}))),totalCount:g}},K=(e,a)=>{e===E.Dashboard?f(a):e===E.Chart?T(a):e===E.SavedQuery&&L(a)};return(0,b.tZ)(o.default,{title:M,onHide:()=>{v&&k(),a()},show:e,footer:(0,b.BX)("div",{children:[(0,b.tZ)(p.Z,{buttonStyle:"secondary",onClick:a,children:(0,c.t)("Cancel")}),(0,b.tZ)(p.Z,{buttonStyle:"primary",onClick:()=>{const e=S.map((e=>["dashboard",e.value])),n=y.map((e=>["chart",e.value])),i=I.map((e=>["query",e.value]));C?u.Z.put({endpoint:`/api/v1/tag/${t.id}`,jsonPayload:{description:A,name:N,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),k(),d((0,c.t)("Tag updated")),a()})).catch((e=>{_(e.message||"Error Updating Tag")})):u.Z.post({endpoint:"/api/v1/tag/",jsonPayload:{description:A,name:N,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),k(),d((0,c.t)("Tag created")),a()})).catch((e=>_(e.message||"Error Creating Tag")))},children:(0,c.t)("Save")})]}),children:(0,b.BX)(m,{children:[(0,b.tZ)(l.lX,{children:(0,c.t)("Tag name")}),(0,b.tZ)(g.Z,{className:"tag-input",onChange:e=>Z(e.target.value),placeholder:(0,c.t)("Name of your tag"),value:N}),(0,b.tZ)(l.lX,{children:(0,c.t)("Description")}),(0,b.tZ)(g.Z,{className:"tag-input",onChange:e=>w(e.target.value),placeholder:(0,c.t)("Add description of your tag"),value:A}),(0,b.tZ)(h.iz,{}),(0,b.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,c.t)("Select dashboards"),mode:"multiple",name:"dashboards",value:S,options:async(e,a,t)=>R(e,a,0,["id","dashboard_title"],"dashboard_title","dashboard_title","dashboard"),onChange:e=>K(E.Dashboard,e),header:(0,b.tZ)(l.lX,{children:(0,c.t)("Dashboards")}),allowClear:!0}),(0,b.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,c.t)("Select charts"),mode:"multiple",name:"charts",value:y,options:async(e,a,t)=>R(e,a,0,["id","slice_name"],"slice_name","slice_name","chart"),onChange:e=>K(E.Chart,e),header:(0,b.tZ)(l.lX,{children:(0,c.t)("Charts")}),allowClear:!0}),(0,b.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,c.t)("Select saved queries"),mode:"multiple",name:"savedQueries",value:I,options:async(e,a,t)=>R(e,a,0,["id","label"],"label","label","saved_query"),onChange:e=>K(E.SavedQuery,e),header:(0,b.tZ)(l.lX,{children:(0,c.t)("Saved queries")}),allowClear:!0})]})})}},165019:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(667294),r=t(61988),i=t(593185),o=t(440768),s=t(34858),l=t(419259),d=t(586074),u=t(593139),c=t(961337),g=t(414114),h=t(313322),p=t(358593),P=t(473727),b=t(848273),m=t(560331),E=t(400012),_=t(745181),v=t(236674),S=t(554070),f=t(135944);const y=(0,g.ZP)((function(e){const{addDangerToast:a,addSuccessToast:t,user:g}=e,{userId:y}=g,T=(0,n.useMemo)((()=>[{id:"type",operator:"custom_tag",value:!0}]),[]),{state:{loading:I,resourceCount:L,resourceCollection:N,bulkSelectEnabled:Z},hasPerm:A,fetchData:w,toggleBulkSelect:C,refreshData:M}=(0,s.Yi)("tag",(0,r.t)("tag"),a,void 0,void 0,T),[k,R]=(0,n.useState)(!1),[K,Y]=(0,n.useState)(null),D=(0,n.useMemo)((()=>N.map((e=>e.id))),[N]),[G,F]=(0,s.NE)("tag",D,a),x=(0,c.OH)(null==y?void 0:y.toString(),null),O=A("can_write"),B=A("can_write"),X=[{id:"changed_on_delta_humanized",desc:!0}];function H(e){(0,b.Qz)(e,(e=>{t(e),M()}),(e=>{a(e),M()}))}const j={title:(0,r.t)("No Tags created"),image:"dashboard.svg",description:"Create a new tag and assign it to existing entities like charts or dashboards",buttonAction:()=>R(!0),buttonText:(0,f.BX)(f.HY,{children:[(0,f.tZ)("i",{className:"fa fa-plus"})," ","Create a new Tag"," "]})},z=(0,n.useMemo)((()=>[{Cell:({row:{original:{id:e}}})=>y&&(0,f.tZ)(v.Z,{itemId:e,saveFaveStar:G,isStarred:F[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!y},{Cell:({row:{original:{id:e,name:a}}})=>(0,f.tZ)(m.Z,{children:(0,f.tZ)(P.rU,{to:`/superset/all_entities/?id=${e}`,children:a})}),Header:(0,r.t)("Name"),accessor:"name"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:a}}})=>(0,f.tZ)(S.w,{date:e,user:a}),Header:(0,r.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl"},{Cell:({row:{original:e}})=>(0,f.BX)(o.eX,{className:"actions",children:[O&&(0,f.tZ)(l.Z,{title:(0,r.t)("Please confirm"),description:(0,f.BX)(f.HY,{children:[(0,r.t)("Are you sure you want to delete")," ",(0,f.tZ)("b",{children:e.dashboard_title}),"?"]}),onConfirm:()=>H([e]),children:e=>(0,f.tZ)(p.u,{id:"delete-action-tooltip",title:(0,r.t)("Delete"),placement:"bottom",children:(0,f.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:e,children:(0,f.tZ)(h.Z.Trash,{})})})}),B&&(0,f.tZ)(p.u,{id:"edit-action-tooltip",title:(0,r.t)("Edit"),placement:"bottom",children:(0,f.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>{return a=e,R(!0),void Y(a);var a},children:(0,f.tZ)(h.Z.EditAlt,{})})})]}),Header:(0,r.t)("Actions"),id:"actions",hidden:!O,disableSortBy:!0},{accessor:E.J.ChangedBy,hidden:!0}]),[y,O,M,t,a]),U=(0,n.useMemo)((()=>[{Header:(0,r.t)("Name"),id:"name",input:"search",operator:u.p.Contains},{Header:(0,r.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:u.p.RelationOneMany,unfilteredLabel:(0,r.t)("All"),fetchSelects:(0,o.tm)("tag","changed_by",(0,o.v$)((e=>(0,r.t)("An error occurred while fetching dataset datasource values: %s",e))),g),paginate:!0}]),[a,e.user]),q=[{desc:!1,id:"name",label:(0,r.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,r.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,r.t)("Least recently modified"),value:"least_recently_modified"}],Q=[];return O&&Q.push({name:(0,r.t)("Bulk select"),buttonStyle:"secondary",onClick:C}),Q.push({name:(0,f.BX)(f.HY,{children:[(0,f.tZ)("i",{className:"fa fa-plus"})," ",(0,r.t)("Tag")]}),buttonStyle:"primary",onClick:()=>R(!0)}),(0,f.BX)(f.HY,{children:[(0,f.tZ)(_.Z,{show:k,onHide:()=>{R(!1),Y(null)},editTag:K,refreshData:M,addSuccessToast:t,addDangerToast:a,clearOnHide:!0}),(0,f.tZ)(d.Z,{name:(0,r.t)("Tags"),buttons:Q}),(0,f.tZ)(l.Z,{title:(0,r.t)("Please confirm"),description:(0,r.t)("Are you sure you want to delete the selected tags?"),onConfirm:e=>H(e),children:e=>{const n=[];return O&&n.push({key:"delete",name:(0,r.t)("Delete"),type:"danger",onSelect:e}),(0,f.tZ)(f.HY,{children:(0,f.tZ)(u.Z,{bulkActions:n,bulkSelectEnabled:Z,cardSortSelectOptions:q,className:"tags-list-view",columns:z,count:L,data:N,disableBulkSelect:C,refreshData:M,emptyState:j,fetchData:w,filters:U,initialSort:X,loading:I,addDangerToast:a,addSuccessToast:t,pageSize:25,showThumbnails:x?x.thumbnails:(0,i.cr)(i.TT.Thumbnails),defaultViewMode:(0,i.cr)(i.TT.ListviewsDefaultCardView)?"card":"table"})})}})]})}))},656590:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},653804:(e,a,t)=>{var n=t(656590);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},1158:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},402371:(e,a,t)=>{var n=t(1158),r=t(653804);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var i=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(i))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(i<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var o=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(o))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(o<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var s=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),d=Boolean(e.hideEllipsis),u=d?0:1,c=[],g=r.createPageFunctionFactory(e);if(l||c.push(r.createFirstPageLink(e)),s||c.push(r.createPreviousPageLink(e)),1+2*u+2*o+2*i>=a){var h=n.createRange(1,a).map(g);c.push.apply(c,h)}else{var p=i,P=n.createRange(1,p).map(g),b=a+1-i,m=a,E=n.createRange(b,m).map(g),_=Math.min(Math.max(t-o,p+u+1),b-u-2*o-1),v=_+2*o,S=n.createRange(_,v).map(g);if(c.push.apply(c,P),!d){var f=_-1,y=(f===p+1?g:r.createFirstEllipsis)(f);c.push(y)}if(c.push.apply(c,S),!d){var T=v+1,I=(T===b-1?g:r.createSecondEllipsis)(T);c.push(I)}c.push.apply(c,E)}return s||c.push(r.createNextPageLink(e)),l||c.push(r.createLastPageLink(e)),c};var i=t(656590);a.ITEM_TYPES=i.ITEM_TYPES,a.ITEM_KEYS=i.ITEM_KEYS}}]);
//# sourceMappingURL=9067aab872ad8d2274dd.chunk.js.map